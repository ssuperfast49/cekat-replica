var fH=Object.defineProperty;var vE=e=>{throw TypeError(e)};var hH=(e,t,n)=>t in e?fH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gt=(e,t,n)=>hH(e,typeof t!="symbol"?t+"":t,n),W0=(e,t,n)=>t.has(e)||vE("Cannot "+n);var Oe=(e,t,n)=>(W0(e,t,"read from private field"),n?n.call(e):t.get(e)),dn=(e,t,n)=>t.has(e)?vE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Bt=(e,t,n,r)=>(W0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Yr=(e,t,n)=>(W0(e,t,"access private method"),n);var lg=(e,t,n,r)=>({set _(a){Bt(e,t,a,n)},get _(){return Oe(e,t,r)}});function mH(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pH(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var PD={exports:{}},Ix={},OD={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp=Symbol.for("react.element"),gH=Symbol.for("react.portal"),vH=Symbol.for("react.fragment"),yH=Symbol.for("react.strict_mode"),xH=Symbol.for("react.profiler"),bH=Symbol.for("react.provider"),wH=Symbol.for("react.context"),jH=Symbol.for("react.forward_ref"),_H=Symbol.for("react.suspense"),kH=Symbol.for("react.memo"),SH=Symbol.for("react.lazy"),yE=Symbol.iterator;function NH(e){return e===null||typeof e!="object"?null:(e=yE&&e[yE]||e["@@iterator"],typeof e=="function"?e:null)}var ID={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RD=Object.assign,MD={};function uf(e,t,n){this.props=e,this.context=t,this.refs=MD,this.updater=n||ID}uf.prototype.isReactComponent={};uf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};uf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DD(){}DD.prototype=uf.prototype;function vS(e,t,n){this.props=e,this.context=t,this.refs=MD,this.updater=n||ID}var yS=vS.prototype=new DD;yS.constructor=vS;RD(yS,uf.prototype);yS.isPureReactComponent=!0;var xE=Array.isArray,LD=Object.prototype.hasOwnProperty,xS={current:null},$D={key:!0,ref:!0,__self:!0,__source:!0};function FD(e,t,n){var r,a={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)LD.call(t,r)&&!$D.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:gp,type:e,key:s,ref:o,props:a,_owner:xS.current}}function CH(e,t){return{$$typeof:gp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bS(e){return typeof e=="object"&&e!==null&&e.$$typeof===gp}function AH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bE=/\/+/g;function q0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AH(""+e.key):t.toString(36)}function fv(e,t,n,r,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case gp:case gH:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+q0(o,0):r,xE(a)?(n="",e!=null&&(n=e.replace(bE,"$&/")+"/"),fv(a,t,n,"",function(u){return u})):a!=null&&(bS(a)&&(a=CH(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(bE,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",xE(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+q0(s,l);o+=fv(s,t,n,c,a)}else if(c=NH(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+q0(s,l++),o+=fv(s,t,n,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function cg(e,t,n){if(e==null)return e;var r=[],a=0;return fv(e,r,"","",function(s){return t.call(n,s,a++)}),r}function EH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xa={current:null},hv={transition:null},TH={ReactCurrentDispatcher:xa,ReactCurrentBatchConfig:hv,ReactCurrentOwner:xS};function UD(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:cg,forEach:function(e,t,n){cg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cg(e,function(){t++}),t},toArray:function(e){return cg(e,function(t){return t})||[]},only:function(e){if(!bS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=uf;Qt.Fragment=vH;Qt.Profiler=xH;Qt.PureComponent=vS;Qt.StrictMode=yH;Qt.Suspense=_H;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TH;Qt.act=UD;Qt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=RD({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=xS.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)LD.call(t,c)&&!$D.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:gp,type:e.type,key:a,ref:s,props:r,_owner:o}};Qt.createContext=function(e){return e={$$typeof:wH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bH,_context:e},e.Consumer=e};Qt.createElement=FD;Qt.createFactory=function(e){var t=FD.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:jH,render:e}};Qt.isValidElement=bS;Qt.lazy=function(e){return{$$typeof:SH,_payload:{_status:-1,_result:e},_init:EH}};Qt.memo=function(e,t){return{$$typeof:kH,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=hv.transition;hv.transition={};try{e()}finally{hv.transition=t}};Qt.unstable_act=UD;Qt.useCallback=function(e,t){return xa.current.useCallback(e,t)};Qt.useContext=function(e){return xa.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return xa.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return xa.current.useEffect(e,t)};Qt.useId=function(){return xa.current.useId()};Qt.useImperativeHandle=function(e,t,n){return xa.current.useImperativeHandle(e,t,n)};Qt.useInsertionEffect=function(e,t){return xa.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return xa.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return xa.current.useMemo(e,t)};Qt.useReducer=function(e,t,n){return xa.current.useReducer(e,t,n)};Qt.useRef=function(e){return xa.current.useRef(e)};Qt.useState=function(e){return xa.current.useState(e)};Qt.useSyncExternalStore=function(e,t,n){return xa.current.useSyncExternalStore(e,t,n)};Qt.useTransition=function(){return xa.current.useTransition()};Qt.version="18.3.1";OD.exports=Qt;var p=OD.exports;const Y=jn(p),wS=mH({__proto__:null,default:Y},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PH=p,OH=Symbol.for("react.element"),IH=Symbol.for("react.fragment"),RH=Object.prototype.hasOwnProperty,MH=PH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DH={key:!0,ref:!0,__self:!0,__source:!0};function BD(e,t,n){var r,a={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)RH.call(t,r)&&!DH.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:OH,type:e,key:s,ref:o,props:a,_owner:MH.current}}Ix.Fragment=IH;Ix.jsx=BD;Ix.jsxs=BD;PD.exports=Ix;var i=PD.exports,zD={exports:{}},oi={},WD={exports:{}},qD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,L){var E=A.length;A.push(L);e:for(;0<E;){var B=E-1>>>1,R=A[B];if(0<a(R,L))A[B]=L,A[E]=R,E=B;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var L=A[0],E=A.pop();if(E!==L){A[0]=E;e:for(var B=0,R=A.length,C=R>>>1;B<C;){var q=2*(B+1)-1,Z=A[q],J=q+1,ee=A[J];if(0>a(Z,E))J<R&&0>a(ee,Z)?(A[B]=ee,A[J]=E,B=J):(A[B]=Z,A[q]=E,B=q);else if(J<R&&0>a(ee,E))A[B]=ee,A[J]=E,B=J;else break e}}return L}function a(A,L){var E=A.sortIndex-L.sortIndex;return E!==0?E:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=A)r(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(u)}}function _(A){if(v=!1,b(A),!g)if(n(c)!==null)g=!0,M(k);else{var L=n(u);L!==null&&T(_,L.startTime-A)}}function k(A,L){g=!1,v&&(v=!1,y(O),O=-1),m=!0;var E=h;try{for(b(L),f=n(c);f!==null&&(!(f.expirationTime>L)||A&&!N());){var B=f.callback;if(typeof B=="function"){f.callback=null,h=f.priorityLevel;var R=B(f.expirationTime<=L);L=e.unstable_now(),typeof R=="function"?f.callback=R:f===n(c)&&r(c),b(L)}else r(c);f=n(c)}if(f!==null)var C=!0;else{var q=n(u);q!==null&&T(_,q.startTime-L),C=!1}return C}finally{f=null,h=E,m=!1}}var j=!1,S=null,O=-1,I=5,P=-1;function N(){return!(e.unstable_now()-P<I)}function D(){if(S!==null){var A=e.unstable_now();P=A;var L=!0;try{L=S(!0,A)}finally{L?$():(j=!1,S=null)}}else j=!1}var $;if(typeof w=="function")$=function(){w(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,F=U.port2;U.port1.onmessage=D,$=function(){F.postMessage(null)}}else $=function(){x(D,0)};function M(A){S=A,j||(j=!0,$())}function T(A,L){O=x(function(){A(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,M(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var E=h;h=L;try{return A()}finally{h=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var E=h;h=A;try{return L()}finally{h=E}},e.unstable_scheduleCallback=function(A,L,E){var B=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?B+E:B):E=B,A){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=E+R,A={id:d++,callback:L,priorityLevel:A,startTime:E,expirationTime:R,sortIndex:-1},E>B?(A.sortIndex=E,t(u,A),n(c)===null&&A===n(u)&&(v?(y(O),O=-1):v=!0,T(_,E-B))):(A.sortIndex=R,t(c,A),g||m||(g=!0,M(k))),A},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(A){var L=h;return function(){var E=h;h=L;try{return A.apply(this,arguments)}finally{h=E}}}})(qD);WD.exports=qD;var LH=WD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $H=p,ii=LH;function He(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HD=new Set,Hh={};function Zc(e,t){kd(e,t),kd(e+"Capture",t)}function kd(e,t){for(Hh[e]=t,e=0;e<t.length;e++)HD.add(t[e])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jj=Object.prototype.hasOwnProperty,FH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wE={},jE={};function UH(e){return Jj.call(jE,e)?!0:Jj.call(wE,e)?!1:FH.test(e)?jE[e]=!0:(wE[e]=!0,!1)}function BH(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zH(e,t,n,r){if(t===null||typeof t>"u"||BH(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ba(e,t,n,r,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Hr[e]=new ba(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Hr[t]=new ba(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Hr[e]=new ba(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Hr[e]=new ba(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Hr[e]=new ba(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Hr[e]=new ba(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Hr[e]=new ba(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Hr[e]=new ba(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Hr[e]=new ba(e,5,!1,e.toLowerCase(),null,!1,!1)});var jS=/[\-:]([a-z])/g;function _S(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jS,_S);Hr[t]=new ba(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jS,_S);Hr[t]=new ba(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jS,_S);Hr[t]=new ba(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Hr[e]=new ba(e,1,!1,e.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Hr[e]=new ba(e,1,!1,e.toLowerCase(),null,!0,!0)});function kS(e,t,n,r){var a=Hr.hasOwnProperty(t)?Hr[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zH(t,n,a,r)&&(n=null),r||a===null?UH(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Eo=$H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ug=Symbol.for("react.element"),Fu=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),SS=Symbol.for("react.strict_mode"),Qj=Symbol.for("react.profiler"),KD=Symbol.for("react.provider"),VD=Symbol.for("react.context"),NS=Symbol.for("react.forward_ref"),Zj=Symbol.for("react.suspense"),e_=Symbol.for("react.suspense_list"),CS=Symbol.for("react.memo"),Go=Symbol.for("react.lazy"),GD=Symbol.for("react.offscreen"),_E=Symbol.iterator;function $f(e){return e===null||typeof e!="object"?null:(e=_E&&e[_E]||e["@@iterator"],typeof e=="function"?e:null)}var Qn=Object.assign,H0;function mh(e){if(H0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H0=t&&t[1]||""}return`
`+H0+e}var K0=!1;function V0(e,t){if(!e||K0)return"";K0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=r.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{K0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mh(e):""}function WH(e){switch(e.tag){case 5:return mh(e.type);case 16:return mh("Lazy");case 13:return mh("Suspense");case 19:return mh("SuspenseList");case 0:case 2:case 15:return e=V0(e.type,!1),e;case 11:return e=V0(e.type.render,!1),e;case 1:return e=V0(e.type,!0),e;default:return""}}function t_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uu:return"Fragment";case Fu:return"Portal";case Qj:return"Profiler";case SS:return"StrictMode";case Zj:return"Suspense";case e_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case VD:return(e.displayName||"Context")+".Consumer";case KD:return(e._context.displayName||"Context")+".Provider";case NS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case CS:return t=e.displayName||null,t!==null?t:t_(e.type)||"Memo";case Go:t=e._payload,e=e._init;try{return t_(e(t))}catch{}}return null}function qH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return t_(t);case 8:return t===SS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function YD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HH(e){var t=YD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dg(e){e._valueTracker||(e._valueTracker=HH(e))}function XD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=YD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $v(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function n_(e,t){var n=t.checked;return Qn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function kE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function JD(e,t){t=t.checked,t!=null&&kS(e,"checked",t,!1)}function r_(e,t){JD(e,t);var n=kl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?a_(e,t.type,n):t.hasOwnProperty("defaultValue")&&a_(e,t.type,kl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function SE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function a_(e,t,n){(t!=="number"||$v(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ph=Array.isArray;function td(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kl(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function i_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(He(91));return Qn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function NE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(He(92));if(ph(n)){if(1<n.length)throw Error(He(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kl(n)}}function QD(e,t){var n=kl(t.value),r=kl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function CE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ZD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function s_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ZD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fg,eL=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fg=fg||document.createElement("div"),fg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _h={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KH=["Webkit","ms","Moz","O"];Object.keys(_h).forEach(function(e){KH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_h[t]=_h[e]})});function tL(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_h.hasOwnProperty(e)&&_h[e]?(""+t).trim():t+"px"}function nL(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=tL(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var VH=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function o_(e,t){if(t){if(VH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(He(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(He(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(He(61))}if(t.style!=null&&typeof t.style!="object")throw Error(He(62))}}function l_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c_=null;function AS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var u_=null,nd=null,rd=null;function AE(e){if(e=xp(e)){if(typeof u_!="function")throw Error(He(280));var t=e.stateNode;t&&(t=$x(t),u_(e.stateNode,e.type,t))}}function rL(e){nd?rd?rd.push(e):rd=[e]:nd=e}function aL(){if(nd){var e=nd,t=rd;if(rd=nd=null,AE(e),t)for(e=0;e<t.length;e++)AE(t[e])}}function iL(e,t){return e(t)}function sL(){}var G0=!1;function oL(e,t,n){if(G0)return e(t,n);G0=!0;try{return iL(e,t,n)}finally{G0=!1,(nd!==null||rd!==null)&&(sL(),aL())}}function Vh(e,t){var n=e.stateNode;if(n===null)return null;var r=$x(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(He(231,t,typeof n));return n}var d_=!1;if(yo)try{var Ff={};Object.defineProperty(Ff,"passive",{get:function(){d_=!0}}),window.addEventListener("test",Ff,Ff),window.removeEventListener("test",Ff,Ff)}catch{d_=!1}function GH(e,t,n,r,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var kh=!1,Fv=null,Uv=!1,f_=null,YH={onError:function(e){kh=!0,Fv=e}};function XH(e,t,n,r,a,s,o,l,c){kh=!1,Fv=null,GH.apply(YH,arguments)}function JH(e,t,n,r,a,s,o,l,c){if(XH.apply(this,arguments),kh){if(kh){var u=Fv;kh=!1,Fv=null}else throw Error(He(198));Uv||(Uv=!0,f_=u)}}function eu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function EE(e){if(eu(e)!==e)throw Error(He(188))}function QH(e){var t=e.alternate;if(!t){if(t=eu(e),t===null)throw Error(He(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return EE(a),e;if(s===r)return EE(a),t;s=s.sibling}throw Error(He(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(He(189))}}if(n.alternate!==r)throw Error(He(190))}if(n.tag!==3)throw Error(He(188));return n.stateNode.current===n?e:t}function cL(e){return e=QH(e),e!==null?uL(e):null}function uL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uL(e);if(t!==null)return t;e=e.sibling}return null}var dL=ii.unstable_scheduleCallback,TE=ii.unstable_cancelCallback,ZH=ii.unstable_shouldYield,e7=ii.unstable_requestPaint,lr=ii.unstable_now,t7=ii.unstable_getCurrentPriorityLevel,ES=ii.unstable_ImmediatePriority,fL=ii.unstable_UserBlockingPriority,Bv=ii.unstable_NormalPriority,n7=ii.unstable_LowPriority,hL=ii.unstable_IdlePriority,Rx=null,Ts=null;function r7(e){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Rx,e,void 0,(e.current.flags&128)===128)}catch{}}var ts=Math.clz32?Math.clz32:s7,a7=Math.log,i7=Math.LN2;function s7(e){return e>>>=0,e===0?32:31-(a7(e)/i7|0)|0}var hg=64,mg=4194304;function gh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=gh(l):(s&=o,s!==0&&(r=gh(s)))}else o=n&~a,o!==0?r=gh(o):s!==0&&(r=gh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ts(t),a=1<<n,r|=e[n],t&=~a;return r}function o7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l7(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ts(s),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=o7(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function h_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mL(){var e=hg;return hg<<=1,!(hg&4194240)&&(hg=64),e}function Y0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ts(t),e[t]=n}function c7(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ts(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}function TS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ts(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var kn=0;function pL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gL,PS,vL,yL,xL,m_=!1,pg=[],fl=null,hl=null,ml=null,Gh=new Map,Yh=new Map,Jo=[],u7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PE(e,t){switch(e){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":ml=null;break;case"pointerover":case"pointerout":Gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yh.delete(t.pointerId)}}function Uf(e,t,n,r,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},t!==null&&(t=xp(t),t!==null&&PS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function d7(e,t,n,r,a){switch(t){case"focusin":return fl=Uf(fl,e,t,n,r,a),!0;case"dragenter":return hl=Uf(hl,e,t,n,r,a),!0;case"mouseover":return ml=Uf(ml,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Gh.set(s,Uf(Gh.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Yh.set(s,Uf(Yh.get(s)||null,e,t,n,r,a)),!0}return!1}function bL(e){var t=mc(e.target);if(t!==null){var n=eu(t);if(n!==null){if(t=n.tag,t===13){if(t=lL(n),t!==null){e.blockedOn=t,xL(e.priority,function(){vL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=p_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);c_=r,n.target.dispatchEvent(r),c_=null}else return t=xp(n),t!==null&&PS(t),e.blockedOn=n,!1;t.shift()}return!0}function OE(e,t,n){mv(e)&&n.delete(t)}function f7(){m_=!1,fl!==null&&mv(fl)&&(fl=null),hl!==null&&mv(hl)&&(hl=null),ml!==null&&mv(ml)&&(ml=null),Gh.forEach(OE),Yh.forEach(OE)}function Bf(e,t){e.blockedOn===t&&(e.blockedOn=null,m_||(m_=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,f7)))}function Xh(e){function t(a){return Bf(a,e)}if(0<pg.length){Bf(pg[0],e);for(var n=1;n<pg.length;n++){var r=pg[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fl!==null&&Bf(fl,e),hl!==null&&Bf(hl,e),ml!==null&&Bf(ml,e),Gh.forEach(t),Yh.forEach(t),n=0;n<Jo.length;n++)r=Jo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jo.length&&(n=Jo[0],n.blockedOn===null);)bL(n),n.blockedOn===null&&Jo.shift()}var ad=Eo.ReactCurrentBatchConfig,Wv=!0;function h7(e,t,n,r){var a=kn,s=ad.transition;ad.transition=null;try{kn=1,OS(e,t,n,r)}finally{kn=a,ad.transition=s}}function m7(e,t,n,r){var a=kn,s=ad.transition;ad.transition=null;try{kn=4,OS(e,t,n,r)}finally{kn=a,ad.transition=s}}function OS(e,t,n,r){if(Wv){var a=p_(e,t,n,r);if(a===null)iw(e,t,r,qv,n),PE(e,r);else if(d7(a,e,t,n,r))r.stopPropagation();else if(PE(e,r),t&4&&-1<u7.indexOf(e)){for(;a!==null;){var s=xp(a);if(s!==null&&gL(s),s=p_(e,t,n,r),s===null&&iw(e,t,r,qv,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else iw(e,t,r,null,n)}}var qv=null;function p_(e,t,n,r){if(qv=null,e=AS(r),e=mc(e),e!==null)if(t=eu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qv=e,null}function wL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t7()){case ES:return 1;case fL:return 4;case Bv:case n7:return 16;case hL:return 536870912;default:return 16}default:return 16}}var ll=null,IS=null,pv=null;function jL(){if(pv)return pv;var e,t=IS,n=t.length,r,a="value"in ll?ll.value:ll.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[s-r];r++);return pv=a.slice(e,1<r?1-r:void 0)}function gv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gg(){return!0}function IE(){return!1}function li(e){function t(n,r,a,s,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gg:IE,this.isPropagationStopped=IE,this}return Qn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gg)},persist:function(){},isPersistent:gg}),t}var df={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RS=li(df),yp=Qn({},df,{view:0,detail:0}),p7=li(yp),X0,J0,zf,Mx=Qn({},yp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:MS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zf&&(zf&&e.type==="mousemove"?(X0=e.screenX-zf.screenX,J0=e.screenY-zf.screenY):J0=X0=0,zf=e),X0)},movementY:function(e){return"movementY"in e?e.movementY:J0}}),RE=li(Mx),g7=Qn({},Mx,{dataTransfer:0}),v7=li(g7),y7=Qn({},yp,{relatedTarget:0}),Q0=li(y7),x7=Qn({},df,{animationName:0,elapsedTime:0,pseudoElement:0}),b7=li(x7),w7=Qn({},df,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j7=li(w7),_7=Qn({},df,{data:0}),ME=li(_7),k7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N7[e])?!!t[e]:!1}function MS(){return C7}var A7=Qn({},yp,{key:function(e){if(e.key){var t=k7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?S7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:MS,charCode:function(e){return e.type==="keypress"?gv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),E7=li(A7),T7=Qn({},Mx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DE=li(T7),P7=Qn({},yp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:MS}),O7=li(P7),I7=Qn({},df,{propertyName:0,elapsedTime:0,pseudoElement:0}),R7=li(I7),M7=Qn({},Mx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D7=li(M7),L7=[9,13,27,32],DS=yo&&"CompositionEvent"in window,Sh=null;yo&&"documentMode"in document&&(Sh=document.documentMode);var $7=yo&&"TextEvent"in window&&!Sh,_L=yo&&(!DS||Sh&&8<Sh&&11>=Sh),LE=" ",$E=!1;function kL(e,t){switch(e){case"keyup":return L7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bu=!1;function F7(e,t){switch(e){case"compositionend":return SL(t);case"keypress":return t.which!==32?null:($E=!0,LE);case"textInput":return e=t.data,e===LE&&$E?null:e;default:return null}}function U7(e,t){if(Bu)return e==="compositionend"||!DS&&kL(e,t)?(e=jL(),pv=IS=ll=null,Bu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _L&&t.locale!=="ko"?null:t.data;default:return null}}var B7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!B7[e.type]:t==="textarea"}function NL(e,t,n,r){rL(r),t=Hv(t,"onChange"),0<t.length&&(n=new RS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nh=null,Jh=null;function z7(e){LL(e,0)}function Dx(e){var t=qu(e);if(XD(t))return e}function W7(e,t){if(e==="change")return t}var CL=!1;if(yo){var Z0;if(yo){var ew="oninput"in document;if(!ew){var UE=document.createElement("div");UE.setAttribute("oninput","return;"),ew=typeof UE.oninput=="function"}Z0=ew}else Z0=!1;CL=Z0&&(!document.documentMode||9<document.documentMode)}function BE(){Nh&&(Nh.detachEvent("onpropertychange",AL),Jh=Nh=null)}function AL(e){if(e.propertyName==="value"&&Dx(Jh)){var t=[];NL(t,Jh,e,AS(e)),oL(z7,t)}}function q7(e,t,n){e==="focusin"?(BE(),Nh=t,Jh=n,Nh.attachEvent("onpropertychange",AL)):e==="focusout"&&BE()}function H7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dx(Jh)}function K7(e,t){if(e==="click")return Dx(t)}function V7(e,t){if(e==="input"||e==="change")return Dx(t)}function G7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ss=typeof Object.is=="function"?Object.is:G7;function Qh(e,t){if(ss(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Jj.call(t,a)||!ss(e[a],t[a]))return!1}return!0}function zE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function WE(e,t){var n=zE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zE(n)}}function EL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?EL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function TL(){for(var e=window,t=$v();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$v(e.document)}return t}function LS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Y7(e){var t=TL(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&EL(n.ownerDocument.documentElement,n)){if(r!==null&&LS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=WE(n,s);var o=WE(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var X7=yo&&"documentMode"in document&&11>=document.documentMode,zu=null,g_=null,Ch=null,v_=!1;function qE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;v_||zu==null||zu!==$v(r)||(r=zu,"selectionStart"in r&&LS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ch&&Qh(Ch,r)||(Ch=r,r=Hv(g_,"onSelect"),0<r.length&&(t=new RS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zu)))}function vg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wu={animationend:vg("Animation","AnimationEnd"),animationiteration:vg("Animation","AnimationIteration"),animationstart:vg("Animation","AnimationStart"),transitionend:vg("Transition","TransitionEnd")},tw={},PL={};yo&&(PL=document.createElement("div").style,"AnimationEvent"in window||(delete Wu.animationend.animation,delete Wu.animationiteration.animation,delete Wu.animationstart.animation),"TransitionEvent"in window||delete Wu.transitionend.transition);function Lx(e){if(tw[e])return tw[e];if(!Wu[e])return e;var t=Wu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in PL)return tw[e]=t[n];return e}var OL=Lx("animationend"),IL=Lx("animationiteration"),RL=Lx("animationstart"),ML=Lx("transitionend"),DL=new Map,HE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rl(e,t){DL.set(e,t),Zc(t,[e])}for(var nw=0;nw<HE.length;nw++){var rw=HE[nw],J7=rw.toLowerCase(),Q7=rw[0].toUpperCase()+rw.slice(1);Rl(J7,"on"+Q7)}Rl(OL,"onAnimationEnd");Rl(IL,"onAnimationIteration");Rl(RL,"onAnimationStart");Rl("dblclick","onDoubleClick");Rl("focusin","onFocus");Rl("focusout","onBlur");Rl(ML,"onTransitionEnd");kd("onMouseEnter",["mouseout","mouseover"]);kd("onMouseLeave",["mouseout","mouseover"]);kd("onPointerEnter",["pointerout","pointerover"]);kd("onPointerLeave",["pointerout","pointerover"]);Zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z7=new Set("cancel close invalid load scroll toggle".split(" ").concat(vh));function KE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,JH(r,t,void 0,e),e.currentTarget=null}function LL(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;KE(a,l,u),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;KE(a,l,u),s=c}}}if(Uv)throw e=f_,Uv=!1,f_=null,e}function Fn(e,t){var n=t[j_];n===void 0&&(n=t[j_]=new Set);var r=e+"__bubble";n.has(r)||($L(t,e,2,!1),n.add(r))}function aw(e,t,n){var r=0;t&&(r|=4),$L(n,e,r,t)}var yg="_reactListening"+Math.random().toString(36).slice(2);function Zh(e){if(!e[yg]){e[yg]=!0,HD.forEach(function(n){n!=="selectionchange"&&(Z7.has(n)||aw(n,!1,e),aw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yg]||(t[yg]=!0,aw("selectionchange",!1,t))}}function $L(e,t,n,r){switch(wL(t)){case 1:var a=h7;break;case 4:a=m7;break;default:a=OS}n=a.bind(null,t,n,e),a=void 0,!d_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function iw(e,t,n,r,a){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=mc(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}oL(function(){var u=s,d=AS(n),f=[];e:{var h=DL.get(e);if(h!==void 0){var m=RS,g=e;switch(e){case"keypress":if(gv(n)===0)break e;case"keydown":case"keyup":m=E7;break;case"focusin":g="focus",m=Q0;break;case"focusout":g="blur",m=Q0;break;case"beforeblur":case"afterblur":m=Q0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=RE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=v7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=O7;break;case OL:case IL:case RL:m=b7;break;case ML:m=R7;break;case"scroll":m=p7;break;case"wheel":m=D7;break;case"copy":case"cut":case"paste":m=j7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=DE}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var w=u,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=Vh(w,y),_!=null&&v.push(em(w,_,b)))),x)break;w=w.return}0<v.length&&(h=new m(h,g,null,n,d),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==c_&&(g=n.relatedTarget||n.fromElement)&&(mc(g)||g[xo]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?mc(g):null,g!==null&&(x=eu(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=RE,_="onMouseLeave",y="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(v=DE,_="onPointerLeave",y="onPointerEnter",w="pointer"),x=m==null?h:qu(m),b=g==null?h:qu(g),h=new v(_,w+"leave",m,n,d),h.target=x,h.relatedTarget=b,_=null,mc(d)===u&&(v=new v(y,w+"enter",g,n,d),v.target=b,v.relatedTarget=x,_=v),x=_,m&&g)t:{for(v=m,y=g,w=0,b=v;b;b=pu(b))w++;for(b=0,_=y;_;_=pu(_))b++;for(;0<w-b;)v=pu(v),w--;for(;0<b-w;)y=pu(y),b--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=pu(v),y=pu(y)}v=null}else v=null;m!==null&&VE(f,h,m,v,!1),g!==null&&x!==null&&VE(f,x,g,v,!0)}}e:{if(h=u?qu(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=W7;else if(FE(h))if(CL)k=V7;else{k=H7;var j=q7}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=K7);if(k&&(k=k(e,u))){NL(f,k,n,d);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&a_(h,"number",h.value)}switch(j=u?qu(u):window,e){case"focusin":(FE(j)||j.contentEditable==="true")&&(zu=j,g_=u,Ch=null);break;case"focusout":Ch=g_=zu=null;break;case"mousedown":v_=!0;break;case"contextmenu":case"mouseup":case"dragend":v_=!1,qE(f,n,d);break;case"selectionchange":if(X7)break;case"keydown":case"keyup":qE(f,n,d)}var S;if(DS)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Bu?kL(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(_L&&n.locale!=="ko"&&(Bu||O!=="onCompositionStart"?O==="onCompositionEnd"&&Bu&&(S=jL()):(ll=d,IS="value"in ll?ll.value:ll.textContent,Bu=!0)),j=Hv(u,O),0<j.length&&(O=new ME(O,e,null,n,d),f.push({event:O,listeners:j}),S?O.data=S:(S=SL(n),S!==null&&(O.data=S)))),(S=$7?F7(e,n):U7(e,n))&&(u=Hv(u,"onBeforeInput"),0<u.length&&(d=new ME("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=S))}LL(f,t)})}function em(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hv(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Vh(e,n),s!=null&&r.unshift(em(e,s,a)),s=Vh(e,t),s!=null&&r.push(em(e,s,a))),e=e.return}return r}function pu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function VE(e,t,n,r,a){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Vh(n,s),c!=null&&o.unshift(em(n,c,l))):a||(c=Vh(n,s),c!=null&&o.push(em(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var eK=/\r\n?/g,tK=/\u0000|\uFFFD/g;function GE(e){return(typeof e=="string"?e:""+e).replace(eK,`
`).replace(tK,"")}function xg(e,t,n){if(t=GE(t),GE(e)!==t&&n)throw Error(He(425))}function Kv(){}var y_=null,x_=null;function b_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var w_=typeof setTimeout=="function"?setTimeout:void 0,nK=typeof clearTimeout=="function"?clearTimeout:void 0,YE=typeof Promise=="function"?Promise:void 0,rK=typeof queueMicrotask=="function"?queueMicrotask:typeof YE<"u"?function(e){return YE.resolve(null).then(e).catch(aK)}:w_;function aK(e){setTimeout(function(){throw e})}function sw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Xh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Xh(t)}function pl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function XE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ff=Math.random().toString(36).slice(2),js="__reactFiber$"+ff,tm="__reactProps$"+ff,xo="__reactContainer$"+ff,j_="__reactEvents$"+ff,iK="__reactListeners$"+ff,sK="__reactHandles$"+ff;function mc(e){var t=e[js];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xo]||n[js]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=XE(e);e!==null;){if(n=e[js])return n;e=XE(e)}return t}e=n,n=e.parentNode}return null}function xp(e){return e=e[js]||e[xo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(He(33))}function $x(e){return e[tm]||null}var __=[],Hu=-1;function Ml(e){return{current:e}}function zn(e){0>Hu||(e.current=__[Hu],__[Hu]=null,Hu--)}function Mn(e,t){Hu++,__[Hu]=e.current,e.current=t}var Sl={},aa=Ml(Sl),La=Ml(!1),Oc=Sl;function Sd(e,t){var n=e.type.contextTypes;if(!n)return Sl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function $a(e){return e=e.childContextTypes,e!=null}function Vv(){zn(La),zn(aa)}function JE(e,t,n){if(aa.current!==Sl)throw Error(He(168));Mn(aa,t),Mn(La,n)}function FL(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(He(108,qH(e)||"Unknown",a));return Qn({},n,r)}function Gv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sl,Oc=aa.current,Mn(aa,e),Mn(La,La.current),!0}function QE(e,t,n){var r=e.stateNode;if(!r)throw Error(He(169));n?(e=FL(e,t,Oc),r.__reactInternalMemoizedMergedChildContext=e,zn(La),zn(aa),Mn(aa,e)):zn(La),Mn(La,n)}var Zs=null,Fx=!1,ow=!1;function UL(e){Zs===null?Zs=[e]:Zs.push(e)}function oK(e){Fx=!0,UL(e)}function Dl(){if(!ow&&Zs!==null){ow=!0;var e=0,t=kn;try{var n=Zs;for(kn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zs=null,Fx=!1}catch(a){throw Zs!==null&&(Zs=Zs.slice(e+1)),dL(ES,Dl),a}finally{kn=t,ow=!1}}return null}var Ku=[],Vu=0,Yv=null,Xv=0,yi=[],xi=0,Ic=null,ro=1,ao="";function tc(e,t){Ku[Vu++]=Xv,Ku[Vu++]=Yv,Yv=e,Xv=t}function BL(e,t,n){yi[xi++]=ro,yi[xi++]=ao,yi[xi++]=Ic,Ic=e;var r=ro;e=ao;var a=32-ts(r)-1;r&=~(1<<a),n+=1;var s=32-ts(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ro=1<<32-ts(t)+a|n<<a|r,ao=s+e}else ro=1<<s|n<<a|r,ao=e}function $S(e){e.return!==null&&(tc(e,1),BL(e,1,0))}function FS(e){for(;e===Yv;)Yv=Ku[--Vu],Ku[Vu]=null,Xv=Ku[--Vu],Ku[Vu]=null;for(;e===Ic;)Ic=yi[--xi],yi[xi]=null,ao=yi[--xi],yi[xi]=null,ro=yi[--xi],yi[xi]=null}var ni=null,ti=null,Hn=!1,Yi=null;function zL(e,t){var n=_i(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ZE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ni=e,ti=pl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ni=e,ti=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ic!==null?{id:ro,overflow:ao}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_i(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ni=e,ti=null,!0):!1;default:return!1}}function k_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function S_(e){if(Hn){var t=ti;if(t){var n=t;if(!ZE(e,t)){if(k_(e))throw Error(He(418));t=pl(n.nextSibling);var r=ni;t&&ZE(e,t)?zL(r,n):(e.flags=e.flags&-4097|2,Hn=!1,ni=e)}}else{if(k_(e))throw Error(He(418));e.flags=e.flags&-4097|2,Hn=!1,ni=e}}}function eT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ni=e}function bg(e){if(e!==ni)return!1;if(!Hn)return eT(e),Hn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!b_(e.type,e.memoizedProps)),t&&(t=ti)){if(k_(e))throw WL(),Error(He(418));for(;t;)zL(e,t),t=pl(t.nextSibling)}if(eT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(He(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ti=pl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ti=null}}else ti=ni?pl(e.stateNode.nextSibling):null;return!0}function WL(){for(var e=ti;e;)e=pl(e.nextSibling)}function Nd(){ti=ni=null,Hn=!1}function US(e){Yi===null?Yi=[e]:Yi.push(e)}var lK=Eo.ReactCurrentBatchConfig;function Wf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(He(309));var r=n.stateNode}if(!r)throw Error(He(147,e));var a=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(He(284));if(!n._owner)throw Error(He(290,e))}return e}function wg(e,t){throw e=Object.prototype.toString.call(t),Error(He(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tT(e){var t=e._init;return t(e._payload)}function qL(e){function t(y,w){if(e){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!e)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function a(y,w){return y=xl(y,w),y.index=0,y.sibling=null,y}function s(y,w,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,w,b,_){return w===null||w.tag!==6?(w=mw(b,y.mode,_),w.return=y,w):(w=a(w,b),w.return=y,w)}function c(y,w,b,_){var k=b.type;return k===Uu?d(y,w,b.props.children,_,b.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Go&&tT(k)===w.type)?(_=a(w,b.props),_.ref=Wf(y,w,b),_.return=y,_):(_=_v(b.type,b.key,b.props,null,y.mode,_),_.ref=Wf(y,w,b),_.return=y,_)}function u(y,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=pw(b,y.mode,_),w.return=y,w):(w=a(w,b.children||[]),w.return=y,w)}function d(y,w,b,_,k){return w===null||w.tag!==7?(w=Ac(b,y.mode,_,k),w.return=y,w):(w=a(w,b),w.return=y,w)}function f(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=mw(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ug:return b=_v(w.type,w.key,w.props,null,y.mode,b),b.ref=Wf(y,null,w),b.return=y,b;case Fu:return w=pw(w,y.mode,b),w.return=y,w;case Go:var _=w._init;return f(y,_(w._payload),b)}if(ph(w)||$f(w))return w=Ac(w,y.mode,b,null),w.return=y,w;wg(y,w)}return null}function h(y,w,b,_){var k=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:l(y,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ug:return b.key===k?c(y,w,b,_):null;case Fu:return b.key===k?u(y,w,b,_):null;case Go:return k=b._init,h(y,w,k(b._payload),_)}if(ph(b)||$f(b))return k!==null?null:d(y,w,b,_,null);wg(y,b)}return null}function m(y,w,b,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,l(w,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ug:return y=y.get(_.key===null?b:_.key)||null,c(w,y,_,k);case Fu:return y=y.get(_.key===null?b:_.key)||null,u(w,y,_,k);case Go:var j=_._init;return m(y,w,b,j(_._payload),k)}if(ph(_)||$f(_))return y=y.get(b)||null,d(w,y,_,k,null);wg(w,_)}return null}function g(y,w,b,_){for(var k=null,j=null,S=w,O=w=0,I=null;S!==null&&O<b.length;O++){S.index>O?(I=S,S=null):I=S.sibling;var P=h(y,S,b[O],_);if(P===null){S===null&&(S=I);break}e&&S&&P.alternate===null&&t(y,S),w=s(P,w,O),j===null?k=P:j.sibling=P,j=P,S=I}if(O===b.length)return n(y,S),Hn&&tc(y,O),k;if(S===null){for(;O<b.length;O++)S=f(y,b[O],_),S!==null&&(w=s(S,w,O),j===null?k=S:j.sibling=S,j=S);return Hn&&tc(y,O),k}for(S=r(y,S);O<b.length;O++)I=m(S,y,O,b[O],_),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?O:I.key),w=s(I,w,O),j===null?k=I:j.sibling=I,j=I);return e&&S.forEach(function(N){return t(y,N)}),Hn&&tc(y,O),k}function v(y,w,b,_){var k=$f(b);if(typeof k!="function")throw Error(He(150));if(b=k.call(b),b==null)throw Error(He(151));for(var j=k=null,S=w,O=w=0,I=null,P=b.next();S!==null&&!P.done;O++,P=b.next()){S.index>O?(I=S,S=null):I=S.sibling;var N=h(y,S,P.value,_);if(N===null){S===null&&(S=I);break}e&&S&&N.alternate===null&&t(y,S),w=s(N,w,O),j===null?k=N:j.sibling=N,j=N,S=I}if(P.done)return n(y,S),Hn&&tc(y,O),k;if(S===null){for(;!P.done;O++,P=b.next())P=f(y,P.value,_),P!==null&&(w=s(P,w,O),j===null?k=P:j.sibling=P,j=P);return Hn&&tc(y,O),k}for(S=r(y,S);!P.done;O++,P=b.next())P=m(S,y,O,P.value,_),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?O:P.key),w=s(P,w,O),j===null?k=P:j.sibling=P,j=P);return e&&S.forEach(function(D){return t(y,D)}),Hn&&tc(y,O),k}function x(y,w,b,_){if(typeof b=="object"&&b!==null&&b.type===Uu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ug:e:{for(var k=b.key,j=w;j!==null;){if(j.key===k){if(k=b.type,k===Uu){if(j.tag===7){n(y,j.sibling),w=a(j,b.props.children),w.return=y,y=w;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Go&&tT(k)===j.type){n(y,j.sibling),w=a(j,b.props),w.ref=Wf(y,j,b),w.return=y,y=w;break e}n(y,j);break}else t(y,j);j=j.sibling}b.type===Uu?(w=Ac(b.props.children,y.mode,_,b.key),w.return=y,y=w):(_=_v(b.type,b.key,b.props,null,y.mode,_),_.ref=Wf(y,w,b),_.return=y,y=_)}return o(y);case Fu:e:{for(j=b.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),w=a(w,b.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else t(y,w);w=w.sibling}w=pw(b,y.mode,_),w.return=y,y=w}return o(y);case Go:return j=b._init,x(y,w,j(b._payload),_)}if(ph(b))return g(y,w,b,_);if($f(b))return v(y,w,b,_);wg(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),w=a(w,b),w.return=y,y=w):(n(y,w),w=mw(b,y.mode,_),w.return=y,y=w),o(y)):n(y,w)}return x}var Cd=qL(!0),HL=qL(!1),Jv=Ml(null),Qv=null,Gu=null,BS=null;function zS(){BS=Gu=Qv=null}function WS(e){var t=Jv.current;zn(Jv),e._currentValue=t}function N_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function id(e,t){Qv=e,BS=Gu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ra=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(BS!==e)if(e={context:e,memoizedValue:t,next:null},Gu===null){if(Qv===null)throw Error(He(308));Gu=e,Qv.dependencies={lanes:0,firstContext:e}}else Gu=Gu.next=e;return t}var pc=null;function qS(e){pc===null?pc=[e]:pc.push(e)}function KL(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,qS(t)):(n.next=a.next,a.next=n),t.interleaved=n,bo(e,r)}function bo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yo=!1;function HS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,cn&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,bo(e,n)}return a=r.interleaved,a===null?(t.next=t,qS(r)):(t.next=a.next,a.next=t),r.interleaved=t,bo(e,n)}function vv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,TS(e,n)}}function nT(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zv(e,t,n,r){var a=e.updateQueue;Yo=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var h=l.lane,m=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Qn({},f,h);break e;case 2:Yo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);Mc|=o,e.lanes=o,e.memoizedState=f}}function rT(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(He(191,a));a.call(r)}}}var bp={},Ps=Ml(bp),nm=Ml(bp),rm=Ml(bp);function gc(e){if(e===bp)throw Error(He(174));return e}function KS(e,t){switch(Mn(rm,t),Mn(nm,e),Mn(Ps,bp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:s_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=s_(t,e)}zn(Ps),Mn(Ps,t)}function Ad(){zn(Ps),zn(nm),zn(rm)}function GL(e){gc(rm.current);var t=gc(Ps.current),n=s_(t,e.type);t!==n&&(Mn(nm,e),Mn(Ps,n))}function VS(e){nm.current===e&&(zn(Ps),zn(nm))}var Xn=Ml(0);function ey(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lw=[];function GS(){for(var e=0;e<lw.length;e++)lw[e]._workInProgressVersionPrimary=null;lw.length=0}var yv=Eo.ReactCurrentDispatcher,cw=Eo.ReactCurrentBatchConfig,Rc=0,Jn=null,wr=null,Tr=null,ty=!1,Ah=!1,am=0,cK=0;function Xr(){throw Error(He(321))}function YS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ss(e[n],t[n]))return!1;return!0}function XS(e,t,n,r,a,s){if(Rc=s,Jn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yv.current=e===null||e.memoizedState===null?hK:mK,e=n(r,a),Ah){s=0;do{if(Ah=!1,am=0,25<=s)throw Error(He(301));s+=1,Tr=wr=null,t.updateQueue=null,yv.current=pK,e=n(r,a)}while(Ah)}if(yv.current=ny,t=wr!==null&&wr.next!==null,Rc=0,Tr=wr=Jn=null,ty=!1,t)throw Error(He(300));return e}function JS(){var e=am!==0;return am=0,e}function gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Jn.memoizedState=Tr=e:Tr=Tr.next=e,Tr}function Ti(){if(wr===null){var e=Jn.alternate;e=e!==null?e.memoizedState:null}else e=wr.next;var t=Tr===null?Jn.memoizedState:Tr.next;if(t!==null)Tr=t,wr=e;else{if(e===null)throw Error(He(310));wr=e,e={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},Tr===null?Jn.memoizedState=Tr=e:Tr=Tr.next=e}return Tr}function im(e,t){return typeof t=="function"?t(e):t}function uw(e){var t=Ti(),n=t.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=e;var r=wr,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Rc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Jn.lanes|=d,Mc|=d}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=l,ss(r,t.memoizedState)||(Ra=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do s=a.lane,Jn.lanes|=s,Mc|=s,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function dw(e){var t=Ti(),n=t.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);ss(s,t.memoizedState)||(Ra=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function YL(){}function XL(e,t){var n=Jn,r=Ti(),a=t(),s=!ss(r.memoizedState,a);if(s&&(r.memoizedState=a,Ra=!0),r=r.queue,QS(ZL.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Tr!==null&&Tr.memoizedState.tag&1){if(n.flags|=2048,sm(9,QL.bind(null,n,r,a,t),void 0,null),Or===null)throw Error(He(349));Rc&30||JL(n,t,a)}return a}function JL(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Jn.updateQueue,t===null?(t={lastEffect:null,stores:null},Jn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function QL(e,t,n,r){t.value=n,t.getSnapshot=r,e$(t)&&t$(e)}function ZL(e,t,n){return n(function(){e$(t)&&t$(e)})}function e$(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ss(e,n)}catch{return!0}}function t$(e){var t=bo(e,1);t!==null&&ns(t,e,1,-1)}function aT(e){var t=gs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:im,lastRenderedState:e},t.queue=e,e=e.dispatch=fK.bind(null,Jn,e),[t.memoizedState,e]}function sm(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Jn.updateQueue,t===null?(t={lastEffect:null,stores:null},Jn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function n$(){return Ti().memoizedState}function xv(e,t,n,r){var a=gs();Jn.flags|=e,a.memoizedState=sm(1|t,n,void 0,r===void 0?null:r)}function Ux(e,t,n,r){var a=Ti();r=r===void 0?null:r;var s=void 0;if(wr!==null){var o=wr.memoizedState;if(s=o.destroy,r!==null&&YS(r,o.deps)){a.memoizedState=sm(t,n,s,r);return}}Jn.flags|=e,a.memoizedState=sm(1|t,n,s,r)}function iT(e,t){return xv(8390656,8,e,t)}function QS(e,t){return Ux(2048,8,e,t)}function r$(e,t){return Ux(4,2,e,t)}function a$(e,t){return Ux(4,4,e,t)}function i$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function s$(e,t,n){return n=n!=null?n.concat([e]):null,Ux(4,4,i$.bind(null,t,e),n)}function ZS(){}function o$(e,t){var n=Ti();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&YS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function l$(e,t){var n=Ti();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&YS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function c$(e,t,n){return Rc&21?(ss(n,t)||(n=mL(),Jn.lanes|=n,Mc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ra=!0),e.memoizedState=n)}function uK(e,t){var n=kn;kn=n!==0&&4>n?n:4,e(!0);var r=cw.transition;cw.transition={};try{e(!1),t()}finally{kn=n,cw.transition=r}}function u$(){return Ti().memoizedState}function dK(e,t,n){var r=yl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d$(e))f$(t,n);else if(n=KL(e,t,n,r),n!==null){var a=ya();ns(n,e,r,a),h$(n,t,r)}}function fK(e,t,n){var r=yl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d$(e))f$(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(a.hasEagerState=!0,a.eagerState=l,ss(l,o)){var c=t.interleaved;c===null?(a.next=a,qS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=KL(e,t,a,r),n!==null&&(a=ya(),ns(n,e,r,a),h$(n,t,r))}}function d$(e){var t=e.alternate;return e===Jn||t!==null&&t===Jn}function f$(e,t){Ah=ty=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function h$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,TS(e,n)}}var ny={readContext:Ei,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},hK={readContext:Ei,useCallback:function(e,t){return gs().memoizedState=[e,t===void 0?null:t],e},useContext:Ei,useEffect:iT,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xv(4194308,4,i$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xv(4194308,4,e,t)},useInsertionEffect:function(e,t){return xv(4,2,e,t)},useMemo:function(e,t){var n=gs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dK.bind(null,Jn,e),[r.memoizedState,e]},useRef:function(e){var t=gs();return e={current:e},t.memoizedState=e},useState:aT,useDebugValue:ZS,useDeferredValue:function(e){return gs().memoizedState=e},useTransition:function(){var e=aT(!1),t=e[0];return e=uK.bind(null,e[1]),gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Jn,a=gs();if(Hn){if(n===void 0)throw Error(He(407));n=n()}else{if(n=t(),Or===null)throw Error(He(349));Rc&30||JL(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,iT(ZL.bind(null,r,s,e),[e]),r.flags|=2048,sm(9,QL.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=gs(),t=Or.identifierPrefix;if(Hn){var n=ao,r=ro;n=(r&~(1<<32-ts(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=am++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cK++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mK={readContext:Ei,useCallback:o$,useContext:Ei,useEffect:QS,useImperativeHandle:s$,useInsertionEffect:r$,useLayoutEffect:a$,useMemo:l$,useReducer:uw,useRef:n$,useState:function(){return uw(im)},useDebugValue:ZS,useDeferredValue:function(e){var t=Ti();return c$(t,wr.memoizedState,e)},useTransition:function(){var e=uw(im)[0],t=Ti().memoizedState;return[e,t]},useMutableSource:YL,useSyncExternalStore:XL,useId:u$,unstable_isNewReconciler:!1},pK={readContext:Ei,useCallback:o$,useContext:Ei,useEffect:QS,useImperativeHandle:s$,useInsertionEffect:r$,useLayoutEffect:a$,useMemo:l$,useReducer:dw,useRef:n$,useState:function(){return dw(im)},useDebugValue:ZS,useDeferredValue:function(e){var t=Ti();return wr===null?t.memoizedState=e:c$(t,wr.memoizedState,e)},useTransition:function(){var e=dw(im)[0],t=Ti().memoizedState;return[e,t]},useMutableSource:YL,useSyncExternalStore:XL,useId:u$,unstable_isNewReconciler:!1};function Bi(e,t){if(e&&e.defaultProps){t=Qn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function C_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Qn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bx={isMounted:function(e){return(e=e._reactInternals)?eu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ya(),a=yl(e),s=uo(r,a);s.payload=t,n!=null&&(s.callback=n),t=gl(e,s,a),t!==null&&(ns(t,e,a,r),vv(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ya(),a=yl(e),s=uo(r,a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=gl(e,s,a),t!==null&&(ns(t,e,a,r),vv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ya(),r=yl(e),a=uo(n,r);a.tag=2,t!=null&&(a.callback=t),t=gl(e,a,r),t!==null&&(ns(t,e,r,n),vv(t,e,r))}};function sT(e,t,n,r,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Qh(n,r)||!Qh(a,s):!0}function m$(e,t,n){var r=!1,a=Sl,s=t.contextType;return typeof s=="object"&&s!==null?s=Ei(s):(a=$a(t)?Oc:aa.current,r=t.contextTypes,s=(r=r!=null)?Sd(e,a):Sl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function oT(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bx.enqueueReplaceState(t,t.state,null)}function A_(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},HS(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=Ei(s):(s=$a(t)?Oc:aa.current,a.context=Sd(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(C_(e,t,s,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Bx.enqueueReplaceState(a,a.state,null),Zv(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ed(e,t){try{var n="",r=t;do n+=WH(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function fw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function E_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gK=typeof WeakMap=="function"?WeakMap:Map;function p$(e,t,n){n=uo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ay||(ay=!0,F_=r),E_(e,t)},n}function g$(e,t,n){n=uo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){E_(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){E_(e,t),typeof r!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function lT(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gK;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=TK.bind(null,e,t,n),t.then(e,e))}function cT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uT(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=uo(-1,1),t.tag=2,gl(n,t,1))),n.lanes|=1),e)}var vK=Eo.ReactCurrentOwner,Ra=!1;function fa(e,t,n,r){t.child=e===null?HL(t,null,n,r):Cd(t,e.child,n,r)}function dT(e,t,n,r,a){n=n.render;var s=t.ref;return id(t,a),r=XS(e,t,n,r,s,a),n=JS(),e!==null&&!Ra?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wo(e,t,a)):(Hn&&n&&$S(t),t.flags|=1,fa(e,t,r,a),t.child)}function fT(e,t,n,r,a){if(e===null){var s=n.type;return typeof s=="function"&&!oN(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,v$(e,t,s,r,a)):(e=_v(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qh,n(o,r)&&e.ref===t.ref)return wo(e,t,a)}return t.flags|=1,e=xl(s,r),e.ref=t.ref,e.return=t,t.child=e}function v$(e,t,n,r,a){if(e!==null){var s=e.memoizedProps;if(Qh(s,r)&&e.ref===t.ref)if(Ra=!1,t.pendingProps=r=s,(e.lanes&a)!==0)e.flags&131072&&(Ra=!0);else return t.lanes=e.lanes,wo(e,t,a)}return T_(e,t,n,r,a)}function y$(e,t,n){var r=t.pendingProps,a=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(Xu,Ja),Ja|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mn(Xu,Ja),Ja|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Mn(Xu,Ja),Ja|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Mn(Xu,Ja),Ja|=r;return fa(e,t,a,n),t.child}function x$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function T_(e,t,n,r,a){var s=$a(n)?Oc:aa.current;return s=Sd(t,s),id(t,a),n=XS(e,t,n,r,s,a),r=JS(),e!==null&&!Ra?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wo(e,t,a)):(Hn&&r&&$S(t),t.flags|=1,fa(e,t,n,a),t.child)}function hT(e,t,n,r,a){if($a(n)){var s=!0;Gv(t)}else s=!1;if(id(t,a),t.stateNode===null)bv(e,t),m$(t,n,r),A_(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ei(u):(u=$a(n)?Oc:aa.current,u=Sd(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&oT(t,o,r,u),Yo=!1;var h=t.memoizedState;o.state=h,Zv(t,r,o,a),c=t.memoizedState,l!==r||h!==c||La.current||Yo?(typeof d=="function"&&(C_(t,n,d,r),c=t.memoizedState),(l=Yo||sT(t,n,l,r,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,VL(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Bi(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ei(c):(c=$a(n)?Oc:aa.current,c=Sd(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&oT(t,o,r,c),Yo=!1,h=t.memoizedState,o.state=h,Zv(t,r,o,a);var g=t.memoizedState;l!==f||h!==g||La.current||Yo?(typeof m=="function"&&(C_(t,n,m,r),g=t.memoizedState),(u=Yo||sT(t,n,u,r,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return P_(e,t,n,r,s,a)}function P_(e,t,n,r,a,s){x$(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&QE(t,n,!1),wo(e,t,s);r=t.stateNode,vK.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Cd(t,e.child,null,s),t.child=Cd(t,null,l,s)):fa(e,t,l,s),t.memoizedState=r.state,a&&QE(t,n,!0),t.child}function b$(e){var t=e.stateNode;t.pendingContext?JE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&JE(e,t.context,!1),KS(e,t.containerInfo)}function mT(e,t,n,r,a){return Nd(),US(a),t.flags|=256,fa(e,t,n,r),t.child}var O_={dehydrated:null,treeContext:null,retryLane:0};function I_(e){return{baseLanes:e,cachePool:null,transitions:null}}function w$(e,t,n){var r=t.pendingProps,a=Xn.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Mn(Xn,a&1),e===null)return S_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qx(o,r,0,null),e=Ac(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=I_(n),t.memoizedState=O_,e):eN(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return yK(e,t,o,r,l,a,n);if(s){s=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=xl(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=xl(l,s):(s=Ac(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?I_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=O_,r}return s=e.child,e=s.sibling,r=xl(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function eN(e,t){return t=qx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jg(e,t,n,r){return r!==null&&US(r),Cd(t,e.child,null,n),e=eN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yK(e,t,n,r,a,s,o){if(n)return t.flags&256?(t.flags&=-257,r=fw(Error(He(422))),jg(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=qx({mode:"visible",children:r.children},a,0,null),s=Ac(s,a,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Cd(t,e.child,null,o),t.child.memoizedState=I_(o),t.memoizedState=O_,s);if(!(t.mode&1))return jg(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(He(419)),r=fw(s,r,void 0),jg(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ra||l){if(r=Or,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,bo(e,a),ns(r,e,a,-1))}return sN(),r=fw(Error(He(421))),jg(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=PK.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ti=pl(a.nextSibling),ni=t,Hn=!0,Yi=null,e!==null&&(yi[xi++]=ro,yi[xi++]=ao,yi[xi++]=Ic,ro=e.id,ao=e.overflow,Ic=t),t=eN(t,r.children),t.flags|=4096,t)}function pT(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),N_(e.return,t,n)}function hw(e,t,n,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function j$(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(fa(e,t,r.children,n),r=Xn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pT(e,n,t);else if(e.tag===19)pT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mn(Xn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ey(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),hw(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ey(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}hw(t,!0,n,null,s);break;case"together":hw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(He(153));if(t.child!==null){for(e=t.child,n=xl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xK(e,t,n){switch(t.tag){case 3:b$(t),Nd();break;case 5:GL(t);break;case 1:$a(t.type)&&Gv(t);break;case 4:KS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Mn(Jv,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Mn(Xn,Xn.current&1),t.flags|=128,null):n&t.child.childLanes?w$(e,t,n):(Mn(Xn,Xn.current&1),e=wo(e,t,n),e!==null?e.sibling:null);Mn(Xn,Xn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return j$(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Mn(Xn,Xn.current),r)break;return null;case 22:case 23:return t.lanes=0,y$(e,t,n)}return wo(e,t,n)}var _$,R_,k$,S$;_$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};R_=function(){};k$=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,gc(Ps.current);var s=null;switch(n){case"input":a=n_(e,a),r=n_(e,r),s=[];break;case"select":a=Qn({},a,{value:void 0}),r=Qn({},r,{value:void 0}),s=[];break;case"textarea":a=i_(e,a),r=i_(e,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Kv)}o_(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Fn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};S$=function(e,t,n,r){n!==r&&(t.flags|=4)};function qf(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bK(e,t,n){var r=t.pendingProps;switch(FS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(t),null;case 1:return $a(t.type)&&Vv(),Jr(t),null;case 3:return r=t.stateNode,Ad(),zn(La),zn(aa),GS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yi!==null&&(z_(Yi),Yi=null))),R_(e,t),Jr(t),null;case 5:VS(t);var a=gc(rm.current);if(n=t.type,e!==null&&t.stateNode!=null)k$(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(He(166));return Jr(t),null}if(e=gc(Ps.current),bg(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[js]=t,r[tm]=s,e=(t.mode&1)!==0,n){case"dialog":Fn("cancel",r),Fn("close",r);break;case"iframe":case"object":case"embed":Fn("load",r);break;case"video":case"audio":for(a=0;a<vh.length;a++)Fn(vh[a],r);break;case"source":Fn("error",r);break;case"img":case"image":case"link":Fn("error",r),Fn("load",r);break;case"details":Fn("toggle",r);break;case"input":kE(r,s),Fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fn("invalid",r);break;case"textarea":NE(r,s),Fn("invalid",r)}o_(n,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&xg(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&xg(r.textContent,l,e),a=["children",""+l]):Hh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fn("scroll",r)}switch(n){case"input":dg(r),SE(r,s,!0);break;case"textarea":dg(r),CE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Kv)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ZD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[js]=t,e[tm]=r,_$(e,t,!1,!1),t.stateNode=e;e:{switch(o=l_(n,r),n){case"dialog":Fn("cancel",e),Fn("close",e),a=r;break;case"iframe":case"object":case"embed":Fn("load",e),a=r;break;case"video":case"audio":for(a=0;a<vh.length;a++)Fn(vh[a],e);a=r;break;case"source":Fn("error",e),a=r;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),a=r;break;case"details":Fn("toggle",e),a=r;break;case"input":kE(e,r),a=n_(e,r),Fn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Qn({},r,{value:void 0}),Fn("invalid",e);break;case"textarea":NE(e,r),a=i_(e,r),Fn("invalid",e);break;default:a=r}o_(n,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?nL(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&eL(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Kh(e,c):typeof c=="number"&&Kh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Fn("scroll",e):c!=null&&kS(e,s,c,o))}switch(n){case"input":dg(e),SE(e,r,!1);break;case"textarea":dg(e),CE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kl(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?td(e,!!r.multiple,s,!1):r.defaultValue!=null&&td(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Kv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jr(t),null;case 6:if(e&&t.stateNode!=null)S$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(He(166));if(n=gc(rm.current),gc(Ps.current),bg(t)){if(r=t.stateNode,n=t.memoizedProps,r[js]=t,(s=r.nodeValue!==n)&&(e=ni,e!==null))switch(e.tag){case 3:xg(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xg(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[js]=t,t.stateNode=r}return Jr(t),null;case 13:if(zn(Xn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Hn&&ti!==null&&t.mode&1&&!(t.flags&128))WL(),Nd(),t.flags|=98560,s=!1;else if(s=bg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(He(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(He(317));s[js]=t}else Nd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jr(t),s=!1}else Yi!==null&&(z_(Yi),Yi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Xn.current&1?_r===0&&(_r=3):sN())),t.updateQueue!==null&&(t.flags|=4),Jr(t),null);case 4:return Ad(),R_(e,t),e===null&&Zh(t.stateNode.containerInfo),Jr(t),null;case 10:return WS(t.type._context),Jr(t),null;case 17:return $a(t.type)&&Vv(),Jr(t),null;case 19:if(zn(Xn),s=t.memoizedState,s===null)return Jr(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)qf(s,!1);else{if(_r!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ey(e),o!==null){for(t.flags|=128,qf(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mn(Xn,Xn.current&1|2),t.child}e=e.sibling}s.tail!==null&&lr()>Td&&(t.flags|=128,r=!0,qf(s,!1),t.lanes=4194304)}else{if(!r)if(e=ey(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Hn)return Jr(t),null}else 2*lr()-s.renderingStartTime>Td&&n!==1073741824&&(t.flags|=128,r=!0,qf(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=lr(),t.sibling=null,n=Xn.current,Mn(Xn,r?n&1|2:n&1),t):(Jr(t),null);case 22:case 23:return iN(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ja&1073741824&&(Jr(t),t.subtreeFlags&6&&(t.flags|=8192)):Jr(t),null;case 24:return null;case 25:return null}throw Error(He(156,t.tag))}function wK(e,t){switch(FS(t),t.tag){case 1:return $a(t.type)&&Vv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ad(),zn(La),zn(aa),GS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return VS(t),null;case 13:if(zn(Xn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(He(340));Nd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zn(Xn),null;case 4:return Ad(),null;case 10:return WS(t.type._context),null;case 22:case 23:return iN(),null;case 24:return null;default:return null}}var _g=!1,ea=!1,jK=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Yu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tr(e,t,r)}else n.current=null}function M_(e,t,n){try{n()}catch(r){tr(e,t,r)}}var gT=!1;function _K(e,t){if(y_=Wv,e=TL(),LS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(l=o+a),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===a&&(l=o),h===s&&++d===r&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(x_={focusedElem:e,selectionRange:n},Wv=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){t=pt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Bi(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(_){tr(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}return g=gT,gT=!1,g}function Eh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&M_(t,n,s)}a=a.next}while(a!==r)}}function zx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function D_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function N$(e){var t=e.alternate;t!==null&&(e.alternate=null,N$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[js],delete t[tm],delete t[j_],delete t[iK],delete t[sK])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function C$(e){return e.tag===5||e.tag===3||e.tag===4}function vT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||C$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function L_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kv));else if(r!==4&&(e=e.child,e!==null))for(L_(e,t,n),e=e.sibling;e!==null;)L_(e,t,n),e=e.sibling}function $_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($_(e,t,n),e=e.sibling;e!==null;)$_(e,t,n),e=e.sibling}var Ur=null,Ki=!1;function Do(e,t,n){for(n=n.child;n!==null;)A$(e,t,n),n=n.sibling}function A$(e,t,n){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Rx,n)}catch{}switch(n.tag){case 5:ea||Yu(n,t);case 6:var r=Ur,a=Ki;Ur=null,Do(e,t,n),Ur=r,Ki=a,Ur!==null&&(Ki?(e=Ur,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ur.removeChild(n.stateNode));break;case 18:Ur!==null&&(Ki?(e=Ur,n=n.stateNode,e.nodeType===8?sw(e.parentNode,n):e.nodeType===1&&sw(e,n),Xh(e)):sw(Ur,n.stateNode));break;case 4:r=Ur,a=Ki,Ur=n.stateNode.containerInfo,Ki=!0,Do(e,t,n),Ur=r,Ki=a;break;case 0:case 11:case 14:case 15:if(!ea&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&M_(n,t,o),a=a.next}while(a!==r)}Do(e,t,n);break;case 1:if(!ea&&(Yu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tr(n,t,l)}Do(e,t,n);break;case 21:Do(e,t,n);break;case 22:n.mode&1?(ea=(r=ea)||n.memoizedState!==null,Do(e,t,n),ea=r):Do(e,t,n);break;default:Do(e,t,n)}}function yT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jK),t.forEach(function(r){var a=OK.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Di(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ur=l.stateNode,Ki=!1;break e;case 3:Ur=l.stateNode.containerInfo,Ki=!0;break e;case 4:Ur=l.stateNode.containerInfo,Ki=!0;break e}l=l.return}if(Ur===null)throw Error(He(160));A$(s,o,a),Ur=null,Ki=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){tr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)E$(t,e),t=t.sibling}function E$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Di(t,e),ps(e),r&4){try{Eh(3,e,e.return),zx(3,e)}catch(v){tr(e,e.return,v)}try{Eh(5,e,e.return)}catch(v){tr(e,e.return,v)}}break;case 1:Di(t,e),ps(e),r&512&&n!==null&&Yu(n,n.return);break;case 5:if(Di(t,e),ps(e),r&512&&n!==null&&Yu(n,n.return),e.flags&32){var a=e.stateNode;try{Kh(a,"")}catch(v){tr(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&JD(a,s),l_(l,o);var u=l_(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?nL(a,f):d==="dangerouslySetInnerHTML"?eL(a,f):d==="children"?Kh(a,f):kS(a,d,f,u)}switch(l){case"input":r_(a,s);break;case"textarea":QD(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?td(a,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?td(a,!!s.multiple,s.defaultValue,!0):td(a,!!s.multiple,s.multiple?[]:"",!1))}a[tm]=s}catch(v){tr(e,e.return,v)}}break;case 6:if(Di(t,e),ps(e),r&4){if(e.stateNode===null)throw Error(He(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){tr(e,e.return,v)}}break;case 3:if(Di(t,e),ps(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xh(t.containerInfo)}catch(v){tr(e,e.return,v)}break;case 4:Di(t,e),ps(e);break;case 13:Di(t,e),ps(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(rN=lr())),r&4&&yT(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ea=(u=ea)||d,Di(t,e),ea=u):Di(t,e),ps(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(pt=e,d=e.child;d!==null;){for(f=pt=d;pt!==null;){switch(h=pt,m=h.child,h.tag){case 0:case 11:case 14:case 15:Eh(4,h,h.return);break;case 1:Yu(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){tr(r,n,v)}}break;case 5:Yu(h,h.return);break;case 22:if(h.memoizedState!==null){bT(f);continue}}m!==null?(m.return=h,pt=m):bT(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=tL("display",o))}catch(v){tr(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){tr(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Di(t,e),ps(e),r&4&&yT(e);break;case 21:break;default:Di(t,e),ps(e)}}function ps(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(C$(n)){var r=n;break e}n=n.return}throw Error(He(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Kh(a,""),r.flags&=-33);var s=vT(e);$_(e,s,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=vT(e);L_(e,l,o);break;default:throw Error(He(161))}}catch(c){tr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kK(e,t,n){pt=e,T$(e)}function T$(e,t,n){for(var r=(e.mode&1)!==0;pt!==null;){var a=pt,s=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||_g;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ea;l=_g;var u=ea;if(_g=o,(ea=c)&&!u)for(pt=a;pt!==null;)o=pt,c=o.child,o.tag===22&&o.memoizedState!==null?wT(a):c!==null?(c.return=o,pt=c):wT(a);for(;s!==null;)pt=s,T$(s),s=s.sibling;pt=a,_g=l,ea=u}xT(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,pt=s):xT(e)}}function xT(e){for(;pt!==null;){var t=pt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ea||zx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ea)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Bi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&rT(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}rT(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Xh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}ea||t.flags&512&&D_(t)}catch(h){tr(t,t.return,h)}}if(t===e){pt=null;break}if(n=t.sibling,n!==null){n.return=t.return,pt=n;break}pt=t.return}}function bT(e){for(;pt!==null;){var t=pt;if(t===e){pt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pt=n;break}pt=t.return}}function wT(e){for(;pt!==null;){var t=pt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zx(4,t)}catch(c){tr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){tr(t,a,c)}}var s=t.return;try{D_(t)}catch(c){tr(t,s,c)}break;case 5:var o=t.return;try{D_(t)}catch(c){tr(t,o,c)}}}catch(c){tr(t,t.return,c)}if(t===e){pt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pt=l;break}pt=t.return}}var SK=Math.ceil,ry=Eo.ReactCurrentDispatcher,tN=Eo.ReactCurrentOwner,Si=Eo.ReactCurrentBatchConfig,cn=0,Or=null,fr=null,qr=0,Ja=0,Xu=Ml(0),_r=0,om=null,Mc=0,Wx=0,nN=0,Th=null,Aa=null,rN=0,Td=1/0,Js=null,ay=!1,F_=null,vl=null,kg=!1,cl=null,iy=0,Ph=0,U_=null,wv=-1,jv=0;function ya(){return cn&6?lr():wv!==-1?wv:wv=lr()}function yl(e){return e.mode&1?cn&2&&qr!==0?qr&-qr:lK.transition!==null?(jv===0&&(jv=mL()),jv):(e=kn,e!==0||(e=window.event,e=e===void 0?16:wL(e.type)),e):1}function ns(e,t,n,r){if(50<Ph)throw Ph=0,U_=null,Error(He(185));vp(e,n,r),(!(cn&2)||e!==Or)&&(e===Or&&(!(cn&2)&&(Wx|=n),_r===4&&Qo(e,qr)),Fa(e,r),n===1&&cn===0&&!(t.mode&1)&&(Td=lr()+500,Fx&&Dl()))}function Fa(e,t){var n=e.callbackNode;l7(e,t);var r=zv(e,e===Or?qr:0);if(r===0)n!==null&&TE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&TE(n),t===1)e.tag===0?oK(jT.bind(null,e)):UL(jT.bind(null,e)),rK(function(){!(cn&6)&&Dl()}),n=null;else{switch(pL(r)){case 1:n=ES;break;case 4:n=fL;break;case 16:n=Bv;break;case 536870912:n=hL;break;default:n=Bv}n=$$(n,P$.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function P$(e,t){if(wv=-1,jv=0,cn&6)throw Error(He(327));var n=e.callbackNode;if(sd()&&e.callbackNode!==n)return null;var r=zv(e,e===Or?qr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=sy(e,r);else{t=r;var a=cn;cn|=2;var s=I$();(Or!==e||qr!==t)&&(Js=null,Td=lr()+500,Cc(e,t));do try{AK();break}catch(l){O$(e,l)}while(!0);zS(),ry.current=s,cn=a,fr!==null?t=0:(Or=null,qr=0,t=_r)}if(t!==0){if(t===2&&(a=h_(e),a!==0&&(r=a,t=B_(e,a))),t===1)throw n=om,Cc(e,0),Qo(e,r),Fa(e,lr()),n;if(t===6)Qo(e,r);else{if(a=e.current.alternate,!(r&30)&&!NK(a)&&(t=sy(e,r),t===2&&(s=h_(e),s!==0&&(r=s,t=B_(e,s))),t===1))throw n=om,Cc(e,0),Qo(e,r),Fa(e,lr()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(He(345));case 2:nc(e,Aa,Js);break;case 3:if(Qo(e,r),(r&130023424)===r&&(t=rN+500-lr(),10<t)){if(zv(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ya(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=w_(nc.bind(null,e,Aa,Js),t);break}nc(e,Aa,Js);break;case 4:if(Qo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-ts(r);s=1<<o,o=t[o],o>a&&(a=o),r&=~s}if(r=a,r=lr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SK(r/1960))-r,10<r){e.timeoutHandle=w_(nc.bind(null,e,Aa,Js),r);break}nc(e,Aa,Js);break;case 5:nc(e,Aa,Js);break;default:throw Error(He(329))}}}return Fa(e,lr()),e.callbackNode===n?P$.bind(null,e):null}function B_(e,t){var n=Th;return e.current.memoizedState.isDehydrated&&(Cc(e,t).flags|=256),e=sy(e,t),e!==2&&(t=Aa,Aa=n,t!==null&&z_(t)),e}function z_(e){Aa===null?Aa=e:Aa.push.apply(Aa,e)}function NK(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!ss(s(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qo(e,t){for(t&=~nN,t&=~Wx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ts(t),r=1<<n;e[n]=-1,t&=~r}}function jT(e){if(cn&6)throw Error(He(327));sd();var t=zv(e,0);if(!(t&1))return Fa(e,lr()),null;var n=sy(e,t);if(e.tag!==0&&n===2){var r=h_(e);r!==0&&(t=r,n=B_(e,r))}if(n===1)throw n=om,Cc(e,0),Qo(e,t),Fa(e,lr()),n;if(n===6)throw Error(He(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nc(e,Aa,Js),Fa(e,lr()),null}function aN(e,t){var n=cn;cn|=1;try{return e(t)}finally{cn=n,cn===0&&(Td=lr()+500,Fx&&Dl())}}function Dc(e){cl!==null&&cl.tag===0&&!(cn&6)&&sd();var t=cn;cn|=1;var n=Si.transition,r=kn;try{if(Si.transition=null,kn=1,e)return e()}finally{kn=r,Si.transition=n,cn=t,!(cn&6)&&Dl()}}function iN(){Ja=Xu.current,zn(Xu)}function Cc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nK(n)),fr!==null)for(n=fr.return;n!==null;){var r=n;switch(FS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vv();break;case 3:Ad(),zn(La),zn(aa),GS();break;case 5:VS(r);break;case 4:Ad();break;case 13:zn(Xn);break;case 19:zn(Xn);break;case 10:WS(r.type._context);break;case 22:case 23:iN()}n=n.return}if(Or=e,fr=e=xl(e.current,null),qr=Ja=t,_r=0,om=null,nN=Wx=Mc=0,Aa=Th=null,pc!==null){for(t=0;t<pc.length;t++)if(n=pc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=a,r.next=o}n.pending=r}pc=null}return e}function O$(e,t){do{var n=fr;try{if(zS(),yv.current=ny,ty){for(var r=Jn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}ty=!1}if(Rc=0,Tr=wr=Jn=null,Ah=!1,am=0,tN.current=null,n===null||n.return===null){_r=1,om=t,fr=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=qr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=cT(o);if(m!==null){m.flags&=-257,uT(m,o,l,s,t),m.mode&1&&lT(s,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){lT(s,u,t),sN();break e}c=Error(He(426))}}else if(Hn&&l.mode&1){var x=cT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),uT(x,o,l,s,t),US(Ed(c,l));break e}}s=c=Ed(c,l),_r!==4&&(_r=2),Th===null?Th=[s]:Th.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=p$(s,c,t);nT(s,y);break e;case 1:l=c;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vl===null||!vl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=g$(s,l,t);nT(s,_);break e}}s=s.return}while(s!==null)}M$(n)}catch(k){t=k,fr===n&&n!==null&&(fr=n=n.return);continue}break}while(!0)}function I$(){var e=ry.current;return ry.current=ny,e===null?ny:e}function sN(){(_r===0||_r===3||_r===2)&&(_r=4),Or===null||!(Mc&268435455)&&!(Wx&268435455)||Qo(Or,qr)}function sy(e,t){var n=cn;cn|=2;var r=I$();(Or!==e||qr!==t)&&(Js=null,Cc(e,t));do try{CK();break}catch(a){O$(e,a)}while(!0);if(zS(),cn=n,ry.current=r,fr!==null)throw Error(He(261));return Or=null,qr=0,_r}function CK(){for(;fr!==null;)R$(fr)}function AK(){for(;fr!==null&&!ZH();)R$(fr)}function R$(e){var t=L$(e.alternate,e,Ja);e.memoizedProps=e.pendingProps,t===null?M$(e):fr=t,tN.current=null}function M$(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wK(n,t),n!==null){n.flags&=32767,fr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_r=6,fr=null;return}}else if(n=bK(n,t,Ja),n!==null){fr=n;return}if(t=t.sibling,t!==null){fr=t;return}fr=t=e}while(t!==null);_r===0&&(_r=5)}function nc(e,t,n){var r=kn,a=Si.transition;try{Si.transition=null,kn=1,EK(e,t,n,r)}finally{Si.transition=a,kn=r}return null}function EK(e,t,n,r){do sd();while(cl!==null);if(cn&6)throw Error(He(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(He(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(c7(e,s),e===Or&&(fr=Or=null,qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kg||(kg=!0,$$(Bv,function(){return sd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Si.transition,Si.transition=null;var o=kn;kn=1;var l=cn;cn|=4,tN.current=null,_K(e,n),E$(n,e),Y7(x_),Wv=!!y_,x_=y_=null,e.current=n,kK(n),e7(),cn=l,kn=o,Si.transition=s}else e.current=n;if(kg&&(kg=!1,cl=e,iy=a),s=e.pendingLanes,s===0&&(vl=null),r7(n.stateNode),Fa(e,lr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ay)throw ay=!1,e=F_,F_=null,e;return iy&1&&e.tag!==0&&sd(),s=e.pendingLanes,s&1?e===U_?Ph++:(Ph=0,U_=e):Ph=0,Dl(),null}function sd(){if(cl!==null){var e=pL(iy),t=Si.transition,n=kn;try{if(Si.transition=null,kn=16>e?16:e,cl===null)var r=!1;else{if(e=cl,cl=null,iy=0,cn&6)throw Error(He(331));var a=cn;for(cn|=4,pt=e.current;pt!==null;){var s=pt,o=s.child;if(pt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(pt=u;pt!==null;){var d=pt;switch(d.tag){case 0:case 11:case 15:Eh(8,d,s)}var f=d.child;if(f!==null)f.return=d,pt=f;else for(;pt!==null;){d=pt;var h=d.sibling,m=d.return;if(N$(d),d===u){pt=null;break}if(h!==null){h.return=m,pt=h;break}pt=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}pt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,pt=o;else e:for(;pt!==null;){if(s=pt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,pt=y;break e}pt=s.return}}var w=e.current;for(pt=w;pt!==null;){o=pt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,pt=b;else e:for(o=w;pt!==null;){if(l=pt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zx(9,l)}}catch(k){tr(l,l.return,k)}if(l===o){pt=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,pt=_;break e}pt=l.return}}if(cn=a,Dl(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Rx,e)}catch{}r=!0}return r}finally{kn=n,Si.transition=t}}return!1}function _T(e,t,n){t=Ed(n,t),t=p$(e,t,1),e=gl(e,t,1),t=ya(),e!==null&&(vp(e,1,t),Fa(e,t))}function tr(e,t,n){if(e.tag===3)_T(e,e,n);else for(;t!==null;){if(t.tag===3){_T(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vl===null||!vl.has(r))){e=Ed(n,e),e=g$(t,e,1),t=gl(t,e,1),e=ya(),t!==null&&(vp(t,1,e),Fa(t,e));break}}t=t.return}}function TK(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ya(),e.pingedLanes|=e.suspendedLanes&n,Or===e&&(qr&n)===n&&(_r===4||_r===3&&(qr&130023424)===qr&&500>lr()-rN?Cc(e,0):nN|=n),Fa(e,t)}function D$(e,t){t===0&&(e.mode&1?(t=mg,mg<<=1,!(mg&130023424)&&(mg=4194304)):t=1);var n=ya();e=bo(e,t),e!==null&&(vp(e,t,n),Fa(e,n))}function PK(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),D$(e,n)}function OK(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(He(314))}r!==null&&r.delete(t),D$(e,n)}var L$;L$=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||La.current)Ra=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ra=!1,xK(e,t,n);Ra=!!(e.flags&131072)}else Ra=!1,Hn&&t.flags&1048576&&BL(t,Xv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bv(e,t),e=t.pendingProps;var a=Sd(t,aa.current);id(t,n),a=XS(null,t,r,e,a,n);var s=JS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$a(r)?(s=!0,Gv(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,HS(t),a.updater=Bx,t.stateNode=a,a._reactInternals=t,A_(t,r,e,n),t=P_(null,t,r,!0,s,n)):(t.tag=0,Hn&&s&&$S(t),fa(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=RK(r),e=Bi(r,e),a){case 0:t=T_(null,t,r,e,n);break e;case 1:t=hT(null,t,r,e,n);break e;case 11:t=dT(null,t,r,e,n);break e;case 14:t=fT(null,t,r,Bi(r.type,e),n);break e}throw Error(He(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),T_(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),hT(e,t,r,a,n);case 3:e:{if(b$(t),e===null)throw Error(He(387));r=t.pendingProps,s=t.memoizedState,a=s.element,VL(e,t),Zv(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=Ed(Error(He(423)),t),t=mT(e,t,r,n,a);break e}else if(r!==a){a=Ed(Error(He(424)),t),t=mT(e,t,r,n,a);break e}else for(ti=pl(t.stateNode.containerInfo.firstChild),ni=t,Hn=!0,Yi=null,n=HL(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nd(),r===a){t=wo(e,t,n);break e}fa(e,t,r,n)}t=t.child}return t;case 5:return GL(t),e===null&&S_(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,b_(r,a)?o=null:s!==null&&b_(r,s)&&(t.flags|=32),x$(e,t),fa(e,t,o,n),t.child;case 6:return e===null&&S_(t),null;case 13:return w$(e,t,n);case 4:return KS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Cd(t,null,r,n):fa(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),dT(e,t,r,a,n);case 7:return fa(e,t,t.pendingProps,n),t.child;case 8:return fa(e,t,t.pendingProps.children,n),t.child;case 12:return fa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Mn(Jv,r._currentValue),r._currentValue=o,s!==null)if(ss(s.value,o)){if(s.children===a.children&&!La.current){t=wo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=uo(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),N_(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(He(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),N_(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fa(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,id(t,n),a=Ei(a),r=r(a),t.flags|=1,fa(e,t,r,n),t.child;case 14:return r=t.type,a=Bi(r,t.pendingProps),a=Bi(r.type,a),fT(e,t,r,a,n);case 15:return v$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),bv(e,t),t.tag=1,$a(r)?(e=!0,Gv(t)):e=!1,id(t,n),m$(t,r,a),A_(t,r,a,n),P_(null,t,r,!0,e,n);case 19:return j$(e,t,n);case 22:return y$(e,t,n)}throw Error(He(156,t.tag))};function $$(e,t){return dL(e,t)}function IK(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(e,t,n,r){return new IK(e,t,n,r)}function oN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RK(e){if(typeof e=="function")return oN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===NS)return 11;if(e===CS)return 14}return 2}function xl(e,t){var n=e.alternate;return n===null?(n=_i(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _v(e,t,n,r,a,s){var o=2;if(r=e,typeof e=="function")oN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Uu:return Ac(n.children,a,s,t);case SS:o=8,a|=8;break;case Qj:return e=_i(12,n,t,a|2),e.elementType=Qj,e.lanes=s,e;case Zj:return e=_i(13,n,t,a),e.elementType=Zj,e.lanes=s,e;case e_:return e=_i(19,n,t,a),e.elementType=e_,e.lanes=s,e;case GD:return qx(n,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case KD:o=10;break e;case VD:o=9;break e;case NS:o=11;break e;case CS:o=14;break e;case Go:o=16,r=null;break e}throw Error(He(130,e==null?e:typeof e,""))}return t=_i(o,n,t,a),t.elementType=e,t.type=r,t.lanes=s,t}function Ac(e,t,n,r){return e=_i(7,e,r,t),e.lanes=n,e}function qx(e,t,n,r){return e=_i(22,e,r,t),e.elementType=GD,e.lanes=n,e.stateNode={isHidden:!1},e}function mw(e,t,n){return e=_i(6,e,null,t),e.lanes=n,e}function pw(e,t,n){return t=_i(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MK(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y0(0),this.expirationTimes=Y0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function lN(e,t,n,r,a,s,o,l,c){return e=new MK(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=_i(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HS(s),e}function DK(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function F$(e){if(!e)return Sl;e=e._reactInternals;e:{if(eu(e)!==e||e.tag!==1)throw Error(He(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($a(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(He(171))}if(e.tag===1){var n=e.type;if($a(n))return FL(e,n,t)}return t}function U$(e,t,n,r,a,s,o,l,c){return e=lN(n,r,!0,e,a,s,o,l,c),e.context=F$(null),n=e.current,r=ya(),a=yl(n),s=uo(r,a),s.callback=t??null,gl(n,s,a),e.current.lanes=a,vp(e,a,r),Fa(e,r),e}function Hx(e,t,n,r){var a=t.current,s=ya(),o=yl(a);return n=F$(n),t.context===null?t.context=n:t.pendingContext=n,t=uo(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gl(a,t,o),e!==null&&(ns(e,a,o,s),vv(e,a,o)),o}function oy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cN(e,t){kT(e,t),(e=e.alternate)&&kT(e,t)}function LK(){return null}var B$=typeof reportError=="function"?reportError:function(e){console.error(e)};function uN(e){this._internalRoot=e}Kx.prototype.render=uN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(He(409));Hx(e,t,null,null)};Kx.prototype.unmount=uN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dc(function(){Hx(null,e,null,null)}),t[xo]=null}};function Kx(e){this._internalRoot=e}Kx.prototype.unstable_scheduleHydration=function(e){if(e){var t=yL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jo.length&&t!==0&&t<Jo[n].priority;n++);Jo.splice(n,0,e),n===0&&bL(e)}};function dN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ST(){}function $K(e,t,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var u=oy(o);s.call(u)}}var o=U$(t,r,e,0,null,!1,!1,"",ST);return e._reactRootContainer=o,e[xo]=o.current,Zh(e.nodeType===8?e.parentNode:e),Dc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=oy(c);l.call(u)}}var c=lN(e,0,!1,null,null,!1,!1,"",ST);return e._reactRootContainer=c,e[xo]=c.current,Zh(e.nodeType===8?e.parentNode:e),Dc(function(){Hx(t,c,n,r)}),c}function Gx(e,t,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=oy(o);l.call(c)}}Hx(t,o,e,a)}else o=$K(n,t,e,a,r);return oy(o)}gL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gh(t.pendingLanes);n!==0&&(TS(t,n|1),Fa(t,lr()),!(cn&6)&&(Td=lr()+500,Dl()))}break;case 13:Dc(function(){var r=bo(e,1);if(r!==null){var a=ya();ns(r,e,1,a)}}),cN(e,1)}};PS=function(e){if(e.tag===13){var t=bo(e,134217728);if(t!==null){var n=ya();ns(t,e,134217728,n)}cN(e,134217728)}};vL=function(e){if(e.tag===13){var t=yl(e),n=bo(e,t);if(n!==null){var r=ya();ns(n,e,t,r)}cN(e,t)}};yL=function(){return kn};xL=function(e,t){var n=kn;try{return kn=e,t()}finally{kn=n}};u_=function(e,t,n){switch(t){case"input":if(r_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=$x(r);if(!a)throw Error(He(90));XD(r),r_(r,a)}}}break;case"textarea":QD(e,n);break;case"select":t=n.value,t!=null&&td(e,!!n.multiple,t,!1)}};iL=aN;sL=Dc;var FK={usingClientEntryPoint:!1,Events:[xp,qu,$x,rL,aL,aN]},Hf={findFiberByHostInstance:mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UK={bundleType:Hf.bundleType,version:Hf.version,rendererPackageName:Hf.rendererPackageName,rendererConfig:Hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cL(e),e===null?null:e.stateNode},findFiberByHostInstance:Hf.findFiberByHostInstance||LK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sg.isDisabled&&Sg.supportsFiber)try{Rx=Sg.inject(UK),Ts=Sg}catch{}}oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FK;oi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dN(t))throw Error(He(200));return DK(e,t,null,n)};oi.createRoot=function(e,t){if(!dN(e))throw Error(He(299));var n=!1,r="",a=B$;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=lN(e,1,!1,null,null,n,!1,r,a),e[xo]=t.current,Zh(e.nodeType===8?e.parentNode:e),new uN(t)};oi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(He(188)):(e=Object.keys(e).join(","),Error(He(268,e)));return e=cL(t),e=e===null?null:e.stateNode,e};oi.flushSync=function(e){return Dc(e)};oi.hydrate=function(e,t,n){if(!Vx(t))throw Error(He(200));return Gx(null,e,t,!0,n)};oi.hydrateRoot=function(e,t,n){if(!dN(e))throw Error(He(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",o=B$;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=U$(t,null,e,1,n??null,a,!1,s,o),e[xo]=t.current,Zh(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kx(t)};oi.render=function(e,t,n){if(!Vx(t))throw Error(He(200));return Gx(null,e,t,!1,n)};oi.unmountComponentAtNode=function(e){if(!Vx(e))throw Error(He(40));return e._reactRootContainer?(Dc(function(){Gx(null,null,e,!1,function(){e._reactRootContainer=null,e[xo]=null})}),!0):!1};oi.unstable_batchedUpdates=aN;oi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Vx(n))throw Error(He(200));if(e==null||e._reactInternals===void 0)throw Error(He(38));return Gx(e,t,n,!1,r)};oi.version="18.3.1-next-f1338f8080-20240426";function z$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z$)}catch(e){console.error(e)}}z$(),zD.exports=oi;var tu=zD.exports;const W$=jn(tu);var q$,NT=tu;q$=NT.createRoot,NT.hydrateRoot;const BK=1,zK=1e6;let gw=0;function WK(){return gw=(gw+1)%Number.MAX_SAFE_INTEGER,gw.toString()}const vw=new Map,CT=e=>{if(vw.has(e))return;const t=setTimeout(()=>{vw.delete(e),Oh({type:"REMOVE_TOAST",toastId:e})},zK);vw.set(e,t)},qK=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,BK)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?CT(n):e.toasts.forEach(r=>{CT(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},kv=[];let Sv={toasts:[]};function Oh(e){Sv=qK(Sv,e),kv.forEach(t=>{t(Sv)})}function HK({...e}){const t=WK(),n=a=>Oh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Oh({type:"DISMISS_TOAST",toastId:t});return Oh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function nu(){const[e,t]=p.useState(Sv);return p.useEffect(()=>(kv.push(t),()=>{const n=kv.indexOf(t);n>-1&&kv.splice(n,1)}),[e]),{...e,toast:HK,dismiss:n=>Oh({type:"DISMISS_TOAST",toastId:n})}}function qe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function AT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function jo(...e){return t=>{let n=!1;const r=e.map(a=>{const s=AT(a,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let a=0;a<r.length;a++){const s=r[a];typeof s=="function"?s():AT(e[a],null)}}}}function Mt(...e){return p.useCallback(jo(...e),e)}function KK(e,t){const n=p.createContext(t),r=s=>{const{children:o,...l}=s,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(s){const o=p.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,a]}function Rr(e,t=[]){let n=[];function r(s,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=f=>{var y;const{scope:h,children:m,...g}=f,v=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=s+"Provider";function d(f,h){var v;const m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const a=()=>{const s=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,VK(a,...t)]}function VK(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Nl(e){const t=GK(e),n=p.forwardRef((r,a)=>{const{children:s,...o}=r,l=p.Children.toArray(s),c=l.find(YK);if(c){const u=c.props.children,d=l.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:a,children:s})});return n.displayName=`${e}.Slot`,n}var fN=Nl("Slot");function GK(e){const t=p.forwardRef((n,r)=>{const{children:a,...s}=n;if(p.isValidElement(a)){const o=JK(a),l=XK(s,a.props);return a.type!==p.Fragment&&(l.ref=r?jo(r,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var H$=Symbol("radix.slottable");function K$(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=H$,t}function YK(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===H$}function XK(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}function JK(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function wp(e){const t=e+"CollectionProvider",[n,r]=Rr(t),[a,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:y}=v,w=Y.useRef(null),b=Y.useRef(new Map).current;return i.jsx(a,{scope:x,itemMap:b,collectionRef:w,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=Nl(l),u=Y.forwardRef((v,x)=>{const{scope:y,children:w}=v,b=s(l,y),_=Mt(x,b.collectionRef);return i.jsx(c,{ref:_,children:w})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Nl(d),m=Y.forwardRef((v,x)=>{const{scope:y,children:w,...b}=v,_=Y.useRef(null),k=Mt(x,_),j=s(d,y);return Y.useEffect(()=>(j.itemMap.set(_,{ref:_,...b}),()=>void j.itemMap.delete(_))),i.jsx(h,{[f]:"",ref:k,children:w})});m.displayName=d;function g(v){const x=s(e+"CollectionConsumer",v);return Y.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((j,S)=>b.indexOf(j.ref.current)-b.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,r]}var QK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=QK.reduce((e,t)=>{const n=Nl(`Primitive.${t}`),r=p.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function hN(e,t){e&&tu.flushSync(()=>e.dispatchEvent(t))}function rr(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function ZK(e,t=globalThis==null?void 0:globalThis.document){const n=rr(e);p.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var eV="DismissableLayer",W_="dismissableLayer.update",tV="dismissableLayer.pointerDownOutside",nV="dismissableLayer.focusOutside",ET,V$=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ru=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(V$),[d,f]=p.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=Mt(t,S=>f(S)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=d?v.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=w>=y,k=aV(S=>{const O=S.target,I=[...u.branches].some(P=>P.contains(O));!_||I||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),j=iV(S=>{const O=S.target;[...u.branches].some(P=>P.contains(O))||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return ZK(S=>{w===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ET=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),TT(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ET)}},[d,h,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),TT())},[d,u]),p.useEffect(()=>{const S=()=>m({});return document.addEventListener(W_,S),()=>document.removeEventListener(W_,S)},[]),i.jsx(st.div,{...c,ref:g,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:qe(e.onFocusCapture,j.onFocusCapture),onBlurCapture:qe(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:qe(e.onPointerDownCapture,k.onPointerDownCapture)})});ru.displayName=eV;var rV="DismissableLayerBranch",G$=p.forwardRef((e,t)=>{const n=p.useContext(V$),r=p.useRef(null),a=Mt(t,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),i.jsx(st.div,{...e,ref:a})});G$.displayName=rV;function aV(e,t=globalThis==null?void 0:globalThis.document){const n=rr(e),r=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){Y$(tV,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function iV(e,t=globalThis==null?void 0:globalThis.document){const n=rr(e),r=p.useRef(!1);return p.useEffect(()=>{const a=s=>{s.target&&!r.current&&Y$(nV,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TT(){const e=new CustomEvent(W_);document.dispatchEvent(e)}function Y$(e,t,n,{discrete:r}){const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?hN(a,s):a.dispatchEvent(s)}var sV=ru,oV=G$,ar=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},lV="Portal",hf=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,s]=p.useState(!1);ar(()=>s(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?W$.createPortal(i.jsx(st.div,{...r,ref:t}),o):null});hf.displayName=lV;function cV(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var Sr=e=>{const{present:t,children:n}=e,r=uV(t),a=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=Mt(r.ref,dV(a));return typeof n=="function"||r.isPresent?p.cloneElement(a,{ref:s}):null};Sr.displayName="Presence";function uV(e){const[t,n]=p.useState(),r=p.useRef(null),a=p.useRef(e),s=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=cV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Ng(r.current);s.current=l==="mounted"?u:"none"},[l]),ar(()=>{const u=r.current,d=a.current;if(d!==e){const h=s.current,m=Ng(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ar(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const v=Ng(r.current).includes(m.animationName);if(m.target===t&&v&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(s.current=Ng(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ng(e){return(e==null?void 0:e.animationName)||"none"}function dV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var fV=wS[" useInsertionEffect ".trim().toString()]||ar;function Ba({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,s,o]=hV({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=p.useCallback(d=>{var f;if(l){const h=mV(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else s(d)},[l,e,s,o]);return[c,u]}function hV({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),a=p.useRef(n),s=p.useRef(t);return fV(()=>{s.current=t},[t]),p.useEffect(()=>{var o;a.current!==n&&((o=s.current)==null||o.call(s,n),a.current=n)},[n,a]),[n,r,s]}function mV(e){return typeof e=="function"}var X$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pV="VisuallyHidden",Yx=p.forwardRef((e,t)=>i.jsx(st.span,{...e,ref:t,style:{...X$,...e.style}}));Yx.displayName=pV;var gV=Yx,mN="ToastProvider",[pN,vV,yV]=wp("Toast"),[J$,u5e]=Rr("Toast",[yV]),[xV,Xx]=J$(mN),Q$=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),f=p.useRef(!1),h=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${mN}\`. Expected non-empty \`string\`.`),i.jsx(pN.Provider,{scope:t,children:i.jsx(xV,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};Q$.displayName=mN;var Z$="ToastViewport",bV=["F8"],q_="toast.viewportPause",H_="toast.viewportResume",e4=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=bV,label:a="Notifications ({hotkey})",...s}=e,o=Xx(Z$,n),l=vV(n),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),f=p.useRef(null),h=Mt(t,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const x=y=>{var b;r.length!==0&&r.every(_=>y[_]||y.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,y=f.current;if(g&&x&&y){const w=()=>{if(!o.isClosePausedRef.current){const j=new CustomEvent(q_);y.dispatchEvent(j),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const j=new CustomEvent(H_);y.dispatchEvent(j),o.isClosePausedRef.current=!1}},_=j=>{!x.contains(j.relatedTarget)&&b()},k=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",w),x.addEventListener("focusout",_),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",k),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",_),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",k),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const w=l().map(b=>{const _=b.ref.current,k=[_,...IV(_)];return x==="forwards"?k:k.reverse()});return(x==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const x=f.current;if(x){const y=w=>{var k,j,S;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const O=document.activeElement,I=w.shiftKey;if(w.target===x&&I){(k=u.current)==null||k.focus();return}const D=v({tabbingDirection:I?"backwards":"forwards"}),$=D.findIndex(U=>U===O);yw(D.slice($+1))?w.preventDefault():I?(j=u.current)==null||j.focus():(S=d.current)==null||S.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(oV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(K_,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});yw(x)}}),i.jsx(pN.Slot,{scope:n,children:i.jsx(st.ol,{tabIndex:-1,...s,ref:h})}),g&&i.jsx(K_,{ref:d,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});yw(x)}})]})});e4.displayName=Z$;var t4="ToastFocusProxy",K_=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,s=Xx(t4,n);return i.jsx(Yx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&r()}})});K_.displayName=t4;var jp="Toast",wV="toast.swipeStart",jV="toast.swipeMove",_V="toast.swipeCancel",kV="toast.swipeEnd",n4=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s,...o}=e,[l,c]=Ba({prop:r,defaultProp:a??!0,onChange:s,caller:jp});return i.jsx(Sr,{present:n||l,children:i.jsx(CV,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:rr(e.onPause),onResume:rr(e.onResume),onSwipeStart:qe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qe(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:qe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qe(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});n4.displayName=jp;var[SV,NV]=J$(jp,{onClose(){}}),CV=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Xx(jp,n),[x,y]=p.useState(null),w=Mt(t,U=>y(U)),b=p.useRef(null),_=p.useRef(null),k=a||v.duration,j=p.useRef(0),S=p.useRef(k),O=p.useRef(0),{onToastAdd:I,onToastRemove:P}=v,N=rr(()=>{var F;(x==null?void 0:x.contains(document.activeElement))&&((F=v.viewport)==null||F.focus()),o()}),D=p.useCallback(U=>{!U||U===1/0||(window.clearTimeout(O.current),j.current=new Date().getTime(),O.current=window.setTimeout(N,U))},[N]);p.useEffect(()=>{const U=v.viewport;if(U){const F=()=>{D(S.current),u==null||u()},M=()=>{const T=new Date().getTime()-j.current;S.current=S.current-T,window.clearTimeout(O.current),c==null||c()};return U.addEventListener(q_,M),U.addEventListener(H_,F),()=>{U.removeEventListener(q_,M),U.removeEventListener(H_,F)}}},[v.viewport,k,c,u,D]),p.useEffect(()=>{s&&!v.isClosePausedRef.current&&D(k)},[s,k,v.isClosePausedRef,D]),p.useEffect(()=>(I(),()=>P()),[I,P]);const $=p.useMemo(()=>x?c4(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[$&&i.jsx(AV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),i.jsx(SV,{scope:n,onClose:N,children:tu.createPortal(i.jsx(pN.ItemSlot,{scope:n,children:i.jsx(sV,{asChild:!0,onEscapeKeyDown:qe(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||N(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:qe(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:qe(e.onPointerDown,U=>{U.button===0&&(b.current={x:U.clientX,y:U.clientY})}),onPointerMove:qe(e.onPointerMove,U=>{if(!b.current)return;const F=U.clientX-b.current.x,M=U.clientY-b.current.y,T=!!_.current,A=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,E=A?L(0,F):0,B=A?0:L(0,M),R=U.pointerType==="touch"?10:2,C={x:E,y:B},q={originalEvent:U,delta:C};T?(_.current=C,Cg(jV,f,q,{discrete:!1})):PT(C,v.swipeDirection,R)?(_.current=C,Cg(wV,d,q,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(F)>R||Math.abs(M)>R)&&(b.current=null)}),onPointerUp:qe(e.onPointerUp,U=>{const F=_.current,M=U.target;if(M.hasPointerCapture(U.pointerId)&&M.releasePointerCapture(U.pointerId),_.current=null,b.current=null,F){const T=U.currentTarget,A={originalEvent:U,delta:F};PT(F,v.swipeDirection,v.swipeThreshold)?Cg(kV,m,A,{discrete:!0}):Cg(_V,h,A,{discrete:!0}),T.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),AV=e=>{const{__scopeToast:t,children:n,...r}=e,a=Xx(jp,t),[s,o]=p.useState(!1),[l,c]=p.useState(!1);return PV(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(hf,{asChild:!0,children:i.jsx(Yx,{...r,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",n]})})})},EV="ToastTitle",r4=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(st.div,{...r,ref:t})});r4.displayName=EV;var TV="ToastDescription",a4=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(st.div,{...r,ref:t})});a4.displayName=TV;var i4="ToastAction",s4=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(l4,{altText:n,asChild:!0,children:i.jsx(gN,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${i4}\`. Expected non-empty \`string\`.`),null)});s4.displayName=i4;var o4="ToastClose",gN=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=NV(o4,n);return i.jsx(l4,{asChild:!0,children:i.jsx(st.button,{type:"button",...r,ref:t,onClick:qe(e.onClick,a.onClose)})})});gN.displayName=o4;var l4=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return i.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function c4(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),OV(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...c4(r))}}),t}function Cg(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?hN(a,s):a.dispatchEvent(s)}var PT=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return t==="left"||t==="right"?s&&r>n:!s&&a>n};function PV(e=()=>{}){const t=rr(e);ar(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function OV(e){return e.nodeType===e.ELEMENT_NODE}function IV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function yw(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var RV=Q$,u4=e4,d4=n4,f4=r4,h4=a4,m4=s4,p4=gN;function g4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=g4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function un(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=g4(e))&&(r&&(r+=" "),r+=t);return r}const OT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,IT=un,_p=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return IT(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],f=s==null?void 0:s[u];if(d===null)return null;const h=OT(d)||OT(f);return a[u][h]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...l}[v]):{...s,...l}[v]===x})?[...u,f,h]:u},[]);return IT(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...DV,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:v4("lucide",a),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=(e,t)=>{const n=p.forwardRef(({className:r,...a},s)=>p.createElement(LV,{ref:s,iconNode:t,className:v4(`lucide-${MV(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=rt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=rt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=rt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=rt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=rt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=rt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=rt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=rt("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=rt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=rt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=rt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=rt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=rt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=rt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=rt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=rt("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=rt("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=rt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=rt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=rt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=rt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=rt("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=rt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=rt("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=rt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=rt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=rt("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=rt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=rt("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=rt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=rt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=rt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=rt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=rt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=rt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=rt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=rt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=rt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=rt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=rt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=rt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=rt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=rt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=rt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=rt("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=rt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=rt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=rt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=rt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=rt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=rt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=rt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=rt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=rt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=rt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=rt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=rt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=rt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=rt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=rt("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=rt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=rt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=rt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=rt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),jN="-",nG=e=>{const t=aG(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(jN);return l[0]===""&&l.length!==1&&l.shift(),T4(l,t)||rG(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},T4=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?T4(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(jN);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},HT=/^\[(.+)\]$/,rG=e=>{if(HT.test(e)){const t=HT.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},aG=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return sG(Object.entries(e.classGroups),n).forEach(([s,o])=>{V_(o,r,s,t)}),r},V_=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:KT(t,a);s.classGroupId=n;return}if(typeof a=="function"){if(iG(a)){V_(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([s,o])=>{V_(o,KT(t,s),n,r)})})},KT=(e,t)=>{let n=e;return t.split(jN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},iG=e=>e.isThemeGetter,sG=(e,t)=>t?e.map(([n,r])=>{const a=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[n,a]}):e,oG=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return a(s,o),o},set(s,o){n.has(s)?n.set(s,o):a(s,o)}}},P4="!",lG=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===a&&(r||l.slice(x,x+s)===t)){c.push(l.slice(d,x)),d=x+s;continue}if(y==="/"){f=x;continue}}y==="["?u++:y==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(P4),g=m?h.substring(1):h,v=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},cG=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},uG=e=>({cache:oG(e.cacheSize),parseClassName:lG(e),...nG(e)}),dG=/\s+/,fG=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(dG);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(h),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const x=cG(d).join(":"),y=f?x+P4:x,w=y+v;if(s.includes(w))continue;s.push(w);const b=a(v,g);for(let _=0;_<b.length;++_){const k=b[_];s.push(y+k)}l=u+(l.length>0?" "+l:l)}return l};function hG(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=O4(t))&&(r&&(r+=" "),r+=n);return r}const O4=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=O4(e[r]))&&(n&&(n+=" "),n+=t);return n};function mG(e,...t){let n,r,a,s=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return n=uG(u),r=n.cache.get,a=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=fG(c,n);return a(c,d),d}return function(){return s(hG.apply(null,arguments))}}const $n=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},I4=/^\[(?:([a-z-]+):)?(.+)\]$/i,pG=/^\d+\/\d+$/,gG=new Set(["px","full","screen"]),vG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ks=e=>od(e)||gG.has(e)||pG.test(e),Uo=e=>pf(e,"length",EG),od=e=>!!e&&!Number.isNaN(Number(e)),bw=e=>pf(e,"number",od),Vf=e=>!!e&&Number.isInteger(Number(e)),jG=e=>e.endsWith("%")&&od(e.slice(0,-1)),Wt=e=>I4.test(e),Bo=e=>vG.test(e),_G=new Set(["length","size","percentage"]),kG=e=>pf(e,_G,R4),SG=e=>pf(e,"position",R4),NG=new Set(["image","url"]),CG=e=>pf(e,NG,PG),AG=e=>pf(e,"",TG),Gf=()=>!0,pf=(e,t,n)=>{const r=I4.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},EG=e=>yG.test(e)&&!xG.test(e),R4=()=>!1,TG=e=>bG.test(e),PG=e=>wG.test(e),OG=()=>{const e=$n("colors"),t=$n("spacing"),n=$n("blur"),r=$n("brightness"),a=$n("borderColor"),s=$n("borderRadius"),o=$n("borderSpacing"),l=$n("borderWidth"),c=$n("contrast"),u=$n("grayscale"),d=$n("hueRotate"),f=$n("invert"),h=$n("gap"),m=$n("gradientColorStops"),g=$n("gradientColorStopPositions"),v=$n("inset"),x=$n("margin"),y=$n("opacity"),w=$n("padding"),b=$n("saturate"),_=$n("scale"),k=$n("sepia"),j=$n("skew"),S=$n("space"),O=$n("translate"),I=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Wt,t],D=()=>[Wt,t],$=()=>["",Ks,Uo],U=()=>["auto",od,Wt],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],T=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Wt],E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[od,Wt];return{cacheSize:500,separator:":",theme:{colors:[Gf],spacing:[Ks,Uo],blur:["none","",Bo,Wt],brightness:B(),borderColor:[e],borderRadius:["none","","full",Bo,Wt],borderSpacing:D(),borderWidth:$(),contrast:B(),grayscale:L(),hueRotate:B(),invert:L(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[jG,Uo],inset:N(),margin:N(),opacity:B(),padding:D(),saturate:B(),scale:B(),sepia:L(),skew:B(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Wt]}],container:["container"],columns:[{columns:[Bo]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Wt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vf,Wt]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wt]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Vf,Wt]}],"grid-cols":[{"grid-cols":[Gf]}],"col-start-end":[{col:["auto",{span:["full",Vf,Wt]},Wt]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Gf]}],"row-start-end":[{row:["auto",{span:[Vf,Wt]},Wt]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wt,t]}],"min-w":[{"min-w":[Wt,t,"min","max","fit"]}],"max-w":[{"max-w":[Wt,t,"none","full","min","max","fit","prose",{screen:[Bo]},Bo]}],h:[{h:[Wt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Bo,Uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bw]}],"font-family":[{font:[Gf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wt]}],"line-clamp":[{"line-clamp":["none",od,bw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ks,Wt]}],"list-image":[{"list-image":["none",Wt]}],"list-style-type":[{list:["none","disc","decimal",Wt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ks,Uo]}],"underline-offset":[{"underline-offset":["auto",Ks,Wt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),SG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},CG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[Ks,Wt]}],"outline-w":[{outline:[Ks,Uo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ks,Uo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Bo,AG]}],"shadow-color":[{shadow:[Gf]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...T(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":T()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Bo,Wt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wt]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Wt]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Vf,Wt]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ks,Uo,bw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},IG=mG(OG);function Pe(...e){return IG(un(e))}function RG(e,t){if(!t||t.length===0)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(l=>n.map(c=>{const u=l[c],d=u==null?"":String(u),f='"'+d.replace(/"/g,'""')+'"';return/[",\n]/.test(d)?f:d}).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(a);s.setAttribute("href",o),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function M4(e){if(typeof e=="string"){let t=e.replace(/([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.[A-Z]{2,}/gi,"***@***");return t=t.replace(/\b\+?\d[\d\s-]{6,}\b/g,n=>n.slice(0,Math.max(0,n.length-4)).replace(/\d/g,"*")+n.slice(-4)),t=t.replace(/(\d+\.\d+\.\d+)\.\d+/g,"$1.*"),t}if(e&&typeof e=="object"){const t=Array.isArray(e)?[]:{};for(const n of Object.keys(e))t[n]=M4(e[n]);return t}return e}function D4(e){return e?e.replace(/\*\*(.+?)\*\*/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/__(.+?)__/g,"$1").replace(/_(.+?)_/g,"$1").replace(/~~(.+?)~~/g,"$1").replace(/`(.+?)`/g,"$1").replace(/\[(.+?)\]\([^)]+\)/g,"$1").replace(/^#{1,6}\s+/gm,"").trim():""}function uy(e){if(!e)return!1;const t=e.split("?")[0].split("#")[0];return/\.(jpg|jpeg|png|webp|avif|gif|svg)$/i.test(t)?!0:[/https?:\/\/picsum\.photos\//,/https?:\/\/placehold\.co\//,/https?:\/\/via\.placeholder\.com\//].some(r=>r.test(e))}function L4(e){if(!e)return[];const t=/https?:\/\/[^\s]+/g,n=e.match(t);if(!n)return[];const r=n.map(a=>a.replace(/[.,)\]}]+$/,""));return Array.from(new Set(r))}const MG=RV,$4=p.forwardRef(({className:e,...t},n)=>i.jsx(u4,{ref:n,className:Pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));$4.displayName=u4.displayName;const DG=_p("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),F4=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(d4,{ref:r,className:Pe(DG({variant:t}),e),...n}));F4.displayName=d4.displayName;const LG=p.forwardRef(({className:e,...t},n)=>i.jsx(m4,{ref:n,className:Pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));LG.displayName=m4.displayName;const U4=p.forwardRef(({className:e,...t},n)=>i.jsx(p4,{ref:n,className:Pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(mf,{className:"h-4 w-4"})}));U4.displayName=p4.displayName;const B4=p.forwardRef(({className:e,...t},n)=>i.jsx(f4,{ref:n,className:Pe("text-sm font-semibold",e),...t}));B4.displayName=f4.displayName;const z4=p.forwardRef(({className:e,...t},n)=>i.jsx(h4,{ref:n,className:Pe("text-sm opacity-90",e),...t}));z4.displayName=h4.displayName;function $G(){const{toasts:e}=nu();return i.jsxs(MG,{children:[e.map(function({id:t,title:n,description:r,action:a,...s}){return i.jsxs(F4,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(B4,{children:n}),r&&i.jsx(z4,{children:r})]}),a,i.jsx(U4,{})]},t)}),i.jsx($4,{})]})}var VT=["light","dark"],FG="(prefers-color-scheme: dark)",UG=p.createContext(void 0),BG={setTheme:e=>{},themes:[]},zG=()=>{var e;return(e=p.useContext(UG))!=null?e:BG};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=a?VT.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,x=!0)=>{let y=o?o[g]:g,w=v?g+"|| ''":`'${y}'`,b="";return a&&x&&!v&&VT.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?b+=`c.add(${w})`:b+="null":y&&(b+=`d[s](n,${w})`),b},m=e?`!function(){${d}${h(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${FG}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(s,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var WG=e=>{switch(e){case"success":return KG;case"info":return GG;case"warning":return VG;case"error":return YG;default:return null}},qG=Array(12).fill(0),HG=({visible:e,className:t})=>Y.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Y.createElement("div",{className:"sonner-spinner"},qG.map((n,r)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),KG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),VG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),GG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),YG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),XG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),JG=()=>{let[e,t]=Y.useState(document.hidden);return Y.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},G_=1,QG=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:G_++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,s,o=r.then(async c=>{if(s=["resolve",c],Y.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(eY(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||G_++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Na=new QG,ZG=(e,t)=>{let n=(t==null?void 0:t.id)||G_++;return Na.addToast({title:e,...t,id:n}),n},eY=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",tY=ZG,nY=()=>Na.toasts,rY=()=>Na.getActiveToasts(),$e=Object.assign(tY,{success:Na.success,info:Na.info,warning:Na.warning,error:Na.error,custom:Na.custom,message:Na.message,promise:Na.promise,dismiss:Na.dismiss,loading:Na.loading},{getHistory:nY,getToasts:rY});function aY(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}aY(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ag(e){return e.label!==void 0}var iY=3,sY="32px",oY="16px",GT=4e3,lY=356,cY=14,uY=20,dY=200;function Li(...e){return e.filter(Boolean).join(" ")}function fY(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var hY=e=>{var t,n,r,a,s,o,l,c,u,d,f;let{invert:h,toast:m,unstyled:g,interacting:v,setHeights:x,visibleToasts:y,heights:w,index:b,toasts:_,expanded:k,removeToast:j,defaultRichColors:S,closeButton:O,style:I,cancelButtonStyle:P,actionButtonStyle:N,className:D="",descriptionClassName:$="",duration:U,position:F,gap:M,loadingIcon:T,expandByDefault:A,classNames:L,icons:E,closeButtonAriaLabel:B="Close toast",pauseWhenPageIsHidden:R}=e,[C,q]=Y.useState(null),[Z,J]=Y.useState(null),[ee,ae]=Y.useState(!1),[Q,oe]=Y.useState(!1),[ge,ie]=Y.useState(!1),[Ie,me]=Y.useState(!1),[K,fe]=Y.useState(!1),[De,Ze]=Y.useState(0),[Ve,ut]=Y.useState(0),Ye=Y.useRef(m.duration||U||GT),ot=Y.useRef(null),te=Y.useRef(null),Xe=b===0,dt=b+1<=y,de=m.type,we=m.dismissible!==!1,se=m.className||"",Be=m.descriptionClassName||"",je=Y.useMemo(()=>w.findIndex(Ne=>Ne.toastId===m.id)||0,[w,m.id]),Ge=Y.useMemo(()=>{var Ne;return(Ne=m.closeButton)!=null?Ne:O},[m.closeButton,O]),vt=Y.useMemo(()=>m.duration||U||GT,[m.duration,U]),wt=Y.useRef(0),Nt=Y.useRef(0),yt=Y.useRef(0),xt=Y.useRef(null),[le,Ee]=F.split("-"),ye=Y.useMemo(()=>w.reduce((Ne,Le,V)=>V>=je?Ne:Ne+Le.height,0),[w,je]),H=JG(),z=m.invert||h,G=de==="loading";Nt.current=Y.useMemo(()=>je*M+ye,[je,ye]),Y.useEffect(()=>{Ye.current=vt},[vt]),Y.useEffect(()=>{ae(!0)},[]),Y.useEffect(()=>{let Ne=te.current;if(Ne){let Le=Ne.getBoundingClientRect().height;return ut(Le),x(V=>[{toastId:m.id,height:Le,position:m.position},...V]),()=>x(V=>V.filter(ne=>ne.toastId!==m.id))}},[x,m.id]),Y.useLayoutEffect(()=>{if(!ee)return;let Ne=te.current,Le=Ne.style.height;Ne.style.height="auto";let V=Ne.getBoundingClientRect().height;Ne.style.height=Le,ut(V),x(ne=>ne.find(ke=>ke.toastId===m.id)?ne.map(ke=>ke.toastId===m.id?{...ke,height:V}:ke):[{toastId:m.id,height:V,position:m.position},...ne])},[ee,m.title,m.description,x,m.id]);let ue=Y.useCallback(()=>{oe(!0),Ze(Nt.current),x(Ne=>Ne.filter(Le=>Le.toastId!==m.id)),setTimeout(()=>{j(m)},dY)},[m,j,x,Nt]);Y.useEffect(()=>{if(m.promise&&de==="loading"||m.duration===1/0||m.type==="loading")return;let Ne;return k||v||R&&H?(()=>{if(yt.current<wt.current){let Le=new Date().getTime()-wt.current;Ye.current=Ye.current-Le}yt.current=new Date().getTime()})():Ye.current!==1/0&&(wt.current=new Date().getTime(),Ne=setTimeout(()=>{var Le;(Le=m.onAutoClose)==null||Le.call(m,m),ue()},Ye.current)),()=>clearTimeout(Ne)},[k,v,m,de,R,H,ue]),Y.useEffect(()=>{m.delete&&ue()},[ue,m.delete]);function Se(){var Ne,Le,V;return E!=null&&E.loading?Y.createElement("div",{className:Li(L==null?void 0:L.loader,(Ne=m==null?void 0:m.classNames)==null?void 0:Ne.loader,"sonner-loader"),"data-visible":de==="loading"},E.loading):T?Y.createElement("div",{className:Li(L==null?void 0:L.loader,(Le=m==null?void 0:m.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":de==="loading"},T):Y.createElement(HG,{className:Li(L==null?void 0:L.loader,(V=m==null?void 0:m.classNames)==null?void 0:V.loader),visible:de==="loading"})}return Y.createElement("li",{tabIndex:0,ref:te,className:Li(D,se,L==null?void 0:L.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[de],(n=m==null?void 0:m.classNames)==null?void 0:n[de]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":ee,"data-promise":!!m.promise,"data-swiped":K,"data-removed":Q,"data-visible":dt,"data-y-position":le,"data-x-position":Ee,"data-index":b,"data-front":Xe,"data-swiping":ge,"data-dismissible":we,"data-type":de,"data-invert":z,"data-swipe-out":Ie,"data-swipe-direction":Z,"data-expanded":!!(k||A&&ee),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${Q?De:Nt.current}px`,"--initial-height":A?"auto":`${Ve}px`,...I,...m.style},onDragEnd:()=>{ie(!1),q(null),xt.current=null},onPointerDown:Ne=>{G||!we||(ot.current=new Date,Ze(Nt.current),Ne.target.setPointerCapture(Ne.pointerId),Ne.target.tagName!=="BUTTON"&&(ie(!0),xt.current={x:Ne.clientX,y:Ne.clientY}))},onPointerUp:()=>{var Ne,Le,V,ne;if(Ie||!we)return;xt.current=null;let ke=Number(((Ne=te.current)==null?void 0:Ne.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),et=Number(((Le=te.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),nt=new Date().getTime()-((V=ot.current)==null?void 0:V.getTime()),Rt=C==="x"?ke:et,ht=Math.abs(Rt)/nt;if(Math.abs(Rt)>=uY||ht>.11){Ze(Nt.current),(ne=m.onDismiss)==null||ne.call(m,m),J(C==="x"?ke>0?"right":"left":et>0?"down":"up"),ue(),me(!0),fe(!1);return}ie(!1),q(null)},onPointerMove:Ne=>{var Le,V,ne,ke;if(!xt.current||!we||((Le=window.getSelection())==null?void 0:Le.toString().length)>0)return;let et=Ne.clientY-xt.current.y,nt=Ne.clientX-xt.current.x,Rt=(V=e.swipeDirections)!=null?V:fY(F);!C&&(Math.abs(nt)>1||Math.abs(et)>1)&&q(Math.abs(nt)>Math.abs(et)?"x":"y");let ht={x:0,y:0};C==="y"?(Rt.includes("top")||Rt.includes("bottom"))&&(Rt.includes("top")&&et<0||Rt.includes("bottom")&&et>0)&&(ht.y=et):C==="x"&&(Rt.includes("left")||Rt.includes("right"))&&(Rt.includes("left")&&nt<0||Rt.includes("right")&&nt>0)&&(ht.x=nt),(Math.abs(ht.x)>0||Math.abs(ht.y)>0)&&fe(!0),(ne=te.current)==null||ne.style.setProperty("--swipe-amount-x",`${ht.x}px`),(ke=te.current)==null||ke.style.setProperty("--swipe-amount-y",`${ht.y}px`)}},Ge&&!m.jsx?Y.createElement("button",{"aria-label":B,"data-disabled":G,"data-close-button":!0,onClick:G||!we?()=>{}:()=>{var Ne;ue(),(Ne=m.onDismiss)==null||Ne.call(m,m)},className:Li(L==null?void 0:L.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(s=E==null?void 0:E.close)!=null?s:XG):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Y.createElement(Y.Fragment,null,de||m.icon||m.promise?Y.createElement("div",{"data-icon":"",className:Li(L==null?void 0:L.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Se():null,m.type!=="loading"?m.icon||(E==null?void 0:E[de])||WG(de):null):null,Y.createElement("div",{"data-content":"",className:Li(L==null?void 0:L.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},Y.createElement("div",{"data-title":"",className:Li(L==null?void 0:L.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Y.createElement("div",{"data-description":"",className:Li($,Be,L==null?void 0:L.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Ag(m.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:Ne=>{var Le,V;Ag(m.cancel)&&we&&((V=(Le=m.cancel).onClick)==null||V.call(Le,Ne),ue())},className:Li(L==null?void 0:L.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Ag(m.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||N,onClick:Ne=>{var Le,V;Ag(m.action)&&((V=(Le=m.action).onClick)==null||V.call(Le,Ne),!Ne.defaultPrevented&&ue())},className:Li(L==null?void 0:L.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function YT(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function mY(e,t){let n={};return[e,t].forEach((r,a)=>{let s=a===1,o=s?"--mobile-offset":"--offset",l=s?oY:sY;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var pY=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:m,visibleToasts:g=iY,toastOptions:v,dir:x=YT(),gap:y=cY,loadingIcon:w,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:k}=e,[j,S]=Y.useState([]),O=Y.useMemo(()=>Array.from(new Set([r].concat(j.filter(R=>R.position).map(R=>R.position)))),[j,r]),[I,P]=Y.useState([]),[N,D]=Y.useState(!1),[$,U]=Y.useState(!1),[F,M]=Y.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),T=Y.useRef(null),A=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=Y.useRef(null),E=Y.useRef(!1),B=Y.useCallback(R=>{S(C=>{var q;return(q=C.find(Z=>Z.id===R.id))!=null&&q.delete||Na.dismiss(R.id),C.filter(({id:Z})=>Z!==R.id)})},[]);return Y.useEffect(()=>Na.subscribe(R=>{if(R.dismiss){S(C=>C.map(q=>q.id===R.id?{...q,delete:!0}:q));return}setTimeout(()=>{W$.flushSync(()=>{S(C=>{let q=C.findIndex(Z=>Z.id===R.id);return q!==-1?[...C.slice(0,q),{...C[q],...R},...C.slice(q+1)]:[R,...C]})})})}),[]),Y.useEffect(()=>{if(d!=="system"){M(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),typeof window>"u")return;let R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:C})=>{M(C?"dark":"light")})}catch{R.addListener(({matches:q})=>{try{M(q?"dark":"light")}catch(Z){console.error(Z)}})}},[d]),Y.useEffect(()=>{j.length<=1&&D(!1)},[j]),Y.useEffect(()=>{let R=C=>{var q,Z;a.every(J=>C[J]||C.code===J)&&(D(!0),(q=T.current)==null||q.focus()),C.code==="Escape"&&(document.activeElement===T.current||(Z=T.current)!=null&&Z.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[a]),Y.useEffect(()=>{if(T.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,E.current=!1)}},[T.current]),Y.createElement("section",{ref:t,"aria-label":`${_} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((R,C)=>{var q;let[Z,J]=R.split("-");return j.length?Y.createElement("ol",{key:R,dir:x==="auto"?YT():x,tabIndex:-1,ref:T,className:l,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":Z,"data-lifted":N&&j.length>1&&!s,"data-x-position":J,style:{"--front-toast-height":`${((q=I[0])==null?void 0:q.height)||0}px`,"--width":`${lY}px`,"--gap":`${y}px`,...m,...mY(c,u)},onBlur:ee=>{E.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(E.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||E.current||(E.current=!0,L.current=ee.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{$||D(!1)},onDragEnd:()=>D(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},j.filter(ee=>!ee.position&&C===0||ee.position===R).map((ee,ae)=>{var Q,oe;return Y.createElement(hY,{key:ee.id,icons:b,index:ae,toast:ee,defaultRichColors:f,duration:(Q=v==null?void 0:v.duration)!=null?Q:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(oe=v==null?void 0:v.closeButton)!=null?oe:o,interacting:$,position:R,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:B,toasts:j.filter(ge=>ge.position==ee.position),heights:I.filter(ge=>ge.position==ee.position),setHeights:P,expandByDefault:s,gap:y,loadingIcon:w,expanded:N,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const W4=({...e})=>{const{theme:t="system"}=zG();return i.jsx(pY,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},Eg=Object.freeze(Object.defineProperty({__proto__:null,Toaster:W4,toast:$e},Symbol.toStringTag,{value:"Module"}));var gY=wS[" useId ".trim().toString()]||(()=>{}),vY=0;function mr(e){const[t,n]=p.useState(gY());return ar(()=>{e||n(r=>r??String(vY++))},[e]),e||(t?`radix-${t}`:"")}const yY=["top","right","bottom","left"],Cl=Math.min,Za=Math.max,dy=Math.round,Tg=Math.floor,Os=e=>({x:e,y:e}),xY={left:"right",right:"left",bottom:"top",top:"bottom"},bY={start:"end",end:"start"};function Y_(e,t,n){return Za(e,Cl(t,n))}function _o(e,t){return typeof e=="function"?e(t):e}function ko(e){return e.split("-")[0]}function gf(e){return e.split("-")[1]}function _N(e){return e==="x"?"y":"x"}function kN(e){return e==="y"?"height":"width"}const wY=new Set(["top","bottom"]);function ks(e){return wY.has(ko(e))?"y":"x"}function SN(e){return _N(ks(e))}function jY(e,t,n){n===void 0&&(n=!1);const r=gf(e),a=SN(e),s=kN(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=fy(o)),[o,fy(o)]}function _Y(e){const t=fy(e);return[X_(e),t,X_(t)]}function X_(e){return e.replace(/start|end/g,t=>bY[t])}const XT=["left","right"],JT=["right","left"],kY=["top","bottom"],SY=["bottom","top"];function NY(e,t,n){switch(e){case"top":case"bottom":return n?t?JT:XT:t?XT:JT;case"left":case"right":return t?kY:SY;default:return[]}}function CY(e,t,n,r){const a=gf(e);let s=NY(ko(e),n==="start",r);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(X_)))),s}function fy(e){return e.replace(/left|right|bottom|top/g,t=>xY[t])}function AY(e){return{top:0,right:0,bottom:0,left:0,...e}}function q4(e){return typeof e!="number"?AY(e):{top:e,right:e,bottom:e,left:e}}function hy(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function QT(e,t,n){let{reference:r,floating:a}=e;const s=ks(t),o=SN(t),l=kN(o),c=ko(t),u=s==="y",d=r.x+r.width/2-a.width/2,f=r.y+r.height/2-a.height/2,h=r[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-a.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-a.width,y:f};break;default:m={x:r.x,y:r.y}}switch(gf(t)){case"start":m[o]-=h*(n&&u?-1:1);break;case"end":m[o]+=h*(n&&u?-1:1);break}return m}const EY=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=QT(u,r,c),h=r,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:w,y:b,data:_,reset:k}=await y({x:d,y:f,initialPlacement:r,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=w??d,f=b??f,m={...m,[x]:{...m[x],..._}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:f}=QT(u,h,c)),v=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function um(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=_o(t,e),g=q4(m),x=l[h?f==="floating"?"reference":"floating":f],y=hy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=f==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},k=hy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:b,strategy:c}):w);return{top:(y.top-k.top+g.top)/_.y,bottom:(k.bottom-y.bottom+g.bottom)/_.y,left:(y.left-k.left+g.left)/_.x,right:(k.right-y.right+g.right)/_.x}}const TY=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=_o(e,t)||{};if(u==null)return{};const f=q4(d),h={x:n,y:r},m=SN(a),g=kN(m),v=await o.getDimensions(u),x=m==="y",y=x?"top":"left",w=x?"bottom":"right",b=x?"clientHeight":"clientWidth",_=s.reference[g]+s.reference[m]-h[m]-s.floating[g],k=h[m]-s.reference[m],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=j?j[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(j)))&&(S=l.floating[b]||s.floating[g]);const O=_/2-k/2,I=S/2-v[g]/2-1,P=Cl(f[y],I),N=Cl(f[w],I),D=P,$=S-v[g]-N,U=S/2-v[g]/2+O,F=Y_(D,U,$),M=!c.arrow&&gf(a)!=null&&U!==F&&s.reference[g]/2-(U<D?P:N)-v[g]/2<0,T=M?U<D?U-D:U-$:0;return{[m]:h[m]+T,data:{[m]:F,centerOffset:U-F-T,...M&&{alignmentOffset:T}},reset:M}}}),PY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=_o(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ko(a),w=ks(l),b=ko(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=h||(b||!v?[fy(l)]:_Y(l)),j=g!=="none";!h&&j&&k.push(...CY(l,v,g,_));const S=[l,...k],O=await um(t,x),I=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&I.push(O[y]),f){const U=jY(a,o,_);I.push(O[U[0]],O[U[1]])}if(P=[...P,{placement:a,overflows:I}],!I.every(U=>U<=0)){var N,D;const U=(((N=s.flip)==null?void 0:N.index)||0)+1,F=S[U];if(F&&(!(f==="alignment"?w!==ks(F):!1)||P.every(A=>A.overflows[0]>0&&ks(A.placement)===w)))return{data:{index:U,overflows:P},reset:{placement:F}};let M=(D=P.filter(T=>T.overflows[0]<=0).sort((T,A)=>T.overflows[1]-A.overflows[1])[0])==null?void 0:D.placement;if(!M)switch(m){case"bestFit":{var $;const T=($=P.filter(A=>{if(j){const L=ks(A.placement);return L===w||L==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(L=>L>0).reduce((L,E)=>L+E,0)]).sort((A,L)=>A[1]-L[1])[0])==null?void 0:$[0];T&&(M=T);break}case"initialPlacement":M=l;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function ZT(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function eP(e){return yY.some(t=>e[t]>=0)}const OY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=_o(e,t);switch(r){case"referenceHidden":{const s=await um(t,{...a,elementContext:"reference"}),o=ZT(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:eP(o)}}}case"escaped":{const s=await um(t,{...a,altBoundary:!0}),o=ZT(s,n.floating);return{data:{escapedOffsets:o,escaped:eP(o)}}}default:return{}}}}},H4=new Set(["left","top"]);async function IY(e,t){const{placement:n,platform:r,elements:a}=e,s=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=ko(n),l=gf(n),c=ks(n)==="y",u=H4.has(o)?-1:1,d=s&&c?-1:1,f=_o(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const RY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await IY(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},MY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:y,y:w}=x;return{x:y,y:w}}},...c}=_o(e,t),u={x:n,y:r},d=await um(t,c),f=ks(ko(a)),h=_N(f);let m=u[h],g=u[f];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=m+d[x],b=m-d[y];m=Y_(w,m,b)}if(o){const x=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=g+d[x],b=g-d[y];g=Y_(w,g,b)}const v=l.fn({...t,[h]:m,[f]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[f]:o}}}}}},DY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=_o(e,t),d={x:n,y:r},f=ks(a),h=_N(f);let m=d[h],g=d[f];const v=_o(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=h==="y"?"height":"width",_=s.reference[h]-s.floating[b]+x.mainAxis,k=s.reference[h]+s.reference[b]-x.mainAxis;m<_?m=_:m>k&&(m=k)}if(u){var y,w;const b=h==="y"?"width":"height",_=H4.has(ko(a)),k=s.reference[f]-s.floating[b]+(_&&((y=o.offset)==null?void 0:y[f])||0)+(_?0:x.crossAxis),j=s.reference[f]+s.reference[b]+(_?0:((w=o.offset)==null?void 0:w[f])||0)-(_?x.crossAxis:0);g<k?g=k:g>j&&(g=j)}return{[h]:m,[f]:g}}}},LY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=_o(e,t),d=await um(t,u),f=ko(a),h=gf(a),m=ks(a)==="y",{width:g,height:v}=s.floating;let x,y;f==="top"||f==="bottom"?(x=f,y=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,x=h==="end"?"top":"bottom");const w=v-d.top-d.bottom,b=g-d.left-d.right,_=Cl(v-d[x],w),k=Cl(g-d[y],b),j=!t.middlewareData.shift;let S=_,O=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=w),j&&!h){const P=Za(d.left,0),N=Za(d.right,0),D=Za(d.top,0),$=Za(d.bottom,0);m?O=g-2*(P!==0||N!==0?P+N:Za(d.left,d.right)):S=v-2*(D!==0||$!==0?D+$:Za(d.top,d.bottom))}await c({...t,availableWidth:O,availableHeight:S});const I=await o.getDimensions(l.floating);return g!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function Qx(){return typeof window<"u"}function vf(e){return K4(e)?(e.nodeName||"").toLowerCase():"#document"}function ri(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Us(e){var t;return(t=(K4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function K4(e){return Qx()?e instanceof Node||e instanceof ri(e).Node:!1}function os(e){return Qx()?e instanceof Element||e instanceof ri(e).Element:!1}function Ds(e){return Qx()?e instanceof HTMLElement||e instanceof ri(e).HTMLElement:!1}function tP(e){return!Qx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ri(e).ShadowRoot}const $Y=new Set(["inline","contents"]);function Np(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=ls(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!$Y.has(a)}const FY=new Set(["table","td","th"]);function UY(e){return FY.has(vf(e))}const BY=[":popover-open",":modal"];function Zx(e){return BY.some(t=>{try{return e.matches(t)}catch{return!1}})}const zY=["transform","translate","scale","rotate","perspective"],WY=["transform","translate","scale","rotate","perspective","filter"],qY=["paint","layout","strict","content"];function NN(e){const t=CN(),n=os(e)?ls(e):e;return zY.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||WY.some(r=>(n.willChange||"").includes(r))||qY.some(r=>(n.contain||"").includes(r))}function HY(e){let t=Al(e);for(;Ds(t)&&!Pd(t);){if(NN(t))return t;if(Zx(t))return null;t=Al(t)}return null}function CN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const KY=new Set(["html","body","#document"]);function Pd(e){return KY.has(vf(e))}function ls(e){return ri(e).getComputedStyle(e)}function eb(e){return os(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Al(e){if(vf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||tP(e)&&e.host||Us(e);return tP(t)?t.host:t}function V4(e){const t=Al(e);return Pd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ds(t)&&Np(t)?t:V4(t)}function dm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=V4(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=ri(a);if(s){const l=J_(o);return t.concat(o,o.visualViewport||[],Np(a)?a:[],l&&n?dm(l):[])}return t.concat(a,dm(a,[],n))}function J_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function G4(e){const t=ls(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Ds(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=dy(n)!==s||dy(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function AN(e){return os(e)?e:e.contextElement}function ld(e){const t=AN(e);if(!Ds(t))return Os(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=G4(t);let o=(s?dy(n.width):n.width)/r,l=(s?dy(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const VY=Os(0);function Y4(e){const t=ri(e);return!CN()||!t.visualViewport?VY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function GY(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ri(e)?!1:t}function Fc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=AN(e);let o=Os(1);t&&(r?os(r)&&(o=ld(r)):o=ld(e));const l=GY(s,n,r)?Y4(s):Os(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(s){const h=ri(s),m=r&&os(r)?ri(r):r;let g=h,v=J_(g);for(;v&&r&&m!==g;){const x=ld(v),y=v.getBoundingClientRect(),w=ls(v),b=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*x.x,_=y.top+(v.clientTop+parseFloat(w.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,f*=x.y,c+=b,u+=_,g=ri(v),v=J_(g)}}return hy({width:d,height:f,x:c,y:u})}function EN(e,t){const n=eb(e).scrollLeft;return t?t.left+n:Fc(Us(e)).left+n}function X4(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:EN(e,r)),s=r.top+t.scrollTop;return{x:a,y:s}}function YY(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const s=a==="fixed",o=Us(r),l=t?Zx(t.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=Os(1);const d=Os(0),f=Ds(r);if((f||!f&&!s)&&((vf(r)!=="body"||Np(o))&&(c=eb(r)),Ds(r))){const m=Fc(r);u=ld(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const h=o&&!f&&!s?X4(o,c,!0):Os(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function XY(e){return Array.from(e.getClientRects())}function JY(e){const t=Us(e),n=eb(e),r=e.ownerDocument.body,a=Za(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Za(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+EN(e);const l=-n.scrollTop;return ls(r).direction==="rtl"&&(o+=Za(t.clientWidth,r.clientWidth)-a),{width:a,height:s,x:o,y:l}}function QY(e,t){const n=ri(e),r=Us(e),a=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const u=CN();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}const ZY=new Set(["absolute","fixed"]);function eX(e,t){const n=Fc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,s=Ds(e)?ld(e):Os(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function nP(e,t,n){let r;if(t==="viewport")r=QY(e,n);else if(t==="document")r=JY(Us(e));else if(os(t))r=eX(t,n);else{const a=Y4(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return hy(r)}function J4(e,t){const n=Al(e);return n===t||!os(n)||Pd(n)?!1:ls(n).position==="fixed"||J4(n,t)}function tX(e,t){const n=t.get(e);if(n)return n;let r=dm(e,[],!1).filter(l=>os(l)&&vf(l)!=="body"),a=null;const s=ls(e).position==="fixed";let o=s?Al(e):e;for(;os(o)&&!Pd(o);){const l=ls(o),c=NN(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&ZY.has(a.position)||Np(o)&&!c&&J4(e,o))?r=r.filter(d=>d!==o):a=l,o=Al(o)}return t.set(e,r),r}function nX(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Zx(t)?[]:tX(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const f=nP(t,d,a);return u.top=Za(f.top,u.top),u.right=Cl(f.right,u.right),u.bottom=Cl(f.bottom,u.bottom),u.left=Za(f.left,u.left),u},nP(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function rX(e){const{width:t,height:n}=G4(e);return{width:t,height:n}}function aX(e,t,n){const r=Ds(t),a=Us(t),s=n==="fixed",o=Fc(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=Os(0);function u(){c.x=EN(a)}if(r||!r&&!s)if((vf(t)!=="body"||Np(a))&&(l=eb(t)),r){const m=Fc(t,!0,s,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();s&&!r&&a&&u();const d=a&&!r&&!s?X4(a,l):Os(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function ww(e){return ls(e).position==="static"}function rP(e,t){if(!Ds(e)||ls(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Us(e)===n&&(n=n.ownerDocument.body),n}function Q4(e,t){const n=ri(e);if(Zx(e))return n;if(!Ds(e)){let a=Al(e);for(;a&&!Pd(a);){if(os(a)&&!ww(a))return a;a=Al(a)}return n}let r=rP(e,t);for(;r&&UY(r)&&ww(r);)r=rP(r,t);return r&&Pd(r)&&ww(r)&&!NN(r)?n:r||HY(e)||n}const iX=async function(e){const t=this.getOffsetParent||Q4,n=this.getDimensions,r=await n(e.floating);return{reference:aX(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sX(e){return ls(e).direction==="rtl"}const oX={convertOffsetParentRelativeRectToViewportRelativeRect:YY,getDocumentElement:Us,getClippingRect:nX,getOffsetParent:Q4,getElementRects:iX,getClientRects:XY,getDimensions:rX,getScale:ld,isElement:os,isRTL:sX};function Z4(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function lX(e,t){let n=null,r;const a=Us(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=Tg(f),v=Tg(a.clientWidth-(d+h)),x=Tg(a.clientHeight-(f+m)),y=Tg(d),b={rootMargin:-g+"px "+-v+"px "+-x+"px "+-y+"px",threshold:Za(0,Cl(1,c))||1};let _=!0;function k(j){const S=j[0].intersectionRatio;if(S!==c){if(!_)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!Z4(u,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(k,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(e)}return o(!0),s}function cX(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=AN(e),d=a||s?[...u?dm(u):[],...dm(t)]:[];d.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=u&&l?lX(u,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?Fc(e):null;c&&x();function x(){const y=Fc(e);v&&!Z4(v,y)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;d.forEach(w=>{a&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),f==null||f(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const uX=RY,dX=MY,fX=PY,hX=LY,mX=OY,aP=TY,pX=DY,gX=(e,t,n)=>{const r=new Map,a={platform:oX,...n},s={...a.platform,_c:r};return EY(e,t,{...a,platform:s})};var vX=typeof document<"u",yX=function(){},Av=vX?p.useLayoutEffect:yX;function my(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!my(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const s=a[r];if(!(s==="_owner"&&e.$$typeof)&&!my(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function eF(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function iP(e,t){const n=eF(e);return Math.round(t*n)/n}function jw(e){const t=p.useRef(e);return Av(()=>{t.current=e}),t}function xX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(r);my(h,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),w=p.useCallback(A=>{A!==j.current&&(j.current=A,v(A))},[]),b=p.useCallback(A=>{A!==S.current&&(S.current=A,y(A))},[]),_=s||g,k=o||x,j=p.useRef(null),S=p.useRef(null),O=p.useRef(d),I=c!=null,P=jw(c),N=jw(a),D=jw(u),$=p.useCallback(()=>{if(!j.current||!S.current)return;const A={placement:t,strategy:n,middleware:h};N.current&&(A.platform=N.current),gX(j.current,S.current,A).then(L=>{const E={...L,isPositioned:D.current!==!1};U.current&&!my(O.current,E)&&(O.current=E,tu.flushSync(()=>{f(E)}))})},[h,t,n,N,D]);Av(()=>{u===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(A=>({...A,isPositioned:!1})))},[u]);const U=p.useRef(!1);Av(()=>(U.current=!0,()=>{U.current=!1}),[]),Av(()=>{if(_&&(j.current=_),k&&(S.current=k),_&&k){if(P.current)return P.current(_,k,$);$()}},[_,k,$,P,I]);const F=p.useMemo(()=>({reference:j,floating:S,setReference:w,setFloating:b}),[w,b]),M=p.useMemo(()=>({reference:_,floating:k}),[_,k]),T=p.useMemo(()=>{const A={position:n,left:0,top:0};if(!M.floating)return A;const L=iP(M.floating,d.x),E=iP(M.floating,d.y);return l?{...A,transform:"translate("+L+"px, "+E+"px)",...eF(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:E}},[n,l,M.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:$,refs:F,elements:M,floatingStyles:T}),[d,$,F,M,T])}const bX=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?aP({element:r.current,padding:a}).fn(n):{}:r?aP({element:r,padding:a}).fn(n):{}}}},wX=(e,t)=>({...uX(e),options:[e,t]}),jX=(e,t)=>({...dX(e),options:[e,t]}),_X=(e,t)=>({...pX(e),options:[e,t]}),kX=(e,t)=>({...fX(e),options:[e,t]}),SX=(e,t)=>({...hX(e),options:[e,t]}),NX=(e,t)=>({...mX(e),options:[e,t]}),CX=(e,t)=>({...bX(e),options:[e,t]});var AX="Arrow",tF=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...s}=e;return i.jsx(st.svg,{...s,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});tF.displayName=AX;var EX=tF;function TN(e){const[t,n]=p.useState(void 0);return ar(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var PN="Popper",[nF,Ll]=Rr(PN),[TX,rF]=nF(PN),aF=e=>{const{__scopePopper:t,children:n}=e,[r,a]=p.useState(null);return i.jsx(TX,{scope:t,anchor:r,onAnchorChange:a,children:n})};aF.displayName=PN;var iF="PopperAnchor",sF=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,s=rF(iF,n),o=p.useRef(null),l=Mt(t,o);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(st.div,{...a,ref:l})});sF.displayName=iF;var ON="PopperContent",[PX,OX]=nF(ON),oF=p.forwardRef((e,t)=>{var ee,ae,Q,oe,ge,ie;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=rF(ON,n),[y,w]=p.useState(null),b=Mt(t,Ie=>w(Ie)),[_,k]=p.useState(null),j=TN(_),S=(j==null?void 0:j.width)??0,O=(j==null?void 0:j.height)??0,I=r+(s!=="center"?"-"+s:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(u)?u:[u],D=N.length>0,$={padding:P,boundary:N.filter(RX),altBoundary:D},{refs:U,floatingStyles:F,placement:M,isPositioned:T,middlewareData:A}=xX({strategy:"fixed",placement:I,whileElementsMounted:(...Ie)=>cX(...Ie,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[wX({mainAxis:a+O,alignmentAxis:o}),c&&jX({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?_X():void 0,...$}),c&&kX({...$}),SX({...$,apply:({elements:Ie,rects:me,availableWidth:K,availableHeight:fe})=>{const{width:De,height:Ze}=me.reference,Ve=Ie.floating.style;Ve.setProperty("--radix-popper-available-width",`${K}px`),Ve.setProperty("--radix-popper-available-height",`${fe}px`),Ve.setProperty("--radix-popper-anchor-width",`${De}px`),Ve.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),_&&CX({element:_,padding:l}),MX({arrowWidth:S,arrowHeight:O}),h&&NX({strategy:"referenceHidden",...$})]}),[L,E]=uF(M),B=rr(g);ar(()=>{T&&(B==null||B())},[T,B]);const R=(ee=A.arrow)==null?void 0:ee.x,C=(ae=A.arrow)==null?void 0:ae.y,q=((Q=A.arrow)==null?void 0:Q.centerOffset)!==0,[Z,J]=p.useState();return ar(()=>{y&&J(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:T?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[(oe=A.transformOrigin)==null?void 0:oe.x,(ge=A.transformOrigin)==null?void 0:ge.y].join(" "),...((ie=A.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(PX,{scope:n,placedSide:L,onArrowChange:k,arrowX:R,arrowY:C,shouldHideArrow:q,children:i.jsx(st.div,{"data-side":L,"data-align":E,...v,ref:b,style:{...v.style,animation:T?void 0:"none"}})})})});oF.displayName=ON;var lF="PopperArrow",IX={top:"bottom",right:"left",bottom:"top",left:"right"},cF=p.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,s=OX(lF,r),o=IX[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(EX,{...a,ref:n,style:{...a.style,display:"block"}})})});cF.displayName=lF;function RX(e){return e!==null}var MX=e=>({name:"transformOrigin",options:e,fn(t){var x,y,w;const{placement:n,rects:r,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=uF(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,m=(((w=a.arrow)==null?void 0:w.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=o?f:`${h}px`,v=`${-c}px`):u==="top"?(g=o?f:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=o?f:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,v=o?f:`${m}px`),{data:{x:g,y:v}}}});function uF(e){const[t,n="center"]=e.split("-");return[t,n]}var tb=aF,Cp=sF,nb=oF,rb=cF,[ab,d5e]=Rr("Tooltip",[Ll]),ib=Ll(),dF="TooltipProvider",DX=700,Q_="tooltip.open",[LX,IN]=ab(dF),fF=e=>{const{__scopeTooltip:t,delayDuration:n=DX,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:s}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(LX,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:s})};fF.displayName=dF;var fm="Tooltip",[$X,sb]=ab(fm),hF=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=IN(fm,e.__scopeTooltip),u=ib(t),[d,f]=p.useState(null),h=mr(),m=p.useRef(0),g=o??c.disableHoverableContent,v=l??c.delayDuration,x=p.useRef(!1),[y,w]=Ba({prop:r,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(Q_))):c.onClose(),s==null||s(S)},caller:fm}),b=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),_=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,w(!0)},[w]),k=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),j=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,w(!0),m.current=0},v)},[v,w]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(tb,{...u,children:i.jsx($X,{scope:t,contentId:h,open:y,stateAttribute:b,trigger:d,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?j():_()},[c.isOpenDelayedRef,j,_]),onTriggerLeave:p.useCallback(()=>{g?k():(window.clearTimeout(m.current),m.current=0)},[k,g]),onOpen:_,onClose:k,disableHoverableContent:g,children:n})})};hF.displayName=fm;var Z_="TooltipTrigger",mF=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=sb(Z_,n),s=IN(Z_,n),o=ib(n),l=p.useRef(null),c=Mt(t,l,a.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(Cp,{asChild:!0,...o,children:i.jsx(st.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:qe(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:qe(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:qe(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:qe(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:qe(e.onBlur,a.onClose),onClick:qe(e.onClick,a.onClose)})})});mF.displayName=Z_;var FX="TooltipPortal",[f5e,UX]=ab(FX,{forceMount:void 0}),Od="TooltipContent",pF=p.forwardRef((e,t)=>{const n=UX(Od,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...s}=e,o=sb(Od,e.__scopeTooltip);return i.jsx(Sr,{present:r||o.open,children:o.disableHoverableContent?i.jsx(gF,{side:a,...s,ref:t}):i.jsx(BX,{side:a,...s,ref:t})})}),BX=p.forwardRef((e,t)=>{const n=sb(Od,e.__scopeTooltip),r=IN(Od,e.__scopeTooltip),a=p.useRef(null),s=Mt(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:f}=r,h=p.useCallback(()=>{l(null),f(!1)},[f]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},w=KX(y,x.getBoundingClientRect()),b=VX(y,w),_=GX(v.getBoundingClientRect()),k=XX([...b,..._]);l(k),f(!0)},[f]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&d){const g=x=>m(x,d),v=x=>m(x,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",v)}}},[c,d,m,h]),p.useEffect(()=>{if(o){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),b=!YX(y,o);w?h():b&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,h]),i.jsx(gF,{...e,ref:s})}),[zX,WX]=ab(fm,{isInside:!1}),qX=K$("TooltipContent"),gF=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=sb(Od,n),u=ib(n),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(Q_,d),()=>document.removeEventListener(Q_,d)),[d]),p.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(nb,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(qX,{children:r}),i.jsx(zX,{scope:n,isInside:!0,children:i.jsx(gV,{id:c.contentId,role:"tooltip",children:a||r})})]})})});pF.displayName=Od;var vF="TooltipArrow",HX=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=ib(n);return WX(vF,n).isInside?null:i.jsx(rb,{...a,...r,ref:t})});HX.displayName=vF;function KX(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,a,s)){case s:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function VX(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function GX(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function YX(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>r!=h>r&&n<(f-u)*(r-d)/(h-d)+u&&(a=!a)}return a}function XX(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),JX(t)}function JX(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var QX=fF,ZX=hF,eJ=mF,yF=pF;const e1=QX,xe=ZX,be=eJ,ve=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(yF,{ref:r,sideOffset:t,className:Pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));ve.displayName=yF.displayName;var ob=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lb=typeof window>"u"||"Deno"in globalThis;function zi(){}function tJ(e,t){return typeof e=="function"?e(t):e}function nJ(e){return typeof e=="number"&&e>=0&&e!==1/0}function rJ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function t1(e,t){return typeof e=="function"?e(t):e}function aJ(e,t){return typeof e=="function"?e(t):e}function sP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==RN(o,t.options))return!1}else if(!mm(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function oP(e,t){const{exact:n,status:r,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(hm(t.options.mutationKey)!==hm(s))return!1}else if(!mm(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function RN(e,t){return((t==null?void 0:t.queryKeyHashFn)||hm)(e)}function hm(e){return JSON.stringify(e,(t,n)=>n1(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function mm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>mm(e[n],t[n])):!1}function xF(e,t){if(e===t)return e;const n=lP(e)&&lP(t);if(n||n1(e)&&n1(t)){const r=n?e:Object.keys(e),a=r.length,s=n?t:Object.keys(t),o=s.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const f=n?d:s[d];(!n&&c.has(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=xF(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function lP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function n1(e){if(!cP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!cP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function cP(e){return Object.prototype.toString.call(e)==="[object Object]"}function iJ(e){return new Promise(t=>{setTimeout(t,e)})}function sJ(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?xF(e,t):t}function oJ(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function lJ(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var MN=Symbol();function bF(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===MN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var wc,rl,gd,_D,cJ=(_D=class extends ob{constructor(){super();dn(this,wc);dn(this,rl);dn(this,gd);Bt(this,gd,t=>{if(!lb&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Oe(this,rl)||this.setEventListener(Oe(this,gd))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,rl))==null||t.call(this),Bt(this,rl,void 0))}setEventListener(t){var n;Bt(this,gd,t),(n=Oe(this,rl))==null||n.call(this),Bt(this,rl,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Oe(this,wc)!==t&&(Bt(this,wc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Oe(this,wc)=="boolean"?Oe(this,wc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},wc=new WeakMap,rl=new WeakMap,gd=new WeakMap,_D),wF=new cJ,vd,al,yd,kD,uJ=(kD=class extends ob{constructor(){super();dn(this,vd,!0);dn(this,al);dn(this,yd);Bt(this,yd,t=>{if(!lb&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Oe(this,al)||this.setEventListener(Oe(this,yd))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,al))==null||t.call(this),Bt(this,al,void 0))}setEventListener(t){var n;Bt(this,yd,t),(n=Oe(this,al))==null||n.call(this),Bt(this,al,t(this.setOnline.bind(this)))}setOnline(t){Oe(this,vd)!==t&&(Bt(this,vd,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Oe(this,vd)}},vd=new WeakMap,al=new WeakMap,yd=new WeakMap,kD),py=new uJ;function dJ(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function fJ(e){return Math.min(1e3*2**e,3e4)}function jF(e){return(e??"online")==="online"?py.isOnline():!0}var _F=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function _w(e){return e instanceof _F}function kF(e){let t=!1,n=0,r=!1,a;const s=dJ(),o=v=>{var x;r||(h(new _F(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>wF.isFocused()&&(e.networkMode==="always"||py.isOnline())&&e.canRun(),d=()=>jF(e.networkMode)&&e.canRun(),f=v=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),s.resolve(v))},h=v=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),s.reject(v))},m=()=>new Promise(v=>{var x;a=y=>{(r||u())&&v(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(r)return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(f).catch(y=>{var j;if(r)return;const w=e.retry??(lb?0:3),b=e.retryDelay??fJ,_=typeof b=="function"?b(n,y):b,k=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(t||!k){h(y);return}n++,(j=e.onFail)==null||j.call(e,n,y),iJ(_).then(()=>u()?void 0:m()).then(()=>{t?h(y):g()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),s)}}var hJ=e=>setTimeout(e,0);function mJ(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=hJ;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var pa=mJ(),jc,SD,SF=(SD=class{constructor(){dn(this,jc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nJ(this.gcTime)&&Bt(this,jc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(lb?1/0:5*60*1e3))}clearGcTimeout(){Oe(this,jc)&&(clearTimeout(Oe(this,jc)),Bt(this,jc,void 0))}},jc=new WeakMap,SD),xd,_c,vi,kc,Qr,mp,Sc,qi,Ys,ND,pJ=(ND=class extends SF{constructor(t){super();dn(this,qi);dn(this,xd);dn(this,_c);dn(this,vi);dn(this,kc);dn(this,Qr);dn(this,mp);dn(this,Sc);Bt(this,Sc,!1),Bt(this,mp,t.defaultOptions),this.setOptions(t.options),this.observers=[],Bt(this,kc,t.client),Bt(this,vi,Oe(this,kc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Bt(this,xd,vJ(this.options)),this.state=t.state??Oe(this,xd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Oe(this,Qr))==null?void 0:t.promise}setOptions(t){this.options={...Oe(this,mp),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Oe(this,vi).remove(this)}setData(t,n){const r=sJ(this.state.data,t,this.options);return Yr(this,qi,Ys).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Yr(this,qi,Ys).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Oe(this,Qr))==null?void 0:r.promise;return(a=Oe(this,Qr))==null||a.cancel(t),n?n.then(zi).catch(zi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Oe(this,xd))}isActive(){return this.observers.some(t=>aJ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===MN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>t1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!rJ(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Oe(this,Qr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Oe(this,Qr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Oe(this,vi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Oe(this,Qr)&&(Oe(this,Sc)?Oe(this,Qr).cancel({revert:!0}):Oe(this,Qr).cancelRetry()),this.scheduleGc()),Oe(this,vi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yr(this,qi,Ys).call(this,{type:"invalidate"})}fetch(t,n){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Oe(this,Qr))return Oe(this,Qr).continueRetry(),Oe(this,Qr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Bt(this,Sc,!0),r.signal)})},s=()=>{const h=bF(this.options,n),g=(()=>{const v={client:Oe(this,kc),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return Bt(this,Sc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Oe(this,kc),state:this.state,fetchFn:s};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),Bt(this,_c,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Yr(this,qi,Ys).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=h=>{var m,g,v,x;_w(h)&&h.silent||Yr(this,qi,Ys).call(this,{type:"error",error:h}),_w(h)||((g=(m=Oe(this,vi).config).onError)==null||g.call(m,h,this),(x=(v=Oe(this,vi).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return Bt(this,Qr,kF({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,g,v,x;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(g=(m=Oe(this,vi).config).onSuccess)==null||g.call(m,h,this),(x=(v=Oe(this,vi).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{Yr(this,qi,Ys).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Yr(this,qi,Ys).call(this,{type:"pause"})},onContinue:()=>{Yr(this,qi,Ys).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Oe(this,Qr).start()}},xd=new WeakMap,_c=new WeakMap,vi=new WeakMap,kc=new WeakMap,Qr=new WeakMap,mp=new WeakMap,Sc=new WeakMap,qi=new WeakSet,Ys=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...gJ(r.data,this.options),fetchMeta:t.meta??null};case"success":return Bt(this,_c,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return _w(a)&&a.revert&&Oe(this,_c)?{...Oe(this,_c),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),pa.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Oe(this,vi).notify({query:this,type:"updated",action:t})})},ND);function gJ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jF(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vJ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var xs,CD,yJ=(CD=class extends ob{constructor(t={}){super();dn(this,xs);this.config=t,Bt(this,xs,new Map)}build(t,n,r){const a=n.queryKey,s=n.queryHash??RN(a,n);let o=this.get(s);return o||(o=new pJ({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Oe(this,xs).has(t.queryHash)||(Oe(this,xs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Oe(this,xs).get(t.queryHash);n&&(t.destroy(),n===t&&Oe(this,xs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){pa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Oe(this,xs).get(t)}getAll(){return[...Oe(this,xs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>sP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>sP(t,r)):n}notify(t){pa.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){pa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){pa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},xs=new WeakMap,CD),bs,la,Nc,ws,Ho,AD,xJ=(AD=class extends SF{constructor(t){super();dn(this,ws);dn(this,bs);dn(this,la);dn(this,Nc);this.mutationId=t.mutationId,Bt(this,la,t.mutationCache),Bt(this,bs,[]),this.state=t.state||bJ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Oe(this,bs).includes(t)||(Oe(this,bs).push(t),this.clearGcTimeout(),Oe(this,la).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Bt(this,bs,Oe(this,bs).filter(n=>n!==t)),this.scheduleGc(),Oe(this,la).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Oe(this,bs).length||(this.state.status==="pending"?this.scheduleGc():Oe(this,la).remove(this))}continue(){var t;return((t=Oe(this,Nc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,d,f,h,m,g,v,x,y,w,b,_,k,j,S,O;const n=()=>{Yr(this,ws,Ho).call(this,{type:"continue"})};Bt(this,Nc,kF({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,P)=>{Yr(this,ws,Ho).call(this,{type:"failed",failureCount:I,error:P})},onPause:()=>{Yr(this,ws,Ho).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Oe(this,la).canRun(this)}));const r=this.state.status==="pending",a=!Oe(this,Nc).canStart();try{if(r)n();else{Yr(this,ws,Ho).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=Oe(this,la).config).onMutate)==null?void 0:o.call(s,t,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));P!==this.state.context&&Yr(this,ws,Ho).call(this,{type:"pending",context:P,variables:t,isPaused:a})}const I=await Oe(this,Nc).start();return await((d=(u=Oe(this,la).config).onSuccess)==null?void 0:d.call(u,I,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,I,t,this.state.context)),await((g=(m=Oe(this,la).config).onSettled)==null?void 0:g.call(m,I,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,I,null,t,this.state.context)),Yr(this,ws,Ho).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(y=Oe(this,la).config).onError)==null?void 0:w.call(y,I,t,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,I,t,this.state.context)),await((j=(k=Oe(this,la).config).onSettled)==null?void 0:j.call(k,void 0,I,this.state.variables,this.state.context,this)),await((O=(S=this.options).onSettled)==null?void 0:O.call(S,void 0,I,t,this.state.context)),I}finally{Yr(this,ws,Ho).call(this,{type:"error",error:I})}}finally{Oe(this,la).runNext(this)}}},bs=new WeakMap,la=new WeakMap,Nc=new WeakMap,ws=new WeakSet,Ho=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),pa.batch(()=>{Oe(this,bs).forEach(r=>{r.onMutationUpdate(t)}),Oe(this,la).notify({mutation:this,type:"updated",action:t})})},AD);function bJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var no,Hi,pp,ED,wJ=(ED=class extends ob{constructor(t={}){super();dn(this,no);dn(this,Hi);dn(this,pp);this.config=t,Bt(this,no,new Set),Bt(this,Hi,new Map),Bt(this,pp,0)}build(t,n,r){const a=new xJ({mutationCache:this,mutationId:++lg(this,pp)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Oe(this,no).add(t);const n=Pg(t);if(typeof n=="string"){const r=Oe(this,Hi).get(n);r?r.push(t):Oe(this,Hi).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Oe(this,no).delete(t)){const n=Pg(t);if(typeof n=="string"){const r=Oe(this,Hi).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Oe(this,Hi).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Pg(t);if(typeof n=="string"){const r=Oe(this,Hi).get(n),a=r==null?void 0:r.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=Pg(t);if(typeof n=="string"){const a=(r=Oe(this,Hi).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){pa.batch(()=>{Oe(this,no).forEach(t=>{this.notify({type:"removed",mutation:t})}),Oe(this,no).clear(),Oe(this,Hi).clear()})}getAll(){return Array.from(Oe(this,no))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>oP(n,r))}findAll(t={}){return this.getAll().filter(n=>oP(t,n))}notify(t){pa.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return pa.batch(()=>Promise.all(t.map(n=>n.continue().catch(zi))))}},no=new WeakMap,Hi=new WeakMap,pp=new WeakMap,ED);function Pg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function uP(e){return{onFetch:(t,n)=>{var d,f,h,m,g;const r=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=bF(t.options,t.fetchOptions),w=async(b,_,k)=>{if(v)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const N={client:t.client,queryKey:t.queryKey,pageParam:_,direction:k?"backward":"forward",meta:t.options.meta};return x(N),N})(),O=await y(S),{maxPages:I}=t.options,P=k?lJ:oJ;return{pages:P(b.pages,O,I),pageParams:P(b.pageParams,_,I)}};if(a&&s.length){const b=a==="backward",_=b?jJ:dP,k={pages:s,pageParams:o},j=_(r,k);l=await w(k,j,b)}else{const b=e??s.length;do{const _=c===0?o[0]??r.initialPageParam:dP(r,l);if(c>0&&_==null)break;l=await w(l,_),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function dP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function jJ(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Zn,il,sl,bd,wd,ol,jd,_d,TD,_J=(TD=class{constructor(e={}){dn(this,Zn);dn(this,il);dn(this,sl);dn(this,bd);dn(this,wd);dn(this,ol);dn(this,jd);dn(this,_d);Bt(this,Zn,e.queryCache||new yJ),Bt(this,il,e.mutationCache||new wJ),Bt(this,sl,e.defaultOptions||{}),Bt(this,bd,new Map),Bt(this,wd,new Map),Bt(this,ol,0)}mount(){lg(this,ol)._++,Oe(this,ol)===1&&(Bt(this,jd,wF.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Zn).onFocus())})),Bt(this,_d,py.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Zn).onOnline())})))}unmount(){var e,t;lg(this,ol)._--,Oe(this,ol)===0&&((e=Oe(this,jd))==null||e.call(this),Bt(this,jd,void 0),(t=Oe(this,_d))==null||t.call(this),Bt(this,_d,void 0))}isFetching(e){return Oe(this,Zn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Oe(this,il).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Oe(this,Zn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Oe(this,Zn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(t1(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Oe(this,Zn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Oe(this,Zn).get(r.queryHash),s=a==null?void 0:a.state.data,o=tJ(t,s);if(o!==void 0)return Oe(this,Zn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return pa.batch(()=>Oe(this,Zn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Oe(this,Zn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Oe(this,Zn);pa.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Oe(this,Zn);return pa.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=pa.batch(()=>Oe(this,Zn).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(zi).catch(zi)}invalidateQueries(e,t={}){return pa.batch(()=>(Oe(this,Zn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=pa.batch(()=>Oe(this,Zn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(zi)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(zi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Oe(this,Zn).build(this,t);return n.isStaleByTime(t1(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(zi).catch(zi)}fetchInfiniteQuery(e){return e.behavior=uP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(zi).catch(zi)}ensureInfiniteQueryData(e){return e.behavior=uP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return py.isOnline()?Oe(this,il).resumePausedMutations():Promise.resolve()}getQueryCache(){return Oe(this,Zn)}getMutationCache(){return Oe(this,il)}getDefaultOptions(){return Oe(this,sl)}setDefaultOptions(e){Bt(this,sl,e)}setQueryDefaults(e,t){Oe(this,bd).set(hm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Oe(this,bd).values()],n={};return t.forEach(r=>{mm(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Oe(this,wd).set(hm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Oe(this,wd).values()],n={};return t.forEach(r=>{mm(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Oe(this,sl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=RN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===MN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Oe(this,sl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Oe(this,Zn).clear(),Oe(this,il).clear()}},Zn=new WeakMap,il=new WeakMap,sl=new WeakMap,bd=new WeakMap,wd=new WeakMap,ol=new WeakMap,jd=new WeakMap,_d=new WeakMap,TD),kJ=p.createContext(void 0),SJ=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(kJ.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pm.apply(this,arguments)}var ul;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ul||(ul={}));const fP="popstate";function NJ(e){e===void 0&&(e={});function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return r1("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:gy(a)}return AJ(t,n,null,e)}function pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function NF(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function CJ(){return Math.random().toString(36).substr(2,8)}function hP(e,t){return{usr:e.state,key:e.key,idx:t}}function r1(e,t,n,r){return n===void 0&&(n=null),pm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yf(t):t,{state:n,key:t&&t.key||r||CJ()})}function gy(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function yf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function AJ(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l=ul.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(pm({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=ul.Pop;let x=d(),y=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:y})}function h(x,y){l=ul.Push;let w=r1(v.location,x,y);u=d()+1;let b=hP(w,u),_=v.createHref(w);try{o.pushState(b,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(_)}s&&c&&c({action:l,location:v.location,delta:1})}function m(x,y){l=ul.Replace;let w=r1(v.location,x,y);u=d();let b=hP(w,u),_=v.createHref(w);o.replaceState(b,"",_),s&&c&&c({action:l,location:v.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof x=="string"?x:gy(x);return w=w.replace(/ $/,"%20"),pr(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let v={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(fP,f),c=x,()=>{a.removeEventListener(fP,f),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return o.go(x)}};return v}var mP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mP||(mP={}));function EJ(e,t,n){return n===void 0&&(n="/"),TJ(e,t,n,!1)}function TJ(e,t,n,r){let a=typeof t=="string"?yf(t):t,s=DN(a.pathname||"/",n);if(s==null)return null;let o=CF(e);PJ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=zJ(s);l=UJ(o[c],u,r)}return l}function CF(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(pr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=bl([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(pr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),CF(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:$J(u,s.index),routesMeta:d})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of AF(s.path))a(s,o,c)}),t}function AF(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=AF(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function PJ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:FJ(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OJ=/^:[\w-]+$/,IJ=3,RJ=2,MJ=1,DJ=10,LJ=-2,pP=e=>e==="*";function $J(e,t){let n=e.split("/"),r=n.length;return n.some(pP)&&(r+=LJ),t&&(r+=RJ),n.filter(a=>!pP(a)).reduce((a,s)=>a+(OJ.test(s)?IJ:s===""?MJ:DJ),r)}function FJ(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function UJ(e,t,n){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=gP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=gP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:bl([s,f.pathname]),pathnameBase:KJ(bl([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=bl([s,f.pathnameBase]))}return o}function gP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=BJ(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let v=l[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function BJ(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),NF(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function zJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return NF(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function DN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function WJ(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?yf(e):e;return{pathname:n?n.startsWith("/")?n:qJ(n,t):t,search:VJ(r),hash:GJ(a)}}function qJ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function kw(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HJ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function EF(e,t){let n=HJ(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TF(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=yf(e):(a=pm({},e),pr(!a.pathname||!a.pathname.includes("?"),kw("?","pathname","search",a)),pr(!a.pathname||!a.pathname.includes("#"),kw("#","pathname","hash",a)),pr(!a.search||!a.search.includes("#"),kw("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=WJ(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const bl=e=>e.join("/").replace(/\/\/+/g,"/"),KJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VJ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,GJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function YJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const PF=["post","put","patch","delete"];new Set(PF);const XJ=["get",...PF];new Set(XJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gm.apply(this,arguments)}const LN=p.createContext(null),JJ=p.createContext(null),au=p.createContext(null),cb=p.createContext(null),$l=p.createContext({outlet:null,matches:[],isDataRoute:!1}),OF=p.createContext(null);function QJ(e,t){let{relative:n}=t===void 0?{}:t;Ap()||pr(!1);let{basename:r,navigator:a}=p.useContext(au),{hash:s,pathname:o,search:l}=RF(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:bl([r,o])),a.createHref({pathname:c,search:l,hash:s})}function Ap(){return p.useContext(cb)!=null}function Fl(){return Ap()||pr(!1),p.useContext(cb).location}function IF(e){p.useContext(au).static||p.useLayoutEffect(e)}function ci(){let{isDataRoute:e}=p.useContext($l);return e?fQ():ZJ()}function ZJ(){Ap()||pr(!1);let e=p.useContext(LN),{basename:t,future:n,navigator:r}=p.useContext(au),{matches:a}=p.useContext($l),{pathname:s}=Fl(),o=JSON.stringify(EF(a,n.v7_relativeSplatPath)),l=p.useRef(!1);return IF(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=TF(u,JSON.parse(o),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:bl([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,o,s,e])}function eQ(){let{matches:e}=p.useContext($l),t=e[e.length-1];return t?t.params:{}}function RF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(au),{matches:a}=p.useContext($l),{pathname:s}=Fl(),o=JSON.stringify(EF(a,r.v7_relativeSplatPath));return p.useMemo(()=>TF(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function tQ(e,t){return nQ(e,t)}function nQ(e,t,n,r){Ap()||pr(!1);let{navigator:a}=p.useContext(au),{matches:s}=p.useContext($l),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Fl(),d;if(t){var f;let x=typeof t=="string"?yf(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||pr(!1),d=x}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=EJ(e,{pathname:m}),v=oQ(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:bl([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:bl([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return t&&v?p.createElement(cb.Provider,{value:{location:gm({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ul.Pop}},v):v}function rQ(){let e=dQ(),t=YJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:a},n):null,null)}const aQ=p.createElement(rQ,null);class iQ extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement($l.Provider,{value:this.props.routeContext},p.createElement(OF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sQ(e){let{routeContext:t,match:n,children:r}=e,a=p.useContext(LN);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement($l.Provider,{value:t},r)}function oQ(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||pr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=n,g=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,g=!1,v=null,x=null;n&&(m=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||aQ,c&&(u<0&&h===0?(g=!0,x=null):u===h&&(g=!0,x=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,h+1)),w=()=>{let b;return m?b=v:g?b=x:f.route.Component?b=p.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,p.createElement(sQ,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(iQ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var MF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(MF||{}),vy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vy||{});function lQ(e){let t=p.useContext(LN);return t||pr(!1),t}function cQ(e){let t=p.useContext(JJ);return t||pr(!1),t}function uQ(e){let t=p.useContext($l);return t||pr(!1),t}function DF(e){let t=uQ(),n=t.matches[t.matches.length-1];return n.route.id||pr(!1),n.route.id}function dQ(){var e;let t=p.useContext(OF),n=cQ(vy.UseRouteError),r=DF(vy.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function fQ(){let{router:e}=lQ(MF.UseNavigateStable),t=DF(vy.UseNavigateStable),n=p.useRef(!1);return IF(()=>{n.current=!0}),p.useCallback(function(a,s){s===void 0&&(s={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,gm({fromRouteId:t},s)))},[e,t])}function hQ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ga(e){pr(!1)}function mQ(e){let{basename:t="/",children:n=null,location:r,navigationType:a=ul.Pop,navigator:s,static:o=!1,future:l}=e;Ap()&&pr(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:s,static:o,future:gm({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=yf(r));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:g="default"}=r,v=p.useMemo(()=>{let x=DN(d,c);return x==null?null:{location:{pathname:x,search:f,hash:h,state:m,key:g},navigationType:a}},[c,d,f,h,m,g,a]);return v==null?null:p.createElement(au.Provider,{value:u},p.createElement(cb.Provider,{children:n,value:v}))}function pQ(e){let{children:t,location:n}=e;return tQ(a1(t),n)}new Promise(()=>{});function a1(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,a)=>{if(!p.isValidElement(r))return;let s=[...t,a];if(r.type===p.Fragment){n.push.apply(n,a1(r.props.children,s));return}r.type!==Ga&&pr(!1),!r.props.index||!r.props.children||pr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=a1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i1.apply(this,arguments)}function gQ(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function vQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yQ(e,t){return e.button===0&&(!t||t==="_self")&&!vQ(e)}function s1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function xQ(e,t){let n=s1(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}const bQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wQ="6";try{window.__reactRouterVersion=wQ}catch{}const jQ="startTransition",vP=wS[jQ];function _Q(e){let{basename:t,children:n,future:r,window:a}=e,s=p.useRef();s.current==null&&(s.current=NJ({window:a,v5Compat:!0}));let o=s.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=p.useCallback(f=>{u&&vP?vP(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>hQ(r),[r]),p.createElement(mQ,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const kQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NQ=p.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=gQ(t,bQ),{basename:m}=p.useContext(au),g,v=!1;if(typeof u=="string"&&SQ.test(u)&&(g=u,kQ))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),k=DN(_.pathname,m);_.origin===b.origin&&k!=null?u=k+_.search+_.hash:v=!0}catch{}let x=QJ(u,{relative:a}),y=CQ(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function w(b){r&&r(b),b.defaultPrevented||y(b)}return p.createElement("a",i1({},h,{href:g||x,onClick:v||s?r:w,ref:n,target:c}))});var yP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(yP||(yP={}));var xP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xP||(xP={}));function CQ(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=ci(),u=Fl(),d=RF(e,{relative:o});return p.useCallback(f=>{if(yQ(f,n)){f.preventDefault();let h=r!==void 0?r:gy(u)===gy(d);c(e,{replace:h,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,s,o,l])}function $N(e){let t=p.useRef(s1(e)),n=p.useRef(!1),r=Fl(),a=p.useMemo(()=>xQ(r.search,n.current?null:t.current),[r.search]),s=ci(),o=p.useCallback((l,c)=>{const u=s1(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const AQ="modulepreload",EQ=function(e){return"/"+e},bP={},Xi=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=EQ(c),c in bP)return;bP[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":AQ,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},TQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Xi(async()=>{const{default:r}=await Promise.resolve().then(()=>xf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class FN extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class PQ extends FN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class wP extends FN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jP extends FN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var o1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(o1||(o1={}));var OQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class IQ{constructor(t,{headers:n={},customFetch:r,region:a=o1.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=TQ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return OQ(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(v=>{throw new PQ(v)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new wP(f);if(!f.ok)throw new jP(f);let m=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield f.json():m==="application/octet-stream"?g=yield f.blob():m==="text/event-stream"?g=f:m==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof jP||a instanceof wP?a.context:void 0}}})}}var Ta={},UN={},ub={},Ep={},db={},fb={},RQ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Id=RQ();const MQ=Id.fetch,LF=Id.fetch.bind(Id),$F=Id.Headers,DQ=Id.Request,LQ=Id.Response,xf=Object.freeze(Object.defineProperty({__proto__:null,Headers:$F,Request:DQ,Response:LQ,default:LF,fetch:MQ},Symbol.toStringTag,{value:"Module"})),$Q=pH(xf);var hb={};Object.defineProperty(hb,"__esModule",{value:!0});let FQ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};hb.default=FQ;var FF=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fb,"__esModule",{value:!0});const UQ=FF($Q),BQ=FF(hb);let zQ=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=UQ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let u=null,d=null,f=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await s.text();try{u=JSON.parse(v),Array.isArray(u)&&s.status===404&&(d=[],u=null,h=200,m="OK")}catch{s.status===404&&v===""?(h=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new BQ.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};fb.default=zQ;var WQ=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(db,"__esModule",{value:!0});const qQ=WQ(fb);let HQ=class extends qQ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};db.default=HQ;var KQ=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ep,"__esModule",{value:!0});const VQ=KQ(db);let GQ=class extends VQ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Ep.default=GQ;var YQ=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ub,"__esModule",{value:!0});const Yf=YQ(Ep);let XQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=n,this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Yf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Yf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Yf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Yf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Yf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ub.default=XQ;var mb={},pb={};Object.defineProperty(pb,"__esModule",{value:!0});pb.version=void 0;pb.version="0.0.0-automated";Object.defineProperty(mb,"__esModule",{value:!0});mb.DEFAULT_HEADERS=void 0;const JQ=pb;mb.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${JQ.version}`};var UF=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(UN,"__esModule",{value:!0});const QQ=UF(ub),ZQ=UF(Ep),eZ=mb;let tZ=class BF{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},eZ.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new QQ.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new BF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new ZQ.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};UN.default=tZ;var bf=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.PostgrestError=Ta.PostgrestBuilder=Ta.PostgrestTransformBuilder=Ta.PostgrestFilterBuilder=Ta.PostgrestQueryBuilder=Ta.PostgrestClient=void 0;const zF=bf(UN);Ta.PostgrestClient=zF.default;const WF=bf(ub);Ta.PostgrestQueryBuilder=WF.default;const qF=bf(Ep);Ta.PostgrestFilterBuilder=qF.default;const HF=bf(db);Ta.PostgrestTransformBuilder=HF.default;const KF=bf(fb);Ta.PostgrestBuilder=KF.default;const VF=bf(hb);Ta.PostgrestError=VF.default;var nZ=Ta.default={PostgrestClient:zF.default,PostgrestQueryBuilder:WF.default,PostgrestFilterBuilder:qF.default,PostgrestTransformBuilder:HF.default,PostgrestBuilder:KF.default,PostgrestError:VF.default};const{PostgrestClient:rZ,PostgrestQueryBuilder:y5e,PostgrestFilterBuilder:x5e,PostgrestTransformBuilder:b5e,PostgrestBuilder:w5e,PostgrestError:j5e}=nZ;class aZ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const iZ="2.15.1",sZ=`realtime-js/${iZ}`,oZ="1.0.0",l1=1e4,lZ=1e3,cZ=100;var Mh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Mh||(Mh={}));var xr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xr||(xr={}));var Vi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vi||(Vi={}));var c1;(function(e){e.websocket="websocket"})(c1||(c1={}));var uc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(uc||(uc={}));class uZ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class GF{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var On;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(On||(On={}));const _P=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=dZ(o,e,t,a),s),{})},dZ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=n[e];return s&&!r.includes(s)?YF(s,o):u1(o)},YF=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return pZ(t,n)}switch(e){case On.bool:return fZ(t);case On.float4:case On.float8:case On.int2:case On.int4:case On.int8:case On.numeric:case On.oid:return hZ(t);case On.json:case On.jsonb:return mZ(t);case On.timestamp:return gZ(t);case On.abstime:case On.date:case On.daterange:case On.int4range:case On.int8range:case On.money:case On.reltime:case On.text:case On.time:case On.timestamptz:case On.timetz:case On.tsrange:case On.tstzrange:return u1(t);default:return u1(t)}},u1=e=>e,fZ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hZ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},mZ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},pZ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>YF(t,l))}return e},gZ=e=>typeof e=="string"?e.replace(" ","T"):e,XF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Sw{constructor(t,n,r={},a=l1){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kP||(kP={}));class Dh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dh.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=Dh.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Dh.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const s=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(s,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=s[u];if(f){const h=d.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),g=d.filter(x=>m.indexOf(x.presence_ref)<0),v=f.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var SP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(SP||(SP={}));var Lh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Lh||(Lh={}));var Qs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Qs||(Qs={}));class BN{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=xr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sw(this,Vi.join,this.params,this.timeout),this.rejoinTimer=new GF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vi.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Dh(this),this.broadcastEndpointURL=XF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==xr.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Lh.PRESENCE]&&this.bindings[Lh.PRESENCE].length>0,d={},f={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Qs.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Qs.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket.setAuth(),h===void 0){t==null||t(Qs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<v;y++){const w=g[y],{filter:{event:b,schema:_,table:k,filter:j}}=w,S=h&&h[y];if(S&&S.event===b&&S.schema===_&&S.table===k&&S.filter===j)x.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),this.state=xr.errored,t==null||t(Qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Qs.SUBSCRIBED);return}}).receive("error",h=>{this.state=xr.errored,t==null||t(Qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===xr.joined&&t===Lh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Sw(this,Vi.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,s=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Sw(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>cZ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Vi;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,v,x,y,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,k=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(w=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===xr.closed}_isJoined(){return this.state===xr.joined}_isJoining(){return this.state===xr.joining}_isLeaving(){return this.state===xr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&BN.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vi.close,{},t)}_onError(t){this._on(Vi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=_P(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=_P(t.columns,t.old_record)),n}}const NP=()=>{},Og={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vZ=[1e3,2e3,5e3,1e4],yZ=1e4,xZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bZ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=l1,this.transport=null,this.heartbeatIntervalMs=Og.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=NP,this.ref=0,this.reconnectTimer=null,this.logger=NP,this.conn=null,this.sendBuffer=[],this.serializer=new uZ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>Xi(async()=>{const{default:l}=await Promise.resolve().then(()=>xf);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${c1.websocket}`,this.httpEndpoint=XF(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=aZ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:oZ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Mh.connecting:return uc.Connecting;case Mh.open:return uc.Open;case Mh.closing:return uc.Closing;default:return uc.Closed}}isConnected(){return this.connectionState()===uc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===r);if(a)return a;{const s=new BN(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(lZ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Og.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:s,ref:o}=n,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([xZ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:sZ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Vi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new GF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Og.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,s,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:l1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Og.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>vZ[d-1]||yZ,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class zN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function br(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class wZ extends zN{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class d1 extends zN{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var jZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const JF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Xi(async()=>{const{default:r}=await Promise.resolve().then(()=>xf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},_Z=()=>jZ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xi(()=>Promise.resolve().then(()=>xf),void 0)).Response:Response}),f1=e=>{if(Array.isArray(e))return e.map(n=>f1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=f1(r)}),t},kZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var iu=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Nw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),SZ=(e,t,n)=>iu(void 0,void 0,void 0,function*(){const r=yield _Z();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,o=(a==null?void 0:a.statusCode)||s+"";t(new wZ(Nw(a),s,o))}).catch(a=>{t(new d1(Nw(a),a))}):t(new d1(Nw(e),e))}),NZ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(kZ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function Tp(e,t,n,r,a,s){return iu(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,NZ(t,r,a,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>SZ(c,l,r))})})}function yy(e,t,n,r){return iu(this,void 0,void 0,function*(){return Tp(e,"GET",t,n,r)})}function vs(e,t,n,r,a){return iu(this,void 0,void 0,function*(){return Tp(e,"POST",t,r,a,n)})}function h1(e,t,n,r,a){return iu(this,void 0,void 0,function*(){return Tp(e,"PUT",t,r,a,n)})}function CZ(e,t,n,r){return iu(this,void 0,void 0,function*(){return Tp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function QF(e,t,n,r,a){return iu(this,void 0,void 0,function*(){return Tp(e,"DELETE",t,r,a,n)})}var oa=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const AZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},CP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class EZ{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=JF(a)}uploadOrUpdate(t,n,r,a){return oa(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},CP),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(t=="PUT"?h1:vs)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(br(s))return{data:null,error:s};throw s}})}upload(t,n,r){return oa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return oa(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:CP.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield h1(this.fetch,l.toString(),c,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(c){if(br(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return oa(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield vs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new zN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(br(r))return{data:null,error:r};throw r}})}update(t,n,r){return oa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return oa(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(br(a))return{data:null,error:a};throw a}})}copy(t,n,r){return oa(this,void 0,void 0,function*(){try{return{data:{path:(yield vs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(br(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return oa(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield vs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(br(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return oa(this,void 0,void 0,function*(){try{const a=yield vs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(br(a))return{data:null,error:a};throw a}})}download(t,n){return oa(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield yy(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(br(l))return{data:null,error:l};throw l}})}info(t){return oa(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield yy(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:f1(r),error:null}}catch(r){if(br(r))return{data:null,error:r};throw r}})}exists(t){return oa(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield CZ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(br(r)&&r instanceof d1){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return oa(this,void 0,void 0,function*(){try{return{data:yield QF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(br(n))return{data:null,error:n};throw n}})}list(t,n,r){return oa(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},AZ),n),{prefix:t||""});return{data:yield vs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(br(a))return{data:null,error:a};throw a}})}listV2(t,n){return oa(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield vs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(br(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const TZ="2.11.0",PZ={"X-Client-Info":`storage-js/${TZ}`};var gu=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class OZ{constructor(t,n={},r,a){const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},PZ),n),this.fetch=JF(r)}listBuckets(){return gu(this,void 0,void 0,function*(){try{return{data:yield yy(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(br(t))return{data:null,error:t};throw t}})}getBucket(t){return gu(this,void 0,void 0,function*(){try{return{data:yield yy(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(br(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return gu(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(br(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return gu(this,void 0,void 0,function*(){try{return{data:yield h1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(br(r))return{data:null,error:r};throw r}})}emptyBucket(t){return gu(this,void 0,void 0,function*(){try{return{data:yield vs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(br(n))return{data:null,error:n};throw n}})}deleteBucket(t){return gu(this,void 0,void 0,function*(){try{return{data:yield QF(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(br(n))return{data:null,error:n};throw n}})}}class IZ extends OZ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new EZ(this.url,this.headers,t,this.fetch)}}const RZ="2.55.0";let xh="";typeof Deno<"u"?xh="deno":typeof document<"u"?xh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xh="react-native":xh="node";const MZ={"X-Client-Info":`supabase-js-${xh}/${RZ}`},DZ={headers:MZ},LZ={schema:"public"},$Z={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},FZ={};var UZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const BZ=e=>{let t;return e?t=e:typeof fetch>"u"?t=LF:t=fetch,(...n)=>t(...n)},zZ=()=>typeof Headers>"u"?$F:Headers,WZ=(e,t,n)=>{const r=BZ(n),a=zZ();return(s,o)=>UZ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var qZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function HZ(e){return e.endsWith("/")?e:e+"/"}function KZ(e,t){var n,r;const{db:a,auth:s,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>qZ(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const ZF="2.71.1",Iu=30*1e3,m1=3,Cw=m1*Iu,VZ="http://localhost:9999",GZ="supabase.auth.token",YZ={"X-Client-Info":`gotrue-js/${ZF}`},p1="X-Supabase-Api-Version",e3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JZ=10*60*1e3;class WN extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function zt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class QZ extends WN{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ZZ(e){return zt(e)&&e.name==="AuthApiError"}class t3 extends WN{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ul extends WN{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Ko extends Ul{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eee(e){return zt(e)&&e.name==="AuthSessionMissingError"}class Ig extends Ul{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rg extends Ul{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mg extends Ul{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tee(e){return zt(e)&&e.name==="AuthImplicitGrantRedirectError"}class AP extends Ul{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class g1 extends Ul{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Aw(e){return zt(e)&&e.name==="AuthRetryableFetchError"}class EP extends Ul{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class v1 extends Ul{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TP=` 	
\r=`.split(""),nee=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<TP.length;t+=1)e[TP[t].charCodeAt(0)]=-2;for(let t=0;t<xy.length;t+=1)e[xy[t].charCodeAt(0)]=t;return e})();function PP(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(xy[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(xy[r]),t.queuedBits-=6}}function n3(e,t,n){const r=nee[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function OP(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{iee(o,r,n)};for(let o=0;o<e.length;o+=1)n3(e.charCodeAt(o),a,s);return t.join("")}function ree(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function aee(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}ree(r,t)}}function iee(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function see(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)n3(e.charCodeAt(a),n,r);return new Uint8Array(t)}function oee(e){const t=[];return aee(e,n=>t.push(n)),new Uint8Array(t)}function lee(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>PP(a,n,r)),PP(null,n,r),t.join("")}function cee(e){return Math.round(Date.now()/1e3)+e}function uee(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fi=()=>typeof window<"u"&&typeof document<"u",Jl={tested:!1,writable:!1},r3=()=>{if(!Fi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function dee(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const a3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Xi(async()=>{const{default:r}=await Promise.resolve().then(()=>xf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},fee=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ru=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ql=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zo=async(e,t)=>{await e.removeItem(t)};class gb{constructor(){this.promise=new gb.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}gb.promiseConstructor=Promise;function Ew(e){const t=e.split(".");if(t.length!==3)throw new v1("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!XZ.test(t[r]))throw new v1("JWT not in base64url format");return{header:JSON.parse(OP(t[0])),payload:JSON.parse(OP(t[1])),signature:see(t[2]),raw:{header:t[0],payload:t[1]}}}async function hee(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function mee(e,t){return new Promise((r,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){a(o);return}}})()})}function pee(e){return("0"+e.toString(16)).substr(-2)}function gee(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,pee).join("")}async function vee(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function yee(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await vee(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vu(e,t,n=!1){const r=gee();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Ru(e,`${t}-code-verifier`,a);const s=await yee(r);return[s,r===s?"plain":"s256"]}const xee=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bee(e){const t=e.headers.get(p1);if(!t||!t.match(xee))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function wee(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jee(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _ee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yu(e){if(!_ee.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tw(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IP(e){return JSON.parse(JSON.stringify(e))}var kee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const rc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),See=[502,503,504];async function RP(e){var t;if(!fee(e))throw new g1(rc(e),0);if(See.includes(e.status))throw new g1(rc(e),e.status);let n;try{n=await e.json()}catch(s){throw new t3(rc(s),s)}let r;const a=bee(e);if(a&&a.getTime()>=e3["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new EP(rc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ko}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new EP(rc(n),e.status,n.weak_password.reasons);throw new QZ(rc(n),e.status||500,r)}const Nee=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Yt(e,t,n,r){var a;const s=Object.assign({},r==null?void 0:r.headers);s[p1]||(s[p1]=e3["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Cee(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Cee(e,t,n,r,a,s){const o=Nee(t,r,a,s);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new g1(rc(c),0)}if(l.ok||await RP(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await RP(c)}}function Xs(e){var t;let n=null;Pee(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=cee(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function MP(e){const t=Xs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Aee(e){return{data:e,error:null}}function Eee(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,o=kee(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Tee(e){return e}function Pee(e){return e.access_token&&e.refresh_token&&e.expires_in}const Pw=["global","local","others"];var Oee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class Iee{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=a3(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Pw[0]){if(Pw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pw.join(", ")}`);try{return await Yt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zo})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Oee(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Eee,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(zt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Yt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zo})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:Tee});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(zt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){yu(t);try{return await Yt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zo})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){yu(t);try{return await Yt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Zo})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){yu(t);try{return await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zo})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){yu(t.userId);try{const{data:n,error:r}=await Yt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){yu(t.userId),yu(t.id);try{return{data:await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}}}function DP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Ree(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xu={debug:!!(globalThis&&r3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class i3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Mee extends i3{}async function Dee(e,t,n){xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),xu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Mee(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Ree();const Lee={url:VZ,storageKey:GZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function LP(e,t,n){return await n()}const bu={};class vm{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vm.nextInstanceID,vm.nextInstanceID+=1,this.instanceID>0&&Fi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Lee),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Iee({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=a3(a.fetch),this.lock=a.lock||LP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Fi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Dee:this.lock=LP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:r3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=DP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=DP(this.memoryStorage)),Fi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=bu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){bu[this.storageKey]=Object.assign(Object.assign({},bu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=bu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bu[this.storageKey]=Object.assign(Object.assign({},bu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ZF}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=dee(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Fi()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),tee(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return zt(n)?{error:n}:{error:new t3("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const s=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Xs}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(zt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,a;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await vu(this.storage,this.storageKey)),s=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Xs})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Xs})}else throw new Rg("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(zt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:l}=t;n=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:MP})}else if("phone"in t){const{phone:s,password:o,options:l}=t;n=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:MP})}else throw new Rg("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ig}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(zt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,s,o,l,c,u,d,f,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:y,statement:w,options:b}=t;let _;if(Fi())if(typeof y=="object")_=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))_=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const k=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const j=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:x,error:y}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:lee(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Xs});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Ig}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(zt(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Ql(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:s,error:o}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Xs});if(await zo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Ig}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(zt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:s,nonce:o}=t,l=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xs}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ig}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(zt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await vu(this.storage,this.storageKey));const{error:f}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Rg("You must provide either an email or phone number.")}catch(l){if(zt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Xs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(zt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await vu(this.storage,this.storageKey)),await Yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Aee})}catch(s){if(zt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ko;const{error:a}=await Yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:s}=t,{error:o}=await Yt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:s}=t,{data:o,error:l}=await Yt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Rg("You must provide either an email or phone number and a type")}catch(n){if(zt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ql(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Cw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ql(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Tw()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zo}):await this._useSession(async n=>{var r,a,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ko}:await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Zo})})}catch(n){if(zt(n))return eee(n)&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:s}=r;if(s)throw s;if(!a.session)throw new Ko;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await vu(this.storage,this.storageKey));const{data:u,error:d}=await Yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Zo});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ko;const n=Date.now()/1e3;let r=n,a=!0,s=null;const{payload:o}=Ew(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(zt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ko;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(zt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fi())throw new Mg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new AP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new AP("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new Mg("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Iu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:a,access_token:s,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(zt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ql(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{error:s};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(ZZ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=uee(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await vu(this.storage,this.storageKey,!0));try{return await Yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(zt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async s=>{var o,l,c,u,d;const{data:f,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Yt(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Fi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(zt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)throw o;return await Yt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await mee(async a=>(a>0&&await hee(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xs})),(a,s)=>{const o=200*Math.pow(2,a);return s&&Aw(s)&&Date.now()+o-r<Iu})}catch(r){if(this._debug(n,"error",r),zt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Fi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ql(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ql(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Ru(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Tw()}else if(a&&!a.user&&!a.user){const o=await Ql(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await zo(this.storage,this.storageKey+"-user"),await Ru(this.storage,this.storageKey,a)):a.user=Tw()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Cw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Cw}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Aw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ko;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new gb;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Ko;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),zt(s)){const o={session:null,error:s};return Aw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ru(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=IP(a);await Ru(this.storage,this.storageKey,s)}else{const a=IP(n);await Ru(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await zo(this.storage,this.storageKey),await zo(this.storage,this.storageKey+"-code-verifier"),await zo(this.storage,this.storageKey+"-user"),this.userStorage&&await zo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Iu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Iu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Iu}ms, refresh threshold is ${m1} ticks`),a<=m1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof i3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await vu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);a.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await Yt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Yt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await Yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(zt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await Yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(zt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ew(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+JZ>a)return r;const{data:s,error:o}=await Yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,r=s.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=Ew(r);n!=null&&n.allowExpired||wee(s.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const d=jee(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,oee(`${l}.${c}`)))throw new v1("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}}}vm.nextInstanceID=0;const $ee=vm;class Fee extends $ee{constructor(t){super(t)}}var Uee=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Bee{constructor(t,n,r){var a,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=HZ(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:LZ,realtime:FZ,auth:Object.assign(Object.assign({},$Z),{storageKey:u}),global:DZ},f=KZ(r??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=WZ(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new rZ(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new IZ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new IQ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Uee(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:s,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fee({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new bZ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const s3=(e,t,n)=>new Bee(e,t,n);function zee(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}zee()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Wee={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},to=Wee??{},qee=e=>e.replace(/\/$/,""),o3=(e,t)=>{const n=(e??"").trim();if(!n)throw new Error(`[Supabase config] Missing ${t}. Set ${t} in your environment.`);return n},El=qee(o3(to==null?void 0:to.VITE_SUPABASE_URL,"VITE_SUPABASE_URL")),l3=o3((to==null?void 0:to.VITE_SUPABASE_ANON_KEY)??(to==null?void 0:to.VITE_SUPABASE_PUBLISHABLE_KEY),"VITE_SUPABASE_ANON_KEY (or VITE_SUPABASE_PUBLISHABLE_KEY)"),Sa=s3(El,l3,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var ac=(e=>(e.CLOSED="CLOSED",e.OPEN="OPEN",e.HALF_OPEN="HALF_OPEN",e))(ac||{});const Hee={failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4},Kee="circuit_breaker_";class Vee{constructor(t,n={}){Gt(this,"config");Gt(this,"state");Gt(this,"failures",[]);Gt(this,"successes",0);Gt(this,"stateChangedAt");Gt(this,"lastFailureTime",null);Gt(this,"lastSuccessTime",null);Gt(this,"totalRequests",0);Gt(this,"listeners",[]);Gt(this,"storageKey");this.name=t,this.config={...Hee,...n},this.storageKey=`${Kee}${t}`,this.state=this.loadState()||"CLOSED",this.stateChangedAt=Date.now(),this.failures=[],this.loadFromStorage()}async execute(t,n){if(this.totalRequests++,!this.canExecute()){const a=new Error(`Circuit breaker is ${this.state}. Request rejected.`);throw a.circuitBreaker={state:this.state,name:this.name},a}const r=n||this.config.timeout;try{const a=new Promise((o,l)=>{setTimeout(()=>{l(new Error(`Request timeout after ${r}ms`))},r)}),s=await Promise.race([t(),a]);return this.recordSuccess(),s}catch(a){throw a instanceof Error&&a.message.includes("timeout")&&this.emitEvent({type:"timeout"}),this.recordFailure(a),a}}canExecute(){const t=Date.now();switch(this.state){case"CLOSED":return!0;case"OPEN":return t-this.stateChangedAt>=this.config.resetTimeout?(this.transitionTo("HALF_OPEN"),!0):!1;case"HALF_OPEN":return!0;default:return!1}}recordSuccess(){this.lastSuccessTime=Date.now(),this.emitEvent({type:"success"}),this.state==="HALF_OPEN"&&(this.successes++,this.successes>=this.config.successThreshold&&(this.transitionTo("CLOSED"),this.successes=0,this.failures=[])),this.saveToStorage()}recordFailure(t){const n=Date.now();this.lastFailureTime=n,this.emitEvent({type:"failure",error:t}),this.failures.push({time:n});const r=n-this.config.monitoringPeriod;this.failures=this.failures.filter(a=>a.time>r),(this.state==="CLOSED"||this.state==="HALF_OPEN")&&this.failures.length>=this.config.failureThreshold&&(this.transitionTo("OPEN"),this.successes=0),this.state==="HALF_OPEN"&&(this.transitionTo("OPEN"),this.successes=0),this.saveToStorage()}transitionTo(t){if(this.state===t)return;const n=this.state;this.state=t,this.stateChangedAt=Date.now(),this.emitEvent({type:"stateChange",from:n,to:t}),this.saveToStorage()}getStats(){return{failures:this.failures.length,successes:this.successes,state:this.state,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,stateChangedAt:this.stateChangedAt,totalRequests:this.totalRequests}}getState(){return this.state}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t};try{if(typeof localStorage<"u"){const n=localStorage.getItem(this.storageKey),r=n?JSON.parse(n):{};r.config=this.config,localStorage.setItem(this.storageKey,JSON.stringify(r))}}catch(n){console.warn("Failed to save circuit breaker config:",n)}}reset(){this.transitionTo("CLOSED"),this.failures=[],this.successes=0,this.lastFailureTime=null,this.lastSuccessTime=null,this.totalRequests=0,this.saveToStorage()}open(){this.transitionTo("OPEN")}on(t,n){this.listeners.push(n)}off(t){this.listeners=this.listeners.filter(n=>n!==t)}emitEvent(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Circuit breaker event listener error:",r)}})}saveToStorage(){try{if(typeof localStorage<"u"){const t={state:this.state,stateChangedAt:this.stateChangedAt,failures:this.failures,successes:this.successes,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,totalRequests:this.totalRequests};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save circuit breaker state:",t)}}loadState(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t).state}}catch(t){console.warn("Failed to load circuit breaker state:",t)}return null}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...this.config,...n.config}),this.state=n.state||"CLOSED",this.stateChangedAt=n.stateChangedAt||Date.now(),this.failures=(n.failures||[]).filter(r=>{const a=Date.now()-this.config.monitoringPeriod;return r.time>a}),this.successes=n.successes||0,this.lastFailureTime=n.lastFailureTime||null,this.lastSuccessTime=n.lastSuccessTime||null,this.totalRequests=n.totalRequests||0,this.state==="OPEN"&&Date.now()-this.stateChangedAt>=this.config.resetTimeout&&this.transitionTo("HALF_OPEN")}}}catch(t){console.warn("Failed to load circuit breaker state:",t)}}}const ln=new Vee("database",{failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4}),Gee=["ECONNRESET","ENOTFOUND","ETIMEDOUT","ECONNREFUSED","NetworkError"],Yee=["Timeout","ETIMEDOUT"],Xee=[500,502,503,504,429];function Wi(e){var a;const t=(e==null?void 0:e.message)||String(e),n=(e==null?void 0:e.code)||(e==null?void 0:e.error_code)||"",r=(e==null?void 0:e.status)||(e==null?void 0:e.statusCode)||((a=e==null?void 0:e.response)==null?void 0:a.status);if(Gee.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("network")))return{category:"NETWORK",isRetryable:!0,retryDelay:1e3,userMessage:"Koneksi jaringan bermasalah. Mencoba lagi...",originalError:e};if(Yee.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("timeout")))return{category:"TIMEOUT",isRetryable:!0,retryDelay:2e3,userMessage:"Permintaan memakan waktu terlalu lama. Mencoba lagi...",originalError:e};if(r===429||t.includes("rate limit")||t.includes("too many requests")||n==="PGRST301")return{category:"RATE_LIMIT",isRetryable:!0,retryDelay:5e3,userMessage:"Terlalu banyak permintaan. Mohon tunggu sebentar...",originalError:e};if(r===401||r===403||t.includes("JWT")||t.includes("token")||t.includes("unauthorized")||t.includes("forbidden")||n==="PGRST301"||n==="PGRST302")return{category:"AUTH_ERROR",isRetryable:!1,userMessage:"Sesi Anda telah berakhir. Silakan login kembali.",originalError:e};if(r===400||t.includes("validation")||t.includes("invalid")||t.includes("constraint")||n==="23505"||n==="23503"||n==="23514")return{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dimasukkan tidak valid. Silakan periksa kembali.",originalError:e};if(Xee.includes(r)||n!=null&&n.startsWith("PGRST")||n!=null&&n.startsWith("P0001")||t.includes("database")||t.includes("connection")){const s=r>=500||r===429;return{category:"DATABASE_ERROR",isRetryable:s,retryDelay:s?2e3:void 0,userMessage:s?"Database sedang bermasalah. Mencoba lagi...":"Terjadi kesalahan database. Silakan coba lagi nanti.",originalError:e}}return r===404?{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dicari tidak ditemukan.",originalError:e}:{category:"UNKNOWN",isRetryable:!0,retryDelay:1e3,userMessage:"Terjadi kesalahan. Mencoba lagi...",originalError:e}}const c3={reads:{limit:100,window:6e4},writes:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},Jee="rate_limit_";class y1{constructor(t="default",n={}){Gt(this,"config");Gt(this,"requests",new Map);Gt(this,"storageKey");this.name=t,this.config={...c3,...n},this.storageKey=`${Jee}${t}`,this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}checkLimit(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(v=>v.timestamp>c);const u=l.length,d=u<o.limit,f=l[0],h=f?f.timestamp+o.window:s+o.window,m=d?void 0:Math.ceil((h-s)/1e3)*1e3,g={allowed:d,remaining:Math.max(0,o.limit-u-1),resetAt:h,retryAfter:m};return d&&(l.push({timestamp:s,operation:n,endpoint:r}),this.requests.set(a,l),this.saveToStorage(a,l)),g}recordRequest(t,n,r){const a=this.getKey(t,n,r),s=Date.now();let o=this.requests.get(a)||[];o.push({timestamp:s,operation:n,endpoint:r});const l=this.getConfig(n),c=s-l.window;o=o.filter(u=>u.timestamp>c),this.requests.set(a,o),this.saveToStorage(a,o)}getUsage(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(f=>f.timestamp>c);const u=l[0],d=u?u.timestamp+o.window:s+o.window;return{count:l.length,limit:o.limit,resetAt:d}}reset(t,n,r){if(n){const a=this.getKey(t,n,r);this.requests.delete(a),this.deleteFromStorage(a)}else{const a=t?`${t}:`:"anonymous:";for(const s of this.requests.keys())s.startsWith(a)&&(this.requests.delete(s),this.deleteFromStorage(s))}}cleanup(){const t=Date.now(),n=Math.max(this.config.reads.window,this.config.writes.window,this.config.rpc.window,this.config.auth.window),r=t-n;for(const[a,s]of this.requests.entries()){const o=s.filter(l=>l.timestamp>r);o.length===0?(this.requests.delete(a),this.deleteFromStorage(a)):o.length!==s.length&&(this.requests.set(a,o),this.saveToStorage(a,o))}}getConfig(t){return this.config[t]}getKey(t,n,r){return`${t||"anonymous"}:${n}${r?`:${r}`:""}`}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${this.storageKey}:${t}`,a=Date.now(),s=n.filter(o=>a-o.timestamp<6e4);localStorage.setItem(r,JSON.stringify({requests:s,savedAt:a}))}}catch(r){console.warn("Failed to save rate limit data:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now(),n=`${this.storageKey}:`;for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(n))try{const s=JSON.parse(localStorage.getItem(a)||"{}"),o=s.savedAt||0;if(t-o<3e5){const l=(s.requests||[]).filter(c=>{const u=c.operation||"read",d=this.getConfig(u);return t-c.timestamp<d.window});if(l.length>0){const c=a.replace(n,"");this.requests.set(c,l)}else localStorage.removeItem(a)}else localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}catch(t){console.warn("Failed to load rate limit data:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${this.storageKey}:${t}`;localStorage.removeItem(n)}}catch{}}}new y1("default",c3);class Qee{constructor(){Gt(this,"queue",[]);Gt(this,"batchSize",50);Gt(this,"batchInterval",3e4);Gt(this,"intervalId",null);Gt(this,"enabled",!0);Gt(this,"lastFlushTime",0);Gt(this,"flushThrottle",1e4);typeof window<"u"&&this.startBatching()}record(t){if(!this.enabled)return;this.queue.length>=1e3&&(this.queue=this.queue.slice(-500)),this.queue.push({...t,timestamp:Date.now()});const n=Date.now();this.queue.length>=this.batchSize&&n-this.lastFlushTime>=this.flushThrottle&&this.flush()}startBatching(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.flush()},this.batchInterval)}stopBatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}async flush(){if(this.queue.length===0)return;const t=Date.now();if(t-this.lastFlushTime<this.flushThrottle)return;const n=[...this.queue];this.queue=[],this.lastFlushTime=t;try{const{error:r}=await ce.from("circuit_breaker_metrics").insert(n.map(a=>({operation_type:a.operationType,endpoint:a.endpoint||null,user_id:a.userId||null,circuit_breaker_state:a.circuitBreakerState,success:a.success,error_category:a.errorCategory||null,response_time_ms:a.responseTimeMs,metadata:a.metadata||{}})));r&&(console.warn("Failed to send metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue]))}catch(r){console.warn("Failed to flush metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue])}}setEnabled(t){this.enabled=t,t?this.startBatching():(this.stopBatching(),this.queue=[])}getQueueSize(){return this.queue.length}async forceFlush(){await this.flush()}}function Ow(e,t){if(e.length===0)return 0;const n=[...e].sort((a,s)=>a-s),r=Math.ceil(t/100*n.length)-1;return n[Math.max(0,r)]}async function u3(e,t,n){try{let r=ce.from("circuit_breaker_metrics").select("*");e&&(r=r.gte("created_at",e.toISOString())),t&&(r=r.lt("created_at",t.toISOString()));const{data:a,error:s}=await r;if(s||!a)return{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}};const o=a.length,l=a.filter(g=>g.success).length,c=a.filter(g=>!g.success).length,u=a.map(g=>g.response_time_ms||0).filter(g=>g>0),d={},f={},h={};a.forEach(g=>{const v=g.circuit_breaker_state||"UNKNOWN";if(d[v]=(d[v]||0)+1,g.error_category){const y=g.error_category;f[y]=(f[y]||0)+1}const x=g.operation_type||"unknown";h[x]=(h[x]||0)+1});const m=u.length>0?u.reduce((g,v)=>g+v,0)/u.length:0;return{totalOperations:o,successRate:o>0?l/o:0,failureRate:o>0?c/o:0,avgResponseTime:m,p50ResponseTime:Ow(u,50),p95ResponseTime:Ow(u,95),p99ResponseTime:Ow(u,99),circuitBreakerStates:d,errorCategories:f,operationsByType:h}}catch(r){return console.error("Failed to get metrics stats:",r),{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}}}}const ym=new Qee,$P={baseConfig:{read:{limit:100,window:6e4},write:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},minMultiplier:.5,maxMultiplier:2,adjustmentInterval:6e4,healthyLatencyThreshold:200,stressLatencyThreshold:1e3};class Zee{constructor(t={}){Gt(this,"config");Gt(this,"currentMultipliers",new Map);Gt(this,"lastAdjustment",Date.now());Gt(this,"rateLimiters",new Map);Gt(this,"storageKey","adaptive_rate_limiter");Gt(this,"adjustmentIntervalId",null);this.config={...$P,...t},this.loadFromStorage(),Object.keys(this.config.baseConfig).forEach(n=>{this.currentMultipliers.has(n)||this.currentMultipliers.set(n,1)}),typeof window<"u"&&(this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval))}getLimiter(t){if(!this.rateLimiters.has(t)){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1,a={limit:Math.round(n.limit*r),window:n.window};this.rateLimiters.set(t,new y1(`adaptive_${t}`,{[t]:a}))}return this.rateLimiters.get(t)}async adjustLimits(){try{const t=Date.now(),n=new Date(t-5*60*1e3),r=await this.getRecentStats(n,new Date(t));for(const a of Object.keys(this.config.baseConfig))await this.adjustOperationLimit(a,r);this.lastAdjustment=t}catch(t){console.warn("Failed to adjust rate limits:",t)}}async getRecentStats(t,n){try{const r=await u3(t,n);return{avgResponseTime:r.avgResponseTime,errorRate:r.failureRate,requestVolume:r.totalOperations}}catch{return{avgResponseTime:300,errorRate:.01,requestVolume:100}}}async adjustOperationLimit(t,n){const r=this.currentMultipliers.get(t)||1,a=this.config.baseConfig[t];let s=r;const{avgResponseTime:o,errorRate:l}=n;o<this.config.healthyLatencyThreshold&&l<.05?s=Math.min(r*1.1,this.config.maxMultiplier):o>this.config.stressLatencyThreshold||l>.2?s=Math.max(r*.8,this.config.minMultiplier):r>1?s=Math.max(r*.95,1):r<1&&(s=Math.min(r*1.05,1)),this.currentMultipliers.set(t,s);const c={limit:Math.round(a.limit*s),window:a.window};this.rateLimiters.set(t,new y1(`adaptive_${t}`,{[t]:c})),this.saveToStorage()}getMultiplier(t){return this.currentMultipliers.get(t)||1}getEffectiveLimit(t){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1;return Math.round(n.limit*r)}reset(){Object.keys(this.config.baseConfig).forEach(t=>{this.currentMultipliers.set(t,1),this.rateLimiters.delete(t)}),this.saveToStorage()}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t},t.adjustmentInterval&&typeof window<"u"&&(this.adjustmentIntervalId&&clearInterval(this.adjustmentIntervalId),this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval)),this.rateLimiters.clear(),this.saveToStorage()}checkLimit(t,n,r){return this.getLimiter(n).checkLimit(t,n,r)}recordRequest(t,n,r){this.getLimiter(n).recordRequest(t,n,r)}getUsage(t,n,r){return this.getLimiter(n).getUsage(t,n,r)}saveToStorage(){try{if(typeof localStorage<"u"){const t={config:this.config,multipliers:Object.fromEntries(this.currentMultipliers),lastAdjustment:this.lastAdjustment};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save adaptive rate limiter config:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...$P,...n.config}),n.multipliers&&Object.entries(n.multipliers).forEach(([r,a])=>{this.currentMultipliers.set(r,a)}),n.lastAdjustment&&(this.lastAdjustment=n.lastAdjustment)}}}catch(t){console.warn("Failed to load adaptive rate limiter config:",t)}}}const Ht=new Zee;async function d3(e,t=3,n=1e3){let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){r=s;const o=Wi(s);if(!o.isRetryable||ln.getState()!=="CLOSED")throw s;if(a>=t)break;const l=Math.min(n*Math.pow(2,a),8e3),c=o.retryDelay||l;await new Promise(u=>setTimeout(u,c))}throw r}let Xf=null,Iw=0;const ete=6e4;async function qN(e,t=!1){var r,a;const n=Date.now();if(!t&&Xf!==null&&n-Iw<ete)return Xf;try{const s=e.auth.getSession(),o=new Promise(c=>{setTimeout(()=>c({data:{session:null}}),500)}),{data:l}=await Promise.race([s,o]);return Xf=((a=(r=l==null?void 0:l.session)==null?void 0:r.user)==null?void 0:a.id)||null,Iw=n,Xf}catch{return Xf=null,Iw=n,null}}async function f3(e,t,n,r,a=!1){if(a)return;const s=r!==void 0?r:await qN(e).catch(()=>null);if(t==="rpc"){const l=Ht.getUsage(s,t,n);if(l.count<l.limit*.9){Ht.recordRequest(s,t,n);return}const c=Ht.checkLimit(s,t,n);if(!c.allowed){const u=new Error(c.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(c.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw u.code="RATE_LIMIT_EXCEEDED",u.status=429,u.retryAfter=c.retryAfter,u.category="RATE_LIMIT",u}return}const o=Ht.checkLimit(s,t,n);if(!o.allowed){const l=new Error(o.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(o.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw l.code="RATE_LIMIT_EXCEEDED",l.status=429,l.retryAfter=o.retryAfter,l.category="RATE_LIMIT",l}}function x1(e){return e===void 0?"u":e===null?"n":typeof e=="function"?"f":typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"?`p:${String(e)}`:typeof e=="string"?`s:${e}`:e instanceof Date?`d:${e.toISOString()}`:Array.isArray(e)?`a:[${e.map(t=>x1(t)).join(",")}]`:typeof e=="object"?`o:{${Object.keys(e).sort().map(r=>`${r}:${x1(e[r])}`).join(",")}}`:`x:${String(e)}`}function tte(e){return!e||e.length===0?"":e.map(t=>x1(t)).join("|")}function nte(e){if(!e)return"base";let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t).toString(36)}function h3(e,t,n="read",r,a=!1,s=""){return new Proxy(e,{get(o,l){const c=o[l];let u=n;if((l==="insert"||l==="update"||l==="upsert"||l==="delete")&&(u="write"),l==="then"||l==="catch"||l==="finally"){const d=Promise.resolve(o),f=(async()=>{const h=Date.now();nte(s);const m=qN(t).catch(()=>null),g=ln.getState();try{const b=await Promise.race([m,new Promise(_=>setTimeout(()=>_(null),100))]);u==="read"?Ht.recordRequest(b,u,r):await f3(t,u,r,b)}catch(b){if(b.code==="RATE_LIMIT_EXCEEDED")throw b}let v;try{v=await ln.execute(()=>d3(async()=>await d))}catch(b){v={data:null,error:b}}const x=Date.now()-h,y=v!=null&&v.error?Wi(v.error).category:void 0,w=await m.catch(()=>null);return Promise.resolve().then(()=>{try{ym.record({operationType:u,endpoint:r,userId:w||void 0,circuitBreakerState:g,success:!(v!=null&&v.error),errorCategory:y,responseTimeMs:x,metadata:v!=null&&v.error?{error:v.error.message}:{}})}catch{}}),v})().catch(h=>{const m=Date.now()-startTime,g=Wi(h);return ym.record({operationType:u,endpoint:r,userId:userId||void 0,circuitBreakerState:circuitState,success:!1,errorCategory:g.category,responseTimeMs:m,metadata:{error:h instanceof Error?h.message:String(h)}}),h.code==="RATE_LIMIT_EXCEEDED"?{data:null,error:{message:h.message,code:"RATE_LIMIT_EXCEEDED",status:429,category:"RATE_LIMIT",retryAfter:h.retryAfter,circuitBreaker:ln.getState()}}:h&&typeof h=="object"&&("data"in h||"error"in h)?{data:h.data||null,error:{...h.error||h,message:g.userMessage,category:g.category,circuitBreaker:ln.getState()}}:{data:null,error:{...g.originalError,message:g.userMessage,category:g.category,circuitBreaker:ln.getState()}}});return(h,m)=>f[l](h,m)}return typeof c=="function"?(...d)=>{const f=c.apply(o,d),h=tte(d),m=h?`${l}(${h})`:`${l}()`,g=s?`${s}|${m}`:m;return h3(f,t,u,r,a,g)}:c}})}function rte(e){const t=e;return{from:n=>{const r=t.from(n);return h3(r,t,"read",n)},rpc:async(n,r,a)=>{const s=Date.now(),o=qN(t).catch(()=>null),l=ln.getState();try{try{const h=await Promise.race([o,new Promise(m=>setTimeout(()=>m(null),100))]);await f3(t,"rpc",n,h,!1)}catch(h){if(h.code==="RATE_LIMIT_EXCEEDED")throw h}const c=await ln.execute(()=>d3(async()=>await t.rpc(n,r,a))),u=Date.now()-s,d=c!=null&&c.error?Wi(c.error).category:void 0,f=await o.catch(()=>null);return Promise.resolve().then(()=>{try{ym.record({operationType:"rpc",endpoint:n,userId:f||void 0,circuitBreakerState:l,success:!(c!=null&&c.error),errorCategory:d,responseTimeMs:u,metadata:c!=null&&c.error?{error:c.error.message}:{}})}catch{}}),c}catch(c){const u=Wi(c),d=Date.now()-s,f=await o.catch(()=>null);return Promise.resolve().then(()=>{try{ym.record({operationType:"rpc",endpoint:n,userId:f||void 0,circuitBreakerState:l,success:!1,errorCategory:u.category,responseTimeMs:d,metadata:{error:c instanceof Error?c.message:String(c)}})}catch{}}),{data:null,error:{...u.originalError,message:u.userMessage,category:u.category,circuitBreaker:l}}}},auth:{getSession:async()=>{try{return await ln.execute(()=>t.auth.getSession(),5e3)}catch(n){const r=Wi(n);throw new Error(r.userMessage)}},getUser:async()=>{try{return await ln.execute(()=>t.auth.getUser(),5e3)}catch(n){const r=Wi(n);throw new Error(r.userMessage)}},signOut:async()=>{try{return await ln.execute(()=>t.auth.signOut(),5e3)}catch(n){const r=Wi(n);throw new Error(r.userMessage)}},signInWithPassword:async n=>{try{return await ln.execute(()=>t.auth.signInWithPassword(n),1e4)}catch(r){const a=Wi(r);throw new Error(a.userMessage)}},signInWithOtp:async(n,r)=>{try{return await ln.execute(()=>t.auth.signInWithOtp({email:n,options:r}),1e4)}catch(a){const s=Wi(a);throw new Error(s.userMessage)}},verifyOtp:async n=>{try{return await ln.execute(()=>t.auth.verifyOtp(n),1e4)}catch(r){const a=Wi(r);throw new Error(a.userMessage)}},onAuthStateChange:t.auth.onAuthStateChange.bind(t.auth),resetPasswordForEmail:t.auth.resetPasswordForEmail.bind(t.auth),refreshSession:t.auth.refreshSession.bind(t.auth),updateUser:t.auth.updateUser.bind(t.auth),setSession:t.auth.setSession.bind(t.auth)},storage:t.storage,channel:t.channel.bind(t),removeChannel:t.removeChannel.bind(t),removeAllChannels:t.removeAllChannels.bind(t),getChannels:t.getChannels.bind(t),getCircuitBreaker:()=>ln,getCircuitBreakerStats:()=>ln.getStats()}}const ce=Sa,kt=rte(ce);async function nn(e){var t;try{const{action:n,resource:r,resourceId:a=null,context:s={},ip:o=null,userAgent:l=null}=e;let c=e.userId??null;if(!c)try{const f=typeof localStorage<"u"?localStorage.getItem("app.currentUserId"):null;f&&(c=f)}catch{}if(!c){const{data:f}=await ce.auth.getUser();c=((t=f==null?void 0:f.user)==null?void 0:t.id)??null}let u=e.orgId??null;if(!u&&c&&(authData!=null&&authData.user))try{const{data:f}=await ce.from("org_members").select("org_id").eq("user_id",c).limit(1).maybeSingle();u=(f==null?void 0:f.org_id)??null}catch{return}if(!u&&n==="auth.logout")return;if(!u)try{const{data:f}=await ce.from("orgs").select("id").limit(1).maybeSingle();u=(f==null?void 0:f.id)??null}catch{return}try{const f=`logAction:${n}:${r}:${c||"anon"}`,h=Date.now(),m=typeof localStorage<"u"?localStorage.getItem(f):null;if(m){const g=Number(m)||0;if(h-g<3e3)return}typeof localStorage<"u"&&localStorage.setItem(f,String(h))}catch{}if(!u)return;const{error:d}=await ce.rpc("log_action",{p_action:n,p_resource:r,p_resource_id:a,p_context:{...s,route:typeof window<"u"?window.location.pathname:null},p_ip:o,p_user_agent:l,p_org_id:u,p_user_id:c});d&&console.warn("logAction failed",d)}catch(n){console.warn("logAction threw",n)}}const m3=p.createContext(void 0);function ate({children:e}){var L;const t=ci(),[n,r]=p.useState(null),[a,s]=p.useState(null),[o,l]=p.useState(!0),c=p.useRef(null),[u,d]=p.useState(!1),f=p.useMemo(()=>{try{const B=new URL(El).hostname.split(".")[0];return B?`sb-${B}-auth-token`:null}catch{return null}},[]),[h,m]=p.useState(()=>{var E;try{if(localStorage.getItem("otpVerified")==="true")return!0;const R=localStorage.getItem("app.lastAuthEvent");if(R)try{const C=JSON.parse(R),q=(E=C==null?void 0:C.user)==null?void 0:E.id;if(q)return localStorage.getItem(`otpVerified:${q}`)==="true"}catch{}return!1}catch{return!1}}),[g,v]=p.useState(!1),[x,y]=p.useState(!1),[w,b]=p.useState(!1),[_,k]=p.useState(!1),[j,S]=p.useState(0);p.useEffect(()=>{b(!1)},[n==null?void 0:n.id]);const[O,I]=p.useState(!1),P=p.useRef(null),N=p.useRef(null);p.useEffect(()=>{N.current=(n==null?void 0:n.id)??null},[n==null?void 0:n.id]);const D=p.useCallback(E=>{var B;m(E);try{const R=(B=a==null?void 0:a.user)!=null&&B.id?`otpVerified:${a.user.id}`:"otpVerified";E?(localStorage.setItem(R,"true"),localStorage.setItem("otpVerified","true")):(localStorage.removeItem(R),localStorage.removeItem("otpVerified"))}catch{}},[(L=a==null?void 0:a.user)==null?void 0:L.id]),$=async E=>{var C,q;const B=(C=E==null?void 0:E.user)==null?void 0:C.id,R=j+1;if(S(R),!B)return y(!1),!0;if(_||w&&((q=E==null?void 0:E.user)==null?void 0:q.id)===(n==null?void 0:n.id))return!x;k(!0);try{const{data:Z,error:J}=await ce.from("users_profile").select("is_active").eq("user_id",B).maybeSingle();return J?(console.error("Error checking account status:",J),!x):Z?Z.is_active===!0?(y(!1),b(!0),!0):(t("/account-deactivated",{replace:!0}),!1):!x}catch(Z){return console.error("Failed to check account status",Z),!x}finally{k(!1)}},U=async E=>{var R,C,q,Z,J;const B=(R=E==null?void 0:E.user)==null?void 0:R.id;if(!B){d(!1);try{const ee=(C=E==null?void 0:E.user)!=null&&C.id?`otpRequired:${E.user.id}`:"otpRequired";localStorage.removeItem(ee)}catch{}return!1}try{const{data:ee,error:ae}=await ce.from("users_profile").select("is_2fa_email_enabled").eq("user_id",B).maybeSingle();if(ae)throw ae;if(!ee){d(!0);try{const oe=(q=E==null?void 0:E.user)!=null&&q.id?`otpRequired:${E.user.id}`:"otpRequired";localStorage.setItem(oe,"true")}catch{}return!0}const Q=(ee==null?void 0:ee.is_2fa_email_enabled)===!0;d(!!Q);try{const oe=(Z=E==null?void 0:E.user)!=null&&Z.id?`otpRequired:${E.user.id}`:"otpRequired";Q?localStorage.setItem(oe,"true"):localStorage.removeItem(oe)}catch{}return!!Q}catch(ee){console.warn("Failed to evaluate 2FA profile flag",ee),d(!0);try{const ae=(J=E==null?void 0:E.user)!=null&&J.id?`otpRequired:${E.user.id}`:"otpRequired";localStorage.setItem(ae,"true")}catch{}return!0}},F=E=>{let B=!1;const R=window.setTimeout(()=>{B||v(!0)},5e3);return E.finally(()=>{B=!0,window.clearTimeout(R),v(!0)})};p.useEffect(()=>{(async()=>{var q,Z,J;l(!0),v(!1);let R=!1;const C=window.setTimeout(()=>{R=!0,l(!1),v(!0)},5e3);try{try{localStorage.removeItem("otpRequired"),localStorage.removeItem("otpVerified")}catch{}try{const ge=Object.keys(localStorage).filter(ie=>ie.startsWith("sb-")&&ie.endsWith("-auth-token"));for(const ie of ge)try{const Ie=localStorage.getItem(ie);if(!Ie)continue;const me=JSON.parse(Ie);if(me!=null&&me.access_token&&(me!=null&&me.user)){s(me),r(me.user);break}}catch{}f?ge.filter(Ie=>Ie!==f).forEach(Ie=>{try{localStorage.removeItem(Ie)}catch{}}):localStorage.removeItem("sb-yoekcpoppfudmqtvjcby-auth-token")}catch{}const ee=await Promise.race([ce.auth.getSession().catch(()=>({data:{session:null}})),new Promise(ge=>{setTimeout(()=>ge({data:{session:null}}),4e3)})]),ae=((q=ee==null?void 0:ee.data)==null?void 0:q.session)??null;s(ae),r((ae==null?void 0:ae.user)??null);const Q=await Promise.race([ce.auth.getUser().catch(()=>({data:{user:null}})),new Promise(ge=>{setTimeout(()=>ge({data:{user:null}}),4e3)})]);if(!(((Z=Q==null?void 0:Q.data)==null?void 0:Z.user)??null)){s(null),r(null),d(!1),D(!1),v(!0);return}if(ae){if(!await Promise.race([$(ae),new Promise(ie=>setTimeout(()=>ie(!0),3e3))])){s(ae),r(ae.user),d(!1),D(!1),v(!0),l(!1);return}s(ae),r(ae.user);try{(J=ae.user)!=null&&J.id&&(localStorage.setItem("app.currentUserId",ae.user.id),localStorage.setItem("app.currentUserEmail",ae.user.email||""))}catch{}R||(window.clearTimeout(C),l(!1)),F(U(ae).then(ie=>{d(!!ie)}));return}else d(!1),D(!1),v(!0)}finally{R||(window.clearTimeout(C),l(!1))}})();const{data:{subscription:B}}=ce.auth.onAuthStateChange(async(R,C)=>{var q,Z,J,ee;try{if(R==="SIGNED_IN"){const ae=N.current,Q=((q=C==null?void 0:C.user)==null?void 0:q.id)||null;if(!!ae&&!!Q&&ae===Q){s(C),r((C==null?void 0:C.user)??null);return}if(O){s(C),r((C==null?void 0:C.user)??null);return}if(!await Promise.race([$(C),new Promise(me=>setTimeout(()=>me(!0),3e3))])){s(C),r((C==null?void 0:C.user)??null),d(!1),D(!1),v(!0),l(!1);return}s(C),r((C==null?void 0:C.user)??null);const ie=((Z=C==null?void 0:C.user)==null?void 0:Z.id)||null;if(ie&&P.current!==ie){nn({action:"auth.login",resource:"auth",userId:ie,context:{}}).catch(()=>{}),P.current=ie;try{localStorage.setItem("app.currentUserId",ie),localStorage.setItem("app.currentUserEmail",((J=C==null?void 0:C.user)==null?void 0:J.email)||"")}catch{}}let Ie=!1;try{const me=ie?`otpVerified:${ie}`:"otpVerified";Ie=localStorage.getItem(me)==="true"||localStorage.getItem("otpVerified")==="true"}catch{}D(!!Ie);try{const me=(ee=C==null?void 0:C.user)!=null&&ee.id?`otpRequired:${C.user.id}`:"otpRequired";localStorage.removeItem(me)}catch{}v(!1),l(!1),F(U(C).then(me=>{var K;if(me&&!Ie){const fe=((K=C==null?void 0:C.user)==null?void 0:K.id)||null;fe&&c.current!==fe&&ce.functions.invoke("send-2fa-login-email",{headers:C!=null&&C.access_token?{Authorization:`Bearer ${C.access_token}`}:void 0}).then(()=>{c.current=fe}).catch(De=>{console.warn("2FA send function failed",De)})}d(!!me)}));try{localStorage.setItem("app.lastAuthEvent",JSON.stringify({event:R,at:Date.now(),user:(C==null?void 0:C.user)||null}))}catch{}return}if(R==="PASSWORD_RECOVERY"){try{localStorage.setItem("auth.intent","recovery")}catch{}try{if(window.location.hash){const ae=new URL(window.location.href);ae.hash="",window.history.replaceState({},document.title,ae.toString())}}catch{}window.location.pathname!=="/reset-password"&&t("/reset-password",{replace:!0}),v(!1),F((async()=>{try{const ae=await U(C);d(!!ae),ae&&D(!1)}catch{d(!1)}})());return}if(R==="TOKEN_REFRESHED"||R==="USER_UPDATED")return;if(R==="SIGNED_OUT"){n!=null&&n.id&&nn({action:"auth.logout",resource:"auth",userId:n.id,context:{}}).catch(()=>{}),d(!1),D(!1),I(!1),y(!1);try{const ae=[];for(let oe=0;oe<localStorage.length;oe++){const ge=localStorage.key(oe);ge&&ae.push(ge)}ae.forEach(oe=>{try{localStorage.removeItem(oe)}catch{}});const Q=[];for(let oe=0;oe<sessionStorage.length;oe++){const ge=sessionStorage.key(oe);ge&&Q.push(ge)}Q.forEach(oe=>{try{sessionStorage.removeItem(oe)}catch{}})}catch(ae){console.warn("Error clearing cache on sign out:",ae)}}}catch{}R!=="SIGNED_IN"&&(s(C),r((C==null?void 0:C.user)??null)),v(!0),l(!1)});return()=>B.unsubscribe()},[]),p.useEffect(()=>{const E=async()=>{try{await ce.auth.getSession()}catch{}},B=()=>{try{document.visibilityState==="visible"&&E()}catch{}};window.addEventListener("focus",E),document.addEventListener("visibilitychange",B);const R=window.setInterval(()=>{try{document.visibilityState==="visible"&&ce.auth.getSession().catch(()=>{})}catch{}},4*60*1e3);return()=>{window.removeEventListener("focus",E),document.removeEventListener("visibilitychange",B);try{clearInterval(R)}catch{}}},[]);const M=p.useCallback(async()=>{try{I(!0);try{const E=[];for(let C=0;C<localStorage.length;C++){const q=localStorage.key(C);q&&E.push(q)}E.forEach(C=>{try{localStorage.removeItem(C)}catch{}});const B=[];for(let C=0;C<sessionStorage.length;C++){const q=sessionStorage.key(C);q&&B.push(q)}B.forEach(C=>{try{sessionStorage.removeItem(C)}catch{}});const R=["app.cached","app.lastAuthEvent","app.currentUserId","app.currentUserEmail","otpVerified","otpRequired","auth.intent","sb-"];Object.keys(localStorage).forEach(C=>{if(R.some(q=>C.includes(q)))try{localStorage.removeItem(C)}catch{}})}catch(E){console.warn("Error clearing cache:",E)}await ce.auth.signOut()}catch(E){console.error("Error signing out:",E)}finally{I(!1)}},[]),T=p.useCallback(async()=>{try{const{data:{user:E}}=await ce.auth.getUser();r(E)}catch(E){console.error("Error refreshing user:",E)}},[]),A=p.useMemo(()=>({user:n,session:a,loading:o,signOut:M,refreshUser:T,otpRequired:u,otpVerified:h,setOtpVerified:D,otpEvaluated:g,accountDeactivated:x,setAccountDeactivated:y}),[n,a,o,M,T,u,h,D,g,x,y]);return i.jsx(m3.Provider,{value:A,children:e})}function ia(){const e=p.useContext(m3);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const Ju={analytics:["read"],ai_profiles:["create","update","delete","read_all","read_own"],ai_sessions:["create","update","delete","read_all","read_own"],channels:["create","update","delete","read_all","read_own"],contacts:["create","update","delete","read_all","read_own"],contact_identities:["create","update","delete","read_all","read_own"],threads:["create","update","delete","read_all","read_channel_owned","read_collaborator"],messages:["create","update","delete","send","read_all","read_collaborator"],ai_agent_files:["create","read","delete"],admin_panel:["read","update"],super_agents:["create","update","delete","read_all","read_own"],users_profile:["create","update","delete","read"],roles:["create","read","update","delete"],audit_logs:["read"],alerts:["read","ack"]},Rw=e=>e==="create"?"create":e==="update"?"update":e==="delete"?"delete":e.startsWith("read")||e.startsWith("view")?"read":"special",ite=e=>["delete","manage_2fa","configure","update_token_limit","manage"].some(n=>e.includes(n)),ste={defaultTtl:5*60*1e3,maxSize:100,strategy:"stale-while-revalidate"},Jf="supabase_cache_",FP="1";class ote{constructor(t={}){Gt(this,"cache",new Map);Gt(this,"config");this.config={...ste,...t},this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}get(t){const n=this.cache.get(t);if(!n)return null;const r=Date.now(),a=n.ttl||this.config.defaultTtl;return n.timestamp+a<r?(this.cache.delete(t),this.deleteFromStorage(t),null):n.data}set(t,n,r){const a={data:n,timestamp:Date.now(),ttl:r||this.config.defaultTtl,version:parseInt(FP)};if(this.cache.size>=this.config.maxSize){const s=this.findOldestEntry();s&&(this.cache.delete(s),this.deleteFromStorage(s))}this.cache.set(t,a),this.saveToStorage(t,a)}async execute(t,n,r,a){const s=r||this.config.strategy,o=this.get(t);switch(s){case"cache-first":if(o)return o;try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"network-first":try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"stale-while-revalidate":if(o)return n().then(l=>{this.set(t,l,a)}).catch(()=>{}),o;try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"network-only":try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"cache-only":if(o)return o;throw new Error("No cached data available");default:return await n()}}invalidate(t){this.cache.delete(t),this.deleteFromStorage(t)}invalidatePattern(t){const n=new RegExp(t);for(const r of this.cache.keys())n.test(r)&&this.invalidate(r)}clear(){this.cache.clear();try{if(typeof localStorage<"u")for(let t=localStorage.length-1;t>=0;t--){const n=localStorage.key(t);n&&n.startsWith(Jf)&&localStorage.removeItem(n)}}catch(t){console.warn("Failed to clear cache from storage:",t)}}findOldestEntry(){let t=null,n=1/0;for(const[r,a]of this.cache.entries())a.timestamp<n&&(n=a.timestamp,t=r);return t}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries()){const a=r.ttl||this.config.defaultTtl;r.timestamp+a<t&&(this.cache.delete(n),this.deleteFromStorage(n))}}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${Jf}${t}`;localStorage.setItem(r,JSON.stringify(n))}}catch(r){console.warn("Failed to save cache entry:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now();for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith(Jf))try{const s=JSON.parse(localStorage.getItem(r)||"{}");if(s.version&&s.version!==parseInt(FP)){localStorage.removeItem(r);continue}const o=s.ttl||this.config.defaultTtl;if(s.timestamp+o<t){localStorage.removeItem(r);continue}const l=r.replace(Jf,"");this.cache.set(l,s)}catch{localStorage.removeItem(r)}}}}catch(t){console.warn("Failed to load cache from storage:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${Jf}${t}`;localStorage.removeItem(n)}}catch{}}getStats(){const t=Date.now(),n=Array.from(this.cache.entries()).map(([r,a])=>({key:r,age:t-a.timestamp,ttl:a.ttl||this.config.defaultTtl}));return{size:this.cache.size,maxSize:this.config.maxSize,entries:n}}}const io=new ote;class lte{constructor(){Gt(this,"queue",[]);Gt(this,"processing",!1);Gt(this,"maxRetries",3);Gt(this,"storageKey","offline_queue");this.loadFromStorage(),typeof window<"u"&&window.addEventListener("online",()=>{this.processQueue()})}add(t){const n={...t,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retries:0};return this.queue.push(n),this.saveToStorage(),typeof navigator<"u"&&navigator.onLine&&this.processQueue(),n.id}async processQueue(t){if(!(this.processing||this.queue.length===0)&&t){this.processing=!0;try{const n=[...this.queue];this.queue=[];for(const r of n)try{await t(r),this.remove(r.id)}catch{r.retries++,r.retries<this.maxRetries?this.queue.push(r):(console.error("Failed to sync write operation after max retries:",r),this.remove(r.id))}this.saveToStorage()}finally{this.processing=!1}}}remove(t){this.queue=this.queue.filter(n=>n.id!==t),this.saveToStorage()}size(){return this.queue.length}clear(){this.queue=[],this.saveToStorage()}getAll(){return[...this.queue]}saveToStorage(){try{typeof localStorage<"u"&&localStorage.setItem(this.storageKey,JSON.stringify(this.queue))}catch(t){console.warn("Failed to save offline queue:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);t&&(this.queue=JSON.parse(t))}}catch(t){console.warn("Failed to load offline queue:",t)}}}new lte;const xm="app:authz-changed";function UP(){try{io.clear()}catch{}try{if(typeof localStorage>"u")return;const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&e.push(n)}for(const t of e)if(t.startsWith("app.cached"))try{localStorage.removeItem(t)}catch{}}catch{}try{const e=globalThis;e.__agentsCache&&(e.__agentsCache.data=null,e.__agentsCache.ts=0,e.__agentsCache.inFlight=null)}catch{}}function BP(e){try{if(typeof window>"u")return;window.dispatchEvent(new CustomEvent(xm,{detail:{reason:e}}))}catch{}}const p3=p.createContext(void 0);function cte({children:e}){const{user:t,accountDeactivated:n}=ia(),[r,a]=p.useState([]),[s,o]=p.useState([]),[l,c]=p.useState(null),[u,d]=p.useState(!0),[f,h]=p.useState(null),m=($,U)=>{const F=$.map(T=>String((T==null?void 0:T.name)??"").trim().toLowerCase()).filter(Boolean).sort().join(","),M=U.map(T=>`${String((T==null?void 0:T.resource)??"").trim().toLowerCase()}.${String((T==null?void 0:T.action)??"").trim().toLowerCase()}`).filter(T=>T!==".").sort().join(",");return`roles:${F}|perms:${M}`},g=($,U)=>{try{const F=`app.authzFingerprint:${$}`,M=typeof localStorage<"u"?localStorage.getItem(F):null;M&&M!==U&&(UP(),BP("rbac-fingerprint-changed")),typeof localStorage<"u"&&localStorage.setItem(F,U)}catch{}},v=async($,U)=>{try{U!=null&&U.background||d(!0),h(null);const{data:F,error:M}=await ce.from("v_current_user_permissions").select("*");if(M)throw M;const T=F||[];o(T);const{data:A,error:L}=await ce.from("user_roles").select("role_id").eq("user_id",$);if(L)throw L;if(!A||A.length===0){g($,m([],T)),a([]),c({user_id:$,roles:[],permissions:T});return}const E=A.map(Z=>Z.role_id),{data:B,error:R}=await ce.from("roles").select("*").in("id",E);if(R)throw R;const C=B||[];g($,m(C,T)),a(C);const q=C.map(Z=>({...Z,permissions:T}));c({user_id:$,roles:q,permissions:T})}catch(F){console.error("Error fetching user RBAC:",F),h(F instanceof Error?F.message:"Failed to fetch user permissions")}finally{U!=null&&U.background||d(!1)}},x=async()=>{t!=null&&t.id&&await v(t.id,{background:!0})};p.useEffect(()=>{t!=null&&t.id&&!n?v(t.id):(a([]),o([]),c(null),d(!1))},[t==null?void 0:t.id,n]),p.useEffect(()=>{if(!(t!=null&&t.id)||n)return;const $=t.id,U=ce.channel(`rbac-user-roles:${$}`).on("postgres_changes",{event:"*",schema:"public",table:"user_roles",filter:`user_id=eq.${$}`},async()=>{UP(),BP("user_roles-realtime-change");try{await v($,{background:!0})}catch{}}).subscribe();return()=>{try{ce.removeChannel(U)}catch{}}},[t==null?void 0:t.id,n]);const y=$=>{if(!$)return!1;if(r.some(A=>A.name==="master_agent"))return!0;const U=String($).trim().toLowerCase();if(s.some(A=>(A.name||"").trim().toLowerCase()===U)||s.some(A=>`${A.resource}.${A.action}`.toLowerCase()===U))return!0;const T=U.indexOf(".");if(T>0){const A=U.slice(0,T),L=U.slice(T+1),B={edit:["update"],update:["edit"],remove:["delete"],delete:["remove"],send:["create"],read:["read_all","read_own","read_channel_owned","read_collaborator"],read_all:["read"]}[L]||[];if(B.length>0&&s.some(C=>B.some(q=>`${C.resource}.${C.action}`.toLowerCase()===`${A}.${q}`)))return!0}return!1},w=$=>$.some(U=>y(U)),b=$=>$.every(U=>y(U)),_=$=>r.some(U=>U.name===$),D={userRoles:r,userPermissions:s,userWithRoles:l,hasPermission:y,hasAnyPermission:w,hasAllPermissions:b,hasRole:_,hasAnyRole:$=>$.some(U=>_(U)),hasPermissionDB:async($,U)=>{try{const{data:F,error:M}=await ce.rpc("has_perm",{p_resource:$,p_action:U});return M?(console.error("Error checking permission:",M),!1):F===!0}catch(F){return console.error("Error in hasPermissionDB:",F),!1}},can:($,...U)=>!$||U.length===0?!1:U.every(F=>y(`${$}.${F}`)),canRead:$=>{const U=Ju[$];if(!Array.isArray(U))return!1;const F=U.filter(M=>M==="read"||M.startsWith("read_"));return F.length===0?!1:F.some(M=>y(`${$}.${M}`))},canCreate:$=>y(`${$}.create`),canUpdate:$=>y(`${$}.update`),canDelete:$=>y(`${$}.delete`),loading:u,error:f,refreshRBAC:x};return i.jsx(p3.Provider,{value:D,children:e})}function Ir(){const e=p.useContext(p3);if(e===void 0)throw new Error("useRBAC must be used within an RBACProvider");return e}const g3=p.createContext(void 0),zP="chatflow-theme";function WP(){return typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function ute({children:e}){const[t,n]=p.useState(()=>{if(typeof window<"u"){const o=localStorage.getItem(zP);if(o&&["light","dark","system"].includes(o))return o}return"system"}),[r,a]=p.useState(()=>t==="system"?WP():t);p.useEffect(()=>{const o=window.document.documentElement,l=()=>{const d=t==="system"?WP():t;a(d),o.classList.remove("light","dark"),o.classList.add(d)};l();const c=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{t==="system"&&l()};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[t]);const s=o=>{localStorage.setItem(zP,o),n(o)};return i.jsx(g3.Provider,{value:{theme:t,setTheme:s,resolvedTheme:r},children:e})}function dte(){const e=p.useContext(g3);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const Rd=_p("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},s)=>{const o=r?fN:"button";return i.jsx(o,{className:Pe(Rd({variant:t,size:n,className:e})),ref:s,...a})});re.displayName="Button";const Ue=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ue.displayName="Card";const ft=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("flex flex-col space-y-1.5 p-6",e),...t}));ft.displayName="CardHeader";const ct=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:Pe("text-2xl font-semibold leading-none tracking-tight",e),...t}));ct.displayName="CardTitle";const Ni=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:Pe("text-sm text-muted-foreground",e),...t}));Ni.displayName="CardDescription";const lt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("p-6 pt-0",e),...t}));lt.displayName="CardContent";const fte=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("flex items-center p-6 pt-0",e),...t}));fte.displayName="CardFooter";const it=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:Pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));it.displayName="Input";var hte="Label",v3=p.forwardRef((e,t)=>i.jsx(st.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));v3.displayName=hte;var y3=v3;const mte=_p("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Je=p.forwardRef(({className:e,...t},n)=>i.jsx(y3,{ref:n,className:Pe(mte(),e),...t}));Je.displayName=y3.displayName;var pte=p.createContext(void 0);function wf(e){const t=p.useContext(pte);return e||t||"ltr"}var Mw="rovingFocusGroup.onEntryFocus",gte={bubbles:!1,cancelable:!0},Pp="RovingFocusGroup",[b1,x3,vte]=wp(Pp),[yte,vb]=Rr(Pp,[vte]),[xte,bte]=yte(Pp),b3=p.forwardRef((e,t)=>i.jsx(b1.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(b1.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(wte,{...e,ref:t})})}));b3.displayName=Pp;var wte=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=p.useRef(null),m=Mt(t,h),g=wf(s),[v,x]=Ba({prop:o,defaultProp:l??null,onChange:c,caller:Pp}),[y,w]=p.useState(!1),b=rr(u),_=x3(n),k=p.useRef(!1),[j,S]=p.useState(0);return p.useEffect(()=>{const O=h.current;if(O)return O.addEventListener(Mw,b),()=>O.removeEventListener(Mw,b)},[b]),i.jsx(xte,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:v,onItemFocus:p.useCallback(O=>x(O),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>S(O=>O+1),[]),onFocusableItemRemove:p.useCallback(()=>S(O=>O-1),[]),children:i.jsx(st.div,{tabIndex:y||j===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:qe(e.onMouseDown,()=>{k.current=!0}),onFocus:qe(e.onFocus,O=>{const I=!k.current;if(O.target===O.currentTarget&&I&&!y){const P=new CustomEvent(Mw,gte);if(O.currentTarget.dispatchEvent(P),!P.defaultPrevented){const N=_().filter(M=>M.focusable),D=N.find(M=>M.active),$=N.find(M=>M.id===v),F=[D,$,...N].filter(Boolean).map(M=>M.ref.current);_3(F,d)}}k.current=!1}),onBlur:qe(e.onBlur,()=>w(!1))})})}),w3="RovingFocusGroupItem",j3=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=mr(),u=s||c,d=bte(w3,n),f=d.currentTabStopId===u,h=x3(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=d;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(b1.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:i.jsx(st.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:qe(e.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:qe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:qe(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=kte(x,d.orientation,d.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=h().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const _=b.indexOf(x.currentTarget);b=d.loop?Ste(b,_+1):b.slice(_+1)}setTimeout(()=>_3(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});j3.displayName=w3;var jte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _te(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kte(e,t,n){const r=_te(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jte[r]}function _3(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Ste(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var k3=b3,S3=j3,yb="Tabs",[Nte,_5e]=Rr(yb,[vb]),N3=vb(),[Cte,HN]=Nte(yb),C3=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=wf(l),[f,h]=Ba({prop:r,onChange:a,defaultProp:s??"",caller:yb});return i.jsx(Cte,{scope:n,baseId:mr(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:i.jsx(st.div,{dir:d,"data-orientation":o,...u,ref:t})})});C3.displayName=yb;var A3="TabsList",E3=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,s=HN(A3,n),o=N3(n);return i.jsx(k3,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:i.jsx(st.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});E3.displayName=A3;var T3="TabsTrigger",P3=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...s}=e,o=HN(T3,n),l=N3(n),c=R3(o.baseId,r),u=M3(o.baseId,r),d=r===o.value;return i.jsx(S3,{asChild:!0,...l,focusable:!a,active:d,children:i.jsx(st.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:qe(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:qe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:qe(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(r)})})})});P3.displayName=T3;var O3="TabsContent",I3=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:s,...o}=e,l=HN(O3,n),c=R3(l.baseId,r),u=M3(l.baseId,r),d=r===l.value,f=p.useRef(d);return p.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(Sr,{present:a||d,children:({present:h})=>i.jsx(st.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&s})})});I3.displayName=O3;function R3(e,t){return`${e}-trigger-${t}`}function M3(e,t){return`${e}-content-${t}`}var Ate=C3,D3=E3,L3=P3,$3=I3;const Uc=Ate,Tl=p.forwardRef(({className:e,...t},n)=>i.jsx(D3,{ref:n,className:Pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Tl.displayName=D3.displayName;const jr=p.forwardRef(({className:e,...t},n)=>i.jsx(L3,{ref:n,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));jr.displayName=L3.displayName;const sr=p.forwardRef(({className:e,...t},n)=>i.jsx($3,{ref:n,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));sr.displayName=$3.displayName;const Ete=_p("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),bm=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:Pe(Ete({variant:t}),e),...n}));bm.displayName="Alert";const Tte=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:Pe("mb-1 font-medium leading-none tracking-tight",e),...t}));Tte.displayName="AlertTitle";const wm=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("text-sm [&_p]:leading-relaxed",e),...t}));wm.displayName="AlertDescription";function Pte({sitekey:e,onVerify:t,onExpire:n,className:r}){const a=p.useRef(null),s=p.useRef(null);return p.useEffect(()=>(new Promise(l=>{if(window.hcaptcha)return l();const c=document.createElement("script");c.src="https://js.hcaptcha.com/1/api.js",c.async=!0,c.defer=!0,c.onload=()=>l(),document.head.appendChild(c)}).then(()=>{a.current&&s.current===null&&(s.current=window.hcaptcha.render(a.current,{sitekey:e,callback:l=>t(l),"expired-callback":()=>n&&n()}))}),()=>{try{s.current!==null&&window.hcaptcha&&window.hcaptcha.remove(s.current)}catch{}}),[e]),i.jsx("div",{className:r,children:i.jsx("div",{ref:a})})}const Ote="vite_react_shadcn_ts",Ite="0.1.79",Rte="module",Mte={predev:"echo skip changelog copy",dev:"vite",prebuild:"echo skip changelog copy",build:"vite build","build:dev":"vite build --mode development",lint:"eslint .",preview:"vite preview",test:"vitest",sync:"node sync/index.js"},Dte={"@hookform/resolvers":"^3.10.0","@radix-ui/react-accordion":"^1.2.11","@radix-ui/react-alert-dialog":"^1.1.14","@radix-ui/react-aspect-ratio":"^1.1.7","@radix-ui/react-avatar":"^1.1.10","@radix-ui/react-checkbox":"^1.3.2","@radix-ui/react-collapsible":"^1.1.11","@radix-ui/react-context-menu":"^2.2.15","@radix-ui/react-dialog":"^1.1.14","@radix-ui/react-dropdown-menu":"^2.1.15","@radix-ui/react-hover-card":"^1.1.14","@radix-ui/react-label":"^2.1.7","@radix-ui/react-menubar":"^1.1.15","@radix-ui/react-navigation-menu":"^1.2.13","@radix-ui/react-popover":"^1.1.14","@radix-ui/react-progress":"^1.1.7","@radix-ui/react-radio-group":"^1.3.7","@radix-ui/react-scroll-area":"^1.2.9","@radix-ui/react-select":"^2.2.5","@radix-ui/react-separator":"^1.1.7","@radix-ui/react-slider":"^1.3.5","@radix-ui/react-slot":"^1.2.3","@radix-ui/react-switch":"^1.2.5","@radix-ui/react-tabs":"^1.1.12","@radix-ui/react-toast":"^1.2.14","@radix-ui/react-toggle":"^1.1.9","@radix-ui/react-toggle-group":"^1.1.10","@radix-ui/react-tooltip":"^1.2.7","@supabase/supabase-js":"^2.55.0","@tanstack/react-query":"^5.83.0","class-variance-authority":"^0.7.1",clsx:"^2.1.1",cmdk:"^1.1.1","date-fns":"^3.6.0",dotenv:"^16.4.5","embla-carousel-react":"^8.6.0","input-otp":"^1.4.2","lucide-react":"^0.462.0","next-themes":"^0.3.0",react:"^18.3.1","react-day-picker":"^8.10.1","react-dom":"^18.3.1","react-hook-form":"^7.61.1","react-markdown":"^9.1.0","react-resizable-panels":"^2.1.9","react-router-dom":"^6.30.1",recharts:"^2.15.4","remark-breaks":"^4.0.0","remark-gfm":"^4.0.1",sonner:"^1.7.4","tailwind-merge":"^2.6.0","tailwindcss-animate":"^1.0.7",vaul:"^0.9.9",ws:"^8.18.0",zod:"^3.25.76"},Lte={"@eslint/js":"^9.32.0","@tailwindcss/typography":"^0.5.16","@types/node":"^22.16.5","@types/react":"^18.3.23","@types/react-dom":"^18.3.7","@vitejs/plugin-react-swc":"^3.11.0",autoprefixer:"^10.4.21",eslint:"^9.32.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.20",globals:"^15.15.0",postcss:"^8.5.6",tailwindcss:"^3.4.17",typescript:"^5.8.3","typescript-eslint":"^8.38.0",vite:"^5.4.19",vitest:"^1.6.0"},Dw={name:Ote,private:!0,version:Ite,type:Rte,scripts:Mte,dependencies:Dte,devDependencies:Lte},F3=e=>e.replace(/\s/g,""),qP=e=>F3(e).toLowerCase();function $te({onBack:e}){const t=ci(),[n,r]=p.useState("login"),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState(null),[h,m]=p.useState(null),[g,v]=p.useState(null),x="30583a2e-84ac-496a-8ec2-23043ae06dc0",y=!!x,w=()=>{var P,N;try{(N=(P=window==null?void 0:window.hcaptcha)==null?void 0:P.reset)==null||N.call(P)}catch{}},[b,_]=p.useState(""),[k,j]=p.useState("");p.useState(""),p.useState("");const S=async P=>{var N;if(P.preventDefault(),s(!0),u(null),v(null),!h){v("Please complete the CAPTCHA"),s(!1);return}try{const{data:D,error:$}=await ce.auth.signInWithPassword({email:b,password:k,...y&&h?{options:{captchaToken:h}}:{}});if($)throw $;const U=(N=D.user)==null?void 0:N.id;if(U)try{const{data:F,error:M}=await ce.from("users_profile").select("is_active, is_2fa_email_enabled").eq("user_id",U).maybeSingle();if(M)throw console.error("Profile fetch error:",M),M;if(!F){await ce.auth.signOut(),u("Your account profile is missing. Please contact your Master Agent."),s(!1);return}if(F.is_active===!1){t("/account-deactivated",{replace:!0});return}const T=(F==null?void 0:F.is_2fa_email_enabled)===!0;$e.success("Login successful!"),t("/",{replace:!0});return}catch(F){console.warn("Profile fetch failed:",F),$e.success("Login successful!")}else $e.success("Login successful!");t("/",{replace:!0})}catch(D){console.error("Login error:",D),u(D instanceof Error?D.message:"Failed to login"),$e.error("Login failed"),w()}finally{s(!1)}},O=async P=>{P.preventDefault(),s(!0),u(null);try{const{error:N}=await ce.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/reset-password`});if(N)throw N;f("Password reset email sent! Please check your inbox."),$e.success("Password reset email sent!")}catch(N){console.error("Password reset error:",N),u(N instanceof Error?N.message:"Failed to send reset email"),$e.error("Failed to send reset email")}finally{s(!1)}},I=()=>{u(null),f(null)};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(Ue,{className:"w-full max-w-md",children:[i.jsxs(ft,{className:"space-y-1",children:[e&&i.jsxs(re,{variant:"ghost",size:"sm",onClick:e,className:"absolute top-4 left-4",children:[i.jsx(kp,{className:"w-4 h-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(ct,{className:"text-2xl font-bold",children:"Welcome back"}),i.jsx(Ni,{children:"Sign in to continue to Chatflow"})]})]}),i.jsx(lt,{children:i.jsxs(Uc,{value:n,onValueChange:P=>{r(P),I()},children:[i.jsxs(Tl,{className:"grid w-full grid-cols-2",children:[i.jsx(jr,{value:"login",children:"Login"}),i.jsx(jr,{value:"reset",children:"Reset"})]}),c&&i.jsx(bm,{className:"mt-4 border-red-200 bg-red-50",children:i.jsx(wm,{className:"text-red-800",children:c})}),d&&i.jsx(bm,{className:"mt-4 border-green-200 bg-green-50",children:i.jsx(wm,{className:"text-green-800",children:d})}),i.jsx(sr,{value:"login",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"login-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ly,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(it,{id:"login-email",type:"email",placeholder:"Enter your email",value:b,onChange:P=>_(qP(P.target.value)),onKeyDown:P=>{P.key===" "&&P.preventDefault()},className:"pl-10",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"login-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(lm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(it,{id:"login-password",type:o?"text":"password",placeholder:"Enter your password",value:k,onChange:P=>j(F3(P.target.value)),onKeyDown:P=>{P.key===" "&&P.preventDefault()},className:"pl-10 pr-10",required:!0}),i.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?i.jsx(_4,{className:"h-4 w-4"}):i.jsx(xN,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Pte,{sitekey:x,onVerify:P=>m(P),onExpire:()=>{m(null)}}),g&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:g})]}),i.jsx(re,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:i.jsxs(NQ,{to:"/changelog",className:"hover:underline",children:["v",Dw==null?void 0:Dw.version]})})]})}),i.jsx(sr,{value:"reset",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"reset-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ly,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(it,{id:"reset-email",type:"email",placeholder:"Enter your email",value:b,onChange:P=>_(qP(P.target.value)),onKeyDown:P=>{P.key===" "&&P.preventDefault()},className:"pl-10",required:!0})]})]}),i.jsx(re,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset email..."]}):"Send Reset Email"})]})})]})})]})})}function Dg({children:e}){const{user:t,loading:n,otpRequired:r,otpVerified:a,otpEvaluated:s}=ia(),o=ci(),l=Fl();if(p.useEffect(()=>{var u;if(!n&&s&&t){const d=l.pathname==="/otp",f=l.pathname==="/reset-password",h=l.pathname==="/invite";let m=!1;try{const g=new URL(window.location.href),v=g.searchParams.get("type"),x=g.searchParams.get("code"),y=window.location.hash||"";m=v==="invite"||x&&!y.includes("access_token=")||y.includes("type=invite")||window.location.pathname==="/invite"}catch{}if(t&&(async()=>{try{const{data:g}=await ce.from("users_profile").select("password_set").eq("user_id",t.id).single();if(g&&g.password_set===!1){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}}catch{}})(),m&&!f&&!h){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}if(r&&!a&&!d){let g="2fa";try{new URL(window.location.href).searchParams.get("type")==="recovery"&&(g="recovery"),(u=window.location.hash)!=null&&u.includes("access_token=")&&(g="recovery"),localStorage.getItem("auth.intent")==="recovery"&&(g="recovery")}catch{}setTimeout(()=>o("/otp",{replace:!0,state:{from:l.pathname,intent:g}}),0)}}},[t,n,s,r,a,l.pathname,o]),n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("span",{children:"Loading..."})]})});if(!t)return i.jsx($te,{});const c=l.pathname==="/otp";return t&&r&&!a&&!c?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),i.jsx("span",{children:"Redirecting"})]})}):i.jsx(i.Fragment,{children:e})}const Fte=_p("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:opacity-90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:opacity-90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:opacity-90",outline:"text-foreground hover:opacity-90"}},defaultVariants:{variant:"default"}}),Tt=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,className:Pe(Fte({variant:t}),e),...n}));Tt.displayName="Badge";var Ute="Separator",HP="horizontal",Bte=["horizontal","vertical"],U3=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=HP,...a}=e,s=zte(r)?r:HP,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(st.div,{"data-orientation":s,...l,...a,ref:t})});U3.displayName=Ute;function zte(e){return Bte.includes(e)}var B3=U3;const Md=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>i.jsx(B3,{ref:a,decorative:n,orientation:t,className:Pe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Md.displayName=B3.displayName;var Lw=0;function xb(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??KP()),document.body.insertAdjacentElement("beforeend",e[1]??KP()),Lw++,()=>{Lw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Lw--}},[])}function KP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var $w="focusScope.autoFocusOnMount",Fw="focusScope.autoFocusOnUnmount",VP={bubbles:!1,cancelable:!0},Wte="FocusScope",Op=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=p.useState(null),u=rr(a),d=rr(s),f=p.useRef(null),h=Mt(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!l)return;const _=b.target;l.contains(_)?f.current=_:Vo(f.current,{select:!0})},x=function(b){if(m.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||Vo(f.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&Vo(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){YP.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent($w,VP);l.addEventListener($w,u),l.dispatchEvent(y),y.defaultPrevented||(qte(Yte(z3(l)),{select:!0}),document.activeElement===v&&Vo(l))}return()=>{l.removeEventListener($w,u),setTimeout(()=>{const y=new CustomEvent(Fw,VP);l.addEventListener(Fw,d),l.dispatchEvent(y),y.defaultPrevented||Vo(v??document.body,{select:!0}),l.removeEventListener(Fw,d),YP.remove(m)},0)}}},[l,u,d,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,_]=Hte(w);b&&_?!v.shiftKey&&y===_?(v.preventDefault(),n&&Vo(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&Vo(_,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return i.jsx(st.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Op.displayName=Wte;function qte(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Vo(r,{select:t}),document.activeElement!==n)return}function Hte(e){const t=z3(e),n=GP(t,e),r=GP(t.reverse(),e);return[n,r]}function z3(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function GP(e,t){for(const n of e)if(!Kte(n,{upTo:t}))return n}function Kte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Vte(e){return e instanceof HTMLInputElement&&"select"in e}function Vo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Vte(e)&&t&&e.select()}}var YP=Gte();function Gte(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=XP(e,t),e.unshift(t)},remove(t){var n;e=XP(e,t),(n=e[0])==null||n.resume()}}}function XP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Yte(e){return e.filter(t=>t.tagName!=="A")}var Xte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},wu=new WeakMap,Lg=new WeakMap,$g={},Uw=0,W3=function(e){return e&&(e.host||W3(e.parentNode))},Jte=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=W3(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Qte=function(e,t,n,r){var a=Jte(t,Array.isArray(e)?e:[e]);$g[n]||($g[n]=new WeakMap);var s=$g[n],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(wu.get(h)||0)+1,x=(s.get(h)||0)+1;wu.set(h,v),s.set(h,x),o.push(h),v===1&&g&&Lg.set(h,!0),x===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return d(t),l.clear(),Uw++,function(){o.forEach(function(f){var h=wu.get(f)-1,m=s.get(f)-1;wu.set(f,h),s.set(f,m),h||(Lg.has(f)||f.removeAttribute(r),Lg.delete(f)),m||f.removeAttribute(n)}),Uw--,Uw||(wu=new WeakMap,wu=new WeakMap,Lg=new WeakMap,$g={})}},bb=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Xte(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Qte(r,a,n,"aria-hidden")):function(){return null}},_s=function(){return _s=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},_s.apply(this,arguments)};function q3(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Zte(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Ev="right-scroll-bar-position",Tv="width-before-scroll-bar",ene="with-scroll-bars-hidden",tne="--removed-body-scroll-bar-size";function Bw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function nne(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var rne=typeof window<"u"?p.useLayoutEffect:p.useEffect,JP=new WeakMap;function ane(e,t){var n=nne(null,function(r){return e.forEach(function(a){return Bw(a,r)})});return rne(function(){var r=JP.get(n);if(r){var a=new Set(r),s=new Set(e),o=n.current;a.forEach(function(l){s.has(l)||Bw(l,null)}),s.forEach(function(l){a.has(l)||Bw(l,o)})}JP.set(n,e)},[e]),n}function ine(e){return e}function sne(e,t){t===void 0&&(t=ine);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var c=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function one(e){e===void 0&&(e={});var t=sne(null);return t.options=_s({async:!0,ssr:!1},e),t}var H3=function(e){var t=e.sideCar,n=q3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,_s({},n))};H3.isSideCarExport=!0;function lne(e,t){return e.useMedium(t),H3}var K3=one(),zw=function(){},wb=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:zw,onWheelCapture:zw,onTouchMoveCapture:zw}),a=r[0],s=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,w=y===void 0?"div":y,b=e.gapMode,_=q3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,j=ane([n,t]),S=_s(_s({},_),a);return p.createElement(p.Fragment,null,d&&p.createElement(k,{sideCar:K3,removeScrollBar:u,shards:f,noRelative:m,noIsolation:g,inert:v,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:b}),o?p.cloneElement(p.Children.only(l),_s(_s({},S),{ref:j})):p.createElement(w,_s({},S,{className:c,ref:j}),l))});wb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wb.classNames={fullWidth:Tv,zeroRight:Ev};var cne=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function une(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=cne();return t&&e.setAttribute("nonce",t),e}function dne(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function fne(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var hne=function(){var e=0,t=null;return{add:function(n){e==0&&(t=une())&&(dne(t,n),fne(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},mne=function(){var e=hne();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},V3=function(){var e=mne(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},pne={left:0,top:0,right:0,gap:0},Ww=function(e){return parseInt(e||"",10)||0},gne=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Ww(n),Ww(r),Ww(a)]},vne=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return pne;var t=gne(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},yne=V3(),cd="data-scroll-locked",xne=function(e,t,n,r){var a=e.left,s=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(ene,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(cd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ev,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Tv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ev," .").concat(Ev,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tv," .").concat(Tv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(cd,`] {
    `).concat(tne,": ").concat(l,`px;
  }
`)},QP=function(){var e=parseInt(document.body.getAttribute(cd)||"0",10);return isFinite(e)?e:0},bne=function(){p.useEffect(function(){return document.body.setAttribute(cd,(QP()+1).toString()),function(){var e=QP()-1;e<=0?document.body.removeAttribute(cd):document.body.setAttribute(cd,e.toString())}},[])},wne=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;bne();var s=p.useMemo(function(){return vne(a)},[a]);return p.createElement(yne,{styles:xne(s,!t,a,n?"":"!important")})},w1=!1;if(typeof window<"u")try{var Fg=Object.defineProperty({},"passive",{get:function(){return w1=!0,!0}});window.addEventListener("test",Fg,Fg),window.removeEventListener("test",Fg,Fg)}catch{w1=!1}var ju=w1?{passive:!1}:!1,jne=function(e){return e.tagName==="TEXTAREA"},G3=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jne(e)&&n[t]==="visible")},_ne=function(e){return G3(e,"overflowY")},kne=function(e){return G3(e,"overflowX")},ZP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=Y3(e,r);if(a){var s=X3(e,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Sne=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Nne=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Y3=function(e,t){return e==="v"?_ne(t):kne(t)},X3=function(e,t){return e==="v"?Sne(t):Nne(t)},Cne=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ane=function(e,t,n,r,a){var s=Cne(e,window.getComputedStyle(t).direction),o=s*r,l=n.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=X3(e,l),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&Y3(e,l)&&(f+=y,h+=g);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(h)<1||!a))&&(u=!0),u},Ug=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},e2=function(e){return[e.deltaX,e.deltaY]},t2=function(e){return e&&"current"in e?e.current:e},Ene=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Tne=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Pne=0,_u=[];function One(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),a=p.useState(Pne++)[0],s=p.useState(V3)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Zte([e.lockRef.current],(e.shards||[]).map(t2),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=Ug(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],_="deltaY"in v?v.deltaY:w[1]-y[1],k,j=v.target,S=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in v&&S==="h"&&j.type==="range")return!1;var O=ZP(S,j);if(!O)return!0;if(O?k=S:(k=S==="v"?"h":"v",O=ZP(S,j)),!O)return!1;if(!r.current&&"changedTouches"in v&&(b||_)&&(r.current=k),!k)return!0;var I=r.current||k;return Ane(I,x,v,I==="h"?b:_,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!_u.length||_u[_u.length-1]!==s)){var y="deltaY"in x?e2(x):Ug(x),w=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&Ene(k.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(o.current.shards||[]).map(t2).filter(Boolean).filter(function(k){return k.contains(x.target)}),_=b.length>0?l(x,b[0]):!o.current.noIsolation;_&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:Ine(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),d=p.useCallback(function(v){n.current=Ug(v),r.current=void 0},[]),f=p.useCallback(function(v){u(v.type,e2(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,Ug(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return _u.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,ju),document.addEventListener("touchmove",c,ju),document.addEventListener("touchstart",d,ju),function(){_u=_u.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,ju),document.removeEventListener("touchmove",c,ju),document.removeEventListener("touchstart",d,ju)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:Tne(a)}):null,m?p.createElement(wne,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ine(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Rne=lne(K3,One);var Ip=p.forwardRef(function(e,t){return p.createElement(wb,_s({},e,{ref:t,sideCar:Rne}))});Ip.classNames=wb.classNames;var j1=["Enter"," "],Mne=["ArrowDown","PageUp","Home"],J3=["ArrowUp","PageDown","End"],Dne=[...Mne,...J3],Lne={ltr:[...j1,"ArrowRight"],rtl:[...j1,"ArrowLeft"]},$ne={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rp="Menu",[jm,Fne,Une]=wp(Rp),[su,Q3]=Rr(Rp,[Une,Ll,vb]),jb=Ll(),Z3=vb(),[Bne,ou]=su(Rp),[zne,Mp]=su(Rp),e5=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:s,modal:o=!0}=e,l=jb(t),[c,u]=p.useState(null),d=p.useRef(!1),f=rr(s),h=wf(a);return p.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(tb,{...l,children:i.jsx(Bne,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(zne,{scope:t,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:r})})})};e5.displayName=Rp;var Wne="MenuAnchor",KN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=jb(n);return i.jsx(Cp,{...a,...r,ref:t})});KN.displayName=Wne;var VN="MenuPortal",[qne,t5]=su(VN,{forceMount:void 0}),n5=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,s=ou(VN,t);return i.jsx(qne,{scope:t,forceMount:n,children:i.jsx(Sr,{present:n||s.open,children:i.jsx(hf,{asChild:!0,container:a,children:r})})})};n5.displayName=VN;var Ci="MenuContent",[Hne,GN]=su(Ci),r5=p.forwardRef((e,t)=>{const n=t5(Ci,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=ou(Ci,e.__scopeMenu),o=Mp(Ci,e.__scopeMenu);return i.jsx(jm.Provider,{scope:e.__scopeMenu,children:i.jsx(Sr,{present:r||s.open,children:i.jsx(jm.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(Kne,{...a,ref:t}):i.jsx(Vne,{...a,ref:t})})})})}),Kne=p.forwardRef((e,t)=>{const n=ou(Ci,e.__scopeMenu),r=p.useRef(null),a=Mt(t,r);return p.useEffect(()=>{const s=r.current;if(s)return bb(s)},[]),i.jsx(YN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:qe(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Vne=p.forwardRef((e,t)=>{const n=ou(Ci,e.__scopeMenu);return i.jsx(YN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Gne=Nl("MenuContent.ScrollLock"),YN=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=e,x=ou(Ci,n),y=Mp(Ci,n),w=jb(n),b=Z3(n),_=Fne(n),[k,j]=p.useState(null),S=p.useRef(null),O=Mt(t,S,x.onContentChange),I=p.useRef(0),P=p.useRef(""),N=p.useRef(0),D=p.useRef(null),$=p.useRef("right"),U=p.useRef(0),F=g?Ip:p.Fragment,M=g?{as:Gne,allowPinchZoom:!0}:void 0,T=L=>{var ee,ae;const E=P.current+L,B=_().filter(Q=>!Q.disabled),R=document.activeElement,C=(ee=B.find(Q=>Q.ref.current===R))==null?void 0:ee.textValue,q=B.map(Q=>Q.textValue),Z=sre(q,E,C),J=(ae=B.find(Q=>Q.textValue===Z))==null?void 0:ae.ref.current;(function Q(oe){P.current=oe,window.clearTimeout(I.current),oe!==""&&(I.current=window.setTimeout(()=>Q(""),1e3))})(E),J&&setTimeout(()=>J.focus())};p.useEffect(()=>()=>window.clearTimeout(I.current),[]),xb();const A=p.useCallback(L=>{var B,R;return $.current===((B=D.current)==null?void 0:B.side)&&lre(L,(R=D.current)==null?void 0:R.area)},[]);return i.jsx(Hne,{scope:n,searchRef:P,onItemEnter:p.useCallback(L=>{A(L)&&L.preventDefault()},[A]),onItemLeave:p.useCallback(L=>{var E;A(L)||((E=S.current)==null||E.focus(),j(null))},[A]),onTriggerLeave:p.useCallback(L=>{A(L)&&L.preventDefault()},[A]),pointerGraceTimerRef:N,onPointerGraceIntentChange:p.useCallback(L=>{D.current=L},[]),children:i.jsx(F,{...M,children:i.jsx(Op,{asChild:!0,trapped:a,onMountAutoFocus:qe(s,L=>{var E;L.preventDefault(),(E=S.current)==null||E.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:i.jsx(k3,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:j,onEntryFocus:qe(c,L=>{y.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(nb,{role:"menu","aria-orientation":"vertical","data-state":x5(x.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:O,style:{outline:"none",...v.style},onKeyDown:qe(v.onKeyDown,L=>{const B=L.target.closest("[data-radix-menu-content]")===L.currentTarget,R=L.ctrlKey||L.altKey||L.metaKey,C=L.key.length===1;B&&(L.key==="Tab"&&L.preventDefault(),!R&&C&&T(L.key));const q=S.current;if(L.target!==q||!Dne.includes(L.key))return;L.preventDefault();const J=_().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);J3.includes(L.key)&&J.reverse(),are(J)}),onBlur:qe(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(I.current),P.current="")}),onPointerMove:qe(e.onPointerMove,_m(L=>{const E=L.target,B=U.current!==L.clientX;if(L.currentTarget.contains(E)&&B){const R=L.clientX>U.current?"right":"left";$.current=R,U.current=L.clientX}}))})})})})})})});r5.displayName=Ci;var Yne="MenuGroup",XN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(st.div,{role:"group",...r,ref:t})});XN.displayName=Yne;var Xne="MenuLabel",a5=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(st.div,{...r,ref:t})});a5.displayName=Xne;var by="MenuItem",n2="menu.itemSelect",_b=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,s=p.useRef(null),o=Mp(by,e.__scopeMenu),l=GN(by,e.__scopeMenu),c=Mt(t,s),u=p.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const h=new CustomEvent(n2,{bubbles:!0,cancelable:!0});f.addEventListener(n2,m=>r==null?void 0:r(m),{once:!0}),hN(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(i5,{...a,ref:c,disabled:n,onClick:qe(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:qe(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:qe(e.onKeyDown,f=>{const h=l.searchRef.current!=="";n||h&&f.key===" "||j1.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});_b.displayName=by;var i5=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...s}=e,o=GN(by,n),l=Z3(n),c=p.useRef(null),u=Mt(t,c),[d,f]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[s.children]),i.jsx(jm.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:i.jsx(S3,{asChild:!0,...l,focusable:!r,children:i.jsx(st.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:qe(e.onPointerMove,_m(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:qe(e.onPointerLeave,_m(g=>o.onItemLeave(g))),onFocus:qe(e.onFocus,()=>f(!0)),onBlur:qe(e.onBlur,()=>f(!1))})})})}),Jne="MenuCheckboxItem",s5=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return i.jsx(d5,{scope:e.__scopeMenu,checked:n,children:i.jsx(_b,{role:"menuitemcheckbox","aria-checked":wy(n)?"mixed":n,...a,ref:t,"data-state":QN(n),onSelect:qe(a.onSelect,()=>r==null?void 0:r(wy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});s5.displayName=Jne;var o5="MenuRadioGroup",[Qne,Zne]=su(o5,{value:void 0,onValueChange:()=>{}}),l5=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,s=rr(r);return i.jsx(Qne,{scope:e.__scopeMenu,value:n,onValueChange:s,children:i.jsx(XN,{...a,ref:t})})});l5.displayName=o5;var c5="MenuRadioItem",u5=p.forwardRef((e,t)=>{const{value:n,...r}=e,a=Zne(c5,e.__scopeMenu),s=n===a.value;return i.jsx(d5,{scope:e.__scopeMenu,checked:s,children:i.jsx(_b,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":QN(s),onSelect:qe(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});u5.displayName=c5;var JN="MenuItemIndicator",[d5,ere]=su(JN,{checked:!1}),f5=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,s=ere(JN,n);return i.jsx(Sr,{present:r||wy(s.checked)||s.checked===!0,children:i.jsx(st.span,{...a,ref:t,"data-state":QN(s.checked)})})});f5.displayName=JN;var tre="MenuSeparator",h5=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});h5.displayName=tre;var nre="MenuArrow",m5=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=jb(n);return i.jsx(rb,{...a,...r,ref:t})});m5.displayName=nre;var rre="MenuSub",[k5e,p5]=su(rre),bh="MenuSubTrigger",g5=p.forwardRef((e,t)=>{const n=ou(bh,e.__scopeMenu),r=Mp(bh,e.__scopeMenu),a=p5(bh,e.__scopeMenu),s=GN(bh,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(KN,{asChild:!0,...u,children:i.jsx(i5,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":x5(n.open),...e,ref:jo(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:qe(e.onPointerMove,_m(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:qe(e.onPointerLeave,_m(f=>{var m,g;d();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,w=h[x?"left":"right"],b=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:qe(e.onKeyDown,f=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&f.key===" "||Lne[r.dir].includes(f.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),f.preventDefault())})})})});g5.displayName=bh;var v5="MenuSubContent",y5=p.forwardRef((e,t)=>{const n=t5(Ci,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=ou(Ci,e.__scopeMenu),o=Mp(Ci,e.__scopeMenu),l=p5(v5,e.__scopeMenu),c=p.useRef(null),u=Mt(t,c);return i.jsx(jm.Provider,{scope:e.__scopeMenu,children:i.jsx(Sr,{present:r||s.open,children:i.jsx(jm.Slot,{scope:e.__scopeMenu,children:i.jsx(YN,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:qe(e.onFocusOutside,d=>{d.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:qe(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:qe(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=$ne[o.dir].includes(d.key);f&&h&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});y5.displayName=v5;function x5(e){return e?"open":"closed"}function wy(e){return e==="indeterminate"}function QN(e){return wy(e)?"indeterminate":e?"checked":"unchecked"}function are(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function ire(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function sre(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=ire(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function ore(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>r!=h>r&&n<(f-u)*(r-d)/(h-d)+u&&(a=!a)}return a}function lre(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ore(n,t)}function _m(e){return t=>t.pointerType==="mouse"?e(t):void 0}var cre=e5,ure=KN,dre=n5,fre=r5,hre=XN,mre=a5,pre=_b,gre=s5,vre=l5,yre=u5,xre=f5,bre=h5,wre=m5,jre=g5,_re=y5,kb="DropdownMenu",[kre,S5e]=Rr(kb,[Q3]),wa=Q3(),[Sre,b5]=kre(kb),w5=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=wa(t),u=p.useRef(null),[d,f]=Ba({prop:a,defaultProp:s??!1,onChange:o,caller:kb});return i.jsx(Sre,{scope:t,triggerId:mr(),triggerRef:u,contentId:mr(),open:d,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(h=>!h),[f]),modal:l,children:i.jsx(cre,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};w5.displayName=kb;var j5="DropdownMenuTrigger",_5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,s=b5(j5,n),o=wa(n);return i.jsx(ure,{asChild:!0,...o,children:i.jsx(st.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:jo(t,s.triggerRef),onPointerDown:qe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:qe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});_5.displayName=j5;var Nre="DropdownMenuPortal",k5=e=>{const{__scopeDropdownMenu:t,...n}=e,r=wa(t);return i.jsx(dre,{...r,...n})};k5.displayName=Nre;var S5="DropdownMenuContent",N5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=b5(S5,n),s=wa(n),o=p.useRef(!1);return i.jsx(fre,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...r,ref:t,onCloseAutoFocus:qe(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:qe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});N5.displayName=S5;var Cre="DropdownMenuGroup",Are=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(hre,{...a,...r,ref:t})});Are.displayName=Cre;var Ere="DropdownMenuLabel",C5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(mre,{...a,...r,ref:t})});C5.displayName=Ere;var Tre="DropdownMenuItem",A5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(pre,{...a,...r,ref:t})});A5.displayName=Tre;var Pre="DropdownMenuCheckboxItem",E5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(gre,{...a,...r,ref:t})});E5.displayName=Pre;var Ore="DropdownMenuRadioGroup",Ire=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(vre,{...a,...r,ref:t})});Ire.displayName=Ore;var Rre="DropdownMenuRadioItem",T5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(yre,{...a,...r,ref:t})});T5.displayName=Rre;var Mre="DropdownMenuItemIndicator",P5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(xre,{...a,...r,ref:t})});P5.displayName=Mre;var Dre="DropdownMenuSeparator",O5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(bre,{...a,...r,ref:t})});O5.displayName=Dre;var Lre="DropdownMenuArrow",$re=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(wre,{...a,...r,ref:t})});$re.displayName=Lre;var Fre="DropdownMenuSubTrigger",I5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(jre,{...a,...r,ref:t})});I5.displayName=Fre;var Ure="DropdownMenuSubContent",R5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=wa(n);return i.jsx(_re,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});R5.displayName=Ure;var Bre=w5,zre=_5,Wre=k5,M5=N5,D5=C5,L5=A5,$5=E5,F5=T5,U5=P5,B5=O5,z5=I5,W5=R5;const dc=Bre,fc=zre,qre=p.forwardRef(({className:e,inset:t,children:n,...r},a)=>i.jsxs(z5,{ref:a,className:Pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(Sp,{className:"ml-auto h-4 w-4"})]}));qre.displayName=z5.displayName;const Hre=p.forwardRef(({className:e,...t},n)=>i.jsx(W5,{ref:n,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Hre.displayName=W5.displayName;const el=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Wre,{children:i.jsx(M5,{ref:r,sideOffset:t,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));el.displayName=M5.displayName;const ca=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(L5,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ca.displayName=L5.displayName;const Kre=p.forwardRef(({className:e,children:t,checked:n,...r},a)=>i.jsxs($5,{ref:a,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(U5,{children:i.jsx(vN,{className:"h-4 w-4"})})}),t]}));Kre.displayName=$5.displayName;const Vre=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(F5,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(U5,{children:i.jsx(BV,{className:"h-2 w-2 fill-current"})})}),t]}));Vre.displayName=F5.displayName;const q5=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(D5,{ref:r,className:Pe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));q5.displayName=D5.displayName;const _1=p.forwardRef(({className:e,...t},n)=>i.jsx(B5,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",e),...t}));_1.displayName=B5.displayName;var H5={exports:{}},K5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd=p;function Gre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yre=typeof Object.is=="function"?Object.is:Gre,Xre=Dd.useState,Jre=Dd.useEffect,Qre=Dd.useLayoutEffect,Zre=Dd.useDebugValue;function eae(e,t){var n=t(),r=Xre({inst:{value:n,getSnapshot:t}}),a=r[0].inst,s=r[1];return Qre(function(){a.value=n,a.getSnapshot=t,qw(a)&&s({inst:a})},[e,n,t]),Jre(function(){return qw(a)&&s({inst:a}),e(function(){qw(a)&&s({inst:a})})},[e]),Zre(n),n}function qw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yre(e,n)}catch{return!0}}function tae(e,t){return t()}var nae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tae:eae;K5.useSyncExternalStore=Dd.useSyncExternalStore!==void 0?Dd.useSyncExternalStore:nae;H5.exports=K5;var rae=H5.exports;function aae(){return rae.useSyncExternalStore(iae,()=>!0,()=>!1)}function iae(){return()=>{}}var ZN="Avatar",[sae,N5e]=Rr(ZN),[oae,V5]=sae(ZN),G5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,s]=p.useState("idle");return i.jsx(oae,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:i.jsx(st.span,{...r,ref:t})})});G5.displayName=ZN;var Y5="AvatarImage",X5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...s}=e,o=V5(Y5,n),l=lae(r,s),c=rr(u=>{a(u),o.onImageLoadingStatusChange(u)});return ar(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(st.img,{...s,ref:t,src:r}):null});X5.displayName=Y5;var J5="AvatarFallback",Q5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,s=V5(J5,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?i.jsx(st.span,{...a,ref:t}):null});Q5.displayName=J5;function r2(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function lae(e,{referrerPolicy:t,crossOrigin:n}){const r=aae(),a=p.useRef(null),s=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>r2(s,e));return ar(()=>{l(r2(s,e))},[s,e]),ar(()=>{const c=f=>()=>{l(f)};if(!s)return;const u=c("loaded"),d=c("error");return s.addEventListener("load",u),s.addEventListener("error",d),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",d)}},[s,n,t]),o}var Z5=G5,eU=X5,tU=Q5;const Oa=p.forwardRef(({className:e,...t},n)=>i.jsx(Z5,{ref:n,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Oa.displayName=Z5.displayName;const Bc=p.forwardRef(({className:e,...t},n)=>i.jsx(eU,{ref:n,className:Pe("aspect-square h-full w-full",e),...t}));Bc.displayName=eU.displayName;const Ia=p.forwardRef(({className:e,...t},n)=>i.jsx(tU,{ref:n,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ia.displayName=tU.displayName;function nU(){const{theme:e,setTheme:t,resolvedTheme:n}=dte();return i.jsxs(dc,{children:[i.jsx(fc,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"icon",className:"h-9 w-9",children:[n==="dark"?i.jsx(UT,{className:"h-4 w-4"}):i.jsx(WT,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),i.jsxs(el,{align:"end",children:[i.jsxs(ca,{onClick:()=>t("light"),className:"gap-2",children:[i.jsx(WT,{className:"h-4 w-4"}),i.jsx("span",{children:"Light"}),e==="light"&&i.jsx("span",{className:"ml-auto text-xs",children:""})]}),i.jsxs(ca,{onClick:()=>t("dark"),className:"gap-2",children:[i.jsx(UT,{className:"h-4 w-4"}),i.jsx("span",{children:"Dark"}),e==="dark"&&i.jsx("span",{className:"ml-auto text-xs",children:""})]}),i.jsxs(ca,{onClick:()=>t("system"),className:"gap-2",children:[i.jsx(KV,{className:"h-4 w-4"}),i.jsx("span",{children:"System"}),e==="system"&&i.jsx("span",{className:"ml-auto text-xs",children:""})]})]})]})}var Sb="Dialog",[rU,aU]=Rr(Sb),[cae,ds]=rU(Sb),iU=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=Ba({prop:r,defaultProp:a??!1,onChange:s,caller:Sb});return i.jsx(cae,{scope:t,triggerRef:l,contentRef:c,contentId:mr(),titleId:mr(),descriptionId:mr(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};iU.displayName=Sb;var sU="DialogTrigger",oU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ds(sU,n),s=Mt(t,a.triggerRef);return i.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":nC(a.open),...r,ref:s,onClick:qe(e.onClick,a.onOpenToggle)})});oU.displayName=sU;var eC="DialogPortal",[uae,lU]=rU(eC,{forceMount:void 0}),cU=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,s=ds(eC,t);return i.jsx(uae,{scope:t,forceMount:n,children:p.Children.map(r,o=>i.jsx(Sr,{present:n||s.open,children:i.jsx(hf,{asChild:!0,container:a,children:o})}))})};cU.displayName=eC;var jy="DialogOverlay",uU=p.forwardRef((e,t)=>{const n=lU(jy,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=ds(jy,e.__scopeDialog);return s.modal?i.jsx(Sr,{present:r||s.open,children:i.jsx(fae,{...a,ref:t})}):null});uU.displayName=jy;var dae=Nl("DialogOverlay.RemoveScroll"),fae=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ds(jy,n);return i.jsx(Ip,{as:dae,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(st.div,{"data-state":nC(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),zc="DialogContent",dU=p.forwardRef((e,t)=>{const n=lU(zc,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=ds(zc,e.__scopeDialog);return i.jsx(Sr,{present:r||s.open,children:s.modal?i.jsx(hae,{...a,ref:t}):i.jsx(mae,{...a,ref:t})})});dU.displayName=zc;var hae=p.forwardRef((e,t)=>{const n=ds(zc,e.__scopeDialog),r=p.useRef(null),a=Mt(t,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return bb(s)},[]),i.jsx(fU,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qe(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qe(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:qe(e.onFocusOutside,s=>s.preventDefault())})}),mae=p.forwardRef((e,t)=>{const n=ds(zc,e.__scopeDialog),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(fU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),fU=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=ds(zc,n),c=p.useRef(null),u=Mt(t,c);return xb(),i.jsxs(i.Fragment,{children:[i.jsx(Op,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(ru,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":nC(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(gae,{titleId:l.titleId}),i.jsx(yae,{contentRef:c,descriptionId:l.descriptionId})]})]})}),tC="DialogTitle",hU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ds(tC,n);return i.jsx(st.h2,{id:a.titleId,...r,ref:t})});hU.displayName=tC;var mU="DialogDescription",pU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ds(mU,n);return i.jsx(st.p,{id:a.descriptionId,...r,ref:t})});pU.displayName=mU;var gU="DialogClose",vU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ds(gU,n);return i.jsx(st.button,{type:"button",...r,ref:t,onClick:qe(e.onClick,()=>a.onOpenChange(!1))})});vU.displayName=gU;function nC(e){return e?"open":"closed"}var yU="DialogTitleWarning",[pae,xU]=KK(yU,{contentName:zc,titleName:tC,docsSlug:"dialog"}),gae=({titleId:e})=>{const t=xU(yU),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},vae="DialogDescriptionWarning",yae=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xU(vae).contentName}}.`;return p.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},rC=iU,bU=oU,aC=cU,Nb=uU,Cb=dU,iC=hU,sC=pU,oC=vU;const wn=rC,lC=bU,xae=aC,wU=p.forwardRef(({className:e,...t},n)=>i.jsx(Nb,{ref:n,className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));wU.displayName=Nb.displayName;const hn=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(xae,{children:[i.jsx(wU,{}),i.jsxs(Cb,{ref:r,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(oC,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(mf,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hn.displayName=Cb.displayName;const mn=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});mn.displayName="DialogHeader";const Ca=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ca.displayName="DialogFooter";const pn=p.forwardRef(({className:e,...t},n)=>i.jsx(iC,{ref:n,className:Pe("text-lg font-semibold leading-none tracking-tight",e),...t}));pn.displayName=iC.displayName;const zr=p.forwardRef(({className:e,...t},n)=>i.jsx(sC,{ref:n,className:Pe("text-sm text-muted-foreground",e),...t}));zr.displayName=sC.displayName;function bae({open:e,onClose:t,isMasterAgent:n,pausedByName:r,pausedAt:a,onOpenAdminPanel:s}){const o=a?new Date(a).toLocaleString():null;return i.jsx(wn,{open:e,onOpenChange:l=>{l||t()},children:i.jsxs(hn,{className:"max-w-lg",children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"AI Replies Are Currently Paused"}),i.jsx(zr,{children:n?i.jsxs("span",{children:["AI responses are paused across every channel. Synka will not send AI replies until you resume them in ",i.jsx("strong",{children:"Admin Panel  AI Controls"}),"."]}):i.jsx("span",{children:"A master agent paused all AI responses across every channel. Synka will not send AI replies until this setting is changed. Only a master agent can resume AI replies."})})]}),i.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r?i.jsxs("div",{children:["Paused by: ",r]}):null,o?i.jsxs("div",{children:["At: ",o]}):null]}),i.jsxs(Ca,{className:"gap-2",children:[n?i.jsx(re,{variant:"ghost",onClick:s,children:"Open Admin Panel"}):null,i.jsx(re,{onClick:t,children:"Got it"})]})]})})}const Br=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:Pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Br.displayName="Textarea";function k1(e,[t,n]){return Math.min(n,Math.max(t,e))}function wae(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var cC="ScrollArea",[jU,C5e]=Rr(cC),[jae,Oi]=jU(cC),_U=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=p.useState(null),[u,d]=p.useState(null),[f,h]=p.useState(null),[m,g]=p.useState(null),[v,x]=p.useState(null),[y,w]=p.useState(0),[b,_]=p.useState(0),[k,j]=p.useState(!1),[S,O]=p.useState(!1),I=Mt(t,N=>c(N)),P=wf(a);return i.jsx(jae,{scope:n,type:r,dir:P,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:j,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:S,onScrollbarYEnabledChange:O,onCornerWidthChange:w,onCornerHeightChange:_,children:i.jsx(st.div,{dir:P,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});_U.displayName=cC;var kU="ScrollAreaViewport",SU=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...s}=e,o=Oi(kU,n),l=p.useRef(null),c=Mt(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(st.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});SU.displayName=kU;var Bs="ScrollAreaScrollbar",uC=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Oi(Bs,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?i.jsx(_ae,{...r,ref:t,forceMount:n}):a.type==="scroll"?i.jsx(kae,{...r,ref:t,forceMount:n}):a.type==="auto"?i.jsx(NU,{...r,ref:t,forceMount:n}):a.type==="always"?i.jsx(dC,{...r,ref:t}):null});uC.displayName=Bs;var _ae=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Oi(Bs,e.__scopeScrollArea),[s,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(Sr,{present:n||s,children:i.jsx(NU,{"data-state":s?"visible":"hidden",...r,ref:t})})}),kae=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Oi(Bs,e.__scopeScrollArea),s=e.orientation==="horizontal",o=Eb(()=>c("SCROLL_END"),100),[l,c]=wae("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,d=s?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,s,c,o]),i.jsx(Sr,{present:n||l!=="hidden",children:i.jsx(dC,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:qe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:qe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),NU=p.forwardRef((e,t)=>{const n=Oi(Bs,e.__scopeScrollArea),{forceMount:r,...a}=e,[s,o]=p.useState(!1),l=e.orientation==="horizontal",c=Eb(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Ld(n.viewport,c),Ld(n.content,c),i.jsx(Sr,{present:r||s,children:i.jsx(dC,{"data-state":s?"visible":"hidden",...a,ref:t})})}),dC=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Oi(Bs,e.__scopeScrollArea),s=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=PU(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return Tae(h,o.current,l,m)}return n==="horizontal"?i.jsx(Sae,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollLeft,m=a2(h,l,a.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):n==="vertical"?i.jsx(Nae,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollTop,m=a2(h,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),Sae=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=Oi(Bs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Mt(t,c,s.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(AU,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ab(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(s.viewport){const h=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),IU(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:ky(o.paddingLeft),paddingEnd:ky(o.paddingRight)}})}})}),Nae=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=Oi(Bs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Mt(t,c,s.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(AU,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ab(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(s.viewport){const h=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),IU(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:ky(o.paddingTop),paddingEnd:ky(o.paddingBottom)}})}})}),[Cae,CU]=jU(Bs),AU=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=Oi(Bs,n),[g,v]=p.useState(null),x=Mt(t,I=>v(I)),y=p.useRef(null),w=p.useRef(""),b=m.viewport,_=r.content-r.viewport,k=rr(d),j=rr(c),S=Eb(f,10);function O(I){if(y.current){const P=I.clientX-y.current.left,N=I.clientY-y.current.top;u({x:P,y:N})}}return p.useEffect(()=>{const I=P=>{const N=P.target;(g==null?void 0:g.contains(N))&&k(P,_)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[b,g,_,k]),p.useEffect(j,[r,j]),Ld(g,S),Ld(m.content,S),i.jsx(Cae,{scope:n,scrollbar:g,hasThumb:a,onThumbChange:rr(s),onThumbPointerUp:rr(o),onThumbPositionChange:j,onThumbPointerDown:rr(l),children:i.jsx(st.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:qe(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),y.current=g.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),O(I))}),onPointerMove:qe(e.onPointerMove,O),onPointerUp:qe(e.onPointerUp,I=>{const P=I.target;P.hasPointerCapture(I.pointerId)&&P.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),_y="ScrollAreaThumb",EU=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=CU(_y,e.__scopeScrollArea);return i.jsx(Sr,{present:n||a.hasThumb,children:i.jsx(Aae,{ref:t,...r})})}),Aae=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,s=Oi(_y,n),o=CU(_y,n),{onThumbPositionChange:l}=o,c=Mt(t,f=>o.onThumbChange(f)),u=p.useRef(void 0),d=Eb(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const f=s.viewport;if(f){const h=()=>{if(d(),!u.current){const m=Pae(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,d,l]),i.jsx(st.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:qe(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),g=f.clientX-m.left,v=f.clientY-m.top;o.onThumbPointerDown({x:g,y:v})}),onPointerUp:qe(e.onPointerUp,o.onThumbPointerUp)})});EU.displayName=_y;var fC="ScrollAreaCorner",TU=p.forwardRef((e,t)=>{const n=Oi(fC,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Eae,{...e,ref:t}):null});TU.displayName=fC;var Eae=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Oi(fC,n),[s,o]=p.useState(0),[l,c]=p.useState(0),u=!!(s&&l);return Ld(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Ld(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?i.jsx(st.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ky(e){return e?parseInt(e,10):0}function PU(e,t){const n=e/t;return isNaN(n)?0:n}function Ab(e){const t=PU(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Tae(e,t,n,r="ltr"){const a=Ab(n),s=a/2,o=t||s,l=a-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return OU([c,u],f)(e)}function a2(e,t,n="ltr"){const r=Ab(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=k1(e,c);return OU([0,o],[0,l])(u)}function OU(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function IU(e,t){return e>0&&e<t}var Pae=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&t(),n=s,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Eb(e,t){const n=rr(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ld(e,t){const n=rr(t);ar(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var RU=_U,Oae=SU,Iae=TU;const Tb=p.forwardRef(({className:e,children:t,viewportRef:n,...r},a)=>i.jsxs(RU,{ref:a,className:Pe("relative overflow-hidden",e),...r,children:[i.jsx(Oae,{ref:n,className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(MU,{}),i.jsx(Iae,{})]}));Tb.displayName=RU.displayName;const MU=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(uC,{ref:r,orientation:t,className:Pe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(EU,{className:"relative flex-1 rounded-full bg-border"})}));MU.displayName=uC.displayName;function on(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function si(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ha(e,t){const n=on(e);return isNaN(t)?si(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function cs(e,t){const n=on(e);if(isNaN(t))return si(e,NaN);if(!t)return n;const r=n.getDate(),a=si(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return r>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const hC=6048e5,Rae=864e5;let Mae={};function Dp(){return Mae}function Ls(e,t){var l,c,u,d;const n=Dp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=on(e),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Wc(e){return Ls(e,{weekStartsOn:1})}function DU(e){const t=on(e),n=t.getFullYear(),r=si(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Wc(r),s=si(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Wc(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Pl(e){const t=on(e);return t.setHours(0,0,0,0),t}function Sy(e){const t=on(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ss(e,t){const n=Pl(e),r=Pl(t),a=+n-Sy(n),s=+r-Sy(r);return Math.round((a-s)/Rae)}function Dae(e){const t=DU(e),n=si(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Wc(n)}function S1(e,t){const n=t*7;return ha(e,n)}function Lae(e,t){return cs(e,t*12)}function $ae(e){let t;return e.forEach(function(n){const r=on(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Fae(e){let t;return e.forEach(n=>{const r=on(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Ma(e,t){const n=Pl(e),r=Pl(t);return+n==+r}function mC(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Uae(e){if(!mC(e)&&typeof e!="number")return!1;const t=on(e);return!isNaN(Number(t))}function km(e,t){const n=on(e),r=on(t),a=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return a*12+s}function Bae(e,t,n){const r=Ls(e,n),a=Ls(t,n),s=+r-Sy(r),o=+a-Sy(a);return Math.round((s-o)/hC)}function LU(e){const t=on(e);return t.setHours(23,59,59,999),t}function pC(e){const t=on(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Ua(e){const t=on(e);return t.setDate(1),t.setHours(0,0,0,0),t}function $U(e){const t=on(e),n=si(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function gC(e,t){var l,c,u,d;const n=Dp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=on(e),s=a.getDay(),o=(s<r?-7:0)+6-(s-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function FU(e){return gC(e,{weekStartsOn:1})}const zae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wae=(e,t,n)=>{let r;const a=zae[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Hw(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const qae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Vae={date:Hw({formats:qae,defaultWidth:"full"}),time:Hw({formats:Hae,defaultWidth:"full"}),dateTime:Hw({formats:Kae,defaultWidth:"full"})},Gae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Yae=(e,t,n,r)=>Gae[e];function Qf(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const Xae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nie=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rie={ordinalNumber:nie,era:Qf({values:Xae,defaultWidth:"wide"}),quarter:Qf({values:Jae,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qf({values:Qae,defaultWidth:"wide"}),day:Qf({values:Zae,defaultWidth:"wide"}),dayPeriod:Qf({values:eie,defaultWidth:"wide",formattingValues:tie,defaultFormattingWidth:"wide"})};function Zf(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?iie(l,f=>f.test(o)):aie(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function aie(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function iie(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function sie(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const oie=/^(\d+)(th|st|nd|rd)?/i,lie=/\d+/i,cie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uie={any:[/^b/i,/^(a|c)/i]},die={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fie={any:[/1/i,/2/i,/3/i,/4/i]},hie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xie={ordinalNumber:sie({matchPattern:oie,parsePattern:lie,valueCallback:e=>parseInt(e,10)}),era:Zf({matchPatterns:cie,defaultMatchWidth:"wide",parsePatterns:uie,defaultParseWidth:"any"}),quarter:Zf({matchPatterns:die,defaultMatchWidth:"wide",parsePatterns:fie,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Zf({matchPatterns:hie,defaultMatchWidth:"wide",parsePatterns:mie,defaultParseWidth:"any"}),day:Zf({matchPatterns:pie,defaultMatchWidth:"wide",parsePatterns:gie,defaultParseWidth:"any"}),dayPeriod:Zf({matchPatterns:vie,defaultMatchWidth:"any",parsePatterns:yie,defaultParseWidth:"any"})},UU={code:"en-US",formatDistance:Wae,formatLong:Vae,formatRelative:Yae,localize:rie,match:xie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bie(e){const t=on(e);return Ss(t,$U(t))+1}function BU(e){const t=on(e),n=+Wc(t)-+Dae(t);return Math.round(n/hC)+1}function zU(e,t){var d,f,h,m;const n=on(e),r=n.getFullYear(),a=Dp(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=si(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=Ls(o,t),c=si(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Ls(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function wie(e,t){var l,c,u,d;const n=Dp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=zU(e,t),s=si(e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),Ls(s,t)}function WU(e,t){const n=on(e),r=+Ls(n,t)-+wie(n,t);return Math.round(r/hC)+1}function _n(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Wo={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return _n(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):_n(n+1,2)},d(e,t){return _n(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return _n(e.getHours()%12||12,t.length)},H(e,t){return _n(e.getHours(),t.length)},m(e,t){return _n(e.getMinutes(),t.length)},s(e,t){return _n(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return _n(a,t.length)}},ku={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},i2={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Wo.y(e,t)},Y:function(e,t,n,r){const a=zU(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return _n(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):_n(s,t.length)},R:function(e,t){const n=DU(e);return _n(n,t.length)},u:function(e,t){const n=e.getFullYear();return _n(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return _n(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return _n(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Wo.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return _n(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=WU(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):_n(a,t.length)},I:function(e,t,n){const r=BU(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):_n(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Wo.d(e,t)},D:function(e,t,n){const r=bie(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):_n(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return _n(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return _n(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return _n(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=ku.noon:r===0?a=ku.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=ku.evening:r>=12?a=ku.afternoon:r>=4?a=ku.morning:a=ku.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Wo.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Wo.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):_n(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):_n(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Wo.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Wo.s(e,t)},S:function(e,t){return Wo.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return o2(r);case"XXXX":case"XX":return ic(r);case"XXXXX":case"XXX":default:return ic(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return o2(r);case"xxxx":case"xx":return ic(r);case"xxxxx":case"xxx":default:return ic(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+s2(r,":");case"OOOO":default:return"GMT"+ic(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+s2(r,":");case"zzzz":default:return"GMT"+ic(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return _n(r,t.length)},T:function(e,t,n){const r=e.getTime();return _n(r,t.length)}};function s2(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+_n(s,2)}function o2(e,t){return e%60===0?(e>0?"-":"+")+_n(Math.abs(e)/60,2):ic(e,t)}function ic(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=_n(Math.trunc(r/60),2),s=_n(r%60,2);return n+a+t+s}const l2=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},qU=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},jie=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return l2(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",l2(r,t)).replace("{{time}}",qU(a,t))},_ie={p:qU,P:jie},kie=/^D+$/,Sie=/^Y+$/,Nie=["D","DD","YY","YYYY"];function Cie(e){return kie.test(e)}function Aie(e){return Sie.test(e)}function Eie(e,t,n){const r=Tie(e,t,n);if(console.warn(r),Nie.includes(e))throw new RangeError(r)}function Tie(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Pie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Iie=/^'([^]*?)'?$/,Rie=/''/g,Mie=/[a-zA-Z]/;function So(e,t,n){var d,f,h,m,g,v,x,y;const r=Dp(),a=(n==null?void 0:n.locale)??r.locale??UU,s=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=on(e);if(!Uae(l))throw new RangeError("Invalid time value");let c=t.match(Oie).map(w=>{const b=w[0];if(b==="p"||b==="P"){const _=_ie[b];return _(w,a.formatLong)}return w}).join("").match(Pie).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const b=w[0];if(b==="'")return{isToken:!1,value:Die(w)};if(i2[b])return{isToken:!0,value:w};if(b.match(Mie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const b=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Aie(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Cie(b))&&Eie(b,t,String(e));const _=i2[b[0]];return _(l,b,a.localize,u)}).join("")}function Die(e){const t=e.match(Iie);return t?t[1].replace(Rie,"'"):e}function Lie(e){const t=on(e),n=t.getFullYear(),r=t.getMonth(),a=si(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function $ie(e){return Math.trunc(+on(e)/1e3)}function Fie(e){const t=on(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Uie(e,t){return Bae(Fie(e),Ua(e),t)+1}function N1(e,t){const n=on(e),r=on(t);return n.getTime()>r.getTime()}function HU(e,t){const n=on(e),r=on(t);return+n<+r}function vC(e,t){const n=on(e),r=on(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Bie(e,t){const n=on(e),r=on(t);return n.getFullYear()===r.getFullYear()}function Kw(e,t){return ha(e,-t)}function Vw(e,t){const n=on(e),r=n.getFullYear(),a=n.getDate(),s=si(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const o=Lie(s);return n.setMonth(t,Math.min(a,o)),n}function c2(e,t){const n=on(e);return isNaN(+n)?si(e,NaN):(n.setFullYear(t),n)}var It=function(){return It=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},It.apply(this,arguments)};function zie(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function KU(e,t,n){for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Lp(e){return e.mode==="multiple"}function $p(e){return e.mode==="range"}function Pb(e){return e.mode==="single"}var Wie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function qie(e,t){return So(e,"LLLL y",t)}function Hie(e,t){return So(e,"d",t)}function Kie(e,t){return So(e,"LLLL",t)}function Vie(e){return"".concat(e)}function Gie(e,t){return So(e,"cccccc",t)}function Yie(e,t){return So(e,"yyyy",t)}var Xie=Object.freeze({__proto__:null,formatCaption:qie,formatDay:Hie,formatMonthCaption:Kie,formatWeekNumber:Vie,formatWeekdayName:Gie,formatYearCaption:Yie}),Jie=function(e,t,n){return So(e,"do MMMM (EEEE)",n)},Qie=function(){return"Month: "},Zie=function(){return"Go to next month"},ese=function(){return"Go to previous month"},tse=function(e,t){return So(e,"cccc",t)},nse=function(e){return"Week n. ".concat(e)},rse=function(){return"Year: "},ase=Object.freeze({__proto__:null,labelDay:Jie,labelMonthDropdown:Qie,labelNext:Zie,labelPrevious:ese,labelWeekNumber:nse,labelWeekday:tse,labelYearDropdown:rse});function ise(){var e="buttons",t=Wie,n=UU,r={},a={},s=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Xie,labels:ase,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function sse(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,s=e.fromDate,o=e.toDate;return r?s=Ua(r):t&&(s=new Date(t,0,1)),a?o=pC(a):n&&(o=new Date(n,11,31)),{fromDate:s?Pl(s):void 0,toDate:o?Pl(o):void 0}}var VU=p.createContext(void 0);function ose(e){var t,n=e.initialProps,r=ise(),a=sse(n),s=a.fromDate,o=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(Pb(n)||Lp(n)||$p(n))&&(c=n.onSelect);var u=It(It(It({},r),n),{captionLayout:l,classNames:It(It({},r.classNames),n.classNames),components:It({},n.components),formatters:It(It({},r.formatters),n.formatters),fromDate:s,labels:It(It({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:It(It({},r.modifiers),n.modifiers),modifiersClassNames:It(It({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:It(It({},r.styles),n.styles),toDate:o});return i.jsx(VU.Provider,{value:u,children:e.children})}function Dn(){var e=p.useContext(VU);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function GU(e){var t=Dn(),n=t.locale,r=t.classNames,a=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function lse(e){return i.jsx("svg",It({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function YU(e){var t,n,r=e.onChange,a=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,u=Dn(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:lse;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:s}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function cse(e){var t,n=Dn(),r=n.fromDate,a=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var f=[];if(Bie(r,a))for(var h=Ua(r),m=r.getMonth();m<=a.getMonth();m++)f.push(Vw(h,m));else for(var h=Ua(new Date),m=0;m<=11;m++)f.push(Vw(h,m));var g=function(x){var y=Number(x.target.value),w=Vw(Ua(e.displayMonth),y);e.onChange(w)},v=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:YU;return i.jsx(v,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(x){return i.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function use(e){var t,n=e.displayMonth,r=Dn(),a=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var m=a.getFullYear(),g=s.getFullYear(),v=m;v<=g;v++)h.push(c2($U(new Date),v));var x=function(w){var b=c2(Ua(n),Number(w.target.value));e.onChange(b)},y=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:YU;return i.jsx(y,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:d(n,{locale:o}),children:h.map(function(w){return i.jsx("option",{value:w.getFullYear(),children:d(w,{locale:o})},w.getFullYear())})})}function dse(e,t){var n=p.useState(e),r=n[0],a=n[1],s=t===void 0?r:t;return[s,a]}function fse(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&km(s,a)<0){var u=-1*(c-1);a=cs(s,u)}return o&&km(a,o)<0&&(a=o),Ua(a)}function hse(){var e=Dn(),t=fse(e),n=dse(t,e.month),r=n[0],a=n[1],s=function(o){var l;if(!e.disableNavigation){var c=Ua(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function mse(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=Ua(e),s=Ua(cs(a,r)),o=km(s,a),l=[],c=0;c<o;c++){var u=cs(a,c);l.push(u)}return n&&(l=l.reverse()),l}function pse(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Ua(e);if(!n)return cs(l,o);var c=km(n,e);if(!(c<s))return cs(l,o)}}function gse(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Ua(e);if(!n)return cs(l,-o);var c=km(l,n);if(!(c<=0))return cs(l,-o)}}var XU=p.createContext(void 0);function vse(e){var t=Dn(),n=hse(),r=n[0],a=n[1],s=mse(r,t),o=pse(r,t),l=gse(r,t),c=function(f){return s.some(function(h){return vC(f,h)})},u=function(f,h){c(f)||(h&&HU(f,h)?a(cs(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:r,displayMonths:s,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(XU.Provider,{value:d,children:e.children})}function Fp(){var e=p.useContext(XU);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function u2(e){var t,n=Dn(),r=n.classNames,a=n.styles,s=n.components,o=Fp().goToMonth,l=function(d){o(cs(d,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:GU,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:u}),i.jsx(cse,{onChange:l,displayMonth:e.displayMonth}),i.jsx(use,{onChange:l,displayMonth:e.displayMonth})]})}function yse(e){return i.jsx("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function xse(e){return i.jsx("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ny=p.forwardRef(function(e,t){var n=Dn(),r=n.classNames,a=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var o=s.join(" "),l=It(It({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),i.jsx("button",It({},e,{ref:t,type:"button",className:o,style:l}))});function bse(e){var t,n,r=Dn(),a=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=u(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:s}),v=[o.nav_button,o.nav_button_next].join(" "),x=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:xse,y=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:yse;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(Ny,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?i.jsx(x,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(Ny,{name:"next-month","aria-label":g,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function d2(e){var t=Dn().numberOfMonths,n=Fp(),r=n.previousMonth,a=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return vC(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){r&&s(r)},m=function(){a&&s(a)};return i.jsx(bse,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:m})}function wse(e){var t,n=Dn(),r=n.classNames,a=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:GU,u;return a?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx(u2,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(u2,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(d2,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(d2,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:r.caption,style:s.caption,children:u})}function jse(e){var t=Dn(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?i.jsx("tfoot",{className:a,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function _se(e,t,n){for(var r=n?Wc(new Date):Ls(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var o=ha(r,s);a.push(o)}return a}function kse(){var e=Dn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=_se(a,s,o);return i.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,f){return i.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function Sse(){var e,t=Dn(),n=t.classNames,r=t.styles,a=t.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:kse;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(s,{})})}function Nse(e){var t=Dn(),n=t.locale,r=t.formatters.formatDay;return i.jsx(i.Fragment,{children:r(e.date,{locale:n})})}var yC=p.createContext(void 0);function Cse(e){if(!Lp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(yC.Provider,{value:t,children:e.children})}return i.jsx(Ase,{initialProps:e.initialProps,children:e.children})}function Ase(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,s=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=!!(!d.selected&&s&&(r==null?void 0:r.length)===s);if(!v){var x=r?KU([],r):[];if(d.selected){var y=x.findIndex(function(w){return Ma(u,w)});x.splice(y,1)}else x.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,x,u,d,f)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=s&&r.length>s-1,f=r.some(function(h){return Ma(h,u)});return!!(d&&!f)});var c={selected:r,onDayClick:o,modifiers:l};return i.jsx(yC.Provider,{value:c,children:n})}function xC(){var e=p.useContext(yC);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Ese(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?Ma(a,e)&&Ma(r,e)?void 0:Ma(a,e)?{from:a,to:void 0}:Ma(r,e)?void 0:N1(r,e)?{from:e,to:a}:{from:r,to:e}:a?N1(e,a)?{from:a,to:e}:{from:e,to:a}:r?HU(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var bC=p.createContext(void 0);function Tse(e){if(!$p(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(bC.Provider,{value:t,children:e.children})}return i.jsx(Pse,{initialProps:e.initialProps,children:e.children})}function Pse(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},s=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,v){var x,y;(x=t.onDayClick)===null||x===void 0||x.call(t,m,g,v);var w=Ese(m,r);(y=t.onSelect)===null||y===void 0||y.call(t,w,m,g,v)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],Ma(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),l&&(s&&!o&&d.disabled.push({after:Kw(s,l-1),before:ha(s,l-1)}),s&&o&&d.disabled.push({after:s,before:ha(s,l-1)}),!s&&o&&d.disabled.push({after:Kw(o,l-1),before:ha(o,l-1)})),c){if(s&&!o&&(d.disabled.push({before:ha(s,-c+1)}),d.disabled.push({after:ha(s,c-1)})),s&&o){var f=Ss(o,s)+1,h=c-f;d.disabled.push({before:Kw(s,h)}),d.disabled.push({after:ha(o,h)})}!s&&o&&(d.disabled.push({before:ha(o,-c+1)}),d.disabled.push({after:ha(o,c-1)}))}return i.jsx(bC.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function wC(){var e=p.useContext(bC);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Pv(e){return Array.isArray(e)?KU([],e):e!==void 0?[e]:[]}function Ose(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=Pv(a)}),t}var us;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(us||(us={}));var Ise=us.Selected,Vs=us.Disabled,Rse=us.Hidden,Mse=us.Today,Gw=us.RangeEnd,Yw=us.RangeMiddle,Xw=us.RangeStart,Dse=us.Outside;function Lse(e,t,n){var r,a=(r={},r[Ise]=Pv(e.selected),r[Vs]=Pv(e.disabled),r[Rse]=Pv(e.hidden),r[Mse]=[e.today],r[Gw]=[],r[Yw]=[],r[Xw]=[],r[Dse]=[],r);return e.fromDate&&a[Vs].push({before:e.fromDate}),e.toDate&&a[Vs].push({after:e.toDate}),Lp(e)?a[Vs]=a[Vs].concat(t.modifiers[Vs]):$p(e)&&(a[Vs]=a[Vs].concat(n.modifiers[Vs]),a[Xw]=n.modifiers[Xw],a[Yw]=n.modifiers[Yw],a[Gw]=n.modifiers[Gw]),a}var JU=p.createContext(void 0);function $se(e){var t=Dn(),n=xC(),r=wC(),a=Lse(t,n,r),s=Ose(t.modifiers),o=It(It({},a),s);return i.jsx(JU.Provider,{value:o,children:e.children})}function QU(){var e=p.useContext(JU);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Fse(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Use(e){return!!(e&&typeof e=="object"&&"from"in e)}function Bse(e){return!!(e&&typeof e=="object"&&"after"in e)}function zse(e){return!!(e&&typeof e=="object"&&"before"in e)}function Wse(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function qse(e,t){var n,r=t.from,a=t.to;if(r&&a){var s=Ss(a,r)<0;s&&(n=[a,r],r=n[0],a=n[1]);var o=Ss(e,r)>=0&&Ss(a,e)>=0;return o}return a?Ma(a,e):r?Ma(r,e):!1}function Hse(e){return mC(e)}function Kse(e){return Array.isArray(e)&&e.every(mC)}function Vse(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(Hse(n))return Ma(e,n);if(Kse(n))return n.includes(e);if(Use(n))return qse(e,n);if(Wse(n))return n.dayOfWeek.includes(e.getDay());if(Fse(n)){var r=Ss(n.before,e),a=Ss(n.after,e),s=r>0,o=a<0,l=N1(n.before,n.after);return l?o&&s:s||o}return Bse(n)?Ss(e,n.after)>0:zse(n)?Ss(n.before,e)>0:typeof n=="function"?n(e):!1})}function jC(e,t,n){var r=Object.keys(t).reduce(function(s,o){var l=t[o];return Vse(e,l)&&s.push(o),s},[]),a={};return r.forEach(function(s){return a[s]=!0}),n&&!vC(e,n)&&(a.outside=!0),a}function Gse(e,t){for(var n=Ua(e[0]),r=pC(e[e.length-1]),a,s,o=n;o<=r;){var l=jC(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ha(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=ha(o,1)}return s||a}var Yse=365;function ZU(e,t){var n=t.moveBy,r=t.direction,a=t.context,s=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:ha,week:S1,month:cs,year:Lae,startOfWeek:function(x){return a.ISOWeek?Wc(x):Ls(x,{locale:f,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?FU(x):gC(x,{locale:f,weekStartsOn:c})}},m=h[n](e,r==="after"?1:-1);r==="before"&&u?m=$ae([u,m]):r==="after"&&d&&(m=Fae([d,m]));var g=!0;if(s){var v=jC(m,s);g=!v.disabled&&!v.hidden}return g?m:l.count>Yse?l.lastFocused:ZU(m,{moveBy:n,direction:r,context:a,modifiers:s,retry:It(It({},l),{count:l.count+1})})}var eB=p.createContext(void 0);function Xse(e){var t=Fp(),n=QU(),r=p.useState(),a=r[0],s=r[1],o=p.useState(),l=o[0],c=o[1],u=Gse(t.displayMonths,n),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),s(void 0)},h=function(x){s(x)},m=Dn(),g=function(x,y){if(a){var w=ZU(a,{moveBy:x,direction:y,context:m,modifiers:n});Ma(a,w)||(t.goToDate(w,a),h(w))}},v={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return i.jsx(eB.Provider,{value:v,children:e.children})}function _C(){var e=p.useContext(eB);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Jse(e,t){var n=QU(),r=jC(e,n,t);return r}var kC=p.createContext(void 0);function Qse(e){if(!Pb(e.initialProps)){var t={selected:void 0};return i.jsx(kC.Provider,{value:t,children:e.children})}return i.jsx(Zse,{initialProps:e.initialProps,children:e.children})}function Zse(e){var t=e.initialProps,n=e.children,r=function(s,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,s,s,o,l)},a={selected:t.selected,onDayClick:r};return i.jsx(kC.Provider,{value:a,children:n})}function tB(){var e=p.useContext(kC);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function eoe(e,t){var n=Dn(),r=tB(),a=xC(),s=wC(),o=_C(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,v=o.focusYearBefore,x=o.focusYearAfter,y=o.focusStartOfWeek,w=o.focusEndOfWeek,b=function(T){var A,L,E,B;Pb(n)?(A=r.onDayClick)===null||A===void 0||A.call(r,e,t,T):Lp(n)?(L=a.onDayClick)===null||L===void 0||L.call(a,e,t,T):$p(n)?(E=s.onDayClick)===null||E===void 0||E.call(s,e,t,T):(B=n.onDayClick)===null||B===void 0||B.call(n,e,t,T)},_=function(T){var A;h(e),(A=n.onDayFocus)===null||A===void 0||A.call(n,e,t,T)},k=function(T){var A;f(),(A=n.onDayBlur)===null||A===void 0||A.call(n,e,t,T)},j=function(T){var A;(A=n.onDayMouseEnter)===null||A===void 0||A.call(n,e,t,T)},S=function(T){var A;(A=n.onDayMouseLeave)===null||A===void 0||A.call(n,e,t,T)},O=function(T){var A;(A=n.onDayPointerEnter)===null||A===void 0||A.call(n,e,t,T)},I=function(T){var A;(A=n.onDayPointerLeave)===null||A===void 0||A.call(n,e,t,T)},P=function(T){var A;(A=n.onDayTouchCancel)===null||A===void 0||A.call(n,e,t,T)},N=function(T){var A;(A=n.onDayTouchEnd)===null||A===void 0||A.call(n,e,t,T)},D=function(T){var A;(A=n.onDayTouchMove)===null||A===void 0||A.call(n,e,t,T)},$=function(T){var A;(A=n.onDayTouchStart)===null||A===void 0||A.call(n,e,t,T)},U=function(T){var A;(A=n.onDayKeyUp)===null||A===void 0||A.call(n,e,t,T)},F=function(T){var A;switch(T.key){case"ArrowLeft":T.preventDefault(),T.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":T.preventDefault(),T.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":T.preventDefault(),T.stopPropagation(),u();break;case"ArrowUp":T.preventDefault(),T.stopPropagation(),d();break;case"PageUp":T.preventDefault(),T.stopPropagation(),T.shiftKey?v():m();break;case"PageDown":T.preventDefault(),T.stopPropagation(),T.shiftKey?x():g();break;case"Home":T.preventDefault(),T.stopPropagation(),y();break;case"End":T.preventDefault(),T.stopPropagation(),w();break}(A=n.onDayKeyDown)===null||A===void 0||A.call(n,e,t,T)},M={onClick:b,onFocus:_,onBlur:k,onKeyDown:F,onKeyUp:U,onMouseEnter:j,onMouseLeave:S,onPointerEnter:O,onPointerLeave:I,onTouchCancel:P,onTouchEnd:N,onTouchMove:D,onTouchStart:$};return M}function toe(){var e=Dn(),t=tB(),n=xC(),r=wC(),a=Pb(e)?t.selected:Lp(e)?n.selected:$p(e)?r.selected:void 0;return a}function noe(e){return Object.values(us).includes(e)}function roe(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(noe(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function aoe(e,t){var n=It({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=It(It({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function ioe(e,t,n){var r,a,s,o=Dn(),l=_C(),c=Jse(e,t),u=eoe(e,c),d=toe(),f=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var j;c.outside||l.focusedDay&&f&&Ma(l.focusedDay,e)&&((j=n.current)===null||j===void 0||j.focus())},[l.focusedDay,e,n,f,c.outside]);var h=roe(o,c).join(" "),m=aoe(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:Nse,x=i.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),y={style:m,className:h,children:x,role:"gridcell"},w=l.focusTarget&&Ma(l.focusTarget,e)&&!c.outside,b=l.focusedDay&&Ma(l.focusedDay,e),_=It(It(It({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=b||w?0:-1,r)),u),k={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:y};return k}function soe(e){var t=p.useRef(null),n=ioe(e.date,e.displayMonth,t);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(Ny,It({name:"day",ref:t},n.buttonProps)):i.jsx("div",It({},n.divProps))}function ooe(e){var t=e.number,n=e.dates,r=Dn(),a=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,n,m)};return i.jsx(Ny,{name:"week-number","aria-label":f,className:o.weeknumber,style:s.weeknumber,onClick:h,children:d})}function loe(e){var t,n,r=Dn(),a=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:soe,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:ooe,d;return o&&(d=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[d,e.dates.map(function(f){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:f})},$ie(f))})]})}function f2(e,t,n){for(var r=n!=null&&n.ISOWeek?FU(t):gC(t,n),a=n!=null&&n.ISOWeek?Wc(e):Ls(e,n),s=Ss(r,a),o=[],l=0;l<=s;l++)o.push(ha(a,l));var c=o.reduce(function(u,d){var f=n!=null&&n.ISOWeek?BU(d):WU(d,n),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function coe(e,t){var n=f2(Ua(e),pC(e),t);if(t!=null&&t.useFixedWeeks){var r=Uie(e,t);if(r<6){var a=n[n.length-1],s=a.dates[a.dates.length-1],o=S1(s,6-r),l=f2(S1(s,1),o,t);n.push.apply(n,l)}}return n}function uoe(e){var t,n,r,a=Dn(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=coe(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:f,firstWeekContainsDate:h}),v=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:Sse,x=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:loe,y=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:jse;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(v,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(w){return i.jsx(x,{displayMonth:e.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),i.jsx(y,{displayMonth:e.displayMonth})]})}function doe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var foe=doe()?p.useLayoutEffect:p.useEffect,Jw=!1,hoe=0;function h2(){return"react-day-picker-".concat(++hoe)}function moe(e){var t,n=e??(Jw?h2():null),r=p.useState(n),a=r[0],s=r[1];return foe(function(){a===null&&s(h2())},[]),p.useEffect(function(){Jw===!1&&(Jw=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function poe(e){var t,n,r=Dn(),a=r.dir,s=r.classNames,o=r.styles,l=r.components,c=Fp().displayMonths,u=moe(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,f=[s.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,v=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(s.caption_start),h=It(It({},h),o.caption_start)),g&&(f.push(s.caption_end),h=It(It({},h),o.caption_end)),v&&(f.push(s.caption_between),h=It(It({},h),o.caption_between));var x=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:wse;return i.jsxs("div",{className:f.join(" "),style:h,children:[i.jsx(x,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(uoe,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function goe(e){var t=Dn(),n=t.classNames,r=t.styles;return i.jsx("div",{className:n.months,style:r.months,children:e.children})}function voe(e){var t,n,r=e.initialProps,a=Dn(),s=_C(),o=Fp(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=It(It({},a.styles.root),a.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var x;return It(It({},g),(x={},x[v]=r[v],x))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:goe;return i.jsx("div",It({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:i.jsx(m,{children:o.displayMonths.map(function(g,v){return i.jsx(poe,{displayIndex:v,displayMonth:g},v)})})}))}function yoe(e){var t=e.children,n=zie(e,["children"]);return i.jsx(ose,{initialProps:n,children:i.jsx(vse,{children:i.jsx(Qse,{initialProps:n,children:i.jsx(Cse,{initialProps:n,children:i.jsx(Tse,{initialProps:n,children:i.jsx($se,{children:i.jsx(Xse,{children:t})})})})})})})}function xoe(e){return i.jsx(yoe,It({},e,{children:i.jsx(voe,{initialProps:e})}))}function Sm({className:e,classNames:t,showOutsideDays:n=!0,...r}){return i.jsx(xoe,{showOutsideDays:n,className:Pe("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Pe(Rd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Pe(Rd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>i.jsx(yN,{className:"h-4 w-4"}),IconRight:({...a})=>i.jsx(Sp,{className:"h-4 w-4"})},...r})}Sm.displayName="Calendar";var Ob="Popover",[nB,A5e]=Rr(Ob,[Ll]),Up=Ll(),[boe,Bl]=nB(Ob),rB=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!1}=e,l=Up(t),c=p.useRef(null),[u,d]=p.useState(!1),[f,h]=Ba({prop:r,defaultProp:a??!1,onChange:s,caller:Ob});return i.jsx(tb,{...l,children:i.jsx(boe,{scope:t,contentId:mr(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:n})})};rB.displayName=Ob;var aB="PopoverAnchor",woe=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bl(aB,n),s=Up(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Cp,{...s,...r,ref:t})});woe.displayName=aB;var iB="PopoverTrigger",sB=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bl(iB,n),s=Up(n),o=Mt(t,a.triggerRef),l=i.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":dB(a.open),...r,ref:o,onClick:qe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(Cp,{asChild:!0,...s,children:l})});sB.displayName=iB;var SC="PopoverPortal",[joe,_oe]=nB(SC,{forceMount:void 0}),oB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,s=Bl(SC,t);return i.jsx(joe,{scope:t,forceMount:n,children:i.jsx(Sr,{present:n||s.open,children:i.jsx(hf,{asChild:!0,container:a,children:r})})})};oB.displayName=SC;var $d="PopoverContent",lB=p.forwardRef((e,t)=>{const n=_oe($d,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,s=Bl($d,e.__scopePopover);return i.jsx(Sr,{present:r||s.open,children:s.modal?i.jsx(Soe,{...a,ref:t}):i.jsx(Noe,{...a,ref:t})})});lB.displayName=$d;var koe=Nl("PopoverContent.RemoveScroll"),Soe=p.forwardRef((e,t)=>{const n=Bl($d,e.__scopePopover),r=p.useRef(null),a=Mt(t,r),s=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return bb(o)},[]),i.jsx(Ip,{as:koe,allowPinchZoom:!0,children:i.jsx(cB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qe(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:qe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:qe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Noe=p.forwardRef((e,t)=>{const n=Bl($d,e.__scopePopover),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(cB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),cB=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=Bl($d,n),m=Up(n);return xb(),i.jsx(Op,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(nb,{"data-state":dB(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),uB="PopoverClose",Coe=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bl(uB,n);return i.jsx(st.button,{type:"button",...r,ref:t,onClick:qe(e.onClick,()=>a.onOpenChange(!1))})});Coe.displayName=uB;var Aoe="PopoverArrow",Eoe=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Up(n);return i.jsx(rb,{...a,...r,ref:t})});Eoe.displayName=Aoe;function dB(e){return e?"open":"closed"}var Toe=rB,Poe=sB,Ooe=oB,fB=lB;const Ns=Toe,Cs=Poe,Qi=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>i.jsx(Ooe,{children:i.jsx(fB,{ref:a,align:t,sideOffset:n,className:Pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Qi.displayName=fB.displayName;function NC(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ioe=[" ","Enter","ArrowUp","ArrowDown"],Roe=[" ","Enter"],qc="Select",[Ib,Rb,Moe]=wp(qc),[jf,E5e]=Rr(qc,[Moe,Ll]),Mb=Ll(),[Doe,zl]=jf(qc),[Loe,$oe]=jf(qc),hB=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,v=Mb(t),[x,y]=p.useState(null),[w,b]=p.useState(null),[_,k]=p.useState(!1),j=wf(u),[S,O]=Ba({prop:r,defaultProp:a??!1,onChange:s,caller:qc}),[I,P]=Ba({prop:o,defaultProp:l,onChange:c,caller:qc}),N=p.useRef(null),D=x?g||!!x.closest("form"):!0,[$,U]=p.useState(new Set),F=Array.from($).map(M=>M.props.value).join(";");return i.jsx(tb,{...v,children:i.jsxs(Doe,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:k,contentId:mr(),value:I,onValueChange:P,open:S,onOpenChange:O,dir:j,triggerPointerDownPosRef:N,disabled:h,children:[i.jsx(Ib.Provider,{scope:t,children:i.jsx(Loe,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(M=>{U(T=>new Set(T).add(M))},[]),onNativeOptionRemove:p.useCallback(M=>{U(T=>{const A=new Set(T);return A.delete(M),A})},[]),children:n})}),D?i.jsxs(LB,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:I,onChange:M=>P(M.target.value),disabled:h,form:g,children:[I===void 0?i.jsx("option",{value:""}):null,Array.from($)]},F):null]})})};hB.displayName=qc;var mB="SelectTrigger",pB=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,s=Mb(n),o=zl(mB,n),l=o.disabled||r,c=Mt(t,o.onTriggerChange),u=Rb(n),d=p.useRef("touch"),[f,h,m]=FB(v=>{const x=u().filter(b=>!b.disabled),y=x.find(b=>b.value===o.value),w=UB(x,v,y);w!==void 0&&o.onValueChange(w.value)}),g=v=>{l||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(Cp,{asChild:!0,...s,children:i.jsx(st.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":$B(o.value)?"":void 0,...a,ref:c,onClick:qe(a.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&g(v)}),onPointerDown:qe(a.onPointerDown,v=>{d.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:qe(a.onKeyDown,v=>{const x=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(x&&v.key===" ")&&Ioe.includes(v.key)&&(g(),v.preventDefault())})})})});pB.displayName=mB;var gB="SelectValue",vB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:o="",...l}=e,c=zl(gB,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=Mt(t,c.onValueNodeChange);return ar(()=>{u(d)},[u,d]),i.jsx(st.span,{...l,ref:f,style:{pointerEvents:"none"},children:$B(c.value)?i.jsx(i.Fragment,{children:o}):s})});vB.displayName=gB;var Foe="SelectIcon",yB=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return i.jsx(st.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});yB.displayName=Foe;var Uoe="SelectPortal",xB=e=>i.jsx(hf,{asChild:!0,...e});xB.displayName=Uoe;var Hc="SelectContent",bB=p.forwardRef((e,t)=>{const n=zl(Hc,e.__scopeSelect),[r,a]=p.useState();if(ar(()=>{a(new DocumentFragment)},[]),!n.open){const s=r;return s?tu.createPortal(i.jsx(wB,{scope:e.__scopeSelect,children:i.jsx(Ib.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),s):null}return i.jsx(jB,{...e,ref:t})});bB.displayName=Hc;var Ui=10,[wB,Wl]=jf(Hc),Boe="SelectContentImpl",zoe=Nl("SelectContent.RemoveScroll"),jB=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=e,w=zl(Hc,n),[b,_]=p.useState(null),[k,j]=p.useState(null),S=Mt(t,ee=>_(ee)),[O,I]=p.useState(null),[P,N]=p.useState(null),D=Rb(n),[$,U]=p.useState(!1),F=p.useRef(!1);p.useEffect(()=>{if(b)return bb(b)},[b]),xb();const M=p.useCallback(ee=>{const[ae,...Q]=D().map(ie=>ie.ref.current),[oe]=Q.slice(-1),ge=document.activeElement;for(const ie of ee)if(ie===ge||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===ae&&k&&(k.scrollTop=0),ie===oe&&k&&(k.scrollTop=k.scrollHeight),ie==null||ie.focus(),document.activeElement!==ge))return},[D,k]),T=p.useCallback(()=>M([O,b]),[M,O,b]);p.useEffect(()=>{$&&T()},[$,T]);const{onOpenChange:A,triggerPointerDownPosRef:L}=w;p.useEffect(()=>{if(b){let ee={x:0,y:0};const ae=oe=>{var ge,ie;ee={x:Math.abs(Math.round(oe.pageX)-(((ge=L.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((ie=L.current)==null?void 0:ie.y)??0))}},Q=oe=>{ee.x<=10&&ee.y<=10?oe.preventDefault():b.contains(oe.target)||A(!1),document.removeEventListener("pointermove",ae),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",Q,{capture:!0})}}},[b,A,L]),p.useEffect(()=>{const ee=()=>A(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[A]);const[E,B]=FB(ee=>{const ae=D().filter(ge=>!ge.disabled),Q=ae.find(ge=>ge.ref.current===document.activeElement),oe=UB(ae,ee,Q);oe&&setTimeout(()=>oe.ref.current.focus())}),R=p.useCallback((ee,ae,Q)=>{const oe=!F.current&&!Q;(w.value!==void 0&&w.value===ae||oe)&&(I(ee),oe&&(F.current=!0))},[w.value]),C=p.useCallback(()=>b==null?void 0:b.focus(),[b]),q=p.useCallback((ee,ae,Q)=>{const oe=!F.current&&!Q;(w.value!==void 0&&w.value===ae||oe)&&N(ee)},[w.value]),Z=r==="popper"?C1:_B,J=Z===C1?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(wB,{scope:n,content:b,viewport:k,onViewportChange:j,itemRefCallback:R,selectedItem:O,onItemLeave:C,itemTextRefCallback:q,focusSelectedItem:T,selectedItemText:P,position:r,isPositioned:$,searchRef:E,children:i.jsx(Ip,{as:zoe,allowPinchZoom:!0,children:i.jsx(Op,{asChild:!0,trapped:w.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:qe(a,ee=>{var ae;(ae=w.trigger)==null||ae.focus({preventScroll:!0}),ee.preventDefault()}),children:i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:i.jsx(Z,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ee=>ee.preventDefault(),...y,...J,onPlaced:()=>U(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:qe(y.onKeyDown,ee=>{const ae=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!ae&&ee.key.length===1&&B(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let oe=D().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const ge=ee.target,ie=oe.indexOf(ge);oe=oe.slice(ie+1)}setTimeout(()=>M(oe)),ee.preventDefault()}})})})})})})});jB.displayName=Boe;var Woe="SelectItemAlignedPosition",_B=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,s=zl(Hc,n),o=Wl(Hc,n),[l,c]=p.useState(null),[u,d]=p.useState(null),f=Mt(t,S=>d(S)),h=Rb(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:w}=o,b=p.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&v&&x&&y){const S=s.trigger.getBoundingClientRect(),O=u.getBoundingClientRect(),I=s.valueNode.getBoundingClientRect(),P=y.getBoundingClientRect();if(s.dir!=="rtl"){const ge=P.left-O.left,ie=I.left-ge,Ie=S.left-ie,me=S.width+Ie,K=Math.max(me,O.width),fe=window.innerWidth-Ui,De=k1(ie,[Ui,Math.max(Ui,fe-K)]);l.style.minWidth=me+"px",l.style.left=De+"px"}else{const ge=O.right-P.right,ie=window.innerWidth-I.right-ge,Ie=window.innerWidth-S.right-ie,me=S.width+Ie,K=Math.max(me,O.width),fe=window.innerWidth-Ui,De=k1(ie,[Ui,Math.max(Ui,fe-K)]);l.style.minWidth=me+"px",l.style.right=De+"px"}const N=h(),D=window.innerHeight-Ui*2,$=v.scrollHeight,U=window.getComputedStyle(u),F=parseInt(U.borderTopWidth,10),M=parseInt(U.paddingTop,10),T=parseInt(U.borderBottomWidth,10),A=parseInt(U.paddingBottom,10),L=F+M+$+A+T,E=Math.min(x.offsetHeight*5,L),B=window.getComputedStyle(v),R=parseInt(B.paddingTop,10),C=parseInt(B.paddingBottom,10),q=S.top+S.height/2-Ui,Z=D-q,J=x.offsetHeight/2,ee=x.offsetTop+J,ae=F+M+ee,Q=L-ae;if(ae<=q){const ge=N.length>0&&x===N[N.length-1].ref.current;l.style.bottom="0px";const ie=u.clientHeight-v.offsetTop-v.offsetHeight,Ie=Math.max(Z,J+(ge?C:0)+ie+T),me=ae+Ie;l.style.height=me+"px"}else{const ge=N.length>0&&x===N[0].ref.current;l.style.top="0px";const Ie=Math.max(q,F+v.offsetTop+(ge?R:0)+J)+Q;l.style.height=Ie+"px",v.scrollTop=ae-q+v.offsetTop}l.style.margin=`${Ui}px 0`,l.style.minHeight=E+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,l,u,v,x,y,s.dir,r]);ar(()=>b(),[b]);const[_,k]=p.useState();ar(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const j=p.useCallback(S=>{S&&g.current===!0&&(b(),w==null||w(),g.current=!1)},[b,w]);return i.jsx(Hoe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(st.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});_B.displayName=Woe;var qoe="SelectPopperPosition",C1=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ui,...s}=e,o=Mb(n);return i.jsx(nb,{...o,...s,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});C1.displayName=qoe;var[Hoe,CC]=jf(Hc,{}),A1="SelectViewport",kB=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,s=Wl(A1,n),o=CC(A1,n),l=Mt(t,s.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Ib.Slot,{scope:n,children:i.jsx(st.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:qe(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-Ui*2,v=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),y=Math.max(v,x);if(y<g){const w=y+m,b=Math.min(g,w),_=w-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});kB.displayName=A1;var SB="SelectGroup",[Koe,Voe]=jf(SB),Goe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=mr();return i.jsx(Koe,{scope:n,id:a,children:i.jsx(st.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Goe.displayName=SB;var NB="SelectLabel",CB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Voe(NB,n);return i.jsx(st.div,{id:a.id,...r,ref:t})});CB.displayName=NB;var Cy="SelectItem",[Yoe,AB]=jf(Cy),EB=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:s,...o}=e,l=zl(Cy,n),c=Wl(Cy,n),u=l.value===r,[d,f]=p.useState(s??""),[h,m]=p.useState(!1),g=Mt(t,w=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,w,r,a)}),v=mr(),x=p.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Yoe,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:p.useCallback(w=>{f(b=>b||((w==null?void 0:w.textContent)??"").trim())},[]),children:i.jsx(Ib.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:i.jsx(st.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:qe(o.onFocus,()=>m(!0)),onBlur:qe(o.onBlur,()=>m(!1)),onClick:qe(o.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:qe(o.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:qe(o.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:qe(o.onPointerMove,w=>{var b;x.current=w.pointerType,a?(b=c.onItemLeave)==null||b.call(c):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qe(o.onPointerLeave,w=>{var b;w.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:qe(o.onKeyDown,w=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(Roe.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});EB.displayName=Cy;var wh="SelectItemText",TB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...s}=e,o=zl(wh,n),l=Wl(wh,n),c=AB(wh,n),u=$oe(wh,n),[d,f]=p.useState(null),h=Mt(t,y=>f(y),c.onItemTextChange,y=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,y,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return ar(()=>(v(g),()=>x(g)),[v,x,g]),i.jsxs(i.Fragment,{children:[i.jsx(st.span,{id:c.textId,...s,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?tu.createPortal(s.children,o.valueNode):null]})});TB.displayName=wh;var PB="SelectItemIndicator",OB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return AB(PB,n).isSelected?i.jsx(st.span,{"aria-hidden":!0,...r,ref:t}):null});OB.displayName=PB;var E1="SelectScrollUpButton",IB=p.forwardRef((e,t)=>{const n=Wl(E1,e.__scopeSelect),r=CC(E1,e.__scopeSelect),[a,s]=p.useState(!1),o=Mt(t,r.onScrollButtonChange);return ar(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(MB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});IB.displayName=E1;var T1="SelectScrollDownButton",RB=p.forwardRef((e,t)=>{const n=Wl(T1,e.__scopeSelect),r=CC(T1,e.__scopeSelect),[a,s]=p.useState(!1),o=Mt(t,r.onScrollButtonChange);return ar(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(MB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});RB.displayName=T1;var MB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,s=Wl("SelectScrollButton",n),o=p.useRef(null),l=Rb(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),ar(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(st.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:qe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:qe(a.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:qe(a.onPointerLeave,()=>{c()})})}),Xoe="SelectSeparator",DB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(st.div,{"aria-hidden":!0,...r,ref:t})});DB.displayName=Xoe;var P1="SelectArrow",Joe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Mb(n),s=zl(P1,n),o=Wl(P1,n);return s.open&&o.position==="popper"?i.jsx(rb,{...a,...r,ref:t}):null});Joe.displayName=P1;var Qoe="SelectBubbleInput",LB=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=p.useRef(null),s=Mt(r,a),o=NC(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),i.jsx(st.select,{...n,style:{...X$,...n.style},ref:s,defaultValue:t})});LB.displayName=Qoe;function $B(e){return e===""||e===void 0}function FB(e){const t=rr(e),n=p.useRef(""),r=p.useRef(0),a=p.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,s]}function UB(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=Zoe(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Zoe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var ele=hB,BB=pB,tle=vB,nle=yB,rle=xB,zB=bB,ale=kB,WB=CB,qB=EB,ile=TB,sle=OB,HB=IB,KB=RB,VB=DB;const rn=ele,Xt=tle,en=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(BB,{ref:r,className:Pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(nle,{asChild:!0,children:i.jsx(Pa,{className:"h-4 w-4 opacity-50"})})]}));en.displayName=BB.displayName;const GB=p.forwardRef(({className:e,...t},n)=>i.jsx(HB,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(b4,{className:"h-4 w-4"})}));GB.displayName=HB.displayName;const YB=p.forwardRef(({className:e,...t},n)=>i.jsx(KB,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Pa,{className:"h-4 w-4"})}));YB.displayName=KB.displayName;const tn=p.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>i.jsx(rle,{children:i.jsxs(zB,{ref:a,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(GB,{}),i.jsx(ale,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(YB,{})]})}));tn.displayName=zB.displayName;const ole=p.forwardRef(({className:e,...t},n)=>i.jsx(WB,{ref:n,className:Pe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ole.displayName=WB.displayName;const at=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(qB,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(sle,{children:i.jsx(vN,{className:"h-4 w-4"})})}),i.jsx(ile,{children:t})]}));at.displayName=qB.displayName;const lle=p.forwardRef(({className:e,...t},n)=>i.jsx(VB,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",e),...t}));lle.displayName=VB.displayName;var m2=1,cle=.9,ule=.8,dle=.17,Qw=.1,Zw=.999,fle=.9999,hle=.99,mle=/[\\\/_+.#"@\[\(\{&]/,ple=/[\\\/_+.#"@\[\(\{&]/g,gle=/[\s-]/,XB=/[\s-]/g;function O1(e,t,n,r,a,s,o){if(s===t.length)return a===e.length?m2:hle;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,a),d=0,f,h,m,g;u>=0;)f=O1(e,t,n,r,u+1,s+1,o),f>d&&(u===a?f*=m2:mle.test(e.charAt(u-1))?(f*=ule,m=e.slice(a,u-1).match(ple),m&&a>0&&(f*=Math.pow(Zw,m.length))):gle.test(e.charAt(u-1))?(f*=cle,g=e.slice(a,u-1).match(XB),g&&a>0&&(f*=Math.pow(Zw,g.length))):(f*=dle,a>0&&(f*=Math.pow(Zw,u-a))),e.charAt(u)!==t.charAt(s)&&(f*=fle)),(f<Qw&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(h=O1(e,t,n,r,u+1,s+2,o),h*Qw>f&&(f=h*Qw)),f>d&&(d=f),u=n.indexOf(c,u+1);return o[l]=d,d}function p2(e){return e.toLowerCase().replace(XB," ")}function vle(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,O1(e,t,p2(e),p2(t),0,0,{})}var eh='[cmdk-group=""]',ej='[cmdk-group-items=""]',yle='[cmdk-group-heading=""]',JB='[cmdk-item=""]',g2=`${JB}:not([aria-disabled="true"])`,I1="cmdk-item-select",Mu="data-value",xle=(e,t,n)=>vle(e,t,n),QB=p.createContext(void 0),Bp=()=>p.useContext(QB),ZB=p.createContext(void 0),AC=()=>p.useContext(ZB),e6=p.createContext(void 0),t6=p.forwardRef((e,t)=>{let n=Du(()=>{var R,C;return{search:"",value:(C=(R=e.value)!=null?R:e.defaultValue)!=null?C:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Du(()=>new Set),a=Du(()=>new Map),s=Du(()=>new Map),o=Du(()=>new Set),l=n6(e),{label:c,children:u,value:d,onValueChange:f,filter:h,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=e,w=mr(),b=mr(),_=mr(),k=p.useRef(null),j=Tle();Kc(()=>{if(d!==void 0){let R=d.trim();n.current.value=R,S.emit()}},[d]),Kc(()=>{j(6,$)},[]);let S=p.useMemo(()=>({subscribe:R=>(o.current.add(R),()=>o.current.delete(R)),snapshot:()=>n.current,setState:(R,C,q)=>{var Z,J,ee,ae;if(!Object.is(n.current[R],C)){if(n.current[R]=C,R==="search")D(),P(),j(1,N);else if(R==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Q=document.getElementById(_);Q?Q.focus():(Z=document.getElementById(w))==null||Z.focus()}if(j(7,()=>{var Q;n.current.selectedItemId=(Q=U())==null?void 0:Q.id,S.emit()}),q||j(5,$),((J=l.current)==null?void 0:J.value)!==void 0){let Q=C??"";(ae=(ee=l.current).onValueChange)==null||ae.call(ee,Q);return}}S.emit()}},emit:()=>{o.current.forEach(R=>R())}}),[]),O=p.useMemo(()=>({value:(R,C,q)=>{var Z;C!==((Z=s.current.get(R))==null?void 0:Z.value)&&(s.current.set(R,{value:C,keywords:q}),n.current.filtered.items.set(R,I(C,q)),j(2,()=>{P(),S.emit()}))},item:(R,C)=>(r.current.add(R),C&&(a.current.has(C)?a.current.get(C).add(R):a.current.set(C,new Set([R]))),j(3,()=>{D(),P(),n.current.value||N(),S.emit()}),()=>{s.current.delete(R),r.current.delete(R),n.current.filtered.items.delete(R);let q=U();j(4,()=>{D(),(q==null?void 0:q.getAttribute("id"))===R&&N(),S.emit()})}),group:R=>(a.current.has(R)||a.current.set(R,new Set),()=>{s.current.delete(R),a.current.delete(R)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:w,inputId:_,labelId:b,listInnerRef:k}),[]);function I(R,C){var q,Z;let J=(Z=(q=l.current)==null?void 0:q.filter)!=null?Z:xle;return R?J(R,n.current.search,C):0}function P(){if(!n.current.search||l.current.shouldFilter===!1)return;let R=n.current.filtered.items,C=[];n.current.filtered.groups.forEach(Z=>{let J=a.current.get(Z),ee=0;J.forEach(ae=>{let Q=R.get(ae);ee=Math.max(Q,ee)}),C.push([Z,ee])});let q=k.current;F().sort((Z,J)=>{var ee,ae;let Q=Z.getAttribute("id"),oe=J.getAttribute("id");return((ee=R.get(oe))!=null?ee:0)-((ae=R.get(Q))!=null?ae:0)}).forEach(Z=>{let J=Z.closest(ej);J?J.appendChild(Z.parentElement===J?Z:Z.closest(`${ej} > *`)):q.appendChild(Z.parentElement===q?Z:Z.closest(`${ej} > *`))}),C.sort((Z,J)=>J[1]-Z[1]).forEach(Z=>{var J;let ee=(J=k.current)==null?void 0:J.querySelector(`${eh}[${Mu}="${encodeURIComponent(Z[0])}"]`);ee==null||ee.parentElement.appendChild(ee)})}function N(){let R=F().find(q=>q.getAttribute("aria-disabled")!=="true"),C=R==null?void 0:R.getAttribute(Mu);S.setState("value",C||void 0)}function D(){var R,C,q,Z;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let J=0;for(let ee of r.current){let ae=(C=(R=s.current.get(ee))==null?void 0:R.value)!=null?C:"",Q=(Z=(q=s.current.get(ee))==null?void 0:q.keywords)!=null?Z:[],oe=I(ae,Q);n.current.filtered.items.set(ee,oe),oe>0&&J++}for(let[ee,ae]of a.current)for(let Q of ae)if(n.current.filtered.items.get(Q)>0){n.current.filtered.groups.add(ee);break}n.current.filtered.count=J}function $(){var R,C,q;let Z=U();Z&&(((R=Z.parentElement)==null?void 0:R.firstChild)===Z&&((q=(C=Z.closest(eh))==null?void 0:C.querySelector(yle))==null||q.scrollIntoView({block:"nearest"})),Z.scrollIntoView({block:"nearest"}))}function U(){var R;return(R=k.current)==null?void 0:R.querySelector(`${JB}[aria-selected="true"]`)}function F(){var R;return Array.from(((R=k.current)==null?void 0:R.querySelectorAll(g2))||[])}function M(R){let C=F()[R];C&&S.setState("value",C.getAttribute(Mu))}function T(R){var C;let q=U(),Z=F(),J=Z.findIndex(ae=>ae===q),ee=Z[J+R];(C=l.current)!=null&&C.loop&&(ee=J+R<0?Z[Z.length-1]:J+R===Z.length?Z[0]:Z[J+R]),ee&&S.setState("value",ee.getAttribute(Mu))}function A(R){let C=U(),q=C==null?void 0:C.closest(eh),Z;for(;q&&!Z;)q=R>0?Ale(q,eh):Ele(q,eh),Z=q==null?void 0:q.querySelector(g2);Z?S.setState("value",Z.getAttribute(Mu)):T(R)}let L=()=>M(F().length-1),E=R=>{R.preventDefault(),R.metaKey?L():R.altKey?A(1):T(1)},B=R=>{R.preventDefault(),R.metaKey?M(0):R.altKey?A(-1):T(-1)};return p.createElement(st.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:R=>{var C;(C=y.onKeyDown)==null||C.call(y,R);let q=R.nativeEvent.isComposing||R.keyCode===229;if(!(R.defaultPrevented||q))switch(R.key){case"n":case"j":{x&&R.ctrlKey&&E(R);break}case"ArrowDown":{E(R);break}case"p":case"k":{x&&R.ctrlKey&&B(R);break}case"ArrowUp":{B(R);break}case"Home":{R.preventDefault(),M(0);break}case"End":{R.preventDefault(),L();break}case"Enter":{R.preventDefault();let Z=U();if(Z){let J=new Event(I1);Z.dispatchEvent(J)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:Ole},c),Db(e,R=>p.createElement(ZB.Provider,{value:S},p.createElement(QB.Provider,{value:O},R))))}),ble=p.forwardRef((e,t)=>{var n,r;let a=mr(),s=p.useRef(null),o=p.useContext(e6),l=Bp(),c=n6(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Kc(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let d=r6(a,s,[e.value,e.children,s],e.keywords),f=AC(),h=Ol(j=>j.value&&j.value===d.current),m=Ol(j=>u||l.filter()===!1?!0:j.search?j.filtered.items.get(a)>0:!0);p.useEffect(()=>{let j=s.current;if(!(!j||e.disabled))return j.addEventListener(I1,g),()=>j.removeEventListener(I1,g)},[m,e.onSelect,e.disabled]);function g(){var j,S;v(),(S=(j=c.current).onSelect)==null||S.call(j,d.current)}function v(){f.setState("value",d.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:w,forceMount:b,keywords:_,...k}=e;return p.createElement(st.div,{ref:jo(s,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||l.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},e.children)}),wle=p.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...s}=e,o=mr(),l=p.useRef(null),c=p.useRef(null),u=mr(),d=Bp(),f=Ol(m=>a||d.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Kc(()=>d.group(o),[]),r6(o,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:o,forceMount:a}),[a]);return p.createElement(st.div,{ref:jo(l,t),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),Db(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},p.createElement(e6.Provider,{value:h},m))))}),jle=p.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=p.useRef(null),s=Ol(o=>!o.search);return!n&&!s?null:p.createElement(st.div,{ref:jo(a,t),...r,"cmdk-separator":"",role:"separator"})}),_le=p.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,s=AC(),o=Ol(u=>u.search),l=Ol(u=>u.selectedItemId),c=Bp();return p.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),p.createElement(st.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),kle=p.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,s=p.useRef(null),o=p.useRef(null),l=Ol(u=>u.selectedItemId),c=Bp();return p.useEffect(()=>{if(o.current&&s.current){let u=o.current,d=s.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=u.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(f),h.unobserve(u)}}},[]),p.createElement(st.div,{ref:jo(s,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},Db(e,u=>p.createElement("div",{ref:jo(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Sle=p.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:s,container:o,...l}=e;return p.createElement(rC,{open:n,onOpenChange:r},p.createElement(aC,{container:o},p.createElement(Nb,{"cmdk-overlay":"",className:a}),p.createElement(Cb,{"aria-label":e.label,"cmdk-dialog":"",className:s},p.createElement(t6,{ref:t,...l}))))}),Nle=p.forwardRef((e,t)=>Ol(n=>n.filtered.count===0)?p.createElement(st.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Cle=p.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...s}=e;return p.createElement(st.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Db(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),za=Object.assign(t6,{List:kle,Item:ble,Input:_le,Group:wle,Separator:jle,Dialog:Sle,Empty:Nle,Loading:Cle});function Ale(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Ele(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function n6(e){let t=p.useRef(e);return Kc(()=>{t.current=e}),t}var Kc=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Du(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function Ol(e){let t=AC(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function r6(e,t,n,r=[]){let a=p.useRef(),s=Bp();return Kc(()=>{var o;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(Mu,l),a.current=l}),a}var Tle=()=>{let[e,t]=p.useState(),n=Du(()=>new Map);return Kc(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Ple(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Db({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(Ple(t),{ref:t.ref},n(t.props.children)):n(t)}var Ole={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Nm=p.forwardRef(({className:e,...t},n)=>i.jsx(za,{ref:n,className:Pe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Nm.displayName=za.displayName;const Cm=p.forwardRef(({className:e,...t},n)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(rs,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(za.Input,{ref:n,className:Pe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Cm.displayName=za.Input.displayName;const a6=p.forwardRef(({className:e,...t},n)=>i.jsx(za.List,{ref:n,className:Pe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));a6.displayName=za.List.displayName;const Am=p.forwardRef((e,t)=>i.jsx(za.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Am.displayName=za.Empty.displayName;const Em=p.forwardRef(({className:e,...t},n)=>i.jsx(za.Group,{ref:n,className:Pe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Em.displayName=za.Group.displayName;const Ile=p.forwardRef(({className:e,...t},n)=>i.jsx(za.Separator,{ref:n,className:Pe("-mx-1 h-px bg-border",e),...t}));Ile.displayName=za.Separator.displayName;const Tm=p.forwardRef(({className:e,...t},n)=>i.jsx(za.Item,{ref:n,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Tm.displayName=za.Item.displayName;let tj=!1,nj=null;function Fd(){return tj?Promise.resolve():(nj||(nj=ce.auth.getSession().then(()=>{tj=!0}).catch(()=>{tj=!0})),nj)}const ql=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null);let o=!1;const l=b=>{o=b},c=()=>{try{const b=localStorage.getItem("app.cachedAgents");if(!b)return!1;const _=JSON.parse(b);if(Array.isArray(_))return t(_),!0}catch{}return!1},u=b=>{const _=(b==null?void 0:b.filter(k=>k!=null))||[];return _.includes("master_agent")?"master_agent":_.includes("super_agent")?"super_agent":_.includes("agent")?"agent":null},d=6e4;globalThis.__agentsCache||(globalThis.__agentsCache={data:null,ts:0,inFlight:null});const f=globalThis.__agentsCache,h=b=>(b||[]).map(_=>{var S;const k=((S=_.roles)==null?void 0:S.filter(O=>O!=null))||[],j=u(_.roles||[]);return{user_id:_.id,email:_.email,display_name:_.display_name,avatar_url:_.avatar_url,timezone:_.timezone,created_at:_.created_at,roles:k,primaryRole:j,status:"Active",super_agent_id:null}}),m=async()=>(f.inFlight||(f.inFlight=(async()=>{await Fd();const{data:b,error:_}=await ce.from("v_users").select("*").order("created_at",{ascending:!1});if(_)throw _;let k=h(b||[]);try{const{data:j}=await ce.from("super_agent_members").select("agent_user_id, super_agent_id");if(j&&Array.isArray(j)){const S={};j.forEach(O=>{S[O.agent_user_id]=O.super_agent_id}),k=k.map(O=>O.primaryRole==="agent"?{...O,super_agent_id:S[O.user_id]||null}:O)}}catch{}f.data=k,f.ts=Date.now(),f.inFlight=null;try{localStorage.setItem("app.cachedAgents",JSON.stringify(k))}catch{}return k})().catch(b=>{throw f.inFlight=null,b})),f.inFlight),g=async()=>f.data&&Date.now()-f.ts<d?f.data:await m(),v=async b=>{try{r(!0),s(null),b!=null&&b.force&&(f.ts=0);const _=await g();t(_)}catch(_){console.error("Error fetching human agents:",_),s("Failed to fetch human agents"),t([])}finally{r(!1)}},x=async b=>{var _,k;try{s(null);const j=b.email.trim().toLowerCase();if(b.role==="agent"&&!b.super_agent_id)throw new Error("Agents must be assigned to a super agent before they can be created.");const{data:S,error:O}=await ce.from("v_human_agents").select("user_id, confirmation_status").ilike("email",j).maybeSingle();if(O)throw O;if(S){const D=(()=>{switch(S.confirmation_status){case"accepted":return"assigned to an active member";case"waiting":return"pending for an existing invite";case"expired":return"associated with an expired invite";default:return"in use"}})();throw new Error(`The email ${j} is already ${D}. Choose a different email or manage the existing user instead.`)}const{data:I,error:P}=await ce.functions.invoke("admin-create-user",{headers:{"x-client-origin":typeof window<"u"?window.location.origin:""},body:{email:j,full_name:b.full_name,role:b.role,super_agent_id:b.super_agent_id??null,org_id:b.org_id??null}});if(P)throw P;try{const D=(I==null?void 0:I.id)||(I==null?void 0:I.user_id)||((_=I==null?void 0:I.user)==null?void 0:_.id)||null;D&&await ce.from("users_profile").update({is_2fa_email_enabled:o}).eq("user_id",D)}catch{}await v({force:!0});try{await nn({action:"user.create",resource:"user",resourceId:(I==null?void 0:I.id)||null,context:b})}catch{}return{id:(I==null?void 0:I.id)||(I==null?void 0:I.user_id)||((k=I==null?void 0:I.user)==null?void 0:k.id)||null}}catch(j){throw console.error("Error creating agent:",j),s(j instanceof Error?j.message:"Failed to create agent"),j}},y=async(b,_)=>{try{s(null);const{data:k,error:j}=await ce.from("roles").select("id").eq("name",_).single();if(j)throw j;const{error:S}=await ce.from("user_roles").delete().eq("user_id",b);if(S)throw S;const{error:O}=await ce.from("user_roles").insert([{user_id:b,role_id:k.id}]);if(O)throw O;await v({force:!0});try{await nn({action:"user.update_role",resource:"user",resourceId:b,context:{role:_}})}catch{}}catch(k){throw console.error("Error updating agent role:",k),s(k instanceof Error?k.message:"Failed to update agent role"),k}},w=async b=>{try{s(null);const{data:_,error:k}=await ce.from("v_human_agents").select("role_name").eq("user_id",b).maybeSingle();if(k)throw k;if(_!=null&&_.role_name&&String(_.role_name).toLowerCase().includes("master"))throw new Error("Master agent tidak dapat dihapus.");const{error:j}=await ce.functions.invoke("admin-delete-user",{body:{user_id:b}});if(j)throw j;await v({force:!0});try{await nn({action:"user.delete",resource:"user",resourceId:b})}catch{}}catch(_){throw console.error("Error deleting agent:",_),s(_ instanceof Error?_.message:"Failed to delete agent"),_}};return p.useEffect(()=>{c()&&r(!1),v()},[]),{agents:e,teams:[],loading:n,error:a,fetchAgents:v,fetchTeams:()=>Promise.resolve(),createAgent:x,updateAgentStatus:()=>Promise.resolve(),updateAgentRole:y,deleteAgent:w,createTeam:()=>Promise.resolve(),addAgentToTeam:()=>Promise.resolve(),removeAgentFromTeam:()=>Promise.resolve(),setEnable2FAFlagForCreate:l}},Rle=({value:e,onFilterChange:t})=>{var k,j,S,O;const[n,r]=p.useState(!1),[a,s]=p.useState(),[o,l]=p.useState(),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[h,m]=p.useState([]),[g,v]=p.useState({dateRange:{},label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"}),{agents:x}=ql();p.useEffect(()=>{e&&(v(I=>({...I,...e,dateRange:e.dateRange??I.dateRange})),e.dateRange&&(s(e.dateRange.from),l(e.dateRange.to)))},[n,e==null?void 0:e.agent,e==null?void 0:e.status,e==null?void 0:e.resolvedBy,e==null?void 0:e.platformId,e==null?void 0:e.channelType,(k=e==null?void 0:e.dateRange)!=null&&k.from?e.dateRange.from.getTime():0,(j=e==null?void 0:e.dateRange)!=null&&j.to?e.dateRange.to.getTime():0]),p.useEffect(()=>{let I=!0;return(async()=>{try{const{data:N,error:D}=await kt.from("channels").select("id, display_name, provider, type").order("created_at",{ascending:!1});if(!I)return;if(D)throw D;m(N||[])}catch{if(!I)return;m([])}})(),()=>{I=!1}},[]);const y=(I,P)=>{const N={...g,[I]:P};v(N)},w=I=>{v(P=>({...P,channelType:I,platformId:""}))},b=()=>{const I={...g,dateRange:{from:a,to:o}};t(I),r(!1)},_=()=>{const I={dateRange:{},label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"};v(I),s(void 0),l(void 0),t(I)};return i.jsxs(wn,{open:n,onOpenChange:r,children:[i.jsx(lC,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(S4,{className:"h-4 w-4"})})}),i.jsxs(hn,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsx(mn,{children:i.jsx(pn,{children:"Filter"})}),i.jsxs("div",{className:"grid gap-6 py-4",children:[i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Range"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ns,{children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(re,{variant:"outline",className:Pe("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),a?So(a,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Qi,{className:"w-auto p-0",align:"start",children:i.jsx(Sm,{mode:"single",selected:a,onSelect:s,initialFocus:!0,className:"pointer-events-auto"})})]}),i.jsx("span",{className:"self-center text-muted-foreground",children:"-"}),i.jsxs(Ns,{children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(re,{variant:"outline",className:Pe("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),o?So(o,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Qi,{className:"w-auto p-0",align:"start",children:i.jsx(Sm,{mode:"single",selected:o,onSelect:l,initialFocus:!0,className:"pointer-events-auto"})})]})]})]})}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Resolved By"}),i.jsxs(Ns,{open:d,onOpenChange:f,children:[i.jsx(Cs,{asChild:!0,children:i.jsx(re,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((S=x.find(I=>I.user_id===g.resolvedBy))==null?void 0:S.display_name)||"Choose Agent"})}),i.jsx(Qi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(Nm,{children:[i.jsx(Cm,{placeholder:"Search Resolved By Agent"}),i.jsx(Am,{children:"No agent found."}),i.jsx(Em,{children:x.map(I=>i.jsx(Tm,{onSelect:()=>{y("resolvedBy",I.user_id),f(!1)},children:i.jsx("span",{className:"ml-2",children:I.display_name||"Unknown"})},I.user_id))})]})})]})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Agent"}),i.jsxs(Ns,{open:c,onOpenChange:u,children:[i.jsx(Cs,{asChild:!0,children:i.jsx(re,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((O=x.find(I=>I.user_id===g.agent))==null?void 0:O.display_name)||"Choose Agent"})}),i.jsx(Qi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(Nm,{children:[i.jsx(Cm,{placeholder:"Search Handled By Agent"}),i.jsx(Am,{children:"No agent found."}),i.jsx(Em,{children:x.map(I=>i.jsx(Tm,{onSelect:()=>{y("agent",I.user_id),u(!1)},children:i.jsx("span",{className:"ml-2",children:I.display_name||"Unknown"})},I.user_id))})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Channel Type"}),i.jsxs(rn,{value:g.channelType,onValueChange:w,children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:"All Channels"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All Channels"}),i.jsx(at,{value:"whatsapp",children:"WhatsApp"}),i.jsx(at,{value:"telegram",children:"Telegram"}),i.jsx(at,{value:"web",children:"Live Chat"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Platform"}),i.jsxs(rn,{value:g.platformId,onValueChange:I=>y("platformId",I),disabled:!g.channelType||g.channelType==="all",children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:g.channelType&&g.channelType!=="all"?"Choose Platform":"Select channel type first"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All Platforms"}),(()=>{const I=g.channelType&&g.channelType!=="all"?h.filter(P=>String(P.provider||"").toLowerCase()===String(g.channelType).toLowerCase()):[];return!g.channelType||g.channelType==="all"?null:I.length===0?i.jsx(at,{value:"__none",disabled:!0,children:"No platforms found for this channel type"}):I.map(P=>i.jsx(at,{value:P.id,children:P.display_name??"Unknown"},P.id))})()]})]})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),i.jsxs(rn,{value:g.status,onValueChange:I=>y("status",I),children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:"All Statuses"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All Statuses"}),i.jsx(at,{value:"open",children:"Open"}),i.jsx(at,{value:"pending",children:"Pending"}),i.jsx(at,{value:"closed",children:"Closed"})]})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(re,{variant:"outline",onClick:_,children:"Reset"}),i.jsx(re,{onClick:b,children:"Apply"})]})]})]})},Mle={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},mo=Mle??{},Su=((mo==null?void 0:mo.VITE_WEBHOOK_BASE_URL)||"https://primary-production-376c.up.railway.app/webhook").replace(/\/$/,""),Dle=(mo==null?void 0:mo.VITE_WEBHOOK_PROXY_SLUG)||"proxy-n8n",v2=mo==null?void 0:mo.VITE_WEBHOOK_PROXY_BASE_URL,Lle=v2?v2.replace(/\/$/,""):`${El}/functions/v1/${Dle}`.replace(/\/$/,""),rj=Lle,$r="route:",y2=e=>e.startsWith("/")?e:`/${e}`,Ov=e=>e.startsWith($r),aj=e=>Ov(e)?e.slice($r.length):null,$le=e=>{try{const t=new URL(e),n=t.hostname.endsWith(".supabase.co"),a=(t.pathname||"").includes("/functions/");return n&&!a}catch{return!1}},An={BASE_URL:Su,LEGACY_BASE_URL:Su,PROXY_BASE_URL:rj,ROUTE_PREFIX:$r,ENDPOINTS:{WHATSAPP:{GET_LOGIN_QR:`${$r}session.get_login_qr`,GET_SESSIONS:"/get_sessions",LOGOUT_SESSION:`${$r}session.logout`,CREATE_PLATFORM:"/whatsapp/create-platform",CREATE_SESSION:`${$r}session.create`,DISCONNECT_SESSION:`${$r}session.logout`,DELETE_SESSION:`${$r}session.delete`},TELEGRAM:{CREATE_PLATFORM:`${$r}telegram.create_platform`,SEND_MESSAGE:`${$r}telegram.send_message`,DELETE_WEBHOOK:`${$r}telegram.delete_webhook`,VERIFY_TOKEN:`${El}/functions/v1/telegram-verify-token`},AI_AGENT:{CHAT_SETTINGS:`${$r}chat.settings`,CHAT_TEST:`${$r}chat.test`},KNOWLEDGE:{FILE_UPLOAD:"/knowledge/file-upload-dev",FILE_DELETE:`${$r}knowledge.file_delete`},MESSAGE:{DEFAULT:"/send-message",SEND_MESSAGE:"/send-message",WHATSAPP_SEND_MESSAGE:`${$r}whatsapp.send_message`,TELEGRAM_SEND_MESSAGE:`${$r}telegram.send_message`,WEB_SEND_MESSAGE:`${$r}web.send_message`}},buildUrl:(e,t={})=>{if(!e)throw new Error("Endpoint must be provided");if(e.startsWith("http"))return e;if(Ov(e)){const n=aj(e);if(!n)throw new Error("Invalid proxy route key");return`${!!t.forceLegacy&&!$le(Su)?Su:rj}/${n}`}return`${Su}${y2(e)}`},buildTestUrl:e=>{if(Ov(e)){const n=aj(e);if(!n)throw new Error("Invalid proxy route key");return`${rj}/${n}`}return`${Su.replace("/webhook","/webhook-test")}${y2(e)}`},isProxyEndpoint:Ov,extractRouteKey:aj},i6={telegram:An.ENDPOINTS.MESSAGE.TELEGRAM_SEND_MESSAGE,whatsapp:An.ENDPOINTS.MESSAGE.WHATSAPP_SEND_MESSAGE,web:An.ENDPOINTS.MESSAGE.WEB_SEND_MESSAGE},s6=e=>{const t=(e||"").toLowerCase();return t==="wa"||t==="waha"||t==="whatsapp_cloud"?"whatsapp":t==="tg"||t==="tele"?"telegram":t},Bg=e=>{const t=s6(e),n=i6[t]||An.ENDPOINTS.MESSAGE.DEFAULT;An.ENDPOINTS.MESSAGE.SEND_MESSAGE=n},Fle=e=>{const t=s6(e);return i6[t]||An.ENDPOINTS.MESSAGE.DEFAULT},Ule={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},Ble=()=>{const e=Ule??{};return(e==null?void 0:e.VITE_SUPABASE_ANON_KEY)??null};async function ji(e,t={},n={}){const{forceLegacy:r=!1,skipAuth:a=!1}=n,s=An.buildUrl(e,{forceLegacy:r}),o=s.startsWith(An.PROXY_BASE_URL),l=r&&!o,c=new Headers(t.headers),u=s.startsWith(El)&&s.includes("/functions/v1/"),d=!l&&An.isProxyEndpoint(e)||u||o;if(d&&!a&&!c.has("Authorization"))try{const{data:{session:h}}=await ce.auth.getSession(),m=h==null?void 0:h.access_token;m&&c.set("Authorization",`Bearer ${m}`)}catch{}const f=Ble();return f&&(d||o||u||s.startsWith(El))&&!c.has("apikey")&&c.set("apikey",f),fetch(s,{...t,headers:c})}let x2=0;const zle=1e3,zg=(e="incoming")=>{try{if(!(localStorage.getItem("audioNotifications")!=="false")||document.visibilityState!=="visible")return;const n=Date.now();if(n-x2<zle)return;x2=n;const r=new Audio;e==="incoming"?r.src="/tones/mixkit-message-pop-alert-2354.mp3":r.src="/tones/mixkit-long-pop-2358.wav",r.volume=.7,r.play().catch(()=>{})}catch{}},Wle=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(null),d=p.useRef({}),[f,h]=p.useState({}),m=p.useRef(null),g=(M=400)=>{try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}m.current=window.setTimeout(()=>{document.visibilityState==="visible"&&(a||y(void 0,{silent:!0}))},M)},v=M=>{const T=((M==null?void 0:M.status)||"").toLowerCase();return{assigned:!(T==="closed")&&(T==="pending"||T==="assigned"),assignee_user_id:(M==null?void 0:M.assignee_user_id)??null,handled_by_super_agent:!1}},x=(M,T)=>{t(A=>{const E=A.map(B=>{var R;if(B.id===M){const C=((R=B.channel)==null?void 0:R.super_agent_id)??B.super_agent_id??null,q=v({ai_access_enabled:B.ai_access_enabled,assigned_at:B.assigned_at,assignee_user_id:B.assignee_user_id,channel_super_agent_id:C,status:B.status,ai_handoff_at:B.ai_handoff_at??null}),Z=q.assignee_user_id?q.assignee_user_id===C?B.super_agent_name||B.assignee_name||"":B.assignee_name||"":"";return{...B,last_message_preview:((T==null?void 0:T.body)||"").toString().replace(/\s+/g," ").trim()||"",last_message_direction:(T==null?void 0:T.direction)??null,last_message_role:(T==null?void 0:T.role)??null,last_msg_at:(T==null?void 0:T.created_at)||B.last_msg_at,unreplied:(T==null?void 0:T.direction)==="in"||(T==null?void 0:T.role)==="user",assigned:q.assigned,assignee_user_id:q.assignee_user_id,assignee_name:Z,status:B.status}}return B}).sort((B,R)=>{const C=new Date(B.last_msg_at??B.created_at??0).getTime();return new Date(R.last_msg_at??R.created_at??0).getTime()-C});return console.log("Re-sorted conversations after message update"),E})},y=async(M,T={})=>{try{T.silent||s(!0),l(null),await Fd();const A=M??d.current;M&&(d.current=M,h(M));let L=kt.from("threads").select(`
          *,
          contacts(name, phone, email),
          channels!inner(display_name, type, provider, external_id, logo_url, profile_photo_url, super_agent_id),
          messages(id, body, role, direction, created_at, seq)
        `).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});const{dateRange:E,status:B,agent:R,resolvedBy:C,inbox:q,channelType:Z,platformId:J}=A;B&&B!=="all"&&B!==""&&(L=L.eq("status",B)),R&&R!=="all"&&R!==""&&(L=L.eq("assignee_user_id",R)),C&&C!=="all"&&C!==""&&(L=L.eq("resolved_by_user_id",C)),q&&q!=="all"&&q!==""&&(L=L.eq("channels.provider",q)),Z&&Z!=="all"&&Z!==""&&(L=L.eq("channels.provider",Z)),J&&J!=="all"&&J!==""&&(L=L.eq("channel_id",J));const ee=new Promise((K,fe)=>{const De=setTimeout(()=>{clearTimeout(De),fe(new Error("timeout"))},8e3)}),{data:ae,error:Q}=await Promise.race([L,ee]);if(Q)throw Q;const oe=Array.from(new Set((ae||[]).flatMap(K=>{var fe;return[K.assigned_by_user_id,K.assignee_user_id,K.resolved_by_user_id,(fe=K.channels)==null?void 0:fe.super_agent_id]}).filter(Boolean)));let ge={};if(oe.length>0){const{data:K,error:fe}=await kt.from("users_profile").select("user_id, display_name").in("user_id",oe);if(fe)throw fe;ge=Object.fromEntries((K||[]).map(De=>[De.user_id,De.display_name||""]))}let Ie=(ae||[]).map(K=>{var de,we,se,Be,je,Ge,vt,wt,Nt,yt,xt,le,Ee,ye,H;const fe=Array.isArray(K.messages)&&K.messages.length>0?K.messages[0]:null,De=((fe==null?void 0:fe.body)||"").toString().replace(/\s+/g," ").trim(),Ze=(fe==null?void 0:fe.direction)??null,Ve=(fe==null?void 0:fe.role)??null,ut=Ze==="in"||Ve==="user",Ye=((de=K.channels)==null?void 0:de.super_agent_id)||null,ot=v({ai_access_enabled:K.ai_access_enabled,assigned_at:K.assigned_at,assignee_user_id:K.assignee_user_id,channel_super_agent_id:Ye,status:K.status,ai_handoff_at:K.ai_handoff_at}),te=Ye&&ge[Ye]||"",Xe=ot.assignee_user_id?ot.assignee_user_id===Ye?te:ge[ot.assignee_user_id]||"":"",dt=K.status||"open";return{...K,contact_name:((we=K.contacts)==null?void 0:we.name)||"Unknown Contact",contact_phone:((se=K.contacts)==null?void 0:se.phone)||"",contact_email:((Be=K.contacts)==null?void 0:Be.email)||"",channel_name:((je=K.channels)==null?void 0:je.display_name)||"Unknown Channel",channel_type:((Ge=K.channels)==null?void 0:Ge.type)||"web",channel_provider:((vt=K.channels)==null?void 0:vt.provider)||void 0,channel:{provider:(wt=K.channels)==null?void 0:wt.provider,type:(Nt=K.channels)==null?void 0:Nt.type,display_name:(yt=K.channels)==null?void 0:yt.display_name,external_id:(xt=K.channels)==null?void 0:xt.external_id,logo_url:((le=K.channels)==null?void 0:le.logo_url)||null,profile_photo_url:((Ee=K.channels)==null?void 0:Ee.profile_photo_url)||null,super_agent_id:Ye},channel_logo_url:((ye=K.channels)==null?void 0:ye.logo_url)||((H=K.channels)==null?void 0:H.profile_photo_url)||null,last_message_preview:De||"",last_message_direction:Ze,last_message_role:Ve,last_msg_at:(fe==null?void 0:fe.created_at)||K.last_msg_at,message_count:0,assigned:ot.assigned,assigned_by_name:K.assigned_by_user_id&&ge[K.assigned_by_user_id]||"",assignee_name:Xe,assignee_user_id:ot.assignee_user_id,resolved_by_name:K.resolved_by_user_id&&ge[K.resolved_by_user_id]||"",ai_access_enabled:K.ai_access_enabled??!1,super_agent_id:Ye,super_agent_name:te,status:dt,unreplied:ut}});if(E!=null&&E.from){const K=Pl(E.from).getTime();Ie=Ie.filter(fe=>new Date(fe.last_msg_at).getTime()>=K)}if(E!=null&&E.to){const K=LU(E.to).getTime();Ie=Ie.filter(fe=>new Date(fe.last_msg_at).getTime()<=K)}q&&q!=="all"&&q!==""&&(Ie=Ie.filter(K=>{var fe;return String(K.channel_provider||((fe=K.channel)==null?void 0:fe.provider)||"").toLowerCase()===String(q).toLowerCase()})),Z&&Z!=="all"&&Z!==""&&(Ie=Ie.filter(K=>{var fe;return String(K.channel_provider||((fe=K.channel)==null?void 0:fe.provider)||"").toLowerCase()===String(Z).toLowerCase()})),J&&J!=="all"&&J!==""&&(Ie=Ie.filter(K=>String(K.channel_id||"")===String(J)));const me=Ie.sort((K,fe)=>{const De=new Date(K.last_msg_at??K.created_at??0).getTime();return new Date(fe.last_msg_at??fe.created_at??0).getTime()-De});t(me)}catch(A){console.error("Error fetching conversations:",A),l(A instanceof Error?A.message:"Failed to fetch conversations")}finally{s(!1)}},w=M=>{M!=null&&M.id&&t(T=>{const A=T.findIndex(C=>C.id===M.id);if(A===-1)return T;const L=T[A],E=v({ai_access_enabled:M.ai_access_enabled??L.ai_access_enabled,assigned_at:M.assigned_at??L.assigned_at,status:M.status??L.status,ai_handoff_at:M.ai_handoff_at??L.ai_handoff_at??null}),B={...L,status:M.status??L.status,assignee_user_id:M.assignee_user_id??L.assignee_user_id,collaborator_user_id:M.collaborator_user_id??L.collaborator_user_id,assigned_at:M.assigned_at??L.assigned_at,resolved_at:M.resolved_at??L.resolved_at,resolved_by_user_id:M.resolved_by_user_id??L.resolved_by_user_id,ai_access_enabled:M.ai_access_enabled??L.ai_access_enabled,last_msg_at:M.last_msg_at??L.last_msg_at,assigned:E.assigned,account_id:M.account_id??L.account_id??null},R=[...T];return R[A]=B,R.sort((C,q)=>{const Z=new Date(C.last_msg_at??C.created_at??0).getTime();return new Date(q.last_msg_at??q.created_at??0).getTime()-Z}),R})},b=p.useCallback(async M=>{var T;try{l(null);const{data:A,error:L}=await ce.from("messages").select(`
          id,
          thread_id,
          direction,
          role,
          type,
          body,
          payload,
          actor_kind,
          actor_id,
          seq,
          in_reply_to,
          edited_at,
          edit_reason,
          created_at,
          file_link
        `).eq("thread_id",M).order("seq",{ascending:!0});if(L)throw L;const{data:E}=await ce.from("threads").select(`
          contacts(name, phone, email)
        `).eq("id",M).maybeSingle(),B=((T=E==null?void 0:E.contacts)==null?void 0:T.name)||"Unknown Contact",R=(A||[]).map(C=>{var q;return{...C,contact_name:B,contact_avatar:((q=B[0])==null?void 0:q.toUpperCase())||"U"}});r(R),u(M)}catch(A){console.error("Error fetching messages:",A),l(A instanceof Error?A.message:"Failed to fetch messages")}},[]),_=async(M,T,A="assistant")=>{var L,E;try{l(null);const{data:B,error:R}=await ce.from("threads").select("channel_id, contact_id, channels(provider)").eq("id",M).single();if(R)throw R;const C={thread_id:M,direction:"out",role:A,type:"text",body:T,payload:{},actor_kind:"agent",actor_id:null},Z={id:`tmp_${Math.random().toString(36).slice(2)}`,thread_id:M,direction:"out",role:A,type:"text",body:T,payload:{},actor_kind:"agent",actor_id:null,seq:0,in_reply_to:null,edited_at:null,edit_reason:null,created_at:new Date().toISOString(),contact_name:"",contact_avatar:"A",_status:"pending"};r(oe=>[...oe,Z]);const{data:J,error:ee}=await ce.from("messages").insert([C]).select().single();if(ee)throw ee;const{data:ae,error:Q}=await ce.from("contacts").select("phone, external_id").eq("id",B.contact_id).single();Q&&console.warn("Error fetching contact details:",Q);try{const oe=e.find(ie=>ie.id===M),ge=((L=oe==null?void 0:oe.channel)==null?void 0:L.provider)||((E=B==null?void 0:B.channels)==null?void 0:E.provider);if(ge&&ge.toLowerCase()!=="web"){const ie=Fle(ge),Ie={channel_id:B.channel_id,contact_id:B.contact_id,contact_phone:(ae==null?void 0:ae.phone)||null,external_id:(ae==null?void 0:ae.external_id)||null,text:T,type:"text",direction:"out",role:A},me=await ji(ie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ie)});me.ok||console.warn("Webhook call failed:",me.status,me.statusText)}}catch(oe){console.error("Error calling webhook:",oe)}await b(M),x(M,{body:T,direction:"out",role:A,created_at:new Date().toISOString()});try{await nn({action:"message.send",resource:"message",resourceId:(J==null?void 0:J.id)??null,context:{thread_id:M,role:A}})}catch{}return J}catch(B){throw console.error("Error sending message:",B),l(B instanceof Error?B.message:"Failed to send message"),r(R=>{const C=[...R];for(let q=C.length-1;q>=0;q--)if(C[q]._status==="pending"){C[q]._status="error";break}return C}),B}},k=async(M,T)=>{var A;try{l(null);const L={org_id:((A=(await ce.auth.getUser()).data.user)==null?void 0:A.id)||"00000000-0000-0000-0000-000000000001",contact_id:M,channel_id:T,status:"open",assignee_user_id:null},{data:E,error:B}=await ce.from("threads").insert([L]).select().single();if(B)throw B;await y(void 0,{silent:!0});try{await nn({action:"thread.create",resource:"thread",resourceId:(E==null?void 0:E.id)??null,context:{contact_id:M,channel_id:T}})}catch{}return E}catch(L){throw console.error("Error creating conversation:",L),l(L instanceof Error?L.message:"Failed to create conversation"),L}},j=async(M,T,A)=>{var L,E,B;try{l(null);const{data:R}=await ce.auth.getUser(),C=((L=R==null?void 0:R.user)==null?void 0:L.id)||null,q="pending";if((A==null?void 0:A.setAssignee)??!0){const{error:J}=await ce.rpc("takeover_thread",{p_thread_id:M});J&&console.warn("takeover_thread RPC failed; will attempt direct update",J);try{const{data:ee}=await ce.from("threads").select("assignee_user_id, status").eq("id",M).single(),ae=!!(ee!=null&&ee.assignee_user_id);if((((ee==null?void 0:ee.status)||"").toLowerCase()!==q||!ae)&&C){const oe={assigned_at:new Date().toISOString(),handover_reason:"other:manual_takeover",ai_access_enabled:!1,status:q};ae||(oe.assignee_user_id=C,oe.assigned_by_user_id=C);const{error:ge}=await ce.from("threads").update(oe).eq("id",M);ge&&console.warn("Fallback assignment/status update failed",ge)}}catch(ee){console.warn("Failed verifying assignment state",ee)}}else{const J=new Date().toISOString(),{error:ee}=await ce.from("threads").update({collaborator_user_id:C,status:q,ai_access_enabled:!1,ai_handoff_at:J}).eq("id",M);if(ee)throw ee}try{await kt.from("threads").update({ai_access_enabled:!1}).eq("id",M)}catch{}try{const{data:J}=await ce.auth.getUser(),ee=((E=J==null?void 0:J.user)==null?void 0:E.id)||null;let ae=null;if(ee){const{data:Q}=await ce.from("users_profile").select("display_name").eq("user_id",ee).single();ae=(Q==null?void 0:Q.display_name)||null}await kt.from("messages").insert([{thread_id:M,direction:null,role:"system",type:"event",body:`Conversation taken over by ${ae||((B=J==null?void 0:J.user)==null?void 0:B.email)||"agent"}.`,payload:{event:"takeover",user_id:ee}}])}catch(J){console.warn("Failed to insert takeover event message",J)}await y(void 0,{silent:!0}),await b(M);try{await nn({action:"thread.assign",resource:"thread",resourceId:M,context:{assignee_user_id:T}})}catch{}}catch(R){throw console.error("Error assigning thread:",R),l(R instanceof Error?R.message:"Failed to assign thread"),R}},S=async M=>{try{l(null);const{error:T}=await ce.from("threads").update({collaborator_user_id:null,status:"open",ai_access_enabled:!0,ai_handoff_at:null}).eq("id",M);if(T)throw T;await y(void 0,{silent:!0}),await b(M)}catch(T){throw console.error("Error clearing collaborator:",T),l(T instanceof Error?T.message:"Failed to clear collaborator"),T}},O=async(M,T)=>{var A,L;try{l(null);const{data:E}=await ce.auth.getUser(),B=((A=E==null?void 0:E.user)==null?void 0:A.id)||null,R=new Date().toISOString(),q={assignee_user_id:T,handover_reason:T?"other:manual_assign":"other:manual_unassign",ai_access_enabled:!T,ai_handoff_at:T?R:null,status:T?"pending":"open"};T?(q.assigned_by_user_id=B,q.assigned_at=R):(q.assigned_by_user_id=null,q.assigned_at=null);const{error:Z}=await ce.from("threads").update(q).eq("id",M);if(Z)throw Z;try{const J=[B,T].filter(Boolean);let ee={};if(J.length>0){const{data:ge}=await ce.from("users_profile").select("user_id, display_name").in("user_id",J);ee=Object.fromEntries((ge||[]).map(ie=>[String(ie.user_id),String(ie.display_name||"")]))}const ae=B&&(ee[B]||((L=E==null?void 0:E.user)==null?void 0:L.email))||"agent",Q=T?ee[T]||"agent":"",oe={thread_id:M,direction:null,role:"system",type:"event",body:"",payload:{}};T?(oe.body=`Conversation assigned to ${Q} by ${ae}.`,oe.payload={event:"assign",assigned_to:T,assigned_by:B}):(oe.body=`Conversation unassigned by ${ae}.`,oe.payload={event:"unassign",assigned_by:B}),await kt.from("messages").insert([oe])}catch(J){console.warn("Failed to insert assign event message",J)}await y(void 0,{silent:!0}),await b(M);try{await nn({action:"thread.assign",resource:"thread",resourceId:M,context:{assignee_user_id:T}})}catch{}}catch(E){throw console.error("Error assigning thread to user:",E),l(E instanceof Error?E.message:"Failed to assign thread"),E}},I=async M=>{var L,E,B;const{error:T,data:A}=await kt.rpc("takeover_thread",{p_thread_id:M});if(T){console.warn("takeover_thread RPC failed, falling back to direct update",T);const{data:R}=await ce.auth.getUser(),C=((L=R==null?void 0:R.user)==null?void 0:L.id)||null;if(!C)throw T;const q=new Date().toISOString(),{error:Z}=await kt.from("threads").update({collaborator_user_id:C,status:"pending",assigned_at:q,ai_access_enabled:!1}).eq("id",M);if(Z)throw Z}try{const{data:R}=await ce.auth.getUser(),C=((E=R==null?void 0:R.user)==null?void 0:E.id)||null;let q=null;if(C){const{data:Z}=await ce.from("users_profile").select("display_name").eq("user_id",C).single();q=(Z==null?void 0:Z.display_name)||null}await kt.from("messages").insert([{thread_id:M,direction:null,role:"system",type:"event",body:`Conversation taken over by ${q||((B=R==null?void 0:R.user)==null?void 0:B.email)||"agent"}.`,payload:{event:"takeover",user_id:C}}])}catch(R){console.warn("Failed to insert takeover event message",R)}return await y(void 0,{silent:!0}),await b(M),A},P=async M=>{var L,E;const{data:T,error:A}=await kt.rpc("unassign_thread",{p_thread_id:M});if(A)throw A;try{const{data:B}=await ce.auth.getUser(),R=((L=B==null?void 0:B.user)==null?void 0:L.id)||null;let C=null;if(R){const{data:q}=await ce.from("users_profile").select("display_name").eq("user_id",R).single();C=(q==null?void 0:q.display_name)||null}await kt.from("messages").insert([{thread_id:M,direction:null,role:"system",type:"event",body:`Conversation moved to Unassigned by ${C||((E=B==null?void 0:B.user)==null?void 0:E.email)||"agent"}.`,payload:{event:"unassign",user_id:R}}])}catch(B){console.warn("Failed to insert unassign event message",B)}return await y(void 0,{silent:!0}),await b(M),T},N=async(M,T)=>{try{l(null);const{error:A}=await ce.from("threads").update({collaborator_user_id:T}).eq("id",M);if(A)throw A;t(L=>L.map(E=>E.id===M?{...E,collaborator_user_id:T}:E));try{await nn({action:T?"thread.set_collaborator":"thread.clear_collaborator",resource:"thread",resourceId:M,context:{collaborator_user_id:T}})}catch{}}catch(A){throw console.error("Error updating thread collaborator:",A),l(A instanceof Error?A.message:"Failed to update collaborator"),A}},D=async(M,T)=>{try{l(null);const{error:A}=await ce.from("thread_labels").insert([{thread_id:M,label_id:T}]);if(A)throw A;try{await nn({action:"thread.add_label",resource:"thread",resourceId:M,context:{label_id:T}})}catch{}}catch(A){throw console.error("Error adding thread label:",A),l(A instanceof Error?A.message:"Failed to add thread label"),A}},$=async(M,T)=>{try{l(null);const{error:A}=await ce.from("thread_labels").delete().eq("thread_id",M).eq("label_id",T);if(A)throw A;try{await nn({action:"thread.remove_label",resource:"thread",resourceId:M,context:{label_id:T}})}catch{}}catch(A){throw console.error("Error removing thread label:",A),l(A instanceof Error?A.message:"Failed to remove thread label"),A}},U=async M=>{try{l(null);const{error:T}=await ce.from("threads").delete().eq("id",M);if(T)throw T;io.invalidatePattern("^query:threads"),t(A=>A.filter(E=>E.id!==M)),c===M&&(u(null),r([]));try{await nn({action:"thread.delete",resource:"thread",resourceId:M})}catch{}await y(void 0,{silent:!0})}catch(T){throw console.error("Error deleting thread:",T),l(T instanceof Error?T.message:"Failed to delete conversation"),T}};p.useEffect(()=>{g(10)},[]),p.useEffect(()=>{const M=()=>{try{t([]),r([]),u(null),l(null)}catch{}try{g(50)}catch{}};try{window.addEventListener(xm,M)}catch{}return()=>{try{window.removeEventListener(xm,M)}catch{}}},[]);const F=async()=>{try{const{data:M,error:T}=await kt.rpc("check_and_auto_resolve_threads");if(T){console.error("Auto-resolve check failed:",T);return}M&&M.length>0&&y(void 0,{silent:!0})}catch(M){console.error("Auto-resolve check error:",M)}};return p.useEffect(()=>{const M=setInterval(()=>{document.visibilityState==="visible"&&F()},3e4);return()=>clearInterval(M)},[]),p.useEffect(()=>{const M=ce.channel("threads-realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"threads"},T=>{w(T.new),document.visibilityState==="visible"&&g(400)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads"},T=>{document.visibilityState==="visible"&&g(300)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"threads"},()=>{document.visibilityState==="visible"&&g(300)}).subscribe();return()=>{try{ce.removeChannel(M)}catch{}}},[]),p.useEffect(()=>{const M=ce.channel("messages-realtime-for-convlist").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},T=>{const A=T.new;A&&A.direction==="in"&&document.visibilityState==="visible"?(zg("incoming"),x(A.thread_id,A),g(100),F()):A&&(A.role==="system"||A.type==="event")&&document.visibilityState==="visible"?(zg("incoming"),x(A.thread_id,A),g(200)):A&&A.direction==="out"&&(A.role==="agent"||A.role==="assistant")&&document.visibilityState==="visible"?(x(A.thread_id,A),g(200)):A&&A.role==="agent"&&A.direction==="out"&&document.visibilityState==="visible"&&F()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(500)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(300)}).subscribe();return()=>{try{ce.removeChannel(M)}catch{}try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}}},[]),p.useEffect(()=>{if(!c)return;const M=setInterval(()=>{b(c)},3e4),T=ce.channel(`messages-${c}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},A=>{const L=A.new;L&&L.direction==="in"&&zg("incoming"),r(E=>{var J,ee,ae,Q;if(E.some(oe=>oe.id===(L==null?void 0:L.id)))return E;const R=((J=E[0])==null?void 0:J.contact_name)||"",C=((ee=E[0])==null?void 0:ee.contact_avatar)||(((Q=(ae=R==null?void 0:R[0])==null?void 0:ae.toUpperCase)==null?void 0:Q.call(ae))??"U"),q={...L||{},contact_name:R,contact_avatar:C},Z=[...E,q];return Z.sort((oe,ge)=>(oe.seq??0)-(ge.seq??0)),Z})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},A=>{const L=A.new;r(E=>{const B=E.findIndex(q=>q.id===(L==null?void 0:L.id));if(B<0)return E;const R={...E[B],...L||{}},C=[...E];return C[B]=R,C.sort((q,Z)=>(q.seq??0)-(Z.seq??0)),C})}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},A=>{const L=A.old||A.new,E=L==null?void 0:L.id;E&&r(B=>B.filter(R=>R.id!==E))}).subscribe(A=>{A==="CHANNEL_ERROR"&&(console.error("Error subscribing to messages for thread:",c),setTimeout(()=>{b(c)},1e3))});return()=>{clearInterval(M);try{ce.removeChannel(T)}catch{}}},[c]),p.useEffect(()=>{if(!c)return;const M=ce.channel(`thread-detail-${c}`).on("postgres_changes",{event:"*",schema:"public",table:"threads",filter:`id=eq.${c}`},()=>{document.visibilityState==="visible"&&(g(150),b(c))}).subscribe();return()=>{try{ce.removeChannel(M)}catch{}}},[c,b]),{conversations:e,messages:n,loading:a,error:o,selectedThreadId:c,fetchConversations:y,fetchMessages:b,sendMessage:_,refreshMessages:()=>{c&&b(c)},enableAudioNotifications:()=>{localStorage.setItem("audioNotifications","true")},disableAudioNotifications:()=>{localStorage.setItem("audioNotifications","false")},testAudioNotification:()=>{zg("incoming")},createConversation:k,assignThread:j,assignThreadToUser:O,takeoverThread:I,unassignThread:P,clearCollaborator:S,setThreadCollaborator:N,addThreadLabel:D,removeThreadLabel:$,deleteThread:U,checkAutoResolve:F,activeFilters:f}},EC=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),[o,l]=p.useState(0),c=p.useRef({page:1,limit:100,searchQuery:void 0,filters:void 0}),u=async(g=1,v=100,x,y)=>{var w,b,_,k;try{c.current={page:g,limit:v,searchQuery:x,filters:y},r(!0),s(null);const j=!!(y!=null&&y.chatStatus||(w=y==null?void 0:y.dateRange)!=null&&w.from||(b=y==null?void 0:y.dateRange)!=null&&b.to||(y==null?void 0:y.handledBy)==="assigned");let S=kt.from("contacts").select(`
          id, org_id, name, email, phone, locale, notes, created_at,
          threads${j?"!inner":""}(
            id, status, created_at, assignee_user_id,
            channels(display_name, provider, type)
          )
          `,{count:"exact"}).order("created_at",{ascending:!1});if(x&&(S=S.or(`name.ilike.%${x}%,phone.ilike.%${x}%,email.ilike.%${x}%`)),y&&(y.chatStatus&&(S=S.eq("threads.status",y.chatStatus)),y.handledBy==="assigned"&&(S=S.not("threads.assignee_user_id","is",null)),(_=y.dateRange)!=null&&_.from&&(S=S.gte("threads.created_at",y.dateRange.from)),(k=y.dateRange)!=null&&k.to)){const U=y.dateRange.to.length>10?y.dateRange.to:`${y.dateRange.to}T23:59:59.999Z`;S=S.lte("threads.created_at",U)}const O=(g-1)*v,I=O+v-1;S=S.range(O,I),S=S.order("created_at",{foreignTable:"threads",ascending:!1}).limit(1,{foreignTable:"threads"});const{data:P,error:N,count:D}=await S;if(N)throw N;let $=(P||[]).map(U=>{var A,L,E;const F=(U.threads||[])[0]||null,M=((A=F==null?void 0:F.channels)==null?void 0:A.display_name)||"",T=F!=null&&F.created_at?new Date(F.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",",""):"";return{id:U.id,org_id:U.org_id,name:U.name,email:U.email,phone:U.phone,locale:U.locale,notes:U.notes,created_at:U.created_at,labelNames:"",inbox:M,channelProvider:((L=F==null?void 0:F.channels)==null?void 0:L.provider)||null,channelType:((E=F==null?void 0:F.channels)==null?void 0:E.type)||null,chatStatus:(F==null?void 0:F.status)||"",chatCreatedAt:T,chatCreatedAtISO:(F==null?void 0:F.created_at)||null,handledBy:F!=null&&F.assignee_user_id?"assigned":"unassigned"}});y&&($=$.filter(U=>{var F,M;if(y.chatStatus&&U.chatStatus!==y.chatStatus||y.handledBy&&U.handledBy!==y.handledBy)return!1;if((F=y.dateRange)!=null&&F.from||(M=y.dateRange)!=null&&M.to){const T=new Date(U.created_at),A=y.dateRange.from?new Date(y.dateRange.from):null,L=y.dateRange.to?new Date(y.dateRange.to):null;if(A&&T<A||L&&T>L)return!1}return!0})),t($),l(D||0)}catch(j){console.error("Error fetching contacts:",j),s(j instanceof Error?j.message:"Failed to fetch contacts")}finally{r(!1)}},d=async g=>{try{s(null);const{data:v,error:x}=await kt.from("contacts").insert([{...g,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(x)throw x;await u();try{await nn({action:"contact.create",resource:"contact",resourceId:(v==null?void 0:v.id)??null,context:g})}catch{}return v}catch(v){throw console.error("Error creating contact:",v),s(v instanceof Error?v.message:"Failed to create contact"),v}},f=async(g,v)=>{try{s(null);const{error:x}=await kt.from("contacts").update(v).eq("id",g);if(x)throw x;await u();try{await nn({action:"contact.update",resource:"contact",resourceId:g,context:v})}catch{}}catch(x){throw console.error("Error updating contact:",x),s(x instanceof Error?x.message:"Failed to update contact"),x}},h=async g=>{try{s(null);const{error:v}=await ce.from("contacts").delete().eq("id",g);if(v)throw v;io.invalidatePattern("^query:contacts"),await u();try{await nn({action:"contact.delete",resource:"contact",resourceId:g})}catch{}}catch(v){throw console.error("Error deleting contact:",v),s(v instanceof Error?v.message:"Failed to delete contact"),v}},m=async g=>{try{s(null);const{error:v}=await ce.from("contacts").delete().in("id",g);if(v)throw v;io.invalidatePattern("^query:contacts"),await u();try{await nn({action:"contact.bulk_delete",resource:"contact",context:{ids:g}})}catch{}}catch(v){throw console.error("Error deleting contacts:",v),s(v instanceof Error?v.message:"Failed to delete contacts"),v}};return p.useEffect(()=>{u()},[]),p.useEffect(()=>{const g=()=>{try{t([]),l(0),s(null),r(!0)}catch{}try{const{page:v,limit:x,searchQuery:y,filters:w}=c.current;u(v,x,y,w)}catch{}};try{window.addEventListener(xm,g)}catch{}return()=>{try{window.removeEventListener(xm,g)}catch{}}},[]),{contacts:e,loading:n,error:a,totalCount:o,fetchContacts:u,createContact:d,updateContact:f,deleteContact:h,deleteMultipleContacts:m}};var o6="AlertDialog",[qle,T5e]=Rr(o6,[aU]),To=aU(),l6=e=>{const{__scopeAlertDialog:t,...n}=e,r=To(t);return i.jsx(rC,{...r,...n,modal:!0})};l6.displayName=o6;var Hle="AlertDialogTrigger",c6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(bU,{...a,...r,ref:t})});c6.displayName=Hle;var Kle="AlertDialogPortal",u6=e=>{const{__scopeAlertDialog:t,...n}=e,r=To(t);return i.jsx(aC,{...r,...n})};u6.displayName=Kle;var Vle="AlertDialogOverlay",d6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(Nb,{...a,...r,ref:t})});d6.displayName=Vle;var ud="AlertDialogContent",[Gle,Yle]=qle(ud),Xle=K$("AlertDialogContent"),f6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,s=To(n),o=p.useRef(null),l=Mt(t,o),c=p.useRef(null);return i.jsx(pae,{contentName:ud,titleName:h6,docsSlug:"alert-dialog",children:i.jsx(Gle,{scope:n,cancelRef:c,children:i.jsxs(Cb,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:qe(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(Xle,{children:r}),i.jsx(Qle,{contentRef:o})]})})})});f6.displayName=ud;var h6="AlertDialogTitle",m6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(iC,{...a,...r,ref:t})});m6.displayName=h6;var p6="AlertDialogDescription",g6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(sC,{...a,...r,ref:t})});g6.displayName=p6;var Jle="AlertDialogAction",v6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(oC,{...a,...r,ref:t})});v6.displayName=Jle;var y6="AlertDialogCancel",x6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=Yle(y6,n),s=To(n),o=Mt(t,a);return i.jsx(oC,{...s,...r,ref:o})});x6.displayName=y6;var Qle=({contentRef:e})=>{const t=`\`${ud}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ud}\` by passing a \`${p6}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ud}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Zle=l6,ece=c6,tce=u6,b6=d6,w6=f6,j6=v6,_6=x6,k6=m6,S6=g6;const Lb=Zle,nce=ece,rce=tce,N6=p.forwardRef(({className:e,...t},n)=>i.jsx(b6,{className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));N6.displayName=b6.displayName;const zp=p.forwardRef(({className:e,...t},n)=>i.jsxs(rce,{children:[i.jsx(N6,{}),i.jsx(w6,{ref:n,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));zp.displayName=w6.displayName;const Wp=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Wp.displayName="AlertDialogHeader";const qp=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qp.displayName="AlertDialogFooter";const Hp=p.forwardRef(({className:e,...t},n)=>i.jsx(k6,{ref:n,className:Pe("text-lg font-semibold",e),...t}));Hp.displayName=k6.displayName;const Kp=p.forwardRef(({className:e,...t},n)=>i.jsx(S6,{ref:n,className:Pe("text-sm text-muted-foreground",e),...t}));Kp.displayName=S6.displayName;const Vp=p.forwardRef(({className:e,...t},n)=>i.jsx(j6,{ref:n,className:Pe(Rd(),e),...t}));Vp.displayName=j6.displayName;const Gp=p.forwardRef(({className:e,...t},n)=>i.jsx(_6,{ref:n,className:Pe(Rd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Gp.displayName=_6.displayName;function ace(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const ice=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sce=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oce={};function b2(e,t){return(oce.jsx?sce:ice).test(e)}const lce=/[ \t\n\f\r]/g;function cce(e){return typeof e=="object"?e.type==="text"?w2(e.value):!1:w2(e)}function w2(e){return e.replace(lce,"")===""}class Yp{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Yp.prototype.normal={};Yp.prototype.property={};Yp.prototype.space=void 0;function C6(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new Yp(n,r,t)}function R1(e){return e.toLowerCase()}class Wa{constructor(t,n){this.attribute=n,this.property=t}}Wa.prototype.attribute="";Wa.prototype.booleanish=!1;Wa.prototype.boolean=!1;Wa.prototype.commaOrSpaceSeparated=!1;Wa.prototype.commaSeparated=!1;Wa.prototype.defined=!1;Wa.prototype.mustUseProperty=!1;Wa.prototype.number=!1;Wa.prototype.overloadedBoolean=!1;Wa.prototype.property="";Wa.prototype.spaceSeparated=!1;Wa.prototype.space=void 0;let uce=0;const qt=lu(),ur=lu(),M1=lu(),Ke=lu(),In=lu(),dd=lu(),Ya=lu();function lu(){return 2**++uce}const D1=Object.freeze(Object.defineProperty({__proto__:null,boolean:qt,booleanish:ur,commaOrSpaceSeparated:Ya,commaSeparated:dd,number:Ke,overloadedBoolean:M1,spaceSeparated:In},Symbol.toStringTag,{value:"Module"})),ij=Object.keys(D1);class TC extends Wa{constructor(t,n,r,a){let s=-1;if(super(t,n),j2(this,"space",a),typeof r=="number")for(;++s<ij.length;){const o=ij[s];j2(this,ij[s],(r&D1[o])===D1[o])}}}TC.prototype.defined=!0;function j2(e,t,n){n&&(e[t]=n)}function _f(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const s=new TC(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[R1(r)]=r,n[R1(s.attribute)]=r}return new Yp(t,n,e.space)}const A6=_f({properties:{ariaActiveDescendant:null,ariaAtomic:ur,ariaAutoComplete:null,ariaBusy:ur,ariaChecked:ur,ariaColCount:Ke,ariaColIndex:Ke,ariaColSpan:Ke,ariaControls:In,ariaCurrent:null,ariaDescribedBy:In,ariaDetails:null,ariaDisabled:ur,ariaDropEffect:In,ariaErrorMessage:null,ariaExpanded:ur,ariaFlowTo:In,ariaGrabbed:ur,ariaHasPopup:null,ariaHidden:ur,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:In,ariaLevel:Ke,ariaLive:null,ariaModal:ur,ariaMultiLine:ur,ariaMultiSelectable:ur,ariaOrientation:null,ariaOwns:In,ariaPlaceholder:null,ariaPosInSet:Ke,ariaPressed:ur,ariaReadOnly:ur,ariaRelevant:null,ariaRequired:ur,ariaRoleDescription:In,ariaRowCount:Ke,ariaRowIndex:Ke,ariaRowSpan:Ke,ariaSelected:ur,ariaSetSize:Ke,ariaSort:null,ariaValueMax:Ke,ariaValueMin:Ke,ariaValueNow:Ke,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function E6(e,t){return t in e?e[t]:t}function T6(e,t){return E6(e,t.toLowerCase())}const dce=_f({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dd,acceptCharset:In,accessKey:In,action:null,allow:null,allowFullScreen:qt,allowPaymentRequest:qt,allowUserMedia:qt,alt:null,as:null,async:qt,autoCapitalize:null,autoComplete:In,autoFocus:qt,autoPlay:qt,blocking:In,capture:null,charSet:null,checked:qt,cite:null,className:In,cols:Ke,colSpan:null,content:null,contentEditable:ur,controls:qt,controlsList:In,coords:Ke|dd,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qt,defer:qt,dir:null,dirName:null,disabled:qt,download:M1,draggable:ur,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qt,formTarget:null,headers:In,height:Ke,hidden:M1,high:Ke,href:null,hrefLang:null,htmlFor:In,httpEquiv:In,id:null,imageSizes:null,imageSrcSet:null,inert:qt,inputMode:null,integrity:null,is:null,isMap:qt,itemId:null,itemProp:In,itemRef:In,itemScope:qt,itemType:In,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qt,low:Ke,manifest:null,max:null,maxLength:Ke,media:null,method:null,min:null,minLength:Ke,multiple:qt,muted:qt,name:null,nonce:null,noModule:qt,noValidate:qt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qt,optimum:Ke,pattern:null,ping:In,placeholder:null,playsInline:qt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qt,referrerPolicy:null,rel:In,required:qt,reversed:qt,rows:Ke,rowSpan:Ke,sandbox:In,scope:null,scoped:qt,seamless:qt,selected:qt,shadowRootClonable:qt,shadowRootDelegatesFocus:qt,shadowRootMode:null,shape:null,size:Ke,sizes:null,slot:null,span:Ke,spellCheck:ur,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ke,step:null,style:null,tabIndex:Ke,target:null,title:null,translate:null,type:null,typeMustMatch:qt,useMap:null,value:ur,width:Ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:In,axis:null,background:null,bgColor:null,border:Ke,borderColor:null,bottomMargin:Ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qt,declare:qt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ke,leftMargin:Ke,link:null,longDesc:null,lowSrc:null,marginHeight:Ke,marginWidth:Ke,noResize:qt,noHref:qt,noShade:qt,noWrap:qt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ke,rules:null,scheme:null,scrolling:ur,standby:null,summary:null,text:null,topMargin:Ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qt,disableRemotePlayback:qt,prefix:null,property:null,results:Ke,security:null,unselectable:null},space:"html",transform:T6}),fce=_f({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ya,accentHeight:Ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ke,amplitude:Ke,arabicForm:null,ascent:Ke,attributeName:null,attributeType:null,azimuth:Ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ke,by:null,calcMode:null,capHeight:Ke,className:In,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ke,diffuseConstant:Ke,direction:null,display:null,dur:null,divisor:Ke,dominantBaseline:null,download:qt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ke,enableBackground:null,end:null,event:null,exponent:Ke,externalResourcesRequired:null,fill:null,fillOpacity:Ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dd,g2:dd,glyphName:dd,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ke,horizOriginX:Ke,horizOriginY:Ke,id:null,ideographic:Ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ke,k:Ke,k1:Ke,k2:Ke,k3:Ke,k4:Ke,kernelMatrix:Ya,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ke,overlineThickness:Ke,paintOrder:null,panose1:null,path:null,pathLength:Ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:In,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ke,pointsAtY:Ke,pointsAtZ:Ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ya,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ya,rev:Ya,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ya,requiredFeatures:Ya,requiredFonts:Ya,requiredFormats:Ya,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ke,specularExponent:Ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ke,strikethroughThickness:Ke,string:null,stroke:null,strokeDashArray:Ya,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ke,strokeOpacity:Ke,strokeWidth:null,style:null,surfaceScale:Ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ya,tabIndex:Ke,tableValues:null,target:null,targetX:Ke,targetY:Ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ya,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ke,underlineThickness:Ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ke,values:null,vAlphabetic:Ke,vMathematical:Ke,vectorEffect:null,vHanging:Ke,vIdeographic:Ke,version:null,vertAdvY:Ke,vertOriginX:Ke,vertOriginY:Ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:E6}),P6=_f({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),O6=_f({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:T6}),I6=_f({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),hce={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},mce=/[A-Z]/g,_2=/-[a-z]/g,pce=/^data[-\w.:]+$/i;function gce(e,t){const n=R1(t);let r=t,a=Wa;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&pce.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(_2,yce);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!_2.test(s)){let o=s.replace(mce,vce);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=TC}return new a(r,t)}function vce(e){return"-"+e.toLowerCase()}function yce(e){return e.charAt(1).toUpperCase()}const xce=C6([A6,dce,P6,O6,I6],"html"),PC=C6([A6,fce,P6,O6,I6],"svg");function bce(e){return e.join(" ").trim()}var OC={},k2=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,wce=/\n/g,jce=/^\s*/,_ce=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,kce=/^:\s*/,Sce=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Nce=/^[;\s]*/,Cce=/^\s+|\s+$/g,Ace=`
`,S2="/",N2="*",hc="",Ece="comment",Tce="declaration",Pce=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(g){var v=g.match(wce);v&&(n+=v.length);var x=g.lastIndexOf(Ace);r=~x?g.length-x:r+g.length}function s(){var g={line:n,column:r};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var x=v[0];return a(x),e=e.slice(x.length),v}}function u(){c(jce)}function d(g){var v;for(g=g||[];v=f();)v!==!1&&g.push(v);return g}function f(){var g=s();if(!(S2!=e.charAt(0)||N2!=e.charAt(1))){for(var v=2;hc!=e.charAt(v)&&(N2!=e.charAt(v)||S2!=e.charAt(v+1));)++v;if(v+=2,hc===e.charAt(v-1))return l("End of comment missing");var x=e.slice(2,v-2);return r+=2,a(x),e=e.slice(v),r+=2,g({type:Ece,comment:x})}}function h(){var g=s(),v=c(_ce);if(v){if(f(),!c(kce))return l("property missing ':'");var x=c(Sce),y=g({type:Tce,property:C2(v[0].replace(k2,hc)),value:x?C2(x[0].replace(k2,hc)):hc});return c(Nce),y}}function m(){var g=[];d(g);for(var v;v=h();)v!==!1&&(g.push(v),d(g));return g}return u(),m()};function C2(e){return e?e.replace(Cce,hc):hc}var Oce=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(OC,"__esModule",{value:!0});OC.default=Rce;var Ice=Oce(Pce);function Rce(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Ice.default)(e),a=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;a?t(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var $b={};Object.defineProperty($b,"__esModule",{value:!0});$b.camelCase=void 0;var Mce=/^--[a-zA-Z0-9_-]+$/,Dce=/-([a-z])/g,Lce=/^[^-]+$/,$ce=/^-(webkit|moz|ms|o|khtml)-/,Fce=/^-(ms)-/,Uce=function(e){return!e||Lce.test(e)||Mce.test(e)},Bce=function(e,t){return t.toUpperCase()},A2=function(e,t){return"".concat(t,"-")},zce=function(e,t){return t===void 0&&(t={}),Uce(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Fce,A2):e=e.replace($ce,A2),e.replace(Dce,Bce))};$b.camelCase=zce;var Wce=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},qce=Wce(OC),Hce=$b;function L1(e,t){var n={};return!e||typeof e!="string"||(0,qce.default)(e,function(r,a){r&&a&&(n[(0,Hce.camelCase)(r,t)]=a)}),n}L1.default=L1;var Kce=L1;const Vce=jn(Kce),R6=M6("end"),IC=M6("start");function M6(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Gce(e){const t=IC(e),n=R6(e);if(t&&n)return{start:t,end:n}}function $h(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?E2(e.position):"start"in e||"end"in e?E2(e):"line"in e||"column"in e?$1(e):""}function $1(e){return T2(e&&e.line)+":"+T2(e&&e.column)}function E2(e){return $1(e&&e.start)+"-"+$1(e&&e.end)}function T2(e){return e&&typeof e=="number"?e:1}class sa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=$h(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}sa.prototype.file="";sa.prototype.name="";sa.prototype.reason="";sa.prototype.message="";sa.prototype.stack="";sa.prototype.column=void 0;sa.prototype.line=void 0;sa.prototype.ancestors=void 0;sa.prototype.cause=void 0;sa.prototype.fatal=void 0;sa.prototype.place=void 0;sa.prototype.ruleId=void 0;sa.prototype.source=void 0;const RC={}.hasOwnProperty,Yce=new Map,Xce=/[A-Z]/g,Jce=new Set(["table","tbody","thead","tfoot","tr"]),Qce=new Set(["td","th"]),D6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Zce(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=oue(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=sue(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?PC:xce,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=L6(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function L6(e,t,n){if(t.type==="element")return eue(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return tue(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return rue(e,t,n);if(t.type==="mdxjsEsm")return nue(e,t);if(t.type==="root")return aue(e,t,n);if(t.type==="text")return iue(e,t)}function eue(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=PC,e.schema=a),e.ancestors.push(t);const s=F6(e,t.tagName,!1),o=lue(e,t);let l=DC(e,t);return Jce.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!cce(c):!0})),$6(e,o,s,t),MC(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function tue(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Pm(e,t.position)}function nue(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Pm(e,t.position)}function rue(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=PC,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:F6(e,t.name,!0),o=cue(e,t),l=DC(e,t);return $6(e,o,s,t),MC(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function aue(e,t,n){const r={};return MC(r,DC(e,t)),e.create(t,e.Fragment,r,n)}function iue(e,t){return t.value}function $6(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function MC(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function sue(e,t,n){return r;function r(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function oue(e,t){return n;function n(r,a,s,o){const l=Array.isArray(s.children),c=IC(r);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function lue(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&RC.call(t.properties,a)){const s=uue(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&Qce.has(t.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function cue(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Pm(e,t.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Pm(e,t.position);else s=r.value===null?!0:r.value;n[a]=s}return n}function DC(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:Yce;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=L6(e,s,o);l!==void 0&&n.push(l)}return n}function uue(e,t,n){const r=gce(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?ace(n):bce(n)),r.property==="style"){let a=typeof n=="object"?n:due(e,String(n));return e.stylePropertyNameCase==="css"&&(a=fue(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?hce[r.property]||r.property:r.attribute,n]}}function due(e,t){try{return Vce(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new sa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=D6+"#cannot-parse-style-attribute",a}}function F6(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=b2(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=b2(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return RC.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Pm(e)}function Pm(e,t){const n=new sa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=D6+"#cannot-handle-mdx-estrees-without-createevaluater",n}function fue(e){const t={};let n;for(n in e)RC.call(e,n)&&(t[hue(n)]=e[n]);return t}function hue(e){let t=e.replace(Xce,mue);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function mue(e){return"-"+e.toLowerCase()}const sj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},pue={};function LC(e,t){const n=pue,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return U6(e,r,a)}function U6(e,t,n){if(gue(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return P2(e.children,t,n)}return Array.isArray(e)?P2(e,t,n):""}function P2(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=U6(e[a],t,n);return r.join("")}function gue(e){return!!(e&&typeof e=="object")}const O2=document.createElement("i");function $C(e){const t="&"+e+";";O2.innerHTML=t;const n=O2.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ai(e,t,n,r){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function bi(e,t){return e.length>0?(ai(e,e.length,0,t),e):t}const I2={}.hasOwnProperty;function B6(e){const t={};let n=-1;for(;++n<e.length;)vue(t,e[n]);return t}function vue(e,t){let n;for(n in t){const a=(I2.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){I2.call(a,o)||(a[o]=[]);const l=s[o];yue(a[o],Array.isArray(l)?l:l?[l]:[])}}}function yue(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ai(e,0,0,r)}function z6(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function as(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ga=Hl(/[A-Za-z]/),ra=Hl(/[\dA-Za-z]/),xue=Hl(/[#-'*+\--9=?A-Z^-~]/);function Ay(e){return e!==null&&(e<32||e===127)}const F1=Hl(/\d/),bue=Hl(/[\dA-Fa-f]/),wue=Hl(/[!-/:-@[-`{-~]/);function St(e){return e!==null&&e<-2}function Tn(e){return e!==null&&(e<0||e===32)}function Jt(e){return e===-2||e===-1||e===32}const Fb=Hl(new RegExp("\\p{P}|\\p{S}","u")),Vc=Hl(/\s/);function Hl(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function kf(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&ra(e.charCodeAt(n+1))&&ra(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function sn(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Jt(c)?(e.enter(n),l(c)):t(c)}function l(c){return Jt(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const jue={tokenize:_ue};function _ue(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),sn(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return St(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const kue={tokenize:Sue},R2={tokenize:Nue};function Sue(e){const t=this,n=[];let r=0,a,s,o;return l;function l(b){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,c,u)(b)}return u(b)}function c(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&w();const _=t.events.length;let k=_,j;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){j=t.events[k][1].end;break}y(r);let S=_;for(;S<t.events.length;)t.events[S][1].end={...j},S++;return ai(t.events,k+1,0,t.events.slice(_)),t.events.length=S,u(b)}return l(b)}function u(b){if(r===n.length){if(!a)return h(b);if(a.currentConstruct&&a.currentConstruct.concrete)return g(b);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(R2,d,f)(b)}function d(b){return a&&w(),y(r),h(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(b)}function h(b){return t.containerState={},e.attempt(R2,m,g)(b)}function m(b){return r++,n.push([t.currentConstruct,t.containerState]),h(b)}function g(b){if(b===null){a&&w(),y(0),e.consume(b);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),v(b)}function v(b){if(b===null){x(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return St(b)?(e.consume(b),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(b),v)}function x(b,_){const k=t.sliceStream(b);if(_&&k.push(null),b.previous=s,s&&(s.next=b),s=b,a.defineSkip(b.start),a.write(k),t.parser.lazy[b.start.line]){let j=a.events.length;for(;j--;)if(a.events[j][1].start.offset<o&&(!a.events[j][1].end||a.events[j][1].end.offset>o))return;const S=t.events.length;let O=S,I,P;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){if(I){P=t.events[O][1].end;break}I=!0}for(y(r),j=S;j<t.events.length;)t.events[j][1].end={...P},j++;ai(t.events,O+1,0,t.events.slice(S)),t.events.length=j}}function y(b){let _=n.length;for(;_-- >b;){const k=n[_];t.containerState=k[1],k[0].exit.call(t,e)}n.length=b}function w(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function Nue(e,t,n){return sn(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ud(e){if(e===null||Tn(e)||Vc(e))return 1;if(Fb(e))return 2}function Ub(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const U1={name:"attention",resolveAll:Cue,tokenize:Aue};function Cue(e,t){let n=-1,r,a,s,o,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},h={...e[n][1].start};M2(f,-c),M2(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=bi(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=bi(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=bi(u,Ub(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=bi(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=bi(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,ai(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Aue(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Ud(r);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Ud(c),f=!d||d===2&&a||n.includes(c),h=!a||a===2&&d||n.includes(r);return u._open=!!(s===42?f:f&&(a||!h)),u._close=!!(s===42?h:h&&(d||!f)),t(c)}}function M2(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Eue={name:"autolink",tokenize:Tue};function Tue(e,t,n){let r=0;return a;function a(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return ga(m)?(e.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||ra(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||ra(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||Ay(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),d):xue(m)?(e.consume(m),u):n(m)}function d(m){return ra(m)?f(m):n(m)}function f(m){return m===46?(e.consume(m),r=0,d):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||ra(m))&&r++<63){const g=m===45?h:f;return e.consume(m),g}return n(m)}}const Xp={partial:!0,tokenize:Pue};function Pue(e,t,n){return r;function r(s){return Jt(s)?sn(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||St(s)?t(s):n(s)}}const W6={continuation:{tokenize:Iue},exit:Rue,name:"blockQuote",tokenize:Oue};function Oue(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Jt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Iue(e,t,n){const r=this;return a;function a(o){return Jt(o)?sn(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(W6,t,n)(o)}}function Rue(e){e.exit("blockQuote")}const q6={name:"characterEscape",tokenize:Mue};function Mue(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return wue(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const H6={name:"characterReference",tokenize:Due};function Due(e,t,n){const r=this;let a=0,s,o;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),c}function c(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=ra,d(f))}function u(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=bue,d):(e.enter("characterReferenceValue"),s=7,o=F1,d(f))}function d(f){if(f===59&&a){const h=e.exit("characterReferenceValue");return o===ra&&!$C(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&a++<s?(e.consume(f),d):n(f)}}const D2={partial:!0,tokenize:$ue},L2={concrete:!0,name:"codeFenced",tokenize:Lue};function Lue(e,t,n){const r=this,a={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(j){return u(j)}function u(j){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=j,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(j)}function d(j){return j===l?(o++,e.consume(j),d):o<3?n(j):(e.exit("codeFencedFenceSequence"),Jt(j)?sn(e,f,"whitespace")(j):f(j))}function f(j){return j===null||St(j)?(e.exit("codeFencedFence"),r.interrupt?t(j):e.check(D2,v,_)(j)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(j))}function h(j){return j===null||St(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(j)):Jt(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),sn(e,m,"whitespace")(j)):j===96&&j===l?n(j):(e.consume(j),h)}function m(j){return j===null||St(j)?f(j):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(j))}function g(j){return j===null||St(j)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(j)):j===96&&j===l?n(j):(e.consume(j),g)}function v(j){return e.attempt(a,_,x)(j)}function x(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),y}function y(j){return s>0&&Jt(j)?sn(e,w,"linePrefix",s+1)(j):w(j)}function w(j){return j===null||St(j)?e.check(D2,v,_)(j):(e.enter("codeFlowValue"),b(j))}function b(j){return j===null||St(j)?(e.exit("codeFlowValue"),w(j)):(e.consume(j),b)}function _(j){return e.exit("codeFenced"),t(j)}function k(j,S,O){let I=0;return P;function P(F){return j.enter("lineEnding"),j.consume(F),j.exit("lineEnding"),N}function N(F){return j.enter("codeFencedFence"),Jt(F)?sn(j,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):D(F)}function D(F){return F===l?(j.enter("codeFencedFenceSequence"),$(F)):O(F)}function $(F){return F===l?(I++,j.consume(F),$):I>=o?(j.exit("codeFencedFenceSequence"),Jt(F)?sn(j,U,"whitespace")(F):U(F)):O(F)}function U(F){return F===null||St(F)?(j.exit("codeFencedFence"),S(F)):O(F)}}}function $ue(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const oj={name:"codeIndented",tokenize:Uue},Fue={partial:!0,tokenize:Bue};function Uue(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),sn(e,s,"linePrefix",5)(u)}function s(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):St(u)?e.attempt(Fue,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||St(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function Bue(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):St(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):sn(e,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):St(o)?a(o):n(o)}}const zue={name:"codeText",previous:que,resolve:Wue,tokenize:Hue};function Wue(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function que(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Hue(e,t,n){let r=0,a,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),r++,l):(e.exit("codeTextSequence"),c(f))}function c(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),c):f===96?(s=e.enter("codeTextSequence"),a=0,d(f)):St(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||St(f)?(e.exit("codeTextData"),c(f)):(e.consume(f),u)}function d(f){return f===96?(e.consume(f),a++,d):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",u(f))}}class Kue{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&th(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),th(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),th(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);th(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);th(this.left,n.reverse())}}}function th(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function K6(e){const t={};let n=-1,r,a,s,o,l,c,u;const d=new Kue(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Vue(d,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,a=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(d.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...d.get(a)[1].start},l=d.slice(a,n),l.unshift(r),d.splice(a,n-a+1,l))}}return ai(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function Vue(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,f,h=-1,m=n,g=0,v=0;const x=[v];for(;m;){for(;e.get(++a)[1]!==m;);s.push(a),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),f&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(v=h+1,x.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):x.pop(),h=x.length;h--;){const y=l.slice(x[h],x[h+1]),w=s.pop();c.push([w,w+y.length-1]),e.splice(w,2,y)}for(c.reverse(),h=-1;++h<c.length;)u[g+c[h][0]]=g+c[h][1],g+=c[h][1]-c[h][0]-1;return u}const Gue={resolve:Xue,tokenize:Jue},Yue={partial:!0,tokenize:Que};function Xue(e){return K6(e),e}function Jue(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):St(l)?e.check(Yue,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Que(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),sn(e,s,"linePrefix")}function s(o){if(o===null||St(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function V6(e,t,n,r,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return f;function f(y){return y===60?(e.enter(r),e.enter(a),e.enter(s),e.consume(y),e.exit(s),h):y===null||y===32||y===41||Ay(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function h(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(e.exit("chunkString"),e.exit(l),h(y)):y===null||y===60||St(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===60||y===62||y===92?(e.consume(y),m):m(y)}function v(y){return!d&&(y===null||y===41||Tn(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,v):y===41?(e.consume(y),d--,v):y===null||y===32||y===40||Ay(y)?n(y):(e.consume(y),y===92?x:v)}function x(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function G6(e,t,n,r,a,s){const o=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(a),e.consume(m),e.exit(a),e.enter(s),d}function d(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(s),e.enter(a),e.consume(m),e.exit(a),e.exit(r),t):St(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||St(m)||l++>999?(e.exit("chunkString"),d(m)):(e.consume(m),c||(c=!Jt(m)),m===92?h:f)}function h(m){return m===91||m===92||m===93?(e.consume(m),l++,f):f(m)}}function Y6(e,t,n,r,a,s){let o;return l;function l(h){return h===34||h===39||h===40?(e.enter(r),e.enter(a),e.consume(h),e.exit(a),o=h===40?41:h,c):n(h)}function c(h){return h===o?(e.enter(a),e.consume(h),e.exit(a),e.exit(r),t):(e.enter(s),u(h))}function u(h){return h===o?(e.exit(s),c(o)):h===null?n(h):St(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),sn(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===o||h===null||St(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?f:d)}function f(h){return h===o||h===92?(e.consume(h),d):d(h)}}function Fh(e,t){let n;return r;function r(a){return St(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Jt(a)?sn(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const Zue={name:"definition",tokenize:tde},ede={partial:!0,tokenize:nde};function tde(e,t,n){const r=this;let a;return s;function s(m){return e.enter("definition"),o(m)}function o(m){return G6.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return a=as(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return Tn(m)?Fh(e,u)(m):u(m)}function u(m){return V6(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return e.attempt(ede,f,f)(m)}function f(m){return Jt(m)?sn(e,h,"whitespace")(m):h(m)}function h(m){return m===null||St(m)?(e.exit("definition"),r.parser.defined.push(a),t(m)):n(m)}}function nde(e,t,n){return r;function r(l){return Tn(l)?Fh(e,a)(l):n(l)}function a(l){return Y6(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Jt(l)?sn(e,o,"whitespace")(l):o(l)}function o(l){return l===null||St(l)?t(l):n(l)}}const rde={name:"hardBreakEscape",tokenize:ade};function ade(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return St(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const ide={name:"headingAtx",resolve:sde,tokenize:ode};function sde(e,t){let n=e.length-2,r=3,a,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ai(e,r,n-r+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function ode(e,t,n){let r=0;return a;function a(d){return e.enter("atxHeading"),s(d)}function s(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||Tn(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||St(d)?(e.exit("atxHeading"),t(d)):Jt(d)?sn(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Tn(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const lde=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$2=["pre","script","style","textarea"],cde={concrete:!0,name:"htmlFlow",resolveTo:fde,tokenize:hde},ude={partial:!0,tokenize:pde},dde={partial:!0,tokenize:mde};function fde(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function hde(e,t,n){const r=this;let a,s,o,l,c;return u;function u(C){return d(C)}function d(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),f}function f(C){return C===33?(e.consume(C),h):C===47?(e.consume(C),s=!0,v):C===63?(e.consume(C),a=3,r.interrupt?t:E):ga(C)?(e.consume(C),o=String.fromCharCode(C),x):n(C)}function h(C){return C===45?(e.consume(C),a=2,m):C===91?(e.consume(C),a=5,l=0,g):ga(C)?(e.consume(C),a=4,r.interrupt?t:E):n(C)}function m(C){return C===45?(e.consume(C),r.interrupt?t:E):n(C)}function g(C){const q="CDATA[";return C===q.charCodeAt(l++)?(e.consume(C),l===q.length?r.interrupt?t:D:g):n(C)}function v(C){return ga(C)?(e.consume(C),o=String.fromCharCode(C),x):n(C)}function x(C){if(C===null||C===47||C===62||Tn(C)){const q=C===47,Z=o.toLowerCase();return!q&&!s&&$2.includes(Z)?(a=1,r.interrupt?t(C):D(C)):lde.includes(o.toLowerCase())?(a=6,q?(e.consume(C),y):r.interrupt?t(C):D(C)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(C):s?w(C):b(C))}return C===45||ra(C)?(e.consume(C),o+=String.fromCharCode(C),x):n(C)}function y(C){return C===62?(e.consume(C),r.interrupt?t:D):n(C)}function w(C){return Jt(C)?(e.consume(C),w):P(C)}function b(C){return C===47?(e.consume(C),P):C===58||C===95||ga(C)?(e.consume(C),_):Jt(C)?(e.consume(C),b):P(C)}function _(C){return C===45||C===46||C===58||C===95||ra(C)?(e.consume(C),_):k(C)}function k(C){return C===61?(e.consume(C),j):Jt(C)?(e.consume(C),k):b(C)}function j(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),c=C,S):Jt(C)?(e.consume(C),j):O(C)}function S(C){return C===c?(e.consume(C),c=null,I):C===null||St(C)?n(C):(e.consume(C),S)}function O(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||Tn(C)?k(C):(e.consume(C),O)}function I(C){return C===47||C===62||Jt(C)?b(C):n(C)}function P(C){return C===62?(e.consume(C),N):n(C)}function N(C){return C===null||St(C)?D(C):Jt(C)?(e.consume(C),N):n(C)}function D(C){return C===45&&a===2?(e.consume(C),M):C===60&&a===1?(e.consume(C),T):C===62&&a===4?(e.consume(C),B):C===63&&a===3?(e.consume(C),E):C===93&&a===5?(e.consume(C),L):St(C)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(ude,R,$)(C)):C===null||St(C)?(e.exit("htmlFlowData"),$(C)):(e.consume(C),D)}function $(C){return e.check(dde,U,R)(C)}function U(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),F}function F(C){return C===null||St(C)?$(C):(e.enter("htmlFlowData"),D(C))}function M(C){return C===45?(e.consume(C),E):D(C)}function T(C){return C===47?(e.consume(C),o="",A):D(C)}function A(C){if(C===62){const q=o.toLowerCase();return $2.includes(q)?(e.consume(C),B):D(C)}return ga(C)&&o.length<8?(e.consume(C),o+=String.fromCharCode(C),A):D(C)}function L(C){return C===93?(e.consume(C),E):D(C)}function E(C){return C===62?(e.consume(C),B):C===45&&a===2?(e.consume(C),E):D(C)}function B(C){return C===null||St(C)?(e.exit("htmlFlowData"),R(C)):(e.consume(C),B)}function R(C){return e.exit("htmlFlow"),t(C)}}function mde(e,t,n){const r=this;return a;function a(o){return St(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function pde(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Xp,t,n)}}const gde={name:"htmlText",tokenize:vde};function vde(e,t,n){const r=this;let a,s,o;return l;function l(E){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(E),c}function c(E){return E===33?(e.consume(E),u):E===47?(e.consume(E),k):E===63?(e.consume(E),b):ga(E)?(e.consume(E),O):n(E)}function u(E){return E===45?(e.consume(E),d):E===91?(e.consume(E),s=0,g):ga(E)?(e.consume(E),w):n(E)}function d(E){return E===45?(e.consume(E),m):n(E)}function f(E){return E===null?n(E):E===45?(e.consume(E),h):St(E)?(o=f,T(E)):(e.consume(E),f)}function h(E){return E===45?(e.consume(E),m):f(E)}function m(E){return E===62?M(E):E===45?h(E):f(E)}function g(E){const B="CDATA[";return E===B.charCodeAt(s++)?(e.consume(E),s===B.length?v:g):n(E)}function v(E){return E===null?n(E):E===93?(e.consume(E),x):St(E)?(o=v,T(E)):(e.consume(E),v)}function x(E){return E===93?(e.consume(E),y):v(E)}function y(E){return E===62?M(E):E===93?(e.consume(E),y):v(E)}function w(E){return E===null||E===62?M(E):St(E)?(o=w,T(E)):(e.consume(E),w)}function b(E){return E===null?n(E):E===63?(e.consume(E),_):St(E)?(o=b,T(E)):(e.consume(E),b)}function _(E){return E===62?M(E):b(E)}function k(E){return ga(E)?(e.consume(E),j):n(E)}function j(E){return E===45||ra(E)?(e.consume(E),j):S(E)}function S(E){return St(E)?(o=S,T(E)):Jt(E)?(e.consume(E),S):M(E)}function O(E){return E===45||ra(E)?(e.consume(E),O):E===47||E===62||Tn(E)?I(E):n(E)}function I(E){return E===47?(e.consume(E),M):E===58||E===95||ga(E)?(e.consume(E),P):St(E)?(o=I,T(E)):Jt(E)?(e.consume(E),I):M(E)}function P(E){return E===45||E===46||E===58||E===95||ra(E)?(e.consume(E),P):N(E)}function N(E){return E===61?(e.consume(E),D):St(E)?(o=N,T(E)):Jt(E)?(e.consume(E),N):I(E)}function D(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(e.consume(E),a=E,$):St(E)?(o=D,T(E)):Jt(E)?(e.consume(E),D):(e.consume(E),U)}function $(E){return E===a?(e.consume(E),a=void 0,F):E===null?n(E):St(E)?(o=$,T(E)):(e.consume(E),$)}function U(E){return E===null||E===34||E===39||E===60||E===61||E===96?n(E):E===47||E===62||Tn(E)?I(E):(e.consume(E),U)}function F(E){return E===47||E===62||Tn(E)?I(E):n(E)}function M(E){return E===62?(e.consume(E),e.exit("htmlTextData"),e.exit("htmlText"),t):n(E)}function T(E){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),A}function A(E){return Jt(E)?sn(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):L(E)}function L(E){return e.enter("htmlTextData"),o(E)}}const FC={name:"labelEnd",resolveAll:wde,resolveTo:jde,tokenize:_de},yde={tokenize:kde},xde={tokenize:Sde},bde={tokenize:Nde};function wde(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&ai(e,0,e.length,n),e}function jde(e,t){let n=e.length,r=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=bi(l,e.slice(s+1,s+r+3)),l=bi(l,[["enter",d,t]]),l=bi(l,Ub(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),l=bi(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=bi(l,e.slice(o+1)),l=bi(l,[["exit",c,t]]),ai(e,s,e.length,l),e}function _de(e,t,n){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return l;function l(h){return s?s._inactive?f(h):(o=r.parser.defined.includes(as(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(yde,d,o?d:f)(h):h===91?e.attempt(xde,d,o?u:f)(h):o?d(h):f(h)}function u(h){return e.attempt(bde,d,f)(h)}function d(h){return t(h)}function f(h){return s._balanced=!0,n(h)}}function kde(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),a}function a(f){return Tn(f)?Fh(e,s)(f):s(f)}function s(f){return f===41?d(f):V6(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Tn(f)?Fh(e,c)(f):d(f)}function l(f){return n(f)}function c(f){return f===34||f===39||f===40?Y6(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return Tn(f)?Fh(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Sde(e,t,n){const r=this;return a;function a(l){return G6.call(r,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(as(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function Nde(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Cde={name:"labelStartImage",resolveAll:FC.resolveAll,tokenize:Ade};function Ade(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const Ede={name:"labelStartLink",resolveAll:FC.resolveAll,tokenize:Tde};function Tde(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const lj={name:"lineEnding",tokenize:Pde};function Pde(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),sn(e,t,"linePrefix")}}const Iv={name:"thematicBreak",tokenize:Ode};function Ode(e,t,n){let r=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||St(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Jt(u)?sn(e,l,"whitespace")(u):l(u))}}const ka={continuation:{tokenize:Dde},exit:$de,name:"list",tokenize:Mde},Ide={partial:!0,tokenize:Fde},Rde={partial:!0,tokenize:Lde};function Mde(e,t,n){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:F1(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(Iv,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return F1(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Xp,r.interrupt?n:d,e.attempt(Ide,h,f))}function d(m){return r.containerState.initialBlankLine=!0,s++,h(m)}function f(m){return Jt(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function Dde(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Xp,a,s);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,sn(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Jt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Rde,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,sn(e,e.attempt(ka,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Lde(e,t,n){const r=this;return sn(e,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function $de(e){e.exit(this.containerState.type)}function Fde(e,t,n){const r=this;return sn(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!Jt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const F2={name:"setextUnderline",resolveTo:Ude,tokenize:Bde};function Ude(e,t){let n=e.length,r,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Bde(e,t,n){const r=this;let a;return s;function s(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Jt(u)?sn(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||St(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const zde={tokenize:Wde};function Wde(e){const t=this,n=e.attempt(Xp,r,e.attempt(this.parser.constructs.flowInitial,a,sn(e,e.attempt(this.parser.constructs.flow,a,e.attempt(Gue,a)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const qde={resolveAll:J6()},Hde=X6("string"),Kde=X6("text");function X6(e){return{resolveAll:J6(e==="text"?Vde:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(d){return u(d)?s(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),s(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const f=a[d];let h=-1;if(f)for(;++h<f.length;){const m=f[h];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function J6(e){return t;function t(n,r){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,r):n}}function Vde(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Gde={42:ka,43:ka,45:ka,48:ka,49:ka,50:ka,51:ka,52:ka,53:ka,54:ka,55:ka,56:ka,57:ka,62:W6},Yde={91:Zue},Xde={[-2]:oj,[-1]:oj,32:oj},Jde={35:ide,42:Iv,45:[F2,Iv],60:cde,61:F2,95:Iv,96:L2,126:L2},Qde={38:H6,92:q6},Zde={[-5]:lj,[-4]:lj,[-3]:lj,33:Cde,38:H6,42:U1,60:[Eue,gde],91:Ede,92:[rde,q6],93:FC,95:U1,96:zue},efe={null:[U1,qde]},tfe={null:[42,95]},nfe={null:[]},rfe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:tfe,contentInitial:Yde,disable:nfe,document:Gde,flow:Jde,flowInitial:Xde,insideSpan:efe,string:Qde,text:Zde},Symbol.toStringTag,{value:"Module"}));function afe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:S(k),check:S(j),consume:w,enter:b,exit:_,interrupt:S(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:f};let d=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function f(N){return o=bi(o,N),x(),o[o.length-1]!==null?[]:(O(t,0),u.events=Ub(s,u.events,u),u.events)}function h(N,D){return sfe(m(N),D)}function m(N){return ife(o,N)}function g(){const{_bufferIndex:N,_index:D,line:$,column:U,offset:F}=r;return{_bufferIndex:N,_index:D,line:$,column:U,offset:F}}function v(N){a[N.line]=N.column,P()}function x(){let N;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(N){d=d(N)}function w(N){St(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,P()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=N}function b(N,D){const $=D||{};return $.type=N,$.start=g(),u.events.push(["enter",$,u]),l.push($),$}function _(N){const D=l.pop();return D.end=g(),u.events.push(["exit",D,u]),D}function k(N,D){O(N,D.from)}function j(N,D){D.restore()}function S(N,D){return $;function $(U,F,M){let T,A,L,E;return Array.isArray(U)?R(U):"tokenize"in U?R([U]):B(U);function B(J){return ee;function ee(ae){const Q=ae!==null&&J[ae],oe=ae!==null&&J.null,ge=[...Array.isArray(Q)?Q:Q?[Q]:[],...Array.isArray(oe)?oe:oe?[oe]:[]];return R(ge)(ae)}}function R(J){return T=J,A=0,J.length===0?M:C(J[A])}function C(J){return ee;function ee(ae){return E=I(),L=J,J.partial||(u.currentConstruct=J),J.name&&u.parser.constructs.disable.null.includes(J.name)?Z():J.tokenize.call(D?Object.assign(Object.create(u),D):u,c,q,Z)(ae)}}function q(J){return N(L,E),F}function Z(J){return E.restore(),++A<T.length?C(T[A]):M}}}function O(N,D){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&ai(u.events,D,u.events.length-D,N.resolve(u.events.slice(D),u)),N.resolveTo&&(u.events=N.resolveTo(u.events,u))}function I(){const N=g(),D=u.previous,$=u.currentConstruct,U=u.events.length,F=Array.from(l);return{from:U,restore:M};function M(){r=N,u.previous=D,u.currentConstruct=$,u.events.length=U,l=F,P()}}function P(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function ife(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,s)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function sfe(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function ofe(e){const r={constructs:B6([rfe,...(e||{}).extensions||[]]),content:a(jue),defined:[],document:a(kue),flow:a(zde),lazy:{},string:a(Hde),text:a(Kde)};return r;function a(s){return o;function o(l){return afe(r,s,l)}}}function lfe(e){for(;!K6(e););return e}const U2=/[\0\t\n\r]/g;function cfe(){let e=1,t="",n=!0,r;return a;function a(s,o,l){const c=[];let u,d,f,h,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(U2.lastIndex=f,u=U2.exec(s),h=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(h),!u){t=s.slice(f);break}if(m===10&&f===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),f<h&&(c.push(s.slice(f,h)),e+=h-f),m){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const ufe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dfe(e){return e.replace(ufe,ffe)}function ffe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return z6(n.slice(s?2:1),s?16:10)}return $C(n)||e}const Q6={}.hasOwnProperty;function hfe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),mfe(n)(lfe(ofe(n).document().write(cfe()(e,t,!0))))}function mfe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ve),autolinkProtocol:I,autolinkEmail:I,atxHeading:s(K),blockQuote:s(oe),characterEscape:I,characterReference:I,codeFenced:s(ge),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ge,o),codeText:s(ie,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(Ie),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(me),hardBreakEscape:s(fe),hardBreakTrailing:s(fe),htmlFlow:s(De,o),htmlFlowData:I,htmlText:s(De,o),htmlTextData:I,image:s(Ze),label:o,link:s(Ve),listItem:s(Ye),listItemValue:h,listOrdered:s(ut,f),listUnordered:s(ut),paragraph:s(ot),reference:C,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(K),strong:s(te),thematicBreak:s(dt)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:Q,autolinkProtocol:ae,blockQuote:c(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:J,characterReference:ee,codeFenced:c(x),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:P,codeIndented:c(y),codeText:c(F),codeTextData:P,data:P,definition:c(),definitionDestinationString:_,definitionLabelString:w,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(D),hardBreakTrailing:c(D),htmlFlow:c($),htmlFlowData:P,htmlText:c(U),htmlTextData:P,image:c(T),label:L,labelText:A,lineEnding:N,link:c(M),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:q,resourceDestinationString:E,resourceTitleString:B,resource:R,setextHeading:c(O),setextHeadingLineSequence:S,setextHeadingText:j,strong:c(),thematicBreak:c()}};Z6(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(de){let we={type:"root",children:[]};const se={stack:[we],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:n},Be=[];let je=-1;for(;++je<de.length;)if(de[je][1].type==="listOrdered"||de[je][1].type==="listUnordered")if(de[je][0]==="enter")Be.push(je);else{const Ge=Be.pop();je=a(de,Ge,je)}for(je=-1;++je<de.length;){const Ge=t[de[je][0]];Q6.call(Ge,de[je][1].type)&&Ge[de[je][1].type].call(Object.assign({sliceSerialize:de[je][2].sliceSerialize},se),de[je][1])}if(se.tokenStack.length>0){const Ge=se.tokenStack[se.tokenStack.length-1];(Ge[1]||B2).call(se,void 0,Ge[0])}for(we.position={start:qo(de.length>0?de[0][1].start:{line:1,column:1,offset:0}),end:qo(de.length>0?de[de.length-2][1].end:{line:1,column:1,offset:0})},je=-1;++je<t.transforms.length;)we=t.transforms[je](we)||we;return we}function a(de,we,se){let Be=we-1,je=-1,Ge=!1,vt,wt,Nt,yt;for(;++Be<=se;){const xt=de[Be];switch(xt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{xt[0]==="enter"?je++:je--,yt=void 0;break}case"lineEndingBlank":{xt[0]==="enter"&&(vt&&!yt&&!je&&!Nt&&(Nt=Be),yt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yt=void 0}if(!je&&xt[0]==="enter"&&xt[1].type==="listItemPrefix"||je===-1&&xt[0]==="exit"&&(xt[1].type==="listUnordered"||xt[1].type==="listOrdered")){if(vt){let le=Be;for(wt=void 0;le--;){const Ee=de[le];if(Ee[1].type==="lineEnding"||Ee[1].type==="lineEndingBlank"){if(Ee[0]==="exit")continue;wt&&(de[wt][1].type="lineEndingBlank",Ge=!0),Ee[1].type="lineEnding",wt=le}else if(!(Ee[1].type==="linePrefix"||Ee[1].type==="blockQuotePrefix"||Ee[1].type==="blockQuotePrefixWhitespace"||Ee[1].type==="blockQuoteMarker"||Ee[1].type==="listItemIndent"))break}Nt&&(!wt||Nt<wt)&&(vt._spread=!0),vt.end=Object.assign({},wt?de[wt][1].start:xt[1].end),de.splice(wt||Be,0,["exit",vt,xt[2]]),Be++,se++}if(xt[1].type==="listItemPrefix"){const le={type:"listItem",_spread:!1,start:Object.assign({},xt[1].start),end:void 0};vt=le,de.splice(Be,0,["enter",le,xt[2]]),Be++,se++,Nt=void 0,yt=!0}}}return de[we][1]._spread=Ge,se}function s(de,we){return se;function se(Be){l.call(this,de(Be),Be),we&&we.call(this,Be)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(de,we,se){this.stack[this.stack.length-1].children.push(de),this.stack.push(de),this.tokenStack.push([we,se||void 0]),de.position={start:qo(we.start),end:void 0}}function c(de){return we;function we(se){de&&de.call(this,se),u.call(this,se)}}function u(de,we){const se=this.stack.pop(),Be=this.tokenStack.pop();if(Be)Be[0].type!==de.type&&(we?we.call(this,de,Be[0]):(Be[1]||B2).call(this,de,Be[0]));else throw new Error("Cannot close `"+de.type+"` ("+$h({start:de.start,end:de.end})+"): its not open");se.position.end=qo(de.end)}function d(){return LC(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(de){if(this.data.expectingFirstListItemValue){const we=this.stack[this.stack.length-2];we.start=Number.parseInt(this.sliceSerialize(de),10),this.data.expectingFirstListItemValue=void 0}}function m(){const de=this.resume(),we=this.stack[this.stack.length-1];we.lang=de}function g(){const de=this.resume(),we=this.stack[this.stack.length-1];we.meta=de}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const de=this.resume(),we=this.stack[this.stack.length-1];we.value=de.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const de=this.resume(),we=this.stack[this.stack.length-1];we.value=de.replace(/(\r?\n|\r)$/g,"")}function w(de){const we=this.resume(),se=this.stack[this.stack.length-1];se.label=we,se.identifier=as(this.sliceSerialize(de)).toLowerCase()}function b(){const de=this.resume(),we=this.stack[this.stack.length-1];we.title=de}function _(){const de=this.resume(),we=this.stack[this.stack.length-1];we.url=de}function k(de){const we=this.stack[this.stack.length-1];if(!we.depth){const se=this.sliceSerialize(de).length;we.depth=se}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function S(de){const we=this.stack[this.stack.length-1];we.depth=this.sliceSerialize(de).codePointAt(0)===61?1:2}function O(){this.data.setextHeadingSlurpLineEnding=void 0}function I(de){const se=this.stack[this.stack.length-1].children;let Be=se[se.length-1];(!Be||Be.type!=="text")&&(Be=Xe(),Be.position={start:qo(de.start),end:void 0},se.push(Be)),this.stack.push(Be)}function P(de){const we=this.stack.pop();we.value+=this.sliceSerialize(de),we.position.end=qo(de.end)}function N(de){const we=this.stack[this.stack.length-1];if(this.data.atHardBreak){const se=we.children[we.children.length-1];se.position.end=qo(de.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(we.type)&&(I.call(this,de),P.call(this,de))}function D(){this.data.atHardBreak=!0}function $(){const de=this.resume(),we=this.stack[this.stack.length-1];we.value=de}function U(){const de=this.resume(),we=this.stack[this.stack.length-1];we.value=de}function F(){const de=this.resume(),we=this.stack[this.stack.length-1];we.value=de}function M(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=we,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function T(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=we,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function A(de){const we=this.sliceSerialize(de),se=this.stack[this.stack.length-2];se.label=dfe(we),se.identifier=as(we).toLowerCase()}function L(){const de=this.stack[this.stack.length-1],we=this.resume(),se=this.stack[this.stack.length-1];if(this.data.inReference=!0,se.type==="link"){const Be=de.children;se.children=Be}else se.alt=we}function E(){const de=this.resume(),we=this.stack[this.stack.length-1];we.url=de}function B(){const de=this.resume(),we=this.stack[this.stack.length-1];we.title=de}function R(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function q(de){const we=this.resume(),se=this.stack[this.stack.length-1];se.label=we,se.identifier=as(this.sliceSerialize(de)).toLowerCase(),this.data.referenceType="full"}function Z(de){this.data.characterReferenceType=de.type}function J(de){const we=this.sliceSerialize(de),se=this.data.characterReferenceType;let Be;se?(Be=z6(we,se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Be=$C(we);const je=this.stack[this.stack.length-1];je.value+=Be}function ee(de){const we=this.stack.pop();we.position.end=qo(de.end)}function ae(de){P.call(this,de);const we=this.stack[this.stack.length-1];we.url=this.sliceSerialize(de)}function Q(de){P.call(this,de);const we=this.stack[this.stack.length-1];we.url="mailto:"+this.sliceSerialize(de)}function oe(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function ie(){return{type:"inlineCode",value:""}}function Ie(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function me(){return{type:"emphasis",children:[]}}function K(){return{type:"heading",depth:0,children:[]}}function fe(){return{type:"break"}}function De(){return{type:"html",value:""}}function Ze(){return{type:"image",title:null,url:"",alt:null}}function Ve(){return{type:"link",title:null,url:"",children:[]}}function ut(de){return{type:"list",ordered:de.type==="listOrdered",start:null,spread:de._spread,children:[]}}function Ye(de){return{type:"listItem",spread:de._spread,checked:null,children:[]}}function ot(){return{type:"paragraph",children:[]}}function te(){return{type:"strong",children:[]}}function Xe(){return{type:"text",value:""}}function dt(){return{type:"thematicBreak"}}}function qo(e){return{line:e.line,column:e.column,offset:e.offset}}function Z6(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Z6(e,r):pfe(e,r)}}function pfe(e,t){let n;for(n in t)if(Q6.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function B2(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+$h({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+$h({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+$h({start:t.start,end:t.end})+") is still open")}function gfe(e){const t=this;t.parser=n;function n(r){return hfe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function vfe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function yfe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function xfe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function bfe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wfe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jfe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=kf(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function _fe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kfe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ez(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function Sfe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ez(e,t);const a={src:kf(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function Nfe(e,t){const n={src:kf(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Cfe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Afe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ez(e,t);const a={href:kf(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Efe(e,t){const n={href:kf(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Tfe(e,t,n){const r=e.all(t),a=n?Pfe(n):tz(t),s={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(a||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!a?o.push(...d.children):o.push(d)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function Pfe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=tz(n[r])}return t}function tz(e){const t=e.spread;return t??e.children.length>1}function Ofe(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Ife(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Rfe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Mfe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Dfe(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=IC(t.children[1]),c=R6(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function Lfe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const f=t.children[c],h={},m=o?o[c]:void 0;m&&(h.align=m);let g={type:"element",tagName:s,properties:h,children:[]};f&&(g.children=e.all(f),e.patch(f,g),g=e.applyData(f,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function $fe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const z2=9,W2=32;function Ffe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const s=[];for(;r;)s.push(q2(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return s.push(q2(t.slice(a),a>0,!1)),s.join("")}function q2(e,t,n){let r=0,a=e.length;if(t){let s=e.codePointAt(r);for(;s===z2||s===W2;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(a-1);for(;s===z2||s===W2;)a--,s=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function Ufe(e,t){const n={type:"text",value:Ffe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Bfe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const zfe={blockquote:vfe,break:yfe,code:xfe,delete:bfe,emphasis:wfe,footnoteReference:jfe,heading:_fe,html:kfe,imageReference:Sfe,image:Nfe,inlineCode:Cfe,linkReference:Afe,link:Efe,listItem:Tfe,list:Ofe,paragraph:Ife,root:Rfe,strong:Mfe,table:Dfe,tableCell:$fe,tableRow:Lfe,text:Ufe,thematicBreak:Bfe,toml:Wg,yaml:Wg,definition:Wg,footnoteDefinition:Wg};function Wg(){}const nz=-1,Bb=0,Uh=1,Ey=2,UC=3,BC=4,zC=5,WC=6,rz=7,az=8,H2=typeof self=="object"?self:globalThis,Wfe=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),r=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case Bb:case nz:return n(o,a);case Uh:{const l=n([],a);for(const c of o)l.push(r(c));return l}case Ey:{const l=n({},a);for(const[c,u]of o)l[r(c)]=r(u);return l}case UC:return n(new Date(o),a);case BC:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case zC:{const l=n(new Map,a);for(const[c,u]of o)l.set(r(c),r(u));return l}case WC:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case rz:{const{name:l,message:c}=o;return n(new H2[l](c),a)}case az:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new H2[s](o),a)};return r},K2=e=>Wfe(new Map,e)(0),Nu="",{toString:qfe}={},{keys:Hfe}=Object,nh=e=>{const t=typeof e;if(t!=="object"||!e)return[Bb,t];const n=qfe.call(e).slice(8,-1);switch(n){case"Array":return[Uh,Nu];case"Object":return[Ey,Nu];case"Date":return[UC,Nu];case"RegExp":return[BC,Nu];case"Map":return[zC,Nu];case"Set":return[WC,Nu];case"DataView":return[Uh,n]}return n.includes("Array")?[Uh,n]:n.includes("Error")?[rz,n]:[Ey,n]},qg=([e,t])=>e===Bb&&(t==="function"||t==="symbol"),Kfe=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=nh(o);switch(l){case Bb:{let d=o;switch(c){case"bigint":l=az,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return a([nz],o)}return a([l,d],o)}case Uh:{if(c){let h=o;return c==="DataView"?h=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(o)),a([c,[...h]],o)}const d=[],f=a([l,d],o);for(const h of o)d.push(s(h));return f}case Ey:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const d=[],f=a([l,d],o);for(const h of Hfe(o))(e||!qg(nh(o[h])))&&d.push([s(h),s(o[h])]);return f}case UC:return a([l,o.toISOString()],o);case BC:{const{source:d,flags:f}=o;return a([l,{source:d,flags:f}],o)}case zC:{const d=[],f=a([l,d],o);for(const[h,m]of o)(e||!(qg(nh(h))||qg(nh(m))))&&d.push([s(h),s(m)]);return f}case WC:{const d=[],f=a([l,d],o);for(const h of o)(e||!qg(nh(h)))&&d.push(s(h));return f}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},V2=(e,{json:t,lossy:n}={})=>{const r=[];return Kfe(!(t||n),!!t,new Map,r)(e),r},Ty=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?K2(V2(e,t)):structuredClone(e):(e,t)=>K2(V2(e,t));function Vfe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Gfe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Yfe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Vfe,r=e.options.footnoteBackLabel||Gfe,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),f=String(u.identifier).toUpperCase(),h=kf(f.toLowerCase());let m=0;const g=[],v=e.footnoteCounts.get(f);for(;v!==void 0&&++m<=v;){g.length>0&&g.push({type:"text",value:" "});let w=typeof n=="string"?n:n(c,m);typeof w=="string"&&(w={type:"text",value:w}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const x=d[d.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const w=x.children[x.children.length-1];w&&w.type==="text"?w.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else d.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(d,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Ty(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const zb=function(e){if(e==null)return Zfe;if(typeof e=="function")return Wb(e);if(typeof e=="object")return Array.isArray(e)?Xfe(e):Jfe(e);if(typeof e=="string")return Qfe(e);throw new Error("Expected function, string, or object as test")};function Xfe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=zb(e[n]);return Wb(r);function r(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function Jfe(e){const t=e;return Wb(n);function n(r){const a=r;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function Qfe(e){return Wb(t);function t(n){return n&&n.type===e}}function Wb(e){return t;function t(n,r,a){return!!(ehe(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function Zfe(){return!0}function ehe(e){return e!==null&&typeof e=="object"&&"type"in e}const iz=[],the=!0,B1=!1,nhe="skip";function sz(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const s=zb(a),o=r?-1:1;l(e,void 0,[])();function l(c,u,d){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const m=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=iz,g,v,x;if((!t||s(c,u,d[d.length-1]||void 0))&&(m=rhe(n(c,d)),m[0]===B1))return m;if("children"in c&&c.children){const y=c;if(y.children&&m[0]!==nhe)for(v=(r?y.children.length:-1)+o,x=d.concat(y);v>-1&&v<y.children.length;){const w=y.children[v];if(g=l(w,v,x)(),g[0]===B1)return g;v=typeof g[1]=="number"?g[1]:v+o}}return m}}}function rhe(e){return Array.isArray(e)?e:typeof e=="number"?[the,e]:e==null?iz:[e]}function qC(e,t,n,r){let a,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=r),sz(e,s,l,a);function l(c,u){const d=u[u.length-1],f=d?d.children.indexOf(c):void 0;return o(c,f,d)}}const z1={}.hasOwnProperty,ahe={};function ihe(e,t){const n=t||ahe,r=new Map,a=new Map,s=new Map,o={...zfe,...n.handlers},l={all:u,applyData:ohe,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:she,wrap:che};return qC(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:a,h=String(d.identifier).toUpperCase();f.has(h)||f.set(h,d)}}),l;function c(d,f){const h=d.type,m=l.handlers[h];if(z1.call(l.handlers,h)&&m)return m(l,d,f);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in d){const{children:v,...x}=d,y=Ty(x);return y.children=l.all(d),y}return Ty(d)}return(l.options.unknownHandler||lhe)(l,d,f)}function u(d){const f=[];if("children"in d){const h=d.children;let m=-1;for(;++m<h.length;){const g=l.one(h[m],d);if(g){if(m&&h[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=G2(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=G2(v.value))}Array.isArray(g)?f.push(...g):f.push(g)}}}return f}}function she(e,t){e.position&&(t.position=Gce(e))}function ohe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Ty(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function lhe(e,t){const n=t.data||{},r="value"in t&&!(z1.call(n,"hProperties")||z1.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function che(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function G2(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Y2(e,t){const n=ihe(e,t),r=n.one(e,void 0),a=Yfe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function uhe(e,t){return e&&"run"in e?async function(n,r){const a=Y2(n,{file:r,...t});await e.run(a,r)}:function(n,r){return Y2(n,{file:r,...e||t})}}function X2(e){if(e)throw e}var Rv=Object.prototype.hasOwnProperty,oz=Object.prototype.toString,J2=Object.defineProperty,Q2=Object.getOwnPropertyDescriptor,Z2=function(t){return typeof Array.isArray=="function"?Array.isArray(t):oz.call(t)==="[object Array]"},eO=function(t){if(!t||oz.call(t)!=="[object Object]")return!1;var n=Rv.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Rv.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||Rv.call(t,a)},tO=function(t,n){J2&&n.name==="__proto__"?J2(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},nO=function(t,n){if(n==="__proto__")if(Rv.call(t,n)){if(Q2)return Q2(t,n).value}else return;return t[n]},dhe=function e(){var t,n,r,a,s,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=nO(l,n),a=nO(t,n),l!==a&&(d&&a&&(eO(a)||(s=Z2(a)))?(s?(s=!1,o=r&&Z2(r)?r:[]):o=r&&eO(r)?r:{},tO(l,{name:n,newValue:e(d,o,a)})):typeof a<"u"&&tO(l,{name:n,newValue:a}));return l};const cj=jn(dhe);function W1(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function fhe(){const e=[],t={run:n,use:r};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const d=e[++s];let f=-1;if(c){o(c);return}for(;++f<a.length;)(u[f]===null||u[f]===void 0)&&(u[f]=a[f]);a=u,d?hhe(d,l)(...u):o(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function hhe(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&n)throw d;return a(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const ys={basename:mhe,dirname:phe,extname:ghe,join:vhe,sep:"/"};function mhe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Jp(e);let n=0,r=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function phe(e){if(Jp(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function ghe(e){Jp(e);let t=e.length,n=-1,r=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function vhe(...e){let t=-1,n;for(;++t<e.length;)Jp(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":yhe(n)}function yhe(e){Jp(e);const t=e.codePointAt(0)===47;let n=xhe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function xhe(e,t){let n="",r=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",r=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Jp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const bhe={cwd:whe};function whe(){return"/"}function q1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function jhe(e){if(typeof e=="string")e=new URL(e);else if(!q1(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return _he(e)}function _he(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const uj=["history","path","basename","stem","extname","dirname"];class lz{constructor(t){let n;t?q1(t)?n={path:t}:typeof t=="string"||khe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":bhe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<uj.length;){const s=uj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)uj.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?ys.basename(this.path):void 0}set basename(t){fj(t,"basename"),dj(t,"basename"),this.path=ys.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ys.dirname(this.path):void 0}set dirname(t){rO(this.basename,"dirname"),this.path=ys.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ys.extname(this.path):void 0}set extname(t){if(dj(t,"extname"),rO(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ys.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){q1(t)&&(t=jhe(t)),fj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ys.basename(this.path,this.extname):void 0}set stem(t){fj(t,"stem"),dj(t,"stem"),this.path=ys.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new sa(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function dj(e,t){if(e&&e.includes(ys.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ys.sep+"`")}function fj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function rO(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function khe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const She=function(e){const r=this.constructor.prototype,a=r[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Nhe={}.hasOwnProperty;class HC extends She{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=fhe()}copy(){const t=new HC;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(cj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(pj("data",this.frozen),this.namespace[t]=n,this):Nhe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(pj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Hg(t),r=this.parser||this.Parser;return hj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),hj("process",this.parser||this.Parser),mj("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=Hg(t),c=r.parse(l);r.run(c,l,function(d,f,h){if(d||!f||!h)return u(d);const m=f,g=r.stringify(m,h);Ehe(g)?h.value=g:h.result=g,u(d,h)});function u(d,f){d||!f?o(d):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),hj("processSync",this.parser||this.Parser),mj("processSync",this.compiler||this.Compiler),this.process(t,a),iO("processSync","process",n),r;function a(s,o){n=!0,X2(s),r=o}}run(t,n,r){aO(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=Hg(n);a.run(t,c,u);function u(d,f,h){const m=f||t;d?l(d):o?o(m):r(void 0,m,h)}}}runSync(t,n){let r=!1,a;return this.run(t,n,s),iO("runSync","run",r),a;function s(o,l){X2(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=Hg(n),a=this.compiler||this.Compiler;return mj("stringify",a),aO(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(pj("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...f]=u;c(d,f)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=cj(!0,a.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const f=u[d];s(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===u){h=f;break}if(h===-1)r.push([u,...d]);else if(d.length>0){let[m,...g]=d;const v=r[h][1];W1(v)&&W1(m)&&(m=cj(!0,v,m)),r[h]=[u,m,...g]}}}}const Che=new HC().freeze();function hj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function mj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function pj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function aO(e){if(!W1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function iO(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Hg(e){return Ahe(e)?e:new lz(e)}function Ahe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Ehe(e){return typeof e=="string"||The(e)}function The(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Phe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",sO=[],oO={allowDangerousHtml:!0},Ohe=/^(https?|ircs?|mailto|xmpp)$/i,Ihe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Py(e){const t=Rhe(e),n=Mhe(e);return Dhe(t.runSync(t.parse(n),n),e)}function Rhe(e){const t=e.rehypePlugins||sO,n=e.remarkPlugins||sO,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...oO}:oO;return Che().use(gfe).use(n).use(uhe,r).use(t)}function Mhe(e){const t=e.children||"",n=new lz;return typeof t=="string"&&(n.value=t),n}function Dhe(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||Lhe;for(const d of Ihe)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+Phe+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),qC(e,u),Zce(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(d,f,h){if(d.type==="raw"&&h&&typeof f=="number")return o?h.children.splice(f,1):h.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let m;for(m in sj)if(Object.hasOwn(sj,m)&&Object.hasOwn(d.properties,m)){const g=d.properties[m],v=sj[m];(v===null||v.includes(d.tagName))&&(d.properties[m]=c(String(g||""),m,d))}}if(d.type==="element"){let m=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!m&&r&&typeof f=="number"&&(m=!r(d,f,h)),m&&h&&typeof f=="number")return l&&d.children?h.children.splice(f,1,...d.children):h.children.splice(f,1),f}}}function Lhe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||Ohe.test(e.slice(0,t))?e:""}function lO(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function $he(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function cz(e,t,n){const a=zb((n||{}).ignore||[]),s=Fhe(t);let o=-1;for(;++o<s.length;)sz(e,"text",l);function l(u,d){let f=-1,h;for(;++f<d.length;){const m=d[f],g=h?h.children:void 0;if(a(m,g?g.indexOf(m):void 0,h))return;h=m}if(h)return c(u,d)}function c(u,d){const f=d[d.length-1],h=s[o][0],m=s[o][1];let g=0;const x=f.children.indexOf(u);let y=!1,w=[];h.lastIndex=0;let b=h.exec(u.value);for(;b;){const _=b.index,k={index:b.index,input:b.input,stack:[...d,u]};let j=m(...b,k);if(typeof j=="string"&&(j=j.length>0?{type:"text",value:j}:void 0),j===!1?h.lastIndex=_+1:(g!==_&&w.push({type:"text",value:u.value.slice(g,_)}),Array.isArray(j)?w.push(...j):j&&w.push(j),g=_+b[0].length,y=!0),!h.global)break;b=h.exec(u.value)}return y?(g<u.value.length&&w.push({type:"text",value:u.value.slice(g)}),f.children.splice(x,1,...w)):w=[u],x+w.length}}function Fhe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([Uhe(a[0]),Bhe(a[1])])}return t}function Uhe(e){return typeof e=="string"?new RegExp($he(e),"g"):e}function Bhe(e){return typeof e=="function"?e:function(){return e}}const gj="phrasing",vj=["autolink","link","image","label"];function zhe(){return{transforms:[Yhe],enter:{literalAutolink:qhe,literalAutolinkEmail:yj,literalAutolinkHttp:yj,literalAutolinkWww:yj},exit:{literalAutolink:Ghe,literalAutolinkEmail:Vhe,literalAutolinkHttp:Hhe,literalAutolinkWww:Khe}}}function Whe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:gj,notInConstruct:vj},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:gj,notInConstruct:vj},{character:":",before:"[ps]",after:"\\/",inConstruct:gj,notInConstruct:vj}]}}function qhe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function yj(e){this.config.enter.autolinkProtocol.call(this,e)}function Hhe(e){this.config.exit.autolinkProtocol.call(this,e)}function Khe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Vhe(e){this.config.exit.autolinkEmail.call(this,e)}function Ghe(e){this.exit(e)}function Yhe(e){cz(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Xhe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Jhe]],{ignore:["link","linkReference"]})}function Xhe(e,t,n,r,a){let s="";if(!uz(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!Qhe(n)))return!1;const o=Zhe(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Jhe(e,t,n,r){return!uz(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Qhe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Zhe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=lO(e,"(");let s=lO(e,")");for(;r!==-1&&a>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function uz(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Vc(n)||Fb(n))&&(!t||n!==47)}dz.peek=lme;function eme(){this.buffer()}function tme(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function nme(){this.buffer()}function rme(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function ame(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=as(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ime(e){this.exit(e)}function sme(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=as(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ome(e){this.exit(e)}function lme(){return"["}function dz(e,t,n,r){const a=n.createTracker(r);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function cme(){return{enter:{gfmFootnoteCallString:eme,gfmFootnoteCall:tme,gfmFootnoteDefinitionLabelString:nme,gfmFootnoteDefinition:rme},exit:{gfmFootnoteCallString:ame,gfmFootnoteCall:ime,gfmFootnoteDefinitionLabelString:sme,gfmFootnoteDefinition:ome}}}function ume(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:dz},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),d=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),d(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),t?fz:dme))),u(),c}}function dme(e,t,n){return t===0?e:fz(e,t,n)}function fz(e,t,n){return(n?"":"    ")+e}const fme=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];hz.peek=vme;function hme(){return{canContainEols:["delete"],enter:{strikethrough:pme},exit:{strikethrough:gme}}}function mme(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:fme}],handlers:{delete:hz}}}function pme(e){this.enter({type:"delete",children:[]},e)}function gme(e){this.exit(e)}function hz(e,t,n,r){const a=n.createTracker(r),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function vme(){return"~"}function yme(e){return e.length}function xme(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||yme,s=[],o=[],l=[],c=[];let u=0,d=-1;for(;++d<e.length;){const v=[],x=[];let y=-1;for(e[d].length>u&&(u=e[d].length);++y<e[d].length;){const w=bme(e[d][y]);if(n.alignDelimiters!==!1){const b=a(w);x[y]=b,(c[y]===void 0||b>c[y])&&(c[y]=b)}v.push(w)}o[d]=v,l[d]=x}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<u;)s[f]=cO(r[f]);else{const v=cO(r);for(;++f<u;)s[f]=v}f=-1;const h=[],m=[];for(;++f<u;){const v=s[f];let x="",y="";v===99?(x=":",y=":"):v===108?x=":":v===114&&(y=":");let w=n.alignDelimiters===!1?1:Math.max(1,c[f]-x.length-y.length);const b=x+"-".repeat(w)+y;n.alignDelimiters!==!1&&(w=x.length+w+y.length,w>c[f]&&(c[f]=w),m[f]=w),h[f]=b}o.splice(1,0,h),l.splice(1,0,m),d=-1;const g=[];for(;++d<o.length;){const v=o[d],x=l[d];f=-1;const y=[];for(;++f<u;){const w=v[f]||"";let b="",_="";if(n.alignDelimiters!==!1){const k=c[f]-(x[f]||0),j=s[f];j===114?b=" ".repeat(k):j===99?k%2?(b=" ".repeat(k/2+.5),_=" ".repeat(k/2-.5)):(b=" ".repeat(k/2),_=b):_=" ".repeat(k)}n.delimiterStart!==!1&&!f&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&w==="")&&(n.delimiterStart!==!1||f)&&y.push(" "),n.alignDelimiters!==!1&&y.push(b),y.push(w),n.alignDelimiters!==!1&&y.push(_),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||f!==u-1)&&y.push("|")}g.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return g.join(`
`)}function bme(e){return e==null?"":String(e)}function cO(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function wme(e,t,n,r){const a=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),jme);return a(),o}function jme(e,t,n){return">"+(n?"":" ")+e}function _me(e,t){return uO(e,t.inConstruct,!0)&&!uO(e,t.notInConstruct,!1)}function uO(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function dO(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&_me(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function kme(e,t){const n=String(e);let r=n.indexOf(t),a=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+t.length,r=n.indexOf(t,a);return o}function Sme(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Nme(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Cme(e,t,n,r){const a=Nme(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(Sme(e,n)){const f=n.enter("codeIndented"),h=n.indentLines(s,Ame);return f(),h}const l=n.createTracker(r),c=a.repeat(Math.max(kme(s,a)+1,3)),u=n.enter("codeFenced");let d=l.move(c);if(e.lang){const f=n.enter(`codeFencedLang${o}`);d+=l.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${o}`);d+=l.move(" "),d+=l.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),f()}return d+=l.move(`
`),s&&(d+=l.move(s+`
`)),d+=l.move(c),u(),d}function Ame(e,t,n){return(n?"":"    ")+e}function KC(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Eme(e,t,n,r){const a=KC(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function Tme(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Om(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Oy(e,t,n){const r=Ud(e),a=Ud(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}mz.peek=Pme;function mz(e,t,n,r){const a=Tme(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),d=Oy(r.before.charCodeAt(r.before.length-1),u,a);d.inside&&(c=Om(u)+c.slice(1));const f=c.charCodeAt(c.length-1),h=Oy(r.after.charCodeAt(0),f,a);h.inside&&(c=c.slice(0,-1)+Om(f));const m=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+c+m}function Pme(e,t,n){return n.options.emphasis||"*"}function Ome(e,t){let n=!1;return qC(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,B1}),!!((!e.depth||e.depth<3)&&LC(e)&&(t.options.setext||n))}function Ime(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(Ome(e,n)){const d=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return f(),d(),h+`
`+(a===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Om(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}pz.peek=Rme;function pz(e){return e.value||""}function Rme(){return"<"}gz.peek=Mme;function gz(e,t,n,r){const a=KC(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function Mme(){return"!"}vz.peek=Dme;function vz(e,t,n,r){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=d,s(),a==="full"||!u||u!==f?c+=l.move(f+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Dme(){return"!"}yz.peek=Lme;function yz(e,t,n){let r=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return a+r+a}function Lme(){return"`"}function xz(e,t){const n=LC(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}bz.peek=$me;function bz(e,t,n,r){const a=KC(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(xz(e,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(e,{before:f,after:">",...o.current()})),f+=o.move(">"),l(),n.stack=d,f}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function $me(e,t,n){return xz(e,n)?"<":"["}wz.peek=Fme;function wz(e,t,n,r){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=d,s(),a==="full"||!u||u!==f?c+=l.move(f+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Fme(){return"["}function VC(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Ume(e){const t=VC(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Bme(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function jz(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function zme(e,t,n,r){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?Bme(n):VC(n);const l=e.ordered?o==="."?")":".":Ume(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),jz(n)===o&&d){let f=-1;for(;++f<e.children.length;){const h=e.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function Wme(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function qme(e,t,n,r){const a=Wme(n);let s=n.bulletCurrent||VC(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),d);return c(),u;function d(f,h,m){return h?(m?"":" ".repeat(o))+f:(m?s:s+" ".repeat(o-s.length))+f}}function Hme(e,t,n,r){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),a(),o}const Kme=zb(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Vme(e,t,n,r){return(e.children.some(function(o){return Kme(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Gme(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}_z.peek=Yme;function _z(e,t,n,r){const a=Gme(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),d=Oy(r.before.charCodeAt(r.before.length-1),u,a);d.inside&&(c=Om(u)+c.slice(1));const f=c.charCodeAt(c.length-1),h=Oy(r.after.charCodeAt(0),f,a);h.inside&&(c=c.slice(0,-1)+Om(f));const m=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},l+c+m}function Yme(e,t,n){return n.options.strong||"*"}function Xme(e,t,n,r){return n.safe(e.value,r)}function Jme(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Qme(e,t,n){const r=(jz(n)+(n.options.ruleSpaces?" ":"")).repeat(Jme(n));return n.options.ruleSpaces?r.slice(0,-1):r}const kz={blockquote:wme,break:dO,code:Cme,definition:Eme,emphasis:mz,hardBreak:dO,heading:Ime,html:pz,image:gz,imageReference:vz,inlineCode:yz,link:bz,linkReference:wz,list:zme,listItem:qme,paragraph:Hme,root:Vme,strong:_z,text:Xme,thematicBreak:Qme};function Zme(){return{enter:{table:epe,tableData:fO,tableHeader:fO,tableRow:npe},exit:{codeText:rpe,table:tpe,tableData:xj,tableHeader:xj,tableRow:xj}}}function epe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function tpe(e){this.exit(e),this.data.inTable=void 0}function npe(e){this.enter({type:"tableRow",children:[]},e)}function xj(e){this.exit(e)}function fO(e){this.enter({type:"tableCell",children:[]},e)}function rpe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,ape));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function ape(e,t){return t==="|"?t:e}function ipe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:c,tableRow:l}};function o(m,g,v,x){return u(d(m,v,x),m.align)}function l(m,g,v,x){const y=f(m,v,x),w=u([y]);return w.slice(0,w.indexOf(`
`))}function c(m,g,v,x){const y=v.enter("tableCell"),w=v.enter("phrasing"),b=v.containerPhrasing(m,{...x,before:s,after:s});return w(),y(),b}function u(m,g){return xme(m,{align:g,alignDelimiters:r,padding:n,stringLength:a})}function d(m,g,v){const x=m.children;let y=-1;const w=[],b=g.enter("table");for(;++y<x.length;)w[y]=f(x[y],g,v);return b(),w}function f(m,g,v){const x=m.children;let y=-1;const w=[],b=g.enter("tableRow");for(;++y<x.length;)w[y]=c(x[y],m,g,v);return b(),w}function h(m,g,v){let x=kz.inlineCode(m,g,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function spe(){return{exit:{taskListCheckValueChecked:hO,taskListCheckValueUnchecked:hO,paragraph:lpe}}}function ope(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:cpe}}}function hO(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function lpe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function cpe(e,t,n,r){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=kz.listItem(e,t,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(d){return d+o}}function upe(){return[zhe(),cme(),hme(),Zme(),spe()]}function dpe(e){return{extensions:[Whe(),ume(e),mme(),ipe(e),ope()]}}const fpe={tokenize:ype,partial:!0},Sz={tokenize:xpe,partial:!0},Nz={tokenize:bpe,partial:!0},Cz={tokenize:wpe,partial:!0},hpe={tokenize:jpe,partial:!0},Az={name:"wwwAutolink",tokenize:gpe,previous:Tz},Ez={name:"protocolAutolink",tokenize:vpe,previous:Pz},Po={name:"emailAutolink",tokenize:ppe,previous:Oz},zs={};function mpe(){return{text:zs}}let Zl=48;for(;Zl<123;)zs[Zl]=Po,Zl++,Zl===58?Zl=65:Zl===91&&(Zl=97);zs[43]=Po;zs[45]=Po;zs[46]=Po;zs[95]=Po;zs[72]=[Po,Ez];zs[104]=[Po,Ez];zs[87]=[Po,Az];zs[119]=[Po,Az];function ppe(e,t,n){const r=this;let a,s;return o;function o(f){return!H1(f)||!Oz.call(r,r.previous)||GC(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(f))}function l(f){return H1(f)?(e.consume(f),l):f===64?(e.consume(f),c):n(f)}function c(f){return f===46?e.check(hpe,d,u)(f):f===45||f===95||ra(f)?(s=!0,e.consume(f),c):d(f)}function u(f){return e.consume(f),a=!0,c}function d(f){return s&&a&&ga(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function gpe(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!Tz.call(r,r.previous)||GC(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(fpe,e.attempt(Sz,e.attempt(Nz,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function vpe(e,t,n){const r=this;let a="",s=!1;return o;function o(f){return(f===72||f===104)&&Pz.call(r,r.previous)&&!GC(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(f),e.consume(f),l):n(f)}function l(f){if(ga(f)&&a.length<5)return a+=String.fromCodePoint(f),e.consume(f),l;if(f===58){const h=a.toLowerCase();if(h==="http"||h==="https")return e.consume(f),c}return n(f)}function c(f){return f===47?(e.consume(f),s?u:(s=!0,c)):n(f)}function u(f){return f===null||Ay(f)||Tn(f)||Vc(f)||Fb(f)?n(f):e.attempt(Sz,e.attempt(Nz,d),n)(f)}function d(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function ype(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function xpe(e,t,n){let r,a,s;return o;function o(u){return u===46||u===95?e.check(Cz,c,l)(u):u===null||Tn(u)||Vc(u)||u!==45&&Fb(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),o}function c(u){return a||r||!s?n(u):t(u)}}function bpe(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(Cz,t,s)(o):o===null||Tn(o)||Vc(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&r++,e.consume(o),a}}function wpe(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||Tn(l)||Vc(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||Tn(l)||Vc(l)?t(l):r(l)}function s(l){return ga(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):ga(l)?(e.consume(l),o):n(l)}}function jpe(e,t,n){return r;function r(s){return e.consume(s),a}function a(s){return ra(s)?n(s):t(s)}}function Tz(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Tn(e)}function Pz(e){return!ga(e)}function Oz(e){return!(e===47||H1(e))}function H1(e){return e===43||e===45||e===46||e===95||ra(e)}function GC(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const _pe={tokenize:Ppe,partial:!0};function kpe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Ape,continuation:{tokenize:Epe},exit:Tpe}},text:{91:{name:"gfmFootnoteCall",tokenize:Cpe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Spe,resolveTo:Npe}}}}function Spe(e,t,n){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const c=r.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=as(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function Npe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function Cpe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),c}function c(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(f){if(s>999||f===93&&!o||f===null||f===91||Tn(f))return n(f);if(f===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return a.includes(as(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return Tn(f)||(o=!0),s++,e.consume(f),f===92?d:u}function d(f){return f===91||f===92||f===93?(e.consume(f),s++,u):u(f)}}function Ape(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(g)}function d(g){if(o>999||g===93&&!l||g===null||g===91||Tn(g))return n(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=as(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Tn(g)||(l=!0),o++,e.consume(g),g===92?f:d}function f(g){return g===91||g===92||g===93?(e.consume(g),o++,d):d(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),a.includes(s)||a.push(s),sn(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function Epe(e,t,n){return e.check(Xp,t,e.attempt(_pe,t,n))}function Tpe(e){e.exit("gfmFootnoteDefinition")}function Ppe(e,t,n){const r=this;return sn(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function Ope(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},f={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},h=[["enter",d,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",f,l]],m=l.parser.constructs.insideSpan.null;m&&ai(h,h.length,0,Ub(m,o.slice(u+1,c),l)),ai(h,h.length,0,[["exit",f,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",d,l]]),ai(o,u-1,c-u+3,h),c=u+h.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,d=this.events;let f=0;return h;function h(g){return u===126&&d[d.length-1][1].type!=="characterEscape"?c(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const v=Ud(u);if(g===126)return f>1?c(g):(o.consume(g),f++,m);if(f<2&&!n)return c(g);const x=o.exit("strikethroughSequenceTemporary"),y=Ud(g);return x._open=!y||y===2&&!!v,x._close=!v||v===2&&!!y,l(g)}}}class Ipe{constructor(){this.map=[]}add(t,n,r){Rpe(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const s of a)t.push(s);a=r.pop()}this.map.length=0}}function Rpe(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function Mpe(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function Dpe(){return{flow:{null:{name:"table",tokenize:Lpe,resolveAll:$pe}}}}function Lpe(e,t,n){const r=this;let a=0,s=0,o;return l;function l(P){let N=r.events.length-1;for(;N>-1;){const U=r.events[N][1].type;if(U==="lineEnding"||U==="linePrefix")N--;else break}const D=N>-1?r.events[N][1].type:null,$=D==="tableHead"||D==="tableRow"?j:c;return $===j&&r.parser.lazy[r.now().line]?n(P):$(P)}function c(P){return e.enter("tableHead"),e.enter("tableRow"),u(P)}function u(P){return P===124||(o=!0,s+=1),d(P)}function d(P){return P===null?n(P):St(P)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),m):n(P):Jt(P)?sn(e,d,"whitespace")(P):(s+=1,o&&(o=!1,a+=1),P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),f(P)))}function f(P){return P===null||P===124||Tn(P)?(e.exit("data"),d(P)):(e.consume(P),P===92?h:f)}function h(P){return P===92||P===124?(e.consume(P),f):f(P)}function m(P){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(P):(e.enter("tableDelimiterRow"),o=!1,Jt(P)?sn(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):g(P))}function g(P){return P===45||P===58?x(P):P===124?(o=!0,e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),v):k(P)}function v(P){return Jt(P)?sn(e,x,"whitespace")(P):x(P)}function x(P){return P===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),y):P===45?(s+=1,y(P)):P===null||St(P)?_(P):k(P)}function y(P){return P===45?(e.enter("tableDelimiterFiller"),w(P)):k(P)}function w(P){return P===45?(e.consume(P),w):P===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),b):(e.exit("tableDelimiterFiller"),b(P))}function b(P){return Jt(P)?sn(e,_,"whitespace")(P):_(P)}function _(P){return P===124?g(P):P===null||St(P)?!o||a!==s?k(P):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(P)):k(P)}function k(P){return n(P)}function j(P){return e.enter("tableRow"),S(P)}function S(P){return P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),S):P===null||St(P)?(e.exit("tableRow"),t(P)):Jt(P)?sn(e,S,"whitespace")(P):(e.enter("data"),O(P))}function O(P){return P===null||P===124||Tn(P)?(e.exit("data"),S(P)):(e.consume(P),P===92?I:O)}function I(P){return P===92||P===124?(e.consume(P),O):O(P)}}function $pe(e,t){let n=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,d,f;const h=new Ipe;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&(mO(h,t,c,u,d),d=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,f=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",d,t]])),a=g.type==="tableDelimiterRow"?2:d?3:1):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],f=Kg(h,t,s,a,void 0,f),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],f=Kg(h,t,s,a,void 0,f)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],f=Kg(h,t,s,a,n,f)):o[1]!==0&&(f=Kg(h,t,o,a,n,f)),a=0):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&mO(h,t,c,u,d),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=Mpe(t.events,n))}return e}function Kg(e,t,n,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Lu(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Lu(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=Lu(t.events,n[2]),d=Lu(t.events,n[3]),f={type:l,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,v=n[3]-n[2]-1;e.add(g,v,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return a!==void 0&&(s.end=Object.assign({},Lu(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function mO(e,t,n,r,a){const s=[],o=Lu(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function Lu(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Fpe={name:"tasklistCheck",tokenize:Bpe};function Upe(){return{text:{91:Fpe}}}function Bpe(e,t,n){const r=this;return a;function a(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return Tn(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return St(c)?t(c):Jt(c)?e.check({tokenize:zpe},t,n)(c):n(c)}}function zpe(e,t,n){return sn(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function Wpe(e){return B6([mpe(),kpe(),Ope(e),Dpe(),Upe()])}const qpe={};function Iy(e){const t=this,n=e||qpe,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(Wpe(n)),s.push(upe()),o.push(dpe(n))}function Hpe(e){cz(e,[/\r?\n|\r/g,Kpe])}function Kpe(){return{type:"break"}}function Iz(){return function(e){Hpe(e)}}const Rz=({url:e,isDark:t=!1})=>{const[n,r]=p.useState(null),[a,s]=p.useState(!0),[o,l]=p.useState(!1);return p.useEffect(()=>{let c=!0;return(async()=>{try{const f=await(await fetch(`https://api.microlink.io?url=${encodeURIComponent(e)}`)).json();c&&(f.status==="success"&&f.data?r(f.data):l(!0),s(!1))}catch{c&&(l(!0),s(!1))}})(),()=>{c=!1}},[e]),a?i.jsxs("div",{className:"flex items-center gap-2 mt-2 p-3 border rounded-lg bg-black/5 animate-pulse",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin opacity-50"}),i.jsx("span",{className:"text-xs opacity-50",children:"Loading preview..."})]}):o||!n||!n.title&&!n.image?null:i.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"block mt-2 no-underline",children:i.jsxs(Ue,{className:`overflow-hidden transition-all hover:shadow-md ${t?"bg-blue-700/50 border-blue-400 text-white":"bg-white border-slate-200 text-slate-900"}`,children:[n.image&&i.jsx("div",{className:"w-full aspect-video overflow-hidden bg-slate-100 relative",children:i.jsx("img",{src:n.image.url,alt:n.title,className:"w-full h-full object-cover",loading:"lazy"})}),i.jsxs(lt,{className:"p-3",children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[n.logo&&i.jsx("img",{src:n.logo.url,alt:"",className:"w-4 h-4 rounded-sm"}),i.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider opacity-70",children:n.publisher||new URL(e).hostname})]}),i.jsx("h4",{className:"text-sm font-semibold line-clamp-1 mb-1",children:n.title}),n.description&&i.jsx("p",{className:"text-xs opacity-70 line-clamp-2 leading-relaxed",children:n.description})]})]})})};function Mz({isOpen:e,onClose:t,src:n,mediaType:r,fileName:a="File"}){const[s,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(!1);if(p.useEffect(()=>{if(e)o(!0),d(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{c(!0)})});else{c(!1);const v=setTimeout(()=>{o(!1),d(!1)},300);return()=>clearTimeout(v)}},[e]),p.useEffect(()=>{const v=x=>{x.key==="Escape"&&e&&t()};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[e,t]),!s)return null;const f=v=>{v.target===v.currentTarget&&(u?d(!1):t())},h=()=>{const v=document.createElement("a");v.href=n,v.download=a,v.target="_blank",document.body.appendChild(v),v.click(),document.body.removeChild(v)},m=()=>{d(!u)},g=()=>{switch(r){case"image":return i.jsx("div",{className:`transition-all duration-300 ease-out ${u?"overflow-auto max-h-[calc(100vh-56px)] max-w-full":"flex items-center justify-center overflow-hidden"}`,style:u?{cursor:"zoom-out"}:{cursor:"zoom-in"},onClick:v=>{v.stopPropagation(),m()},children:i.jsx("img",{src:n,alt:a,draggable:!1,className:`transition-all duration-300 ease-out select-none ${u?"":"max-h-[calc(100vh-56px)] max-w-full object-contain"}`})});case"pdf":return i.jsx("div",{className:"w-[90vw] max-w-4xl bg-white rounded-lg overflow-hidden shadow-2xl",style:{height:"calc(100vh - 72px)"},children:i.jsx("embed",{src:n,type:"application/pdf",className:"w-full h-full"})});case"video":return i.jsx("div",{className:"max-w-4xl w-[90vw] bg-black rounded-lg overflow-hidden shadow-2xl",children:i.jsx("video",{src:n,controls:!0,autoPlay:!0,style:{maxHeight:"calc(100vh - 72px)"},className:"w-full",children:"Your browser does not support video playback."})});case"audio":return i.jsxs("div",{className:"bg-background p-8 rounded-lg shadow-2xl max-w-md w-[90vw]",children:[i.jsx("div",{className:"text-center mb-4",children:i.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-primary/10 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-10 h-10 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})})}),i.jsx("audio",{src:n,controls:!0,autoPlay:!0,className:"w-full",children:"Your browser does not support audio playback."})]});default:return i.jsxs("div",{className:"bg-background p-8 rounded-lg shadow-2xl text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"Cannot preview this file type"}),i.jsxs(re,{onClick:h,children:[i.jsx(DT,{className:"h-4 w-4 mr-2"}),"Download ",a]})]})}};return i.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col transition-opacity duration-300 ease-out ${l?"opacity-100":"opacity-0"}`,style:{backgroundColor:"rgba(0, 0, 0, 0.92)"},children:[i.jsxs("div",{className:`flex-shrink-0 h-14 px-4 flex items-center justify-between border-b border-white/10 z-10 transition-transform duration-300 ease-out ${l?"translate-y-0":"-translate-y-full"}`,style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:[i.jsx("p",{className:"text-white text-sm font-medium truncate max-w-[40vw] md:max-w-md",children:a}),i.jsxs("div",{className:"flex items-center gap-1",children:[r==="image"&&i.jsx(re,{variant:"ghost",size:"icon",onClick:m,className:"text-white hover:bg-white/20",title:u?"Zoom out":"Zoom in",children:u?i.jsx(tG,{className:"h-5 w-5"}):i.jsx(eG,{className:"h-5 w-5"})}),i.jsx(re,{variant:"ghost",size:"icon",onClick:h,className:"text-white hover:bg-white/20",title:"Download",children:i.jsx(DT,{className:"h-5 w-5"})}),i.jsx(re,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",title:"Close",children:i.jsx(mf,{className:"h-5 w-5"})})]})]}),i.jsx("div",{className:`flex-1 flex items-center justify-center transition-all duration-300 ease-out ${l?"opacity-100 scale-100":"opacity-0 scale-95"} ${u&&r==="image"?"overflow-auto p-0":"overflow-hidden p-4"}`,onClick:f,children:g()})]})}const pO=["image/jpeg","image/png","image/gif","image/webp","application/pdf","video/mp4","audio/mpeg","audio/ogg"],Vpe=10*1024*1024;function Mv(e){return e.startsWith("image/")?"image":e.startsWith("video/")?"video":e.startsWith("audio/")?"voice":"file"}function Gpe(e){return e.startsWith("image/")?i.jsx(HV,{className:"h-4 w-4"}):e.startsWith("audio/")?i.jsx(k4,{className:"h-4 w-4"}):e.startsWith("video/")?i.jsx(qV,{className:"h-4 w-4"}):i.jsx(Rh,{className:"h-4 w-4"})}async function Dz(e){const t=Date.now(),n=Math.random().toString(36).substring(2,8),r=e.name.split(".").pop()||"bin",s=`attachments/${`${t}_${n}.${r}`}`,{data:o,error:l}=await Sa.storage.from("chat-attachments").upload(s,e,{cacheControl:"3600",upsert:!1});if(l)throw l;const{data:c}=Sa.storage.from("chat-attachments").getPublicUrl(s);return{url:c.publicUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,type:Mv(e.type)}}function Lz({onFileStaged:e,disabled:t=!1,className:n=""}){const r=p.useRef(null),a=()=>{var o;(o=r.current)==null||o.click()},s=o=>{var c;const l=(c=o.target.files)==null?void 0:c[0];if(l){if(o.target.value="",!pO.includes(l.type)){$e.error("File type not allowed. Allowed: images, PDF, audio, video");return}if(l.size>Vpe){$e.error("File too large. Max size: 10MB");return}if(l.type.startsWith("image/")){const u=new FileReader;u.onload=d=>{var f;e({file:l,preview:(f=d.target)==null?void 0:f.result,type:Mv(l.type)})},u.readAsDataURL(l)}else if(l.type==="application/pdf"||l.type.startsWith("video/")||l.type.startsWith("audio/")){const u=URL.createObjectURL(l);e({file:l,preview:u,type:Mv(l.type)})}else e({file:l,preview:null,type:Mv(l.type)})}};return i.jsxs(i.Fragment,{children:[i.jsx("input",{ref:r,type:"file",accept:pO.join(","),onChange:s,className:"hidden",disabled:t}),i.jsx(re,{type:"button",variant:"ghost",size:"icon",onClick:a,disabled:t,className:n,title:"Attach file",children:i.jsx(GV,{className:"h-5 w-5"})})]})}function $z({stagedFile:e,onRemove:t,isUploading:n=!1}){const[r,a]=p.useState(!1),s=e.file.type==="application/pdf",o=e.file.type.startsWith("image/"),l=e.file.type.startsWith("video/"),c=e.file.type.startsWith("audio/"),u=()=>o?"image":s?"pdf":l?"video":c?"audio":"file",d=o||s||l||c,f=()=>{d&&e.preview&&!n&&a(!0)},h=()=>{if(e.preview){if(o)return i.jsx("img",{src:e.preview,alt:"Preview",className:"h-16 w-16 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:f});if(s)return i.jsx("div",{className:"h-20 w-28 rounded overflow-hidden border bg-white cursor-pointer hover:opacity-80 transition-opacity",onClick:f,children:i.jsx("embed",{src:`${e.preview}#toolbar=0&navpanes=0&scrollbar=0`,type:"application/pdf",className:"w-full h-full pointer-events-none"})});if(l)return i.jsxs("div",{className:"h-16 w-24 rounded overflow-hidden bg-black cursor-pointer hover:opacity-80 transition-opacity relative",onClick:f,children:[i.jsx("video",{src:e.preview,className:"w-full h-full object-cover",muted:!0}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:i.jsx("div",{className:"w-8 h-8 rounded-full bg-white/80 flex items-center justify-center",children:i.jsx("div",{className:"w-0 h-0 border-l-[10px] border-l-black border-y-[6px] border-y-transparent ml-1"})})})]});if(c)return i.jsx("div",{className:"h-16 w-16 flex items-center justify-center bg-primary/10 rounded cursor-pointer hover:bg-primary/20 transition-colors",onClick:f,children:i.jsx(k4,{className:"h-8 w-8 text-primary"})})}return i.jsx("div",{className:"h-16 w-16 flex items-center justify-center bg-primary/10 rounded",children:Gpe(e.file.type)})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative inline-flex items-center gap-3 px-3 py-2 bg-muted rounded-lg border",children:[n&&i.jsx("div",{className:"absolute inset-0 bg-background/80 flex items-center justify-center rounded-lg z-10",children:i.jsx(Vt,{className:"h-4 w-4 animate-spin"})}),h(),i.jsxs("div",{className:"flex flex-col min-w-0 max-w-[150px]",children:[i.jsx("span",{className:"text-xs font-medium truncate",children:e.file.name}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[(e.file.size/1024).toFixed(1)," KB"]}),d&&i.jsx("button",{type:"button",onClick:f,className:"text-xs text-blue-600 font-medium hover:underline text-left",children:"Click to preview"})]}),i.jsx(re,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:t,disabled:n,title:"Remove attachment",children:i.jsx(mf,{className:"h-4 w-4"})})]}),e.preview&&i.jsx(Mz,{isOpen:r,onClose:()=>a(!1),src:e.preview,mediaType:u(),fileName:e.file.name})]})}function YC({fileLink:e,type:t,fileName:n}){const[r,a]=p.useState(!1);return e?t==="image"?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:e,alt:n||"Image",className:"max-w-full h-auto rounded-lg max-h-64 object-contain cursor-pointer hover:opacity-90 transition-opacity",loading:"lazy",onClick:()=>a(!0)}),i.jsx(Mz,{isOpen:r,onClose:()=>a(!1),src:e,mediaType:"image",fileName:n})]}):t==="video"?i.jsx("video",{src:e,controls:!0,className:"max-w-full rounded-lg max-h-64",children:"Your browser does not support video."}):t==="voice"?i.jsxs("audio",{controls:!0,className:"max-w-full",children:[i.jsx("source",{src:e}),"Your browser does not support audio."]}):i.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[i.jsx(Rh,{className:"h-5 w-5 text-primary"}),i.jsx("span",{className:"text-sm truncate max-w-[200px]",children:n||"Download file"})]}):null}const Ype=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Xpe=e=>{const t=e.trim().toLowerCase();return t==="telegram"||t==="Telegram"?"Telegram":t==="whatsapp"||t==="wa"?"WhatsApp":t==="web"?"Web":e},tl=e=>{if(!e)return null;const t=String(e.status||"").toLowerCase();return t==="closed"?"done":t==="open"?"unassigned":t==="pending"||t==="assigned"?"assigned":"unassigned"},bj=e=>tl(e)==="assigned",wj=e=>tl(e)==="unassigned",Vg=e=>tl(e)==="done",Jpe=24*60*60*1e3,Qpe=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t} -${n} -${r} `},Zpe=e=>{if(Number.isNaN(e.getTime()))return"";const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a=n.getTime()-r.getTime(),s=Math.floor(a/Jpe);return s===0?"Today":s===1?"Yesterday":e.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},ege=({message:e,isLastMessage:t,highlighted:n=!1,matches:r=[],activeMatchOrder:a=-1})=>{const s=e.role==="assistant"||e.role==="agent"||e.direction==="out",o=e.role==="system"||e.type==="event"||e.type==="note",l=e.role==="assistant",c=e.role==="agent",u={a:({href:f,children:h})=>{const m=f||"";return uy(m)?i.jsx("img",{src:m,alt:"User uploaded content",className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm",loading:"lazy"}):i.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:c?"text-blue-300 font-medium underline hover:text-white":"text-blue-600 font-medium underline hover:text-blue-800",children:h})},img:({src:f,alt:h})=>i.jsx("img",{src:f,alt:h,className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm overflow-hidden",loading:"lazy"})},d=()=>{const f=e.body||"";if(!f||r.length===0)return f;const h=[...r].sort((v,x)=>v.start-x.start),m=[];let g=0;return h.forEach(({start:v,length:x},y)=>{v>g&&m.push(f.slice(g,v));const w=f.slice(v,v+x);m.push({type:"highlight",content:w,index:y}),g=v+x}),g<f.length&&m.push(f.slice(g)),m.map((v,x)=>{if(typeof v=="string")return i.jsx("span",{children:v},`seg - ${x} `);const y=v.index===a;return i.jsx("mark",{className:`rounded - sm px - 0.5 text - current text - black ${y?"bg-orange-300":"bg-yellow-200"} `,children:v.content},`highlight - ${v.index} `)})};return o?i.jsx("div",{className:"flex justify-center my-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:e.body||"System event"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i.jsx("span",{children:""}),i.jsx("span",{children:"system"})]})]})}):i.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-3`,children:i.jsxs("div",{className:`flex ${s?"flex-row-reverse":"flex-row"} items-end gap-2 max-w-[85%]`,children:[i.jsxs(Oa,{className:"h-8 w-8",children:[i.jsx(Bc,{src:""}),i.jsx(Ia,{className:"text-xs",children:s?"A":e.contact_avatar})]}),i.jsxs("div",{className:`px-4 py-2 rounded-2xl text-sm shadow-sm ${c?"bg-blue-600 text-white":l?"bg-blue-100 text-blue-900":"bg-muted text-foreground"} ${n?"ring-2 ring-yellow-300":""}`,children:[r.length>0?i.jsx("p",{className:"whitespace-pre-wrap [overflow-wrap:anywhere]",children:d()}):i.jsxs(i.Fragment,{children:[e.file_link&&(()=>{var x,y;const f=e.file_link;let h=e.type&&e.type!=="text"?e.type:null;if(!h){const w=((y=(x=f.split(".").pop())==null?void 0:x.toLowerCase())==null?void 0:y.split("?")[0])??"";["jpg","jpeg","png","gif","webp","svg","bmp","avif"].includes(w)?h="image":["mp4","webm","mov","avi","mkv"].includes(w)?h="video":["mp3","wav","ogg","aac","flac","m4a"].includes(w)?h="voice":h="file"}const m=(e.body||"").trim(),g=/^\[(?:Image|Video|File):\s/.test(m)||/^\s/.test(m),v=m&&!g;return i.jsx("div",{className:v?"mb-2":"",children:i.jsx(YC,{fileLink:f,type:h})})})(),(()=>{const f=(e.body||"").trim(),h=/^\[(?:Image|Video|File):\s/.test(f)||/^\s/.test(f);return f&&!h?i.jsx("div",{className:`prose prose-sm leading-normal max-w-none [overflow-wrap:anywhere] [&>*:first-child]:mt-0 [&>*:last-child]:mb-0 ${c?"text-white [&_*]:text-inherit [&_li]:marker:text-white [&_code]:text-blue-100 [&_code]:bg-blue-700":"dark:prose-invert"} `,children:i.jsx(Py,{remarkPlugins:[Iy,Iz],components:u,children:e.body||""})}):null})()]}),(()=>{const f=L4(e.body);return f.length===0?null:i.jsx("div",{className:"space-y-2 mt-2",children:f.map(h=>!uy(h)&&i.jsx(Rz,{url:h,isDark:c},h))})})(),i.jsxs("div",{className:`mt-1 flex items-center gap-1 text-[10px] ${c?"text-blue-100":l?"text-blue-700":"text-muted-foreground"}`,children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(e._status==="pending"?i.jsx(Vt,{className:"h-3 w-3 animate-spin","aria-label":"pending"}):t?i.jsx($V,{className:"h-3 w-3","aria-label":"sent"}):null)]})]})]})})};function tge(){var Ft,_t,Vn,Ar,Nn,Vr,Ot,Ln;const[e,t]=$N(),[n,r]=p.useState(""),[a,s]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState("assigned"),[d,f]=p.useState(!1);p.useState(!1),p.useState(!1);const[h,m]=p.useState(""),[g,v]=p.useState(null),[x,y]=p.useState(0),w=p.useRef(null),b=p.useRef({}),_=h.trim(),{conversations:k,messages:j,loading:S,error:O,fetchConversations:I,fetchMessages:P,sendMessage:N,createConversation:D,addThreadLabel:$,removeThreadLabel:U,assignThread:F,assignThreadToUser:M,takeoverThread:T,unassignThread:A,clearCollaborator:L,deleteThread:E,setThreadCollaborator:B}=Wle();EC();const{agents:R}=ql(),{user:C}=ia(),{hasRole:q,hasPermission:Z}=Ir(),J=q("master_agent"),ee=q("super_agent");q("agent");const ae=J||ee;Z("messages.create");const Q=(C==null?void 0:C.id)??null,[oe,ge]=p.useState(null),[ie,Ie]=p.useState(!1),[me,K]=p.useState(!1),[fe,De]=p.useState(null),[Ze,Ve]=p.useState(!1),ut=Z("contacts.delete"),[Ye,ot]=p.useState({}),te=p.useRef(!1),Xe=p.useRef(!1),dt=p.useMemo(()=>`chat.threadFilters.v1:${(C==null?void 0:C.id)||"anon"} `,[C==null?void 0:C.id]),[de,we]=p.useState({}),[se,Be]=p.useState({}),[je,Ge]=p.useState([]),[vt,wt]=p.useState({});p.useMemo(()=>R.filter(X=>String((X==null?void 0:X.primaryRole)||"").toLowerCase()==="super_agent").map(X=>({value:X.user_id,label:X.display_name||X.email||"Unknown Agent"})),[R]);const Nt=p.useMemo(()=>R.filter(X=>String((X==null?void 0:X.primaryRole)||"").toLowerCase()!=="master_agent").map(X=>({value:X.user_id,label:X.display_name||X.email||"Unknown Agent"})),[R]),yt=p.useMemo(()=>Object.fromEntries(R.map(X=>[String(X.user_id),String(X.display_name||X.email||"Unknown")])),[R]),xt=p.useMemo(()=>X=>yt[X]||vt[X]||X,[yt,vt]),[le,Ee]=p.useState(null),ye=p.useMemo(()=>{if(!o)return null;const X=k.find(_e=>_e.id===o);return(X==null?void 0:X.assignee_user_id)??null},[o,k]),H=p.useMemo(()=>o?(le==null?void 0:le.threadId)===o?le.userId:ye:null,[o,le,ye]);p.useEffect(()=>{if(!o){Ee(null);return}(le==null?void 0:le.threadId)===o&&ye===le.userId&&Ee(null)},[o,ye,le]),p.useEffect(()=>{if(!H){Ge([]);return}let X=!0;return(async()=>{const{data:W,error:he}=await kt.from("super_agent_members").select("agent_user_id").eq("super_agent_id",H);if(X){if(he){console.warn("Failed to fetch super agent members",he),Ge([]);return}Ge((W||[]).map(pe=>String(pe.agent_user_id)))}})(),()=>{X=!1}},[H]);const z=p.useMemo(()=>{if(!_)return[];const X=Ype(_);return X?j.flatMap(_e=>{const W=_e.body||"";if(!W)return[];const he=new RegExp(X,"gi"),pe=[];let Me=0,We;for(;(We=he.exec(W))!==null;)pe.push({messageId:_e.id,start:We.index,length:We[0].length,order:Me}),Me+=1,We.index===he.lastIndex&&he.lastIndex++;return pe}):[]},[_,j]),G=p.useMemo(()=>{if(z.length===0)return{};const X=z.reduce((_e,W)=>(_e[W.messageId]||(_e[W.messageId]=[]),_e[W.messageId].push({start:W.start,length:W.length}),_e),{});return Object.values(X).forEach(_e=>{_e.sort((W,he)=>W.start-he.start)}),X},[z]),ue=z.length,Se=ue>0?z[x]:null,Ne=p.useMemo(()=>j.length>0?j[j.length-1].id:null,[j]),Le=p.useMemo(()=>{const X=[];let _e=null;return j.forEach(W=>{const he=W.created_at;if(he){const pe=new Date(he);if(!Number.isNaN(pe.getTime())){const Me=Qpe(pe);if(Me!==_e){const We=Zpe(pe);We&&X.push({type:"date",key:`date - ${Me} `,label:We}),_e=Me}}}X.push({type:"message",key:W.id,message:W})}),X},[j]),V=X=>{const _e=(X??"").toString();return!_e||_e==="all"?"":_e},ne=X=>{var _e,W;return!!((_e=X.dateRange)!=null&&_e.from||(W=X.dateRange)!=null&&W.to||V(X.inbox)||V(X.channelType)||V(X.platformId)||V(X.status)||V(X.agent)||V(X.resolvedBy))},ke=X=>{var he,pe;const _e=(he=X.dateRange)!=null&&he.from?X.dateRange.from.getTime():0,W=(pe=X.dateRange)!=null&&pe.to?X.dateRange.to.getTime():0;return[_e,W,V(X.inbox),V(X.channelType),V(X.platformId),V(X.status),V(X.agent),V(X.resolvedBy)].join("|")},et=X=>{const _e=X.get("f_from"),W=X.get("f_to"),he=_e?Number(_e):0,pe=W?Number(W):0,Me=he||pe?{from:he?new Date(he):void 0,to:pe?new Date(pe):void 0}:void 0,We=V(X.get("f_inbox")),Ce=V(X.get("f_channelType")),Re=V(X.get("f_platformId")),Ct=V(X.get("f_status")),Fe=V(X.get("f_agent")),Ut=V(X.get("f_resolvedBy")),At={};return Me&&(At.dateRange=Me),We&&(At.inbox=We),Ce&&(At.channelType=Ce),Re&&(At.platformId=Re),Ct&&(At.status=Ct),Fe&&(At.agent=Fe),Ut&&(At.resolvedBy=Ut),At},nt=(X,_e)=>{var he,pe;["f_from","f_to","f_inbox","f_channelType","f_platformId","f_status","f_agent","f_resolvedBy"].forEach(Me=>X.delete(Me)),(he=_e.dateRange)!=null&&he.from&&X.set("f_from",String(_e.dateRange.from.getTime())),(pe=_e.dateRange)!=null&&pe.to&&X.set("f_to",String(_e.dateRange.to.getTime())),V(_e.inbox)&&X.set("f_inbox",V(_e.inbox)),V(_e.channelType)&&X.set("f_channelType",V(_e.channelType)),V(_e.platformId)&&X.set("f_platformId",V(_e.platformId)),V(_e.status)&&X.set("f_status",V(_e.status)),V(_e.agent)&&X.set("f_agent",V(_e.agent)),V(_e.resolvedBy)&&X.set("f_resolvedBy",V(_e.resolvedBy))},Rt=X=>{ot(X);try{localStorage.setItem(dt,JSON.stringify({...X,dateRange:X.dateRange?{from:X.dateRange.from?X.dateRange.from.getTime():void 0,to:X.dateRange.to?X.dateRange.to.getTime():void 0}:void 0}))}catch{}const _e=new URLSearchParams(window.location.search);nt(_e,X),te.current=!0,t(_e,{replace:!0}),setTimeout(()=>{te.current=!1},0),I(X)};p.useEffect(()=>{y(0)},[_]),p.useEffect(()=>{ue>0&&x>=ue&&y(0)},[x,ue]),p.useEffect(()=>{if(!_||!Se){v(null);return}v(Se.messageId);const X=b.current[Se.messageId];X&&X.scrollIntoView({behavior:"smooth",block:"center"})},[_,Se]);const ht=()=>{ue!==0&&y(X=>(X+1)%ue)},$t=()=>{ue!==0&&y(X=>(X-1+ue)%ue)},jt=e.get("contact"),Zt=e.get("thread"),Pt=e.get("tab"),Lt=p.useRef(!1);p.useEffect(()=>{if(!Pt||Lt.current)return;const X=Pt==="resolved"?"done":Pt;(X==="assigned"||X==="unassigned"||X==="done")&&X!==c&&u(X)},[Pt]),p.useEffect(()=>{let X=!0;return(async()=>{try{const{data:W,error:he}=await kt.from("channels").select("id, display_name, provider").order("created_at",{ascending:!1});if(!X)return;if(he)throw he;const pe={},Me={};(W||[]).forEach(We=>{pe[String(We.id)]=String(We.display_name||"Unknown"),Me[String(We.id)]=String(We.provider||"")}),we(pe),Be(Me)}catch{if(!X)return;we({}),Be({})}})(),()=>{X=!1}},[]),p.useEffect(()=>{if(te.current)return;const X=et(e);if(!Xe.current&&(Xe.current=!0,!ne(X)))try{const he=localStorage.getItem(dt);if(he){const pe=JSON.parse(he||"{}"),Me={...pe,dateRange:pe!=null&&pe.dateRange?{from:pe.dateRange.from?new Date(Number(pe.dateRange.from)):void 0,to:pe.dateRange.to?new Date(Number(pe.dateRange.to)):void 0}:void 0};ot(Me);const We=new URLSearchParams(window.location.search);nt(We,Me),te.current=!0,t(We,{replace:!0}),setTimeout(()=>{te.current=!1},0),I(Me);return}}catch{}const _e=ke(X),W=ke(Ye);_e!==W&&(ot(X),I(X))},[e.toString(),dt]);const Dt=p.useMemo(()=>[...k.filter(_e=>`${_e.contact_name} ${_e.last_message_preview} `.toLowerCase().includes(n.toLowerCase()))].sort((_e,W)=>{const he=new Date(_e.last_msg_at??_e.created_at??0).getTime();return new Date(W.last_msg_at??W.created_at??0).getTime()-he}),[k,n]);p.useEffect(()=>{if(d||S||k.length===0)return;const X=k.filter(he=>bj(he)).length,_e=k.filter(he=>wj(he)).length,W=k.filter(he=>Vg(he)).length;if(c==="assigned"&&X===0&&_e>0){u("unassigned");return}if((c==="assigned"||c==="unassigned")&&X===0&&_e===0&&W>0){u("done");return}},[k,S,c,d]),p.useEffect(()=>{if(Pt===c)return;const _e=new URLSearchParams(window.location.search);_e.set("tab",c),Lt.current=!0,t(_e,{replace:!0}),setTimeout(()=>{Lt.current=!1},0)},[c]),p.useEffect(()=>{var _e;if(!Zt||o===Zt||Dt.length===0)return;const X=Dt.find(W=>W.id===Zt);X&&(l(X.id),u(tl(X)??"unassigned"),P(X.id),(_e=X.channel)!=null&&_e.provider&&Bg(X.channel.provider))},[Zt,Dt,o]),p.useEffect(()=>{var _e;if(!jt||Zt||o||Dt.length===0)return;const X=Dt.find(W=>W.contact_id===jt);X&&(l(X.id),u(tl(X)??"unassigned"),P(X.id),(_e=X.channel)!=null&&_e.provider&&Bg(X.channel.provider))},[jt,Dt]);const Qe=p.useMemo(()=>o&&Dt.find(X=>X.id===o)||null,[o,Dt]),yn=Vg(Qe),Wn=tl(Qe),Cr=p.useMemo(()=>o?(Qe==null?void 0:Qe.collaborator_user_id)??null:null,[o,Qe==null?void 0:Qe.collaborator_user_id]),Dr=p.useMemo(()=>o?(oe==null?void 0:oe.threadId)===o?oe.userId??null:Cr:null,[o,oe,Cr]);p.useEffect(()=>{const X=Array.from(new Set([...H?[H]:[],...Dr?[Dr]:[],...je].filter(Boolean)));if(X.length===0)return;const _e=X.filter(pe=>!yt[pe]&&!vt[pe]);if(_e.length===0)return;let W=!0;return(async()=>{try{const{data:pe,error:Me}=await kt.from("users_profile").select("user_id, display_name").in("user_id",_e);if(!W)return;if(Me)throw Me;const We=Object.fromEntries((pe||[]).map(Ce=>[String(Ce.user_id),String(Ce.display_name||"")]));wt(Ce=>({...Ce,...We}))}catch(pe){console.warn("Failed to fetch user labels",pe)}})(),()=>{W=!1}},[H,Dr,je,yt,vt]);const ui=p.useMemo(()=>{if(!H)return[];const X=new Set(je);return Nt.filter(_e=>X.has(_e.value)).map(_e=>({..._e,label:xt(_e.value)}))},[Nt,H,je,xt]),ir=Dr?String(Dr):null;p.useMemo(()=>{const X=new Map;return ui.forEach(_e=>X.set(_e.value,_e)),ir&&!X.has(ir)&&X.set(ir,{value:ir,label:xt(ir)}),Array.from(X.values())},[ui,ir,xt]),p.useMemo(()=>!Q||!ir?!1:ir===Q,[ir,Q]),((Qe==null?void 0:Qe.status)||"").toLowerCase();const cr=p.useMemo(()=>Q?ir===Q:!1,[Q,ir]),Ha=p.useMemo(()=>{if(!cr)return"Only the collaborator who took over can send messages."},[cr]);p.useEffect(()=>{if(!o){ge(null);return}(oe==null?void 0:oe.threadId)===o&&Cr===oe.userId&&ge(null)},[o,Cr,oe]);const Lf=async()=>{if(Qe){if(!(C!=null&&C.id)){$e.error("You must be signed in to take over");return}try{await T(Qe.id),ge({threadId:Qe.id,userId:C.id}),$e.success("You are now assigned to this chat"),u("assigned"),await I(void 0,{silent:!0})}catch{$e.error("Failed to take over chat")}}},ja=async()=>{if(Qe){if(!ae){$e.error("Only master or super agents can move conversations to Unassigned");return}Ie(!0);try{await A(Qe.id),ge({threadId:Qe.id,userId:null}),$e.success("Conversation moved to Unassigned"),u("unassigned"),await I(void 0,{silent:!0}),await P(Qe.id)}catch{$e.error("Failed to move conversation to Unassigned")}finally{Ie(!1)}}},hu=async()=>{if(Qe){K(!0);try{const{error:X}=await kt.from("threads").update({status:"closed",ai_access_enabled:!0,ai_handoff_at:null,resolved_at:new Date().toISOString(),resolved_by_user_id:(C==null?void 0:C.id)??null,handover_reason:null}).eq("id",Qe.id);if(X)throw X;try{const{data:_e}=await ce.from("users_profile").select("display_name").eq("user_id",(C==null?void 0:C.id)??"").single();await kt.from("messages").insert([{thread_id:Qe.id,direction:null,role:"system",type:"event",body:`Conversation resolved by ${(_e==null?void 0:_e.display_name)||(C==null?void 0:C.email)||"agent"}.`,payload:{event:"resolve",user_id:(C==null?void 0:C.id)??null}}])}catch(_e){console.warn("Failed to insert resolve event message",_e)}$e.success("Conversation resolved"),u("done"),await I(void 0,{silent:!0}),await P(Qe.id)}catch{$e.error("Failed to resolve")}finally{K(!1)}}};p.useLayoutEffect(()=>{const X=w.current;if(X)try{X.scrollTop=X.scrollHeight}catch{}},[j,o]);const Kr=async X=>{var W;const _e=Dt.find(he=>he.id===X);(W=_e==null?void 0:_e.channel)!=null&&W.provider&&Bg(_e.channel.provider),l(X);try{const he=new URLSearchParams(window.location.search);he.set("thread",X),_e!=null&&_e.contact_id&&he.set("contact",_e.contact_id),t(he,{replace:!0})}catch{}await P(X)};p.useEffect(()=>{const X=()=>c==="done"?Dt.find(W=>Vg(W))||null:c==="assigned"?Dt.find(W=>bj(W))||null:Dt.find(W=>wj(W))||null;if(!o){const W=X();W!=null&&W.id&&Kr(W.id);return}const _e=tl(Qe);if(Qe&&_e!==c){const W=X();W!=null&&W.id?Kr(W.id):l(null)}},[c,Dt,o,Qe]);const Mi=async()=>{const X=a.trim();if(!(!X||!o))try{const{checkAIMessageLimit:_e,autoAssignToSuperAgent:W}=await Xi(async()=>{const{checkAIMessageLimit:pe,autoAssignToSuperAgent:Me}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:pe,autoAssignToSuperAgent:Me}},[]),he=await _e(kt,o);if(he.isExceeded&&he.superAgentId){if((await W(kt,o,he.superAgentId)).success){$e.error(`Batas pesan AI telah tercapai(${he.currentCount} / ${he.limit}). Percakapan telah dialihkan ke super agent dan AI access dinonaktifkan.`),await I(void 0,{silent:!0});return}}else if(he.isExceeded&&!he.superAgentId){$e.error(`Batas pesan AI telah tercapai(${he.currentCount} / ${he.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}if(C!=null&&C.id){const{data:pe}=await ce.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month").eq("user_id",C.id).maybeSingle();if(pe!=null&&pe.token_limit_enabled){const Me=new Date,We=new Date(Date.UTC(Me.getUTCFullYear(),Me.getUTCMonth(),Me.getUTCDate(),0,0,0)).toISOString(),Ce=new Date(Date.UTC(Me.getUTCFullYear(),Me.getUTCMonth(),1,0,0,0)).toISOString(),[{data:Re},{data:Ct}]=await Promise.all([ce.from("token_usage_logs").select("total_tokens").eq("user_id",C.id).gte("made_at",We),ce.from("token_usage_logs").select("total_tokens").eq("user_id",C.id).gte("made_at",Ce)]),Fe=(Re||[]).reduce((At,Gr)=>At+Number(Gr.total_tokens||0),0),Ut=(Ct||[]).reduce((At,Gr)=>At+Number(Gr.total_tokens||0),0);if(pe.max_tokens_per_day&&Fe>=pe.max_tokens_per_day){$e.error("Daily token limit reached");return}if(pe.max_tokens_per_month&&Ut>=pe.max_tokens_per_month){$e.error("Monthly token limit reached");return}}}s(""),N(o,X,"assistant")}catch{$e.error("Failed to send message")}},qs=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),Mi())};p.useEffect(()=>{var X;(X=Qe==null?void 0:Qe.channel)!=null&&X.provider&&Bg(Qe.channel.provider)},[(Ft=Qe==null?void 0:Qe.channel)==null?void 0:Ft.provider]);const Ka=X=>{if(!X)return"";const _e=new Date(X),pe=(new Date().getTime()-_e.getTime())/(1e3*60*60);if(pe<24&&pe>=0)return _e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(pe>=24&&pe<48)return"Yesterday";const Me=String(_e.getMonth()+1).padStart(2,"0"),We=String(_e.getDate()).padStart(2,"0"),Ce=_e.getFullYear();return`${Me}/${We}/${Ce}`},Va=X=>{const _e=tl(X);return _e==="done"?i.jsx(Tt,{className:"bg-green-100 text-green-700 border-0",children:"Done"}):_e==="assigned"?i.jsx(Tt,{className:"bg-blue-100 text-blue-700 border-0",children:"Assigned"}):i.jsx(Tt,{className:"bg-secondary text-secondary-foreground",children:"Unassigned"})},Te=X=>{const _e=X.last_msg_at||X.updated_at||X.created_at||"";return Ka(_e)},mt=async()=>{if(fe){if(!ut){$e.error("You do not have permission to delete conversations"),De(null);return}try{Ve(!0),await E(fe.id),$e.success("Conversation deleted"),o===fe.id&&l(null),De(null)}catch{$e.error("Failed to delete conversation")}finally{Ve(!1)}}},bt=X=>{if(!ut){$e.error("You do not have permission to delete conversations");return}De(X)};return S?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Vt,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading conversations..."})]}):O?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-red-600 mb-2",children:["Error: ",O]}),i.jsxs(re,{onClick:()=>{I(void 0,{silent:!0})},variant:"outline",children:[i.jsx(Jx,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):i.jsxs("div",{className:"grid w-full grid-cols-[360px_1fr_320px] h-[calc(100vh-120px)] gap-4",children:[i.jsxs("aside",{className:"rounded-lg border bg-card p-3",children:[i.jsxs("div",{className:"mb-3 pb-2 border-b flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-medium",children:"Conversations"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx(Rle,{value:{dateRange:Ye.dateRange||{},inbox:Ye.inbox||"",label:[],agent:Ye.agent||"",status:Ye.status||"",resolvedBy:Ye.resolvedBy||"",platformId:Ye.platformId||"",channelType:Ye.channelType||"all"},onFilterChange:Rt})})]}),ne(Ye)&&i.jsxs("div",{className:"mb-2 flex flex-wrap gap-1",children:[Ye.channelType&&i.jsxs(Tt,{variant:"secondary",children:["Channel: ",String(Ye.channelType).toLowerCase()==="web"?"Live Chat":String(Ye.channelType)]}),Ye.platformId&&i.jsxs(Tt,{variant:"secondary",children:["Platform: ",de[String(Ye.platformId)]||String(Ye.platformId)]}),Ye.status&&i.jsxs(Tt,{variant:"secondary",children:["Status: ",String(Ye.status)]}),Ye.agent&&i.jsxs(Tt,{variant:"secondary",children:["Agent: ",xt(String(Ye.agent))]}),Ye.resolvedBy&&i.jsxs(Tt,{variant:"secondary",children:["Resolved By: ",xt(String(Ye.resolvedBy))]}),(((_t=Ye.dateRange)==null?void 0:_t.from)||((Vn=Ye.dateRange)==null?void 0:Vn.to))&&i.jsxs(Tt,{variant:"secondary",children:["Date: ",(Ar=Ye.dateRange)!=null&&Ar.from?new Date(Ye.dateRange.from).toLocaleDateString():""," "," ",(Nn=Ye.dateRange)!=null&&Nn.to?new Date(Ye.dateRange.to).toLocaleDateString():""]}),Ye.inbox&&i.jsxs(Tt,{variant:"secondary",children:["Inbox: ",String(Ye.inbox)]})]}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx(rs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(it,{placeholder:"Search...",value:n,onChange:X=>r(X.target.value),className:"pl-10 h-8 text-sm"})]}),(()=>{const X=Dt.filter(Ce=>bj(Ce)),_e=Dt.filter(Ce=>wj(Ce)),W=Dt.filter(Ce=>Vg(Ce)),he=[{key:"assigned",label:"Assigned",count:X.length,className:"bg-blue-50 dark:bg-blue-950 text-blue-600 dark:text-blue-400 border-blue-500",tooltip:"Lihat percakapan yang ditugaskan ke agen"},{key:"unassigned",label:"Unassigned",count:_e.length,className:"bg-red-50 dark:bg-red-950 text-red-600 dark:text-red-400 border-red-500",tooltip:"Lihat percakapan yang menunggu penugasan"},{key:"done",label:"Done",count:W.length,className:"bg-green-50 dark:bg-green-950 text-green-600 dark:text-green-400 border-green-500",tooltip:"Lihat percakapan yang selesai"}],pe=Ce=>i.jsxs("div",{className:"h-[calc(100vh-280px)] flex items-center justify-center rounded-lg border border-dashed text-sm text-muted-foreground bg-muted/40",children:["No ",Ce," threads found"]}),Me=Ce=>i.jsx("div",{className:"space-y-1",children:Ce.map(Re=>{var Ct,Fe,Ut,At;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Kr(Re.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===Re.id?"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800":"hover:bg-muted"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Oa,{className:"h-6 w-6",children:[i.jsx(Bc,{src:Re.channel_logo_url||""}),i.jsx(Ia,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-medium truncate",children:Re.contact_name}),i.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:D4(Re.last_message_preview)||""}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Ec,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-muted-foreground truncate",children:((Ct=Re.channel)==null?void 0:Ct.display_name)||((Fe=Re.channel)==null?void 0:Fe.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[130px] self-stretch justify-between",children:[i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:Te(Re)}),i.jsx("div",{className:"mt-1",children:Va(Re)})]}),Re.channel_provider||(Ut=Re.channel)!=null&&Ut.provider?i.jsx(Tt,{variant:"outline",className:"h-5 px-2 text-[10px] shrink-0",children:Xpe(String(Re.channel_provider||((At=Re.channel)==null?void 0:At.provider)))}):i.jsx("span",{})]})]})}),!Re.contact_id&&ut&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",onClick:Gr=>{Gr.stopPropagation(),bt(Re)},children:i.jsx(ma,{className:"h-4 w-4"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Delete conversation"})})]})]},Re.id)})}),We=()=>c==="assigned"?X.length===0?pe("assigned"):Me(X):c==="unassigned"?_e.length===0?pe("unassigned"):Me(_e):W.length===0?pe("done"):Me(W);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid w-full grid-cols-3 mb-3 bg-card",children:he.map(Ce=>i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{type:"button",onClick:()=>{f(!0),u(Ce.key)},className:`text-xs h-8 border-b-2 transition-colors flex items-center justify-center gap-2 px-2 ${c===Ce.key?`${Ce.className}`:"text-muted-foreground border-transparent hover:bg-muted"}`,"aria-pressed":c===Ce.key,children:[Ce.key==="done"?i.jsx(yh,{className:"h-4 w-4"}):null,i.jsx("span",{children:Ce.label}),i.jsx(Tt,{variant:"secondary",className:"h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Ce.count})]})}),i.jsx(ve,{children:i.jsx("p",{children:Ce.tooltip})})]},Ce.key))}),i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:We()})]})})(),i.jsx(Lb,{open:!!fe,onOpenChange:X=>{X||De(null)},children:i.jsxs(zp,{children:[i.jsxs(Wp,{children:[i.jsx(Hp,{children:"Delete conversation?"}),i.jsx(Kp,{children:"This conversation is not linked to a saved contact. Deleting it will remove all associated messages permanently."})]}),i.jsxs(qp,{children:[i.jsx(Gp,{disabled:Ze,children:"Cancel"}),i.jsx(Vp,{className:"bg-red-600 hover:bg-red-700",onClick:mt,disabled:Ze,children:Ze?"Deleting":"Delete"})]})]})})]}),i.jsx("article",{className:"flex min-h-[70vh] flex-col rounded-lg border bg-card",children:Qe?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 border-b px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Oa,{className:"h-10 w-10",children:[i.jsx(Bc,{src:""}),i.jsx(Ia,{className:"text-sm",children:Qe.contact_name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-semibold leading-tight",children:Qe.contact_name}),Qe.contact_phone&&i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Qe.contact_phone})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(rs,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),i.jsx(it,{value:h,onChange:X=>m(X.target.value),placeholder:"Search messages",className:"pl-7 h-8 w-44 text-xs"})]}),_&&i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx("span",{className:"text-xs font-medium min-w-[48px] text-right",children:ue>0?`${x+1} /${ue}`:"0/0"}),i.jsx(re,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:$t,disabled:ue===0,"aria-label":"Temukan sebelumnya",children:i.jsx(b4,{className:"h-4 w-4"})}),i.jsx(re,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:ht,disabled:ue===0,"aria-label":"Temukan berikutnya",children:i.jsx(Pa,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[Wn==="assigned"&&ae&&i.jsx(re,{size:"sm",className:"h-8 bg-red-100 text-red-600 hover:bg-red-200 disabled:opacity-60",onClick:ja,disabled:ie,children:ie?"Moving":"Move to Unassigned"}),Qe.status!=="closed"&&i.jsx(re,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",onClick:hu,disabled:me,children:me?"Resolving":"Resolve"})]}),i.jsx(Tt,{className:Wn==="done"?"bg-green-100 text-green-700 border-0":Wn==="assigned"?"bg-success text-success-foreground hover:bg-success":"bg-secondary text-secondary-foreground hover:bg-secondary",children:Wn==="done"?"Done":Wn==="assigned"?"Assigned":"Unassigned"})]})]}),i.jsx(Tb,{viewportRef:w,className:"flex-1 p-4",children:i.jsx("div",{className:"space-y-2",children:j.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet. Start the conversation!"}):Le.map(X=>{if(X.type==="date")return i.jsx("div",{className:"flex justify-center my-4",children:i.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground",children:X.label})},X.key);const _e=X.message;return i.jsx("div",{ref:W=>{b.current[_e.id]=W},children:i.jsx(ege,{message:_e,isLastMessage:_e.id===Ne,highlighted:g===_e.id,matches:G[_e.id]??[],activeMatchOrder:(Se==null?void 0:Se.messageId)===_e.id?Se.order:-1})},X.key)})})}),i.jsxs("div",{className:"border-t p-3 space-y-2",children:[!yn&&Dr===(C==null?void 0:C.id)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Br,{placeholder:`Message ${Qe.contact_name}...`,value:a,onChange:X=>s(X.target.value),onKeyDown:qs,className:"flex-1 min-h-[40px] max-h-[120px] resize-none py-2.5",disabled:!cr,title:Ha}),i.jsx(re,{type:"button",onClick:Mi,disabled:!a.trim()||!cr,title:Ha||"Send message",children:i.jsx(cm,{className:"h-4 w-4"})})]}),!yn&&Dr!==(C==null?void 0:C.id)&&i.jsx(re,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:Lf,disabled:!(C!=null&&C.id),title:C!=null&&C.id?void 0:"You must be signed in",children:"Takeover Chat"})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Ec,{className:"h-12 w-12 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No conversation selected"}),i.jsx("p",{children:"Select a conversation from the sidebar to start chatting"})]})})}),i.jsx("aside",{className:"rounded-lg border bg-card p-4",children:Qe?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold",children:Qe.contact_name||"Unknown Contact"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ec,{className:"h-4 w-4 text-blue-500"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tt,{variant:"outline",className:"text-xs",children:((Vr=Qe.channel)==null?void 0:Vr.display_name)||((Ot=Qe.channel)==null?void 0:Ot.provider)||"Unknown"}),((Ln=Qe.channel)==null?void 0:Ln.type)&&i.jsx(Tt,{variant:"secondary",className:"text-xs",children:Qe.channel.type})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Handled By"}),i.jsx("div",{className:"rounded-md border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:H&&xt(H)||""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Collaborator"}),i.jsx("div",{className:"rounded-md border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:ir&&xt(ir)||""})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3",children:"Conversation Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned By"}),i.jsx("span",{children:Qe.assigned_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Handled By"}),i.jsx("span",{children:H&&xt(H)||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved By"}),i.jsx("span",{children:Qe.resolved_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"AI Handoff At"}),i.jsx("span",{children:Qe.ai_handoff_at?new Date(Qe.ai_handoff_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"text-muted-foreground shrink-0",children:"Handover Reason"}),Qe.handover_reason?i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{className:"truncate max-w-[150px] text-right border-b border-dotted border-muted-foreground/50 cursor-help",children:Qe.handover_reason})}),i.jsx(ve,{className:"max-w-[280px]",children:i.jsx("p",{className:"text-xs",children:Qe.handover_reason})})]}):i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned At"}),i.jsx("span",{children:Qe.assigned_at?new Date(Qe.assigned_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created At"}),i.jsx("span",{children:Qe.created_at?new Date(Qe.created_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved At"}),i.jsx("span",{children:Qe.resolved_at?new Date(Qe.resolved_at).toLocaleString():""})]})]})]})]}):i.jsx("div",{className:"text-sm text-muted-foreground",children:"No conversation selected"})})]})}var qb="Checkbox",[nge,P5e]=Rr(qb),[rge,XC]=nge(qb);function age(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=Ba({prop:n,defaultProp:a??!1,onChange:c,caller:qb}),[g,v]=p.useState(null),[x,y]=p.useState(null),w=p.useRef(!1),b=g?!!o||!!g.closest("form"):!0,_={checked:h,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:wl(a)?!1:a,isFormControl:b,bubbleInput:x,setBubbleInput:y};return i.jsx(rge,{scope:t,..._,children:ige(f)?f(_):r})}var Fz="CheckboxTrigger",Uz=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=XC(Fz,e),v=Mt(a,d),x=p.useRef(c);return p.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const w=()=>f(x.current);return y.addEventListener("reset",w),()=>y.removeEventListener("reset",w)}},[s,f]),i.jsx(st.button,{type:"button",role:"checkbox","aria-checked":wl(c)?"mixed":c,"aria-required":u,"data-state":Hz(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:qe(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:qe(n,y=>{f(w=>wl(w)?!0:!w),g&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});Uz.displayName=Fz;var JC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return i.jsx(age,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(Uz,{...f,ref:t,__scopeCheckbox:n}),h&&i.jsx(qz,{__scopeCheckbox:n})]})})});JC.displayName=qb;var Bz="CheckboxIndicator",zz=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,s=XC(Bz,n);return i.jsx(Sr,{present:r||wl(s.checked)||s.checked===!0,children:i.jsx(st.span,{"data-state":Hz(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});zz.displayName=Bz;var Wz="CheckboxBubbleInput",qz=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=XC(Wz,e),g=Mt(n,m),v=NC(s),x=TN(r);p.useEffect(()=>{const w=h;if(!w)return;const b=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(b,"checked").set,j=!a.current;if(v!==s&&k){const S=new Event("click",{bubbles:j});w.indeterminate=wl(s),k.call(w,wl(s)?!1:s),w.dispatchEvent(S)}},[h,v,s,a]);const y=p.useRef(wl(s)?!1:s);return i.jsx(st.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});qz.displayName=Wz;function ige(e){return typeof e=="function"}function wl(e){return e==="indeterminate"}function Hz(e){return wl(e)?"indeterminate":e?"checked":"unchecked"}const Bd=p.forwardRef(({className:e,...t},n)=>i.jsx(JC,{ref:n,className:Pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(zz,{className:Pe("flex items-center justify-center text-current"),children:i.jsx(vN,{className:"h-4 w-4"})})}));Bd.displayName=JC.displayName;const Hb=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:Pe("w-full caption-bottom text-sm",e),...t})}));Hb.displayName="Table";const Kb=p.forwardRef(({className:e,...t},n)=>i.jsx("thead",{ref:n,className:Pe("[&_tr]:border-b",e),...t}));Kb.displayName="TableHeader";const Vb=p.forwardRef(({className:e,...t},n)=>i.jsx("tbody",{ref:n,className:Pe("[&_tr:last-child]:border-0",e),...t}));Vb.displayName="TableBody";const sge=p.forwardRef(({className:e,...t},n)=>i.jsx("tfoot",{ref:n,className:Pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));sge.displayName="TableFooter";const so=p.forwardRef(({className:e,...t},n)=>i.jsx("tr",{ref:n,className:Pe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));so.displayName="TableRow";const er=p.forwardRef(({className:e,...t},n)=>i.jsx("th",{ref:n,className:Pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));er.displayName="TableHead";const qn=p.forwardRef(({className:e,...t},n)=>i.jsx("td",{ref:n,className:Pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));qn.displayName="TableCell";const oge=p.forwardRef(({className:e,...t},n)=>i.jsx("caption",{ref:n,className:Pe("mt-4 text-sm text-muted-foreground",e),...t}));oge.displayName="TableCaption";const lge=e=>D4(String(e??"").replace(/\s+/g," ").trim().slice(0,200))||"",cge=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},uge=e=>{const t=e.trim().toLowerCase();return t==="telegram"||t==="Telegram"?"Telegram":t==="whatsapp"||t==="wa"?"WhatsApp":t==="web"?"Web":e};function dge({open:e,onOpenChange:t,contact:n,onSelectThread:r}){const[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState([]),[d,f]=p.useState("");p.useEffect(()=>{if(!e||!(n!=null&&n.id))return;let g=!0;return(async()=>{try{s(!0),l(null),await Fd();const{data:x,error:y}=await kt.from("threads").select(`
            id,
            contact_id,
            channel_id,
            status,
            last_msg_at,
            created_at,
            channels!inner(id, display_name, provider, type, logo_url, profile_photo_url, external_id),
            messages(id, body, role, direction, created_at, seq)
          `).eq("contact_id",n.id).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});if(!g)return;if(y)throw y;const w=(x||[]).map(k=>{const j=Array.isArray(k.messages)&&k.messages.length>0?k.messages[0]:null,S=lge(j==null?void 0:j.body),O=(j==null?void 0:j.created_at)??k.last_msg_at??null;return{id:String(k.id),contact_id:String(k.contact_id),channel_id:String(k.channel_id),status:k.status,last_msg_at:O,created_at:String(k.created_at),channel:k.channels?{id:String(k.channels.id),display_name:k.channels.display_name??null,provider:k.channels.provider??null,type:k.channels.type??null,logo_url:k.channels.logo_url??null,profile_photo_url:k.channels.profile_photo_url??null,external_id:k.channels.external_id??null}:null,last_message_preview:S}}),b=new Map;for(const k of w)b.has(k.channel_id)||b.set(k.channel_id,k);const _=Array.from(b.values()).sort((k,j)=>{const S=new Date(k.last_msg_at??k.created_at??0).getTime();return new Date(j.last_msg_at??j.created_at??0).getTime()-S});u(_)}catch(x){if(!g)return;const y=x instanceof Error?x.message:"Failed to load conversations";l(y),u([])}finally{if(!g)return;s(!1)}})(),()=>{g=!1}},[e,n==null?void 0:n.id]);const h=p.useMemo(()=>{const g=d.trim().toLowerCase();return g?c.filter(v=>{var b,_;const x=String(((b=v.channel)==null?void 0:b.display_name)||"").toLowerCase(),y=String(((_=v.channel)==null?void 0:_.provider)||"").toLowerCase(),w=String(v.last_message_preview||"").toLowerCase();return x.includes(g)||y.includes(g)||w.includes(g)}):c},[c,d]),m=(n==null?void 0:n.name)||(n==null?void 0:n.phone)||"Contact";return i.jsx(wn,{open:e,onOpenChange:t,children:i.jsxs(hn,{className:"sm:max-w-[720px] max-h-[80vh] overflow-hidden",children:[i.jsx(mn,{children:i.jsxs(pn,{className:"flex items-center gap-2 pr-10",children:[i.jsxs("span",{className:"min-w-0 truncate",children:["Conversations for ",m]}),i.jsx(Tt,{variant:"secondary",className:"shrink-0",children:c.length})]})}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(rs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(it,{value:d,onChange:g=>f(g.target.value),placeholder:"Search by channel or message",className:"pl-9",autoFocus:!0})]})}),i.jsx(Md,{}),i.jsx("div",{className:"max-h-[52vh] overflow-y-auto pr-1 pb-2",children:i.jsx("div",{className:"space-y-2 p-1 pb-2",children:a?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-sm text-muted-foreground",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),"Loading conversations"]}):o?i.jsx("div",{className:"py-10 text-center text-sm text-destructive",children:o}):h.length===0?i.jsx("div",{className:"py-10 text-center text-sm text-muted-foreground",children:d.trim()?"No threads match your search.":"No conversations for this contact yet."}):h.map(g=>{var b,_;const v=((b=g.channel)==null?void 0:b.display_name)||"Channel",x=(((_=g.channel)==null?void 0:_.provider)||"").toString(),y=x?uge(x):"",w=g.last_msg_at||g.created_at;return i.jsxs(re,{type:"button",variant:"ghost",className:"w-full justify-between gap-3 rounded-lg border border-border bg-card px-3 py-3 text-left hover:bg-muted/60 h-auto",onClick:()=>r(g),children:[i.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[i.jsx("div",{className:"mt-0.5 rounded-md bg-blue-600/10 p-2 text-blue-700",children:i.jsx(Ec,{className:"h-4 w-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"min-w-0 truncate font-medium",children:v}),i.jsx(Tt,{variant:g.status==="closed"?"secondary":g.status==="pending"?"outline":"default",className:"capitalize",children:g.status})]}),i.jsx("div",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:g.last_message_preview})]})]}),i.jsxs("div",{className:"flex shrink-0 items-center gap-2 self-stretch",children:[i.jsxs("div",{className:"flex h-full flex-col items-end justify-between",children:[i.jsx("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:cge(w)}),y?i.jsx(Tt,{variant:"outline",className:"h-5 px-2 text-[10px]",children:y}):i.jsx("span",{})]}),i.jsx(Sp,{className:"h-4 w-4 text-muted-foreground"})]})]},g.id)})})}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Each channel can have only one thread for a contact (unless an admin deletes the previous thread)."})]})})}function fge(){var xt,le,Ee,ye;const{hasRole:e}=Ir(),t=e("master_agent");e("super_agent");const[n,r]=p.useState([]),[a,s]=p.useState(1),[o,l]=p.useState(""),[c,u]=p.useState(100),[d,f]=p.useState(null),[h,m]=p.useState(!0),[g,v]=p.useState(!1),[x,y]=p.useState({chatStatus:"",handledBy:"",dateRange:{}}),[w,b]=p.useState(!1),[_,k]=p.useState(!1),[j,S]=p.useState(!1),[O,I]=p.useState(""),[P,N]=p.useState(""),[D,$]=p.useState(""),[U,F]=p.useState(!1),[M,T]=p.useState(!1),[A,L]=p.useState(null),[E,B]=p.useState(!1),[R,C]=p.useState(null),q=ci(),{hasPermission:Z}=Ir(),J=Z("contacts.delete"),{contacts:ee,loading:ae,error:Q,totalCount:oe,fetchContacts:ge,deleteContact:ie,updateContact:Ie,deleteMultipleContacts:me}=EC();p.useEffect(()=>{const H=setTimeout(()=>{ge(a,c,o,x)},300);return()=>clearTimeout(H)},[o,a,c,x]);const K=H=>{r(H?ee.map(z=>z.id):[])},fe=(H,z)=>{r(z?[...n,H]:n.filter(G=>G!==H))},De=()=>{if(n.length!==0){if(!J){$e.error("You do not have permission to delete contacts");return}k(!0)}},Ze=H=>{C(H),B(!0)},Ve=H=>{if(!R)return;const z=new URLSearchParams({menu:"chat",contact:R.id,thread:H.id});B(!1),q({pathname:"/chat",search:z.toString()}),$e.success(`Opening conversation with ${R.name||"contact"}`)},ut=H=>{L(H),T(!0)},Ye=H=>{L(H),I(H.name||""),N(H.phone||""),$(H.notes||""),S(!0)},ot=async()=>{try{await me(n),r([]),k(!1),$e.success(`Successfully deleted ${n.length} contact(s)`)}catch{$e.error("Failed to delete contacts")}},te=async()=>{if(A)try{F(!0),await Ie(A.id,{name:O.trim()||null,phone:P.trim()||null,notes:D.trim()||null}),$e.success("Contact updated"),S(!1)}catch{$e.error("Failed to update contact")}finally{F(!1)}},Xe=()=>{ge(a,c,o,x),$e.info("Contacts refreshed")},dt=(H,z)=>{y(G=>({...G,[H]:z}))},de=(H,z)=>{y(G=>({...G,dateRange:{...G.dateRange,[H]:z}}))},we=()=>{y({chatStatus:"",handledBy:"",dateRange:{}})},se=Object.values(x).some(H=>typeof H=="string"?H!=="":Object.values(H).some(z=>z!=="")),Be=n.length===ee.length&&ee.length>0,je=n.length>0&&n.length<ee.length,Ge=H=>{d===H?m(!h):(f(H),m(!0))},vt=(()=>{if(!d)return ee;const H=[...ee];return H.sort((z,G)=>{const ue=z[d],Se=G[d];if(ue==null&&Se==null)return 0;if(ue==null)return h?1:-1;if(Se==null)return h?-1:1;if(d==="chatCreatedAtISO"||d==="created_at"){const V=new Date(ue).getTime(),ne=new Date(Se).getTime();return h?V-ne:ne-V}const Ne=String(ue).toLowerCase(),Le=String(Se).toLowerCase();return Ne<Le?h?-1:1:Ne>Le?h?1:-1:0}),H})(),wt=(()=>{let H=vt;return x.handledBy&&(H=H.filter(z=>z.handledBy===x.handledBy)),H})(),Nt=wt.length,yt=H=>{if(!H||H==="")return i.jsx("span",{className:"text-muted-foreground",children:""});const z=H.toLowerCase(),G=z==="open"?"bg-blue-100 text-blue-700":z==="assigned"?"bg-indigo-100 text-indigo-700":z==="pending"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700",ue=z.charAt(0).toUpperCase()+z.slice(1);return i.jsx(Tt,{className:`${G} border-0`,children:ue})};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total Contacts: ",ae?"...":`${Nt.toLocaleString()} of ${oe.toLocaleString()}`]})]}),i.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(Ns,{open:g,onOpenChange:v,children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(re,{variant:"outline",className:"gap-2",children:[i.jsx(S4,{className:"w-4 h-4"}),"Filter",se&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})}),i.jsx(Qi,{className:"w-80 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Filter Contacts"}),se&&i.jsx(re,{variant:"ghost",size:"sm",onClick:we,className:"h-8 px-2 text-xs",children:"Clear All"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Chat Status"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Filter berdasarkan status percakapan: Open (terbuka), Assigned (ditangani), Pending (menunggu), atau Closed (tertutup)"})})]})]}),i.jsxs(rn,{value:x.chatStatus,onValueChange:H=>dt("chatStatus",H==="all"?"":H),children:[i.jsx(en,{className:"h-8",children:i.jsx(Xt,{placeholder:"All statuses"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All statuses"}),i.jsx(at,{value:"open",children:"Open"}),i.jsx(at,{value:"assigned",children:"Assigned"}),i.jsx(at,{value:"pending",children:"Pending"}),i.jsx(at,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Handled By"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Filter berdasarkan siapa yang menangani percakapan: Assigned (ditugaskan ke agen) atau Unassigned (belum ditugaskan)"})})]})]}),i.jsxs(rn,{value:x.handledBy||"",onValueChange:H=>dt("handledBy",H==="all"?"":H),children:[i.jsx(en,{className:"h-8",children:i.jsx(Xt,{placeholder:"All agents"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All"}),i.jsx(at,{value:"assigned",children:"Assigned"}),i.jsx(at,{value:"unassigned",children:"Unassigned"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Filter berdasarkan rentang tanggal kontak dibuat. Pilih tanggal mulai dan tanggal akhir untuk membatasi hasil pencarian"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(it,{type:"date",placeholder:"From",value:x.dateRange.from,onChange:H=>de("from",H.target.value),className:"h-8 text-xs"})}),i.jsx("div",{children:i.jsx(it,{type:"date",placeholder:"To",value:x.dateRange.to,onChange:H=>de("to",H.target.value),className:"h-8 text-xs"})})]})]})]})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(rs,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),i.jsx(it,{placeholder:"Cari berdasarkan Nama atau Telepon",className:"pl-10 pr-8 w-80",value:o,onChange:H=>l(H.target.value)}),o&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:i.jsx(mf,{className:"h-4 w-4"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Hapus pencarian"})})]})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",size:"sm",onClick:Xe,disabled:ae,children:i.jsx(Jx,{className:`w-4 h-4 ${ae?"animate-spin":""}`})})}),i.jsx(ve,{children:i.jsx("p",{children:"Segarkan daftar kontak"})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[J&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(re,{variant:n.length>0?"destructive":"outline",className:n.length>0?"bg-red-600 hover:bg-red-700 text-white":"",onClick:De,disabled:n.length===0,children:["Delete Selected (",n.length,")"]})}),i.jsx(ve,{children:i.jsx("p",{children:"Hapus kontak yang dipilih"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",onClick:async()=>{try{b(!0);const{data:H,error:z}=await kt.from("contacts").select(`
                            id,
                            name,
                            phone,
                            email,
                            notes,
                            created_at,
                            threads!left(
                              status,
                              assignee_user_id,
                              created_at,
                              channels(display_name, provider, type)
                            )
                          `);if(z)throw z;const G=(H||[]).map(V=>{var ke,et,nt;const ne=(V.threads||[])[0]||null;return{id:V.id,name:V.name??"",phone:V.phone??"",email:V.email??"",notes:V.notes??"",contact_created_at:V.created_at??"",chat_status:(ne==null?void 0:ne.status)??"",handled_by:(ne==null?void 0:ne.assignee_user_id)??"",chat_channel:((ke=ne==null?void 0:ne.channels)==null?void 0:ke.display_name)??"",chat_channel_provider:((et=ne==null?void 0:ne.channels)==null?void 0:et.provider)??"",chat_channel_type:((nt=ne==null?void 0:ne.channels)==null?void 0:nt.type)??"",chat_created_at:(ne==null?void 0:ne.created_at)??""}}),ue=[["ID","Name","Phone","Email","Notes","Contact Created At","Chat Status","Handled By","Chat Channel","Chat Channel Provider","Chat Channel Type","Chat Created At"].join(","),...G.map(V=>{var ne;return[V.id,V.name,V.phone,V.email,(ne=V.notes)==null?void 0:ne.replace(/"/g,'""'),V.contact_created_at,V.chat_status,V.handled_by,V.chat_channel,V.chat_channel_provider,V.chat_channel_type,V.chat_created_at].map(ke=>`"${ke??""}"`).join(",")})].join(`
`),Se=new Blob([ue],{type:"text/csv;charset=utf-8;"}),Ne=URL.createObjectURL(Se),Le=document.createElement("a");Le.href=Ne,Le.setAttribute("download",`contacts-${new Date().toISOString()}.csv`),document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(Ne),$e.success("Contacts exported to CSV")}catch(H){console.error("Failed to export contacts:",H),$e.error("Failed to export contacts")}finally{b(!1)}},disabled:w,children:w?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):"Export"})}),i.jsx(ve,{children:i.jsx("p",{children:"Ekspor daftar kontak"})})]})]})]})]}),Q&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",Q]})}),i.jsx(Ue,{children:i.jsx(lt,{className:"p-0",children:i.jsxs(Hb,{children:[i.jsx(Kb,{children:i.jsxs(so,{children:[i.jsx(er,{className:"w-12",children:i.jsx(Bd,{checked:Be,onCheckedChange:K,"aria-label":"Select all contacts",className:je?"data-[state=checked]:bg-blue-600":""})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{className:"cursor-help",children:"ACTION"})}),i.jsx(ve,{children:i.jsx("p",{children:"Aksi yang dapat dilakukan pada kontak (lihat, edit, hapus)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("name"),children:["NAME ",d==="name"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Nama kontak (klik untuk mengurutkan)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("phone"),children:["PHONE ",d==="phone"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Nomor telepon kontak (klik untuk mengurutkan)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("notes"),children:["NOTE ",d==="notes"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Catatan atau keterangan tambahan kontak (klik untuk mengurutkan)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("inbox"),children:["CHANNEL ",d==="inbox"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Saluran komunikasi kontak (klik untuk mengurutkan)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("channelType"),children:["PLATFORM ",d==="channelType"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Platform komunikasi (WhatsApp, Telegram, dll) (klik untuk mengurutkan)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("chatStatus"),children:["CHAT STATUS ",d==="chatStatus"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Status percakapan (Open, Pending, Closed) (klik untuk mengurutkan)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("chatCreatedAtISO"),children:["CREATED AT ",d==="chatCreatedAtISO"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Tanggal dan waktu kontak dibuat (klik untuk mengurutkan)"})})]})}),i.jsx(er,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Ge("handledBy"),children:["HANDLED BY ",d==="handledBy"?h?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Agen yang menangani percakapan (klik untuk mengurutkan)"})})]})})]})}),i.jsx(Vb,{children:ae?i.jsx(so,{children:i.jsx(qn,{colSpan:10,className:"text-center py-8",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Vt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading contacts..."})]})})}):ee.length===0?i.jsx(so,{children:i.jsx(qn,{colSpan:10,className:"text-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:o?"No contacts found matching your search.":"No contacts found."})})}):wt.map(H=>{var z;return i.jsxs(so,{className:`hover:bg-muted/50 ${n.includes(H.id)?"bg-blue-50":""}`,children:[i.jsx(qn,{children:i.jsx(Bd,{checked:n.includes(H.id),onCheckedChange:G=>fe(H.id,G),"aria-label":`Select ${H.name}`})}),i.jsx(qn,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white","aria-label":"View detailed conversation",onClick:()=>Ze(H),variant:"ghost",title:"Open conversation",children:i.jsx(Ec,{className:"h-4 w-4"})})}),i.jsx(ve,{children:"Open conversation"})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-green-600 hover:bg-green-700 text-white","aria-label":"View contact details",onClick:()=>ut(H),variant:"ghost",title:"View details",children:i.jsx(xN,{className:"h-4 w-4"})})}),i.jsx(ve,{children:"View details"})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white","aria-label":"Edit contact",onClick:()=>Ye(H),variant:"ghost",title:"Edit contact",children:i.jsx(Ea,{className:"h-4 w-4"})})}),i.jsx(ve,{children:"Edit contact"})]})]})}),i.jsx(qn,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(Oa,{className:"h-8 w-8",children:i.jsx(Ia,{className:"text-xs",children:(z=(H.name||H.phone||"?")[0])==null?void 0:z.toUpperCase()})}),i.jsx("div",{className:"min-w-0",children:i.jsx("div",{className:"truncate",children:H.name||"Unnamed Contact"})})]})}),i.jsx(qn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:H.phone||"-"}),H.phone&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(H.phone),$e.success("Phone copied")},children:i.jsx(Ih,{className:"h-3 w-3"})})}),i.jsx(ve,{children:"Copy phone"})]})]})}),i.jsx(qn,{children:H.notes?i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{className:"line-clamp-1 max-w-[260px] inline-block align-middle",children:H.notes})}),i.jsx(ve,{className:"max-w-sm",children:H.notes})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(qn,{children:H.inbox?i.jsx(Tt,{variant:"outline",children:H.inbox}):""}),i.jsx(qn,{children:H.channelProvider?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Tt,{variant:"secondary",className:"capitalize",children:H.channelProvider})}):i.jsx("span",{className:"text-muted-foreground",children:""})}),i.jsx(qn,{children:yt(H.chatStatus)}),i.jsx(qn,{className:"font-mono text-sm whitespace-nowrap",children:H.chatCreatedAt||"-"}),i.jsx(qn,{children:H.handledBy&&H.handledBy!==""?i.jsx(Tt,{className:"bg-purple-100 text-purple-700 border-0",children:H.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})})]},H.id)})})]})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(re,{variant:"outline",size:"sm",disabled:a===1||ae,onClick:()=>s(a-1),children:i.jsx(yN,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm",children:["Page ",i.jsx("span",{className:"font-medium",children:a})," of ",i.jsx("span",{className:"font-medium",children:Math.max(1,Math.ceil(Nt/c))})]}),i.jsx(re,{variant:"outline",size:"sm",disabled:a>=Math.ceil(Nt/c)||ae,onClick:()=>s(a+1),children:i.jsx(Sp,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"Items per page:"}),i.jsxs(rn,{value:c.toString(),onValueChange:H=>u(parseInt(H)),children:[i.jsx(en,{className:"w-20 h-8",children:i.jsx(Xt,{})}),i.jsxs(tn,{children:[i.jsx(at,{value:"50",children:"50"}),i.jsx(at,{value:"100",children:"100"}),i.jsx(at,{value:"200",children:"200"})]})]}),i.jsx("span",{children:"rows"})]}),i.jsxs("span",{children:["Total: ",i.jsx("span",{className:"font-medium",children:Nt.toLocaleString()})]})]})]}),i.jsx(Lb,{open:_,onOpenChange:k,children:i.jsxs(zp,{children:[i.jsxs(Wp,{children:[i.jsx(Hp,{children:"Are you sure?"}),i.jsxs(Kp,{children:["This action cannot be undone. This will permanently delete ",n.length," contact",n.length>1?"s":"","."]})]}),i.jsxs(qp,{children:[i.jsx(Gp,{children:"Cancel"}),i.jsxs(Vp,{onClick:ot,className:"bg-red-600 hover:bg-red-700",children:["Delete ",n.length," Contact",n.length>1?"s":""]})]})]})}),i.jsx(wn,{open:j,onOpenChange:S,children:i.jsxs(hn,{children:[i.jsx(mn,{children:i.jsx(pn,{children:"Edit Contact"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Je,{children:"Name"}),i.jsx(it,{value:O,onChange:H=>I(H.target.value),placeholder:"Full name"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Je,{children:"Phone"}),i.jsx(it,{value:P,onChange:H=>N(H.target.value),placeholder:"Phone number"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Je,{children:"Notes"}),i.jsx(Br,{value:D,onChange:H=>$(H.target.value),placeholder:"Notes"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx(re,{variant:"outline",onClick:()=>S(!1),disabled:U,children:"Cancel"}),i.jsx(re,{onClick:te,disabled:U,className:"bg-blue-600 hover:bg-blue-700",children:U?"Saving":"Save"})]})]})]})}),i.jsx(wn,{open:M,onOpenChange:T,children:i.jsxs(hn,{className:"max-w-2xl",children:[i.jsx(mn,{children:i.jsxs(pn,{className:"flex items-center gap-3",children:[i.jsx(Oa,{className:"h-10 w-10",children:i.jsx(Ia,{children:((le=(xt=A==null?void 0:A.name)==null?void 0:xt[0])==null?void 0:le.toUpperCase())||((ye=(Ee=A==null?void 0:A.phone)==null?void 0:Ee[0])==null?void 0:ye.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:(A==null?void 0:A.name)||"Unnamed Contact"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact Details"})]})]})}),A&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cy,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:A.name||"Unnamed Contact"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(XV,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:A.phone||"-"}),A.phone&&i.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{navigator.clipboard.writeText(A.phone),$e.success("Phone copied to clipboard")},children:i.jsx(Ih,{className:"h-3 w-3"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),i.jsx("div",{className:"p-3 bg-muted rounded-md",children:A.notes?i.jsx("p",{className:"text-sm",children:A.notes}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"No notes"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Label Names"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:A.labelNames||"-"})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsx("div",{className:"flex items-center gap-2",children:A.inbox?i.jsx(Tt,{variant:"outline",children:A.inbox}):i.jsx("span",{className:"text-muted-foreground",children:""})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Chat Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cv,{className:"h-4 w-4 text-muted-foreground"}),yt(A.chatStatus)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Handled By"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cy,{className:"h-4 w-4 text-muted-foreground"}),A.handledBy&&A.handledBy!==""?i.jsx(Tt,{className:"bg-purple-100 text-purple-700 border-0",children:A.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Contact Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:A.created_at?new Date(A.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{className:"text-sm font-medium text-muted-foreground",children:"Chat Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:A.chatCreatedAt||"-"})]})]})]}),t&&A&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsxs(Je,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[i.jsx(N4,{className:"h-4 w-4"}),"Contact UUID"]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[i.jsx("code",{className:"flex-1 font-mono text-xs text-foreground break-all",children:A.id}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>{navigator.clipboard.writeText(A.id),$e.success("Contact UUID copied to clipboard")},children:i.jsx(Ih,{className:"h-4 w-4"})})}),i.jsx(ve,{children:"Copy UUID"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this contact. Use this UUID for GDPR deletion requests or system integrations."})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsxs(re,{onClick:()=>Ze(A),className:"flex-1",children:[i.jsx(Ec,{className:"h-4 w-4 mr-2"}),"View Conversation"]}),i.jsxs(re,{variant:"outline",onClick:()=>Ye(A),className:"flex-1",children:[i.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Edit Contact"]})]})]})]})}),i.jsx(dge,{open:E,onOpenChange:H=>{B(H),H||C(null)},contact:R?{id:R.id,name:R.name,phone:R.phone}:null,onSelectThread:Ve})]})}const Kz=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=async()=>{try{r(!0),s(null);const{data:{user:f}}=await ce.auth.getUser();if(!f){t([]);return}const{data:h,error:m}=await ce.from("org_members").select("org_id").eq("user_id",f.id);if(m||!h||h.length===0){t([]);return}const g=h.map(N=>N.org_id),{data:v}=await ce.from("user_roles").select("role_id").eq("user_id",f.id);let x=!1,y=!1,w=!1;if(v&&v.length>0){const N=v.map(U=>U.role_id),{data:D}=await ce.from("roles").select("id, name").in("id",N),$=(D||[]).map(U=>(U.name||"").toLowerCase());x=$.includes("master_agent"),y=$.includes("super_agent"),w=$.includes("agent")&&!x&&!y}let b=null;if(w){const{data:N}=await ce.from("channel_agents").select("channel_id").eq("user_id",f.id);b=new Set((N||[]).map(D=>D.channel_id))}const{data:_,error:k}=await ce.from("channels").select(`
          *
        `).in("org_id",g).order("created_at",{ascending:!1});if(k){console.error("Error fetching channels:",k),s(k.message);return}const{data:j,error:S}=await ce.from("org_members").select(`
          org_id,
          user_id,
          role,
          v_users!inner (
            display_name,
            email
          )
        `).in("org_id",g);S&&console.error("Error fetching org members for platforms:",S);const O={};for(const N of j||[]){const D=N.org_id;O[D]||(O[D]=[]),O[D].push(N)}const I=(_||[]).filter(N=>b?b.has(N.id):!0),P=await Promise.all(I.map(async N=>{try{const{data:D}=await ce.from("channel_agents").select("user_id").eq("channel_id",N.id),$=(D||[]).map(M=>M.user_id);let U=[];if($.length>0){const[M,T]=await Promise.all([ce.from("users_profile").select("user_id, display_name").in("user_id",$),ce.from("v_users").select("id, display_name, email").in("id",$)]),A=M.data||[],L=T.data||[],E={};L.forEach(B=>{E[B.id]={display_name:B.display_name,email:B.email}}),A.forEach(B=>{var R,C;E[B.user_id]={display_name:B.display_name??((R=E[B.user_id])==null?void 0:R.display_name),email:(C=E[B.user_id])==null?void 0:C.email}}),U=Object.entries(E).map(([B,R])=>({user_id:B,...R}))}const F=$.map(M=>{const T=U.find(A=>A.user_id===M||A.id===M)||{};return{user_id:M,display_name:T.display_name||(T==null?void 0:T.display_name),email:T.email}});return{...N,provider:N.provider,status:N.is_active?"active":"inactive",human_agents:F,super_agent_id:N.super_agent_id??null,credentials:(N==null?void 0:N.credentials)??null}}catch{return{...N,provider:N.provider,status:N.is_active?"active":"inactive",human_agents:[],super_agent_id:N.super_agent_id??null,credentials:(N==null?void 0:N.credentials)??null}}}));t(P)}catch(f){console.error("Error fetching platforms:",f),s("Failed to fetch platforms")}finally{r(!1)}},l=async f=>{var h;try{s(null);const{data:{user:m}}=await ce.auth.getUser();if(!m)throw new Error("User not authenticated");const{data:g,error:v}=await ce.from("org_members").select("org_id").eq("user_id",m.id).limit(1);if(v)throw v;const x=(h=g==null?void 0:g[0])==null?void 0:h.org_id;if(!x)throw new Error("User not found in any organization");if(!f.ai_profile_id)throw new Error("AI agent is required when creating a platform");const{data:y,error:w}=await ce.from("ai_profiles").select("super_agent_id").eq("id",f.ai_profile_id).single();if(w)throw w;const b=y==null?void 0:y.super_agent_id;if(!b)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");const _=f.provider==="whatsapp"?String(f.display_name||"").toLowerCase().replace(/\s/g,""):null,{data:k,error:j}=await ce.from("channels").insert({org_id:x,display_name:f.display_name,credentials:f.provider==="whatsapp"?{waha_session_name:_}:{},provider:f.provider,type:"inbox",profile_photo_url:f.profile_photo_url,ai_profile_id:f.ai_profile_id,super_agent_id:b,is_active:!0,external_id:f.provider==="whatsapp"?_:null}).select().single();if(j)throw j;if(f.human_agent_ids&&f.human_agent_ids.length>0){const S=f.human_agent_ids.map(I=>({channel_id:k.id,user_id:I})),{error:O}=await ce.from("channel_agents").insert(S);O&&console.warn("Failed to attach channel agents on create:",O)}await o();try{await nn({action:"channel.create",resource:"channel",resourceId:(k==null?void 0:k.id)??null,context:{...f,super_agent_id:b}})}catch{}return k}catch(m){throw console.error("Error creating platform:",m),s(m.message||"Failed to create platform"),m}},c=async(f,h)=>{try{s(null);const m={};if(typeof h.display_name<"u"&&(m.display_name=h.display_name),typeof h.profile_photo_url<"u"&&(m.profile_photo_url=h.profile_photo_url),typeof h.ai_profile_id<"u"&&(m.ai_profile_id=h.ai_profile_id,h.ai_profile_id)){const{data:g,error:v}=await ce.from("ai_profiles").select("super_agent_id").eq("id",h.ai_profile_id).single();if(v)throw v;const x=g==null?void 0:g.super_agent_id;if(!x)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");m.super_agent_id=x}if(typeof h.provider<"u"&&(m.provider=h.provider),Object.keys(m).length>0){const{error:g}=await ce.from("channels").update(m).eq("id",f);if(g)throw g}if(h.human_agent_ids!==void 0){const{error:g}=await ce.from("channel_agents").delete().eq("channel_id",f);if(g&&console.error("Error removing human agents:",g),h.human_agent_ids.length>0){const v=h.human_agent_ids.map(y=>({channel_id:f,user_id:y})),{error:x}=await ce.from("channel_agents").insert(v);x&&console.error("Error adding human agents:",x)}}await o();try{await nn({action:"channel.update",resource:"channel",resourceId:f,context:h})}catch{}}catch(m){throw console.error("Error updating platform:",m),s(m.message||"Failed to update platform"),m}},u=async(f,h,m)=>{const g=[/^image\//i],v=/\.(png|jpe?g|webp)$/i;if(!(g.some(b=>b.test(h.type||""))||v.test(h.name||"")))throw new Error("Only image files are allowed (PNG, JPG, WEBP).");const y=5*1024*1024;if(typeof h.size=="number"&&h.size>y)throw new Error("Image is too large. Maximum size is 5 MB.");async function w(b){try{if(typeof window>"u")return null;const _=document.createElement("img"),k=URL.createObjectURL(b);try{await new Promise((I,P)=>{_.onload=()=>I(),_.onerror=P,_.src=k})}finally{URL.revokeObjectURL(k)}const j=document.createElement("canvas");j.width=_.naturalWidth||_.width,j.height=_.naturalHeight||_.height;const S=j.getContext("2d");return S?(S.drawImage(_,0,0,j.width,j.height),await new Promise(I=>j.toBlob(P=>I(P),"image/png"))):null}catch{return null}}try{const{data:{user:b}}=await ce.auth.getUser();if(!b)throw new Error("User not authenticated");let _=m||"";if(!_){const{data:U,error:F}=await ce.from("channels").select("org_id").eq("id",f).single();if(F)throw F;_=U==null?void 0:U.org_id}if(!_)throw new Error("Missing org_id for channel");const k="channel-assets",j=`${_}/${f}/profile/avatar.png`,S=await w(h),O=S||h,I=S?"image/png":h.type||"image/*",{error:P}=await ce.storage.from(k).upload(j,O,{cacheControl:"31536000",upsert:!0,contentType:I});if(P)throw P;const{data:N}=ce.storage.from(k).getPublicUrl(j),D=N==null?void 0:N.publicUrl,{error:$}=await ce.from("channels").update({logo_url:D,profile_photo_url:D}).eq("id",f);if($)throw $;try{await nn({action:"channel.avatar.update",resource:"channel",resourceId:f,context:{objectPath:j}})}catch{}return D}catch(b){throw console.error("Error uploading channel avatar:",b),new Error((b==null?void 0:b.message)||"Failed to upload channel avatar")}},d=async(f,h)=>{try{const{data:{user:m}}=await ce.auth.getUser();if(!m)throw new Error("User not authenticated");let g=h||"";if(!g){const{data:w,error:b}=await ce.from("channels").select("org_id").eq("id",f).single();if(b)throw b;g=w==null?void 0:w.org_id}if(!g)throw new Error("Missing org_id for channel");const v="channel-assets",x=`${g}/${f}/profile/avatar.png`;try{await ce.storage.from(v).remove([x])}catch{}const{error:y}=await ce.from("channels").update({logo_url:null,profile_photo_url:null}).eq("id",f);if(y)throw y;try{await nn({action:"channel.avatar.delete",resource:"channel",resourceId:f,context:{objectPath:x}})}catch{}}catch(m){throw console.error("Error deleting channel avatar:",m),new Error((m==null?void 0:m.message)||"Failed to delete channel avatar")}};return p.useEffect(()=>{o()},[]),{platforms:e,loading:n,error:a,fetchPlatforms:o,createPlatform:l,updatePlatform:c,uploadChannelAvatar:u,deleteChannelAvatar:d}},hge=()=>{const[e,t]=p.useState({}),[n,r]=p.useState(!1),[a,s]=p.useState(null),o=p.useCallback(async l=>{if(!l)return[];try{r(!0),s(null);const{data:c,error:u}=await ce.from("channels").select("*").eq("org_id",l).order("created_at",{ascending:!1});if(u)return s(u.message),[];const d=c||[];return t(f=>({...f,[l]:d})),d}catch(c){return s(c instanceof Error?c.message:"Failed to fetch channels"),[]}finally{r(!1)}},[]);return{channelsByOrg:e,loading:n,error:a,fetchByOrgId:o}},Vz=()=>{const{user:e}=ia(),{userRoles:t,loading:n}=Ir(),[r,a]=p.useState("none"),[s,o]=p.useState(null),[l,c]=p.useState(!0),[u,d]=p.useState(null),f=p.useMemo(()=>t.map(x=>((x==null?void 0:x.name)??"").toLowerCase()),[t]),h=f.includes("master_agent"),m=f.includes("super_agent"),g=f.includes("agent");return p.useEffect(()=>{let x=!0;const y=(w,b,_)=>{x&&((_==null?void 0:_.loading)!==void 0&&c(_.loading),(_==null?void 0:_.error)!==void 0&&d(_.error),a(w),o(b))};return e!=null&&e.id?n?(c(!0),()=>{x=!1}):h?(y("all",null,{loading:!1,error:null}),()=>{x=!1}):m?(y("super",e.id,{loading:!1,error:null}),()=>{x=!1}):g?(c(!0),d(null),(async()=>{try{await Fd();const{data:w,error:b}=await ce.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(!x)return;if(b)throw b;const _=(w==null?void 0:w.super_agent_id)??null;_?y("agent",_,{loading:!1,error:null}):y("none",null,{loading:!1,error:"Agent belum memiliki Super Agent penanggung jawab."})}catch(w){if(!x)return;console.error("Failed to resolve agent super scope",w),y("none",null,{loading:!1,error:w instanceof Error?w.message:"Gagal memuat cakupan agen AI."})}})(),()=>{x=!1}):(f.length>0?y("all",null,{loading:!1,error:null}):c(!0),()=>{x=!1}):(y("none",null,{loading:!1,error:null}),()=>{x=!1})},[e==null?void 0:e.id,n,h,m,g,f]),{mode:r,superAgentId:s,loading:l,error:u,refresh:async()=>{if(!(e!=null&&e.id)||!g)return s;c(!0),d(null);try{await Fd();const{data:x,error:y}=await ce.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(y)throw y;const w=(x==null?void 0:x.super_agent_id)??null;return w?(a("agent"),o(w)):(a("none"),o(null),d("Agent belum memiliki Super Agent penanggung jawab.")),w}catch(x){return console.error("Failed to refresh agent super scope",x),a("none"),o(null),d(x instanceof Error?x.message:"Gagal memuat cakupan agen AI."),null}finally{c(!1)}}}},Gb=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=p.useState({current:null})[0],{user:l}=ia(),{mode:c,superAgentId:u,loading:d,error:f}=Vz(),h=p.useMemo(()=>{const g="v2",v=(l==null?void 0:l.id)??"anon";return c==="all"?`app.cachedAIAgents:${g}:${v}:all`:c==="none"?`app.cachedAIAgents:${g}:${v}:none`:`app.cachedAIAgents:${g}:${v}:${u??"none"}`},[c,u,l==null?void 0:l.id]),m=async()=>{if(!d)try{const g=`${c}:${u??"null"}`;if(o.current===g)return;if(o.current=g,r(!0),s(f??null),c==="none"){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}await Fd();const v="id, org_id, name, description, system_prompt, welcome_message, transfer_conditions, stop_ai_after_handoff, response_temperature, created_at, auto_resolve_after_minutes, enable_resolve, super_agent_id";let x=null,y=null;if(c==="super"||c==="agent"){if(!u){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}const{data:w,error:b}=await ce.from("ai_profiles").select(v).eq("super_agent_id",u).order("created_at",{ascending:!1});if(x=w,y=b,(y==null?void 0:y.code)==="42703"){const _=await ce.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=_.data,y=_.error}}else{const{data:w,error:b}=await ce.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=w,y=b}if(y){console.error("Error fetching AI agents:",y),s(y.message),t([]);return}t(x||[]);try{localStorage.setItem(h,JSON.stringify(x||[]))}catch{}}catch(g){console.error("Error fetching AI agents:",g),s("Failed to fetch AI agents"),t([])}finally{o.current=null,r(!1)}};return p.useEffect(()=>{if(d){r(!0);return}if(c==="none"){t([]),s(f??"Tidak ada agen AI yang tersedia untuk akun ini."),r(!1);return}try{const x=localStorage.getItem(h);if(x){const y=JSON.parse(x);Array.isArray(y)&&t(y)}}catch{}const v=setTimeout(()=>m(),50);return()=>clearTimeout(v)},[d,c,f,h]),{aiAgents:e,loading:n||d,error:a,fetchAIAgents:m,scopeMode:c,superAgentId:u}};function Yb({options:e,value:t,onChange:n,onValueChange:r,placeholder:a="Select...",disabled:s,className:o}){const[l,c]=p.useState(!1),u=new Set(t),d=g=>{n&&n(g),r&&r(g)},f=g=>{const v=new Set(u);v.has(g)?v.delete(g):v.add(g),d(Array.from(v))},h=e.filter(g=>u.has(g.value)).map(g=>g.label),m=h.length===0?a:`${h.length} selected`;return i.jsxs(Ns,{open:l,onOpenChange:c,children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(re,{type:"button",variant:"outline",role:"combobox","aria-expanded":l,disabled:s,className:Pe("justify-between w-64",o),children:[i.jsx("span",{className:"truncate text-left",children:m}),i.jsx("span",{className:"ml-2 text-muted-foreground",children:""})]})}),i.jsx(Qi,{className:"p-0 w-80",align:"start",onOpenAutoFocus:g=>g.preventDefault(),children:i.jsxs(Nm,{children:[i.jsx(Cm,{placeholder:"Search..."}),i.jsxs(a6,{children:[i.jsx(Am,{children:"No results found."}),i.jsx(Em,{children:e.map(g=>i.jsxs(Tm,{onSelect:v=>{f(g.value)},className:"cursor-pointer",children:[i.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",onClick:v=>{v.preventDefault(),v.stopPropagation(),f(g.value)},children:i.jsx(Bd,{checked:u.has(g.value),onCheckedChange:()=>f(g.value)})}),i.jsx("span",{children:g.label})]},g.value))})]})]})})]})}const mge={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},fd=mge??{},Gz=e=>e.replace(/\/$/,""),K1=(()=>{const e=fd==null?void 0:fd.VITE_APP_ORIGIN;return e?Gz(e):"https://synkaai.netlify.app"})(),gO=e=>`${K1}/livechat/${e}`,Dv=(()=>{const e=fd==null?void 0:fd.VITE_WAHA_BASE_URL;return Gz(e||"https://waha-plus-production-97c1.up.railway.app")})(),pge=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=nu(),{user:s}=ia(),{hasPermission:o,hasRole:l}=Ir(),{aiAgents:c,loading:u}=Gb(),{agents:d,loading:f}=ql(),[h,m]=p.useState({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(!1),[w,b]=p.useState(null),[_,k]=p.useState(null),[j,S]=p.useState(null);p.useRef(!1);const[O,I]=p.useState(!1),[P,N]=p.useState(!1),[D,$]=p.useState(null),U=o("channels.create"),F=l("super_agent");p.useEffect(()=>{e&&F&&s!=null&&s.id&&($(s.id),m(R=>({...R,selectedAIAgent:"",selectedHumanAgents:[]})))},[e,F,s==null?void 0:s.id]),p.useMemo(()=>D&&d.find(R=>R.primaryRole==="super_agent"&&R.user_id===D)||null,[D,d]);const M=async()=>{if(!s)return null;const{data:R}=await ce.from("org_members").select("org_id").eq("user_id",s.id).single();return(R==null?void 0:R.org_id)||null},T=async()=>{try{y(!0),S(null),b(null);const R=An.ENDPOINTS.WHATSAPP.CREATE_SESSION,C=`${An.BASE_URL}/ffef6b04-3626-4f9c-8ab8-be3d9971cce3/waha`,q=(h.platformName||"default").replace(/\s/g,""),Z={name:q,start:!0,config:{metadata:{"user.id":(s==null?void 0:s.id)||"","user.email":(s==null?void 0:s.email)||""},proxy:null,debug:!1,noweb:{store:{enabled:!0,fullSync:!1}},webhooks:[{url:C,events:["message","session.status","message.reaction","message.any","message.ack","message.waiting","message.revoked","state.change","group.join","group.leave","presence.update","poll.vote","poll.vote.failed","chat.archive","call.received","call.accepted","call.rejected","label.upsert","label.deleted","label.chat.added","label.chat.deleted","engine.event"],hmac:null,retries:null,customHeaders:null}]}};try{const ae=await ji(R,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});if(!ae.ok){const Q=await ae.text();if(ae.status!==409)throw new Error(`Create session failed (${ae.status}): ${Q||"Unknown error"}`)}}catch(ae){throw ae}const J=await ji(An.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:q})});if(!J.ok)throw new Error(`Request failed with status ${J.status}`);const ee=J.headers.get("content-type");if(ee&&ee.includes("image/")){const ae=await J.blob(),Q=URL.createObjectURL(ae);return b(Q),k(q),y(!1),{qr:Q,sessionName:q}}else try{const ae=await J.json(),Q=Array.isArray(ae)?ae[0]:ae;if(!Q||!Q.data||!Q.mimetype)throw new Error("Invalid QR response shape");const oe=`data:${Q.mimetype};base64,${Q.data}`;return b(oe),k(q),y(!1),{qr:oe,sessionName:q}}catch{const Q=await J.text();if(Q&&Q.length>0){const oe=`data:image/png;base64,${Q}`;return b(oe),k(q),y(!1),{qr:oe,sessionName:q}}else throw new Error("Invalid response format")}return y(!1),null}catch(R){return S((R==null?void 0:R.message)||"Failed to generate QR"),y(!1),null}},A=async()=>{try{const C=await(async()=>{if(_&&_.trim().length>0)return _;try{const J=await M();if(!J)return"default";const{data:ee}=await ce.from("channels").select("display_name, provider").eq("org_id",J).eq("provider","whatsapp").order("created_at",{ascending:!1}).limit(1).maybeSingle();return((ee==null?void 0:ee.display_name)||"").replace(/\s/g,"")||"default"}catch{return"default"}})(),q=`${Dv}/api/sessions/${encodeURIComponent(C)}`,Z=await fetch(q,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(Z.ok){const J=await Z.json();return J&&J.status==="WORKING"&&J.me&&J.me.id?(v(!0),b(null),a({title:"Success",description:"WhatsApp connected successfully!"}),!0):(v(!1),!1)}return!1}catch(R){return console.error("Error checking session status:",R),!1}};p.useEffect(()=>{if(!w||g)return;const R=setInterval(async()=>{await A()&&clearInterval(R)},5e3);return()=>clearInterval(R)},[w,g]);const L=!!(h.platformName&&h.selectedAIAgent&&D&&U),E=async()=>{try{I(!0)}finally{I(!1),m({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(!1),y(!1),b(null),S(null),$(null),t()}},B=async()=>{try{if(N(!0),!U){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),N(!1);return}if(!D||!h.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),N(!1);return}if(!await M())throw new Error("User not found in any organization");const C=await T(),q={...h,phoneNumber:void 0,platformType:"whatsapp",selectedSuperAgentId:D};if(await n(q),a({title:"Success",description:"Channel successfully created."}),C)try{window.dispatchEvent(new CustomEvent("open-wa-qr",{detail:{sessionName:C.sessionName,qr:C.qr}}))}catch{}try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),m({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),$(null)}catch(R){console.error("Error submitting form:",R),a({title:"Error",description:R.message||"Failed to create WhatsApp platform",variant:"destructive"})}finally{N(!1)}};return i.jsx(wn,{open:e,onOpenChange:t,children:i.jsx(hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Setup WhatsApp Platform"}),i.jsx(zr,{children:"Configure your new WhatsApp platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"platformName",children:"Platform Name *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama platform atau merek yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(it,{id:"platformName",placeholder:"Enter your platform or brand name",value:h.platformName,onChange:R=>m(C=>({...C,platformName:R.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di WhatsApp Business"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:h.profilePhoto?i.jsx("img",{src:URL.createObjectURL(h.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx($c,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(it,{id:"profilePhoto",type:"file",accept:"image/*",onChange:R=>{var q;const C=((q=R.target.files)==null?void 0:q[0])||null;m(Z=>({...Z,profilePhoto:C}))},className:"hidden"}),i.jsxs(re,{variant:"outline",onClick:()=>{var R;return(R=document.getElementById("profilePhoto"))==null?void 0:R.click()},children:[i.jsx($c,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"description",children:"Description"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Br,{id:"description",placeholder:"Describe your business and what you offer",value:h.description,onChange:R=>m(C=>({...C,description:R.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-xs font-medium text-emerald-700",children:"Super Agent (1 max)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform WhatsApp ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(rn,{value:D||"",onValueChange:R=>{$(R),m(C=>({...C,selectedAIAgent:"",selectedHumanAgents:[]}))},disabled:F,children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:"Choose a Super Agent"})}),i.jsx(tn,{className:"bg-background border z-50",children:d.filter(R=>R.primaryRole==="super_agent").map(R=>i.jsx(at,{value:R.user_id,children:R.display_name||R.email||R.user_id.slice(0,8)},R.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform WhatsApp ini"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(rn,{value:h.selectedAIAgent,onValueChange:R=>{const C=c.find(q=>q.id===R);if(!D){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!C||C.super_agent_id!==D){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m(q=>({...q,selectedAIAgent:R,selectedHumanAgents:[]}))},children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:D?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(tn,{className:"bg-background border z-50",children:c.filter(R=>D?R.super_agent_id===D:!1).map(R=>i.jsx(at,{value:R.id,children:R.name},R.id))})]})]}),h.selectedAIAgent&&!D&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{children:"Assign Agents"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",D?"":"(select an AI agent first)"]}),(()=>{const C=d.filter(q=>q.primaryRole==="agent").filter(q=>!!D&&q.super_agent_id===D).map(q=>({value:q.user_id,label:q.display_name||q.email||`Agent ${q.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yb,{options:C,value:h.selectedHumanAgents,onValueChange:q=>m(Z=>({...Z,selectedHumanAgents:q})),disabled:!D,placeholder:D?"Select human agents":"Select an AI agent first"}),i.jsx(re,{type:"button",variant:"outline",disabled:!D||C.length===0,onClick:()=>m(q=>({...q,selectedHumanAgents:C.map(Z=>Z.value)})),children:"Select All"}),i.jsx(re,{type:"button",variant:"ghost",disabled:!D||h.selectedHumanAgents.length===0,onClick:()=>m(q=>({...q,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(re,{variant:"outline",onClick:E,disabled:r||O,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:O?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel"}),i.jsx(re,{onClick:B,disabled:r||P||!L,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 transition-all duration-200 hover:shadow-md active:scale-[.98]","aria-busy":r||P,children:r||P?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create WhatsApp Platform"})]})]})})})},gge=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=nu(),{user:s}=ia(),{hasPermission:o,hasRole:l}=Ir(),{aiAgents:c,loading:u}=Gb(),{agents:d,loading:f}=ql(),{uploadChannelAvatar:h}=Kz(),[m,g]=p.useState({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[v,x]=p.useState(!1),[y,w]=p.useState(null),[b,_]=p.useState(!1),[k,j]=p.useState(null),S=(m.telegramBotToken||"").trim(),O=!!k&&k===S,I=o("channels.create"),P=l("super_agent");p.useEffect(()=>{e&&P&&s!=null&&s.id&&(w(s.id),g(M=>({...M,selectedAIAgent:"",selectedHumanAgents:[]})))},[e,P,s==null?void 0:s.id]);const N=p.useMemo(()=>y&&d.find(M=>M.primaryRole==="super_agent"&&M.user_id===y)||null,[y,d]),D=!!(m.displayName&&m.selectedAIAgent&&m.telegramBotToken&&y&&I&&O),$=async()=>{if(!s)return null;const{data:M}=await ce.from("org_members").select("org_id").eq("user_id",s.id).single();return(M==null?void 0:M.org_id)||null},U=async()=>{const M=(m.telegramBotToken||"").trim();if(!M){a({title:"Telegram bot token required",description:"Enter your BotFather token before validating.",variant:"destructive"});return}try{_(!0);const T=await $(),A={telegram_bot_token:M};T&&(A.org_id=T);const L=await ji(An.ENDPOINTS.TELEGRAM.VERIFY_TOKEN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});let E=null;try{const R=await L.text();E=R?JSON.parse(R):null}catch{throw new Error("Token is invalid")}if(!L.ok)throw new Error("Token is invalid");if(E===null||typeof E!="object"||Array.isArray(E))throw new Error("Token is invalid");const B=E.valid;if(typeof B!="boolean")throw new Error("Token is invalid");if(B!==!0)throw new Error("Token is invalid");j(M),a({title:"Token validated",description:"Telegram bot token has been successfully verified."})}catch(T){console.error("Telegram token validation failed:",T),j(null);const A=T&&typeof T.message=="string"?T.message:"",L=String(A).toLowerCase();a({title:"Validation failed",description:L.includes("empty")||L.includes("required")?A||"Telegram bot token is required":"Token is invalid",variant:"destructive"})}finally{_(!1)}},F=async()=>{var M;try{if(v)return;if(x(!0),!I){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),x(!1);return}if(!y||!m.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),x(!1);return}if(!O){a({title:"Token validation required",description:"You must validate the Telegram bot token before creating this platform.",variant:"destructive"}),x(!1);return}const T=await $();if(!T)throw new Error("User not found in any organization");const A=(m.telegramBotToken||"").trim();if(!A)throw new Error("Telegram bot token is required");try{const{data:R}=await ce.from("channels").select("id").eq("provider","telegram").eq("external_id",A).limit(1);if(Array.isArray(R)&&R.length>0){a({title:"Duplicate token",description:"A Telegram bot with this BotFather token already exists.",variant:"destructive"}),x(!1);return}}catch{}const L={brand_name:m.displayName,display_name:m.displayName,description:m.description,telegram_bot_token:m.telegramBotToken,ai_profile_id:m.selectedAIAgent,human_agent_ids:m.selectedHumanAgents,super_agent_id:y,org_id:T,platform_type:"telegram"},E=await ji(An.ENDPOINTS.TELEGRAM.CREATE_PLATFORM,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!E.ok)throw new Error(`Telegram webhook failed with status ${E.status}`);let B=null;try{if((E.headers.get("content-type")||"").includes("application/json"))B=await E.json();else{const C=await E.text();try{B=C?JSON.parse(C):null}catch{B={raw:C||null}}}}catch{B=null}try{if(m.profilePhoto){let R=(B==null?void 0:B.channel_id)||(B==null?void 0:B.id)||((M=B==null?void 0:B.channel)==null?void 0:M.id)||null;if(!R){const{data:C}=await ce.from("channels").select("id").eq("org_id",T).eq("provider","telegram").eq("external_id",A).limit(1).maybeSingle();R=(C==null?void 0:C.id)||null}R&&await h(R,m.profilePhoto,T)}}catch(R){console.warn("Telegram avatar upload failed:",R)}a({title:"Success",description:"Telegram channel created successfully"});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),g({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),w(null)}catch(T){console.error("Error submitting form:",T),a({title:"Error",description:T.message||"Failed to create Telegram platform",variant:"destructive"})}finally{x(!1)}};return i.jsx(wn,{open:e,onOpenChange:t,children:i.jsx(hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Setup Telegram Bot Platform"}),i.jsx(zr,{children:"Configure your new Telegram bot platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget chat Telegram"})})]})]}),i.jsx(it,{id:"displayName",placeholder:"Enter the display name",value:m.displayName,onChange:M=>g(T=>({...T,displayName:M.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"description",children:"Description"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Br,{id:"description",placeholder:"Describe your business and what you offer",value:m.description,onChange:M=>g(T=>({...T,description:M.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di bot Telegram"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:m.profilePhoto?i.jsx("img",{src:URL.createObjectURL(m.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx($c,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(it,{id:"profilePhoto",type:"file",accept:"image/*",onChange:M=>{var A;const T=((A=M.target.files)==null?void 0:A[0])||null;g(L=>({...L,profilePhoto:T}))},className:"hidden"}),i.jsxs(re,{variant:"outline",onClick:()=>{var M;return(M=document.getElementById("profilePhoto"))==null?void 0:M.click()},children:[i.jsx($c,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(Je,{className:"text-sm font-medium",children:"Telegram Bot Setup"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow these steps to set up your Telegram bot"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 1: Create a bot with BotFather"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Open Telegram and search for @BotFather"}),i.jsx("li",{children:"Send /newbot command"}),i.jsx("li",{children:"Choose a name for your bot (organization name)"}),i.jsx("li",{children:"Choose a username (must end with 'bot')"}),i.jsx("li",{children:"Copy the bot token provided"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 2: Configure bot settings"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Send /setdescription to set bot description"}),i.jsx("li",{children:"Send /setabouttext to set about text"}),i.jsx("li",{children:"Send /setcommands to set available commands"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 3: Enable webhook (optional)"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Your bot will automatically receive messages once connected to our platform."})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"telegramBotToken",children:"Telegram Bot Token *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Token bot Telegram yang diperoleh dari @BotFather untuk mengautentikasi bot"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(it,{id:"telegramBotToken",type:"password",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",value:m.telegramBotToken,onChange:M=>{const T=M.target.value;g(A=>({...A,telegramBotToken:T})),j(null)},className:"flex-1"}),i.jsx(re,{type:"button",variant:O?"outline":"default",className:O?"border-emerald-600 text-emerald-700 hover:bg-emerald-50":"",onClick:U,disabled:b||!m.telegramBotToken,children:b?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),"Validating"]}):"Validate"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get this token from @BotFather on Telegram. Format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"}),O&&i.jsx("p",{className:"text-xs text-emerald-600",children:"Bot token validated. You can now create this Telegram platform."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{children:"Super Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Telegram ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(rn,{value:y||"",onValueChange:M=>{w(M),g(T=>({...T,selectedAIAgent:"",selectedHumanAgents:[]}))},disabled:P,children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:"Choose a Super Agent"})}),i.jsx(tn,{className:"bg-background border z-50",children:d.filter(M=>M.primaryRole==="super_agent").map(M=>i.jsx(at,{value:M.user_id,children:M.display_name||M.email||M.user_id.slice(0,8)},M.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Telegram ini"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(rn,{value:m.selectedAIAgent,onValueChange:M=>{const T=c.find(A=>A.id===M);if(!y){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!T||T.super_agent_id!==y){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}g(A=>({...A,selectedAIAgent:M,selectedHumanAgents:[]}))},children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:y?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(tn,{className:"bg-background border z-50",children:c.filter(M=>y?M.super_agent_id===y:!1).map(M=>i.jsx(at,{value:M.id,children:M.name},M.id))})]}),y&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(N==null?void 0:N.display_name)||(N==null?void 0:N.email)||y.slice(0,8)})]})]}),m.selectedAIAgent&&!y&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{children:"Select Human Agents (optional)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):(()=>{const T=d.filter(A=>A.primaryRole==="agent").filter(A=>!!y&&A.super_agent_id===y).map(A=>({value:A.user_id,label:A.display_name||A.email||`Agent ${A.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yb,{options:T,value:m.selectedHumanAgents,onValueChange:A=>g(L=>({...L,selectedHumanAgents:A})),disabled:!y,placeholder:y?"Select human agents":"Select an AI agent first"}),i.jsx(re,{type:"button",variant:"outline",disabled:!y||T.length===0,onClick:()=>g(A=>({...A,selectedHumanAgents:T.map(L=>L.value)})),children:"Select All"}),i.jsx(re,{type:"button",variant:"ghost",disabled:!y||m.selectedHumanAgents.length===0,onClick:()=>g(A=>({...A,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(re,{variant:"outline",onClick:()=>{v||(g({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),w(null),t())},disabled:r||v,children:"Cancel"}),i.jsx(re,{onClick:F,disabled:r||v||!D,className:"bg-blue-600 hover:bg-blue-700 text-white",children:r||v?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Telegram Bot Platform"})]})]})})})},vge=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=nu(),{user:s}=ia(),{hasPermission:o,hasRole:l}=Ir(),{aiAgents:c,loading:u}=Gb(),{agents:d,loading:f}=ql(),[h,m]=p.useState({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(null),w=o("channels.create"),b=l("super_agent");p.useEffect(()=>{e&&b&&s!=null&&s.id&&(y(s.id),m(O=>({...O,selectedAIAgent:"",selectedHumanAgents:[]})))},[e,b,s==null?void 0:s.id]);const _=p.useMemo(()=>x&&d.find(O=>O.primaryRole==="super_agent"&&O.user_id===x)||null,[x,d]),k=!!(h.displayName&&x&&h.selectedAIAgent&&w),j=async()=>{try{if(g)return;if(!w){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"});return}if(!x||!h.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"});return}v(!0);const O={...h,platformType:"web",selectedSuperAgentId:x};await n(O);try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}m({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t()}catch(O){console.error("Error submitting form:",O)}finally{v(!1)}},S=()=>{g||(m({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t())};return i.jsx(wn,{open:e,onOpenChange:t,children:i.jsx(hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Setup Web Live Chat Platform"}),i.jsx(zr,{children:"Configure your new web live chat platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"description",children:"Description"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Br,{id:"description",placeholder:"Describe your business and what you offer",value:h.description,onChange:O=>m(I=>({...I,description:O.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di widget live chat"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:h.profilePhoto?i.jsx("img",{src:URL.createObjectURL(h.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx($c,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(it,{id:"profilePhoto",type:"file",accept:"image/*",onChange:O=>{var P;const I=((P=O.target.files)==null?void 0:P[0])||null;m(N=>({...N,profilePhoto:I}))},className:"hidden"}),i.jsxs(re,{variant:"outline",onClick:()=>{var O;return(O=document.getElementById("profilePhoto"))==null?void 0:O.click()},children:[i.jsx($c,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget live chat"})})]})]}),i.jsx(it,{id:"displayName",placeholder:"Name that will appear in the chat widget",value:h.displayName,onChange:O=>m(I=>({...I,displayName:O.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{children:"Super Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Live Chat ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(rn,{value:x||"",onValueChange:O=>{y(O),m(I=>({...I,selectedAIAgent:"",selectedHumanAgents:[]}))},disabled:b,children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:"Choose a Super Agent"})}),i.jsx(tn,{className:"bg-background border z-50",children:d.filter(O=>O.primaryRole==="super_agent").map(O=>i.jsx(at,{value:O.user_id,children:O.display_name||O.email||O.user_id.slice(0,8)},O.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Live Chat ini"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(rn,{value:h.selectedAIAgent,onValueChange:O=>{const I=c.find(P=>P.id===O);if(!x){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!I||I.super_agent_id!==x){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m(P=>({...P,selectedAIAgent:O,selectedHumanAgents:[]}))},children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:x?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(tn,{className:"bg-background border z-50",children:c.filter(O=>x?O.super_agent_id===x:!1).map(O=>i.jsx(at,{value:O.id,children:O.name},O.id))})]}),x&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(_==null?void 0:_.display_name)||(_==null?void 0:_.email)||x.slice(0,8)})]})]}),h.selectedAIAgent&&!x&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{children:"Assign Agents"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",x?"":"(select an AI agent first)"]}),(()=>{const I=d.filter(P=>P.primaryRole==="agent").filter(P=>!!x&&P.super_agent_id===x).map(P=>({value:P.user_id,label:P.display_name||P.email||`Agent ${P.user_id.slice(0,8)}`}));return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yb,{options:I,value:h.selectedHumanAgents,onValueChange:P=>m(N=>({...N,selectedHumanAgents:P})),disabled:!x,placeholder:x?"Select human agents":"Select an AI agent first"}),i.jsx(re,{type:"button",variant:"outline",disabled:!x||I.length===0,onClick:()=>m(P=>({...P,selectedHumanAgents:I.map(N=>N.value)})),children:"Select All"}),i.jsx(re,{type:"button",variant:"ghost",disabled:!x||h.selectedHumanAgents.length===0,onClick:()=>m(P=>({...P,selectedHumanAgents:[]})),children:"Unselect All"})]})})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(re,{variant:"outline",onClick:S,disabled:r||g,children:"Cancel"}),i.jsx(re,{onClick:j,disabled:r||g||!k,children:r||g?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Web Live Chat Platform"})]})]})})})},an=p.forwardRef(({permission:e,permissions:t=[],requireAll:n=!1,fallback:r=null,children:a,roleBypass:s=[]},o)=>{const{hasAnyPermission:l,hasAllPermissions:c,hasAnyRole:u,loading:d}=Ir();if(d)return null;const f=e?[e,...t]:t,h=s.length>0?u(s):!1,m=f.length===0?!0:n?c(f):l(f),g=h||m,v=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return g?v?i.jsx(fN,{ref:o,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})}),bn={MASTER_AGENT:"master_agent",SUPER_AGENT:"super_agent",AGENT:"agent"},yge=()=>{var Le;const{toast:e}=nu(),{platforms:t,loading:n,error:r,createPlatform:a,fetchPlatforms:s,updatePlatform:o,uploadChannelAvatar:l,deleteChannelAvatar:c}=Kz(),{aiAgents:u,loading:d}=Gb(),{agents:f,loading:h}=ql(),{fetchByOrgId:m,channelsByOrg:g}=hge(),{hasRole:v}=Ir(),[x,y]=p.useState(null),[w,b]=p.useState("whatsapp"),[_,k]=p.useState(""),[j,S]=p.useState(!1),[O,I]=p.useState(null),[P,N]=p.useState(!1),[D,$]=p.useState(!1),[U,F]=p.useState([]),[M,T]=p.useState(!1),[A,L]=p.useState(!1),E=p.useRef(null),[B,R]=p.useState([]),[C,q]=p.useState(!1),[Z,J]=p.useState(null),[ee,ae]=p.useState(new Set),[Q,oe]=p.useState(new Set),[ge,ie]=p.useState(null),[Ie,me]=p.useState(null),[K,fe]=p.useState(null),[De,Ze]=p.useState(!1),[Ve,ut]=p.useState(null),Ye=p.useRef(null),[ot,te]=p.useState(!1),Xe=p.useRef(null),dt=p.useRef(!1),de=p.useRef(0);p.useEffect(()=>{t.length>0&&!x&&y(t[0].id)},[t,x]),p.useEffect(()=>{u.length>0&&!_&&k(u[0].id)},[u,_]);const we=V=>{const ne=V==null?void 0:V.provider;return ne==="whatsapp"?"whatsapp":ne==="telegram"?"telegram":"web"};p.useEffect(()=>{const V=t.find(ne=>we(ne)===w);(!x||x&&t.find(ne=>ne.id===x&&we(ne)!==w))&&y((V==null?void 0:V.id)||null)},[t,w]);const se=t.find(V=>V.id===x);p.useEffect(()=>{k(se&&(se==null?void 0:se.ai_profile_id)||"")},[se==null?void 0:se.id,se==null?void 0:se.ai_profile_id]),p.useEffect(()=>{const V=Array.from(new Set(t.map(ne=>ne.org_id)));V.length!==0&&Promise.resolve().then(()=>{V.forEach(ne=>{m(ne)})})},[t]),p.useEffect(()=>{const V=()=>{s()};return window.addEventListener("refresh-platforms",V),()=>window.removeEventListener("refresh-platforms",V)},[s]);const Be=se?we(se):null,je=(se==null?void 0:se.human_agents)||[],Ge=(se==null?void 0:se.super_agent_id)??null,vt=v("master_agent")||v("super_agent"),Nt=f.filter(V=>{const ne=Ge?V.super_agent_id===Ge:!0;return V.primaryRole==="agent"&&ne&&!je.some(ke=>ke.user_id===V.user_id)}).map(V=>({value:V.user_id,label:V.display_name||V.email||V.user_id.slice(0,8)})),yt=Ge?u.filter(V=>V.super_agent_id===Ge||V.id===(se==null?void 0:se.ai_profile_id)):u,xt=async V=>{if(!se||!vt){F([]);return}if(V.length===0){F([]);return}F(V);try{$(!0);const ne=je.map(et=>et.user_id),ke=Array.from(new Set([...ne,...V]));await o(se.id,{human_agent_ids:ke})}catch(ne){e({title:"Failed to add agent",description:(ne==null?void 0:ne.message)||"Please try again",variant:"destructive"})}finally{$(!1),F([])}},le=V=>i.jsxs(i.Fragment,{children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-base flex items-center gap-2",children:["Super Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform ini (hanya master agent yang dapat mengatur)"})})]})]})}),i.jsx(lt,{children:(()=>{const ne=(se==null?void 0:se.super_agent_id)||null,et=(f||[]).find(nt=>nt.user_id===ne&&nt.primaryRole==="super_agent")||null;return i.jsxs("div",{className:"text-sm space-y-2",children:[et?i.jsxs("div",{className:"inline-flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[" ",et.display_name||et.email||et.user_id.slice(0,8)]}):i.jsx("span",{className:"text-muted-foreground",children:"No super agent assigned. Select an AI agent to link a super agent."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agent assignment follows the selected AI agent. To change ownership, switch the AI agent for this platform."})]})})()})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-base flex items-center gap-2",children:["AI Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform ini"})})]})]})}),i.jsx(lt,{children:d?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(rn,{value:_||"",onValueChange:async ne=>{se&&(await o(se.id,{ai_profile_id:ne||void 0}),k(ne))},children:[i.jsx(en,{children:i.jsx(Xt,{placeholder:"Choose an AI agent"})}),i.jsx(tn,{children:yt.map(ne=>i.jsxs(at,{value:ne.id,children:[" ",ne.name]},ne.id))})]})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-base flex items-center gap-2",children:["Human Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]})}),i.jsxs(lt,{children:[h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):je.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:je.map(ne=>i.jsxs("div",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[i.jsxs("span",{className:"text-sm",children:[" ",ne.display_name||ne.email||ne.user_id]}),vt&&i.jsx(re,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",disabled:D||!se,onClick:async()=>{if(se)try{$(!0);const ke=je.filter(et=>et.user_id!==ne.user_id).map(et=>et.user_id);await o(se.id,{human_agent_ids:ke})}finally{$(!1)}},children:i.jsx(mf,{className:"h-3 w-3"})})]},ne.user_id))}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"No agents connected"}),vt&&se&&i.jsx("div",{className:"mt-3 flex items-center gap-2",children:i.jsx(an,{permission:"channel_agents.update",roleBypass:[bn.SUPER_AGENT],children:i.jsx(Yb,{options:Nt,value:U,onChange:xt,placeholder:"Select human agents to add",disabled:D})})})]})]}),V&&i.jsxs(i.Fragment,{children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-base flex items-center gap-2",children:["Link LiveChat",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"URL untuk live chat widget yang dapat diembed di website"})})]})]})}),i.jsx(lt,{children:i.jsx("div",{className:"bg-muted p-3 rounded-md",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(it,{value:gO(String((se==null?void 0:se.id)||"{platform_id}")),readOnly:!0,className:"bg-background flex-1"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",size:"icon",className:"h-9 w-9 shrink-0",onClick:async()=>{const ne=gO(String((se==null?void 0:se.id)||"{platform_id}"));try{await navigator.clipboard.writeText(ne),e({title:"Copied!",description:"Live chat URL copied to clipboard"})}catch{e({title:"Failed to copy",description:"Please try again",variant:"destructive"})}},children:i.jsx(Ih,{className:"h-4 w-4"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Copy URL"})})]})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-base flex items-center gap-2",children:["Embed Code",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kode embed untuk menambahkan widget live chat ke website"})})]})]})}),i.jsx(lt,{children:i.jsxs("div",{className:"relative",children:[i.jsx(Br,{value:`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'${K1}'; cfg.platformId=cfg.platformId||'${(se==null?void 0:se.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`,readOnly:!0,className:"font-mono text-xs h-48 bg-muted pr-12"}),i.jsx("div",{className:"absolute top-2 right-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{const ne=`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'${K1}'; cfg.platformId=cfg.platformId||'${(se==null?void 0:se.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`;try{await navigator.clipboard.writeText(ne),e({title:"Copied!",description:"Embed code copied to clipboard"})}catch{e({title:"Failed to copy",description:"Please try again",variant:"destructive"})}},children:i.jsx(Ih,{className:"h-4 w-4"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Copy embed code"})})]})})]})})]})]})]}),Ee=V=>{I(V),S(!1)},ye=async V=>{try{N(!0);const ne={display_name:V.displayName||V.platformName||V.brandName,website_url:V.websiteUrl||void 0,business_category:V.businessCategory||void 0,description:V.description||void 0,ai_profile_id:V.selectedAIAgent||void 0,provider:O||"web",human_agent_ids:V.selectedHumanAgents},ke=await a(ne);if(ke&&V.profilePhoto)try{await l(ke.id,V.profilePhoto,ke.org_id)}catch(et){e({title:"Avatar upload failed",description:(et==null?void 0:et.message)||"Could not upload avatar",variant:"destructive"})}e({title:"Success",description:"Platform created successfully!"}),I(null)}catch(ne){e({title:"Error",description:ne.message||"Failed to create platform",variant:"destructive"})}finally{N(!1)}},H=p.useRef([]),z=async()=>{if(!dt.current){dt.current=!0,q(!0),J(null);try{const V=`${Dv}/api/sessions`,ne=await fetch(V,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(!ne.ok)throw new Error(`Request failed with status ${ne.status}`);const ke=await ne.json(),et=Array.isArray(ke)?ke:[ke];R(et),H.current=et,await G(et),Date.now()>=de.current&&(de.current=Date.now()+2e3,await s())}catch(V){J((V==null?void 0:V.message)||"Failed to load sessions")}finally{q(!1),dt.current=!1}}},G=async V=>{var ne,ke,et;try{const{data:nt}=await ce.auth.getUser(),Rt=nt==null?void 0:nt.user;if(!Rt)return;const{data:ht}=await ce.from("org_members").select("org_id").eq("user_id",Rt.id).limit(1),$t=(ne=ht==null?void 0:ht[0])==null?void 0:ne.org_id;if(!$t)return;const{data:jt}=await ce.from("channels").select("id, display_name, provider, external_id, credentials").eq("org_id",$t).eq("provider","whatsapp");for(const Zt of V){const Pt=(Zt==null?void 0:Zt.name)||"";if(!Pt)continue;const Lt=String((Zt==null?void 0:Zt.status)||"").toUpperCase();let Dt=((ke=Zt==null?void 0:Zt.me)==null?void 0:ke.id)||null;if(!Dt&&Lt==="WORKING")try{const ir=`${Dv}/api/sessions/${encodeURIComponent(Pt)}`,Mo=await fetch(ir,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(Mo.ok){const cr=await Mo.json(),Ha=Array.isArray(cr)?cr[0]:cr;Dt=((et=Ha==null?void 0:Ha.me)==null?void 0:et.id)||Dt}}catch{}const Qe=Lt==="WORKING"&&!!Dt,yn=(Pt||"").toLowerCase().replace(/\s/g,""),Wn=(jt||[]).find(ir=>(ir.display_name||"").toLowerCase().replace(/\s/g,"")===yn);if(!Wn)continue;const Cr=Wn!=null&&Wn.credentials&&typeof Wn.credentials=="object"?Wn.credentials:{},Dr=Pt||yn||null,ui=Dt||(Wn==null?void 0:Wn.external_id)||(Cr==null?void 0:Cr.waha_session_name)||Dr;await ce.from("channels").update({is_active:Qe,external_id:ui,credentials:{...Cr,waha_status:(Zt==null?void 0:Zt.status)||null,me_id:Dt,waha_session_name:(Cr==null?void 0:Cr.waha_session_name)||Dr}}).eq("id",Wn.id)}}catch(nt){console.error("Failed to sync sessions to channels",nt)}};p.useEffect(()=>{Be==="whatsapp"&&Xe.current!=="whatsapp"&&(Xe.current="whatsapp",z()),Be!=="whatsapp"&&(Xe.current=Be||null)},[Be]),p.useEffect(()=>{const V=ne=>{const ke=(ne==null?void 0:ne.detail)||{};me(ke.qr||null),ke.sessionName&&ut(ke.sessionName),Ze(!0)};return window.addEventListener("open-wa-qr",V),()=>window.removeEventListener("open-wa-qr",V)},[]),p.useEffect(()=>((()=>{if(!Ve||!De)return;const ne=async()=>{var ke;try{if(!Ve)return;const et=`${Dv}/api/sessions/${encodeURIComponent(Ve)}`,nt=await fetch(et,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(!nt.ok)return;const Rt=await nt.json(),ht=String((Rt==null?void 0:Rt.status)||"").toUpperCase();if(!!((ke=Rt==null?void 0:Rt.me)!=null&&ke.id)&&ht==="WORKING"){Ze(!1),me(null),await z();try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}e({title:"Connected",description:"WhatsApp connected successfully."})}}catch{}};ne(),Ye.current=window.setInterval(ne,3e3)})(),()=>{Ye.current&&(clearInterval(Ye.current),Ye.current=null)}),[De,Ve]);const ue=async V=>{ie(V),fe(null),me(null),Ze(!0),ut(V);try{const ne=await ji(An.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:V})});if(!ne.ok)throw new Error(`QR request failed: ${ne.status}`);const ke=ne.headers.get("content-type");if(ke&&ke.includes("image/")){const et=await ne.blob();me(URL.createObjectURL(et))}else try{const et=await ne.json(),nt=Array.isArray(et)?et[0]:et;if(!(nt!=null&&nt.data)||!(nt!=null&&nt.mimetype))throw new Error("Invalid QR");me(`data:${nt.mimetype};base64,${nt.data}`)}catch{const et=await ne.text();et&&me(`data:image/png;base64,${et}`)}}catch(ne){fe((ne==null?void 0:ne.message)||"Failed to get QR")}finally{ie(null)}},Se=async V=>{if(!V)throw new Error("Missing channel");const ne=we(V);if(ne==="telegram"){const et=await ji(An.ENDPOINTS.TELEGRAM.DELETE_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:V.id,org_id:V.org_id,bot_token:(V==null?void 0:V.external_id)||null})});if(!et.ok){const nt=await et.text().catch(()=>"");throw new Error(nt||`Telegram delete failed (${et.status})`)}return}if(ne==="whatsapp"){const et=String((V==null?void 0:V.display_name)||"").replace(/\s/g,""),nt=await ji(An.ENDPOINTS.WHATSAPP.DELETE_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:V.id,org_id:V.org_id,session_name:et})});if(!nt.ok){const Rt=await nt.text().catch(()=>"");throw new Error(Rt||`WhatsApp delete failed (${nt.status})`)}return}const{error:ke}=await ce.from("channels").delete().eq("id",V.id);if(ke)throw ke},Ne=async V=>{var ne,ke,et;if(V){ae(nt=>new Set(nt).add(V));try{const nt=await ji(An.ENDPOINTS.WHATSAPP.LOGOUT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:V})});if(!nt.ok)throw new Error(`Logout failed ${nt.status}`);const Rt=await ji(An.ENDPOINTS.WHATSAPP.DISCONNECT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:V})});if(!Rt.ok)throw new Error(`Disconnect failed ${Rt.status}`);const ht=Date.now();for(;Date.now()-ht<2e4;){await z();const $t=((ke=(ne=H.current)==null?void 0:ne.find)==null?void 0:ke.call(ne,Lt=>((Lt==null?void 0:Lt.name)||"")===V))||null,jt=String(($t==null?void 0:$t.status)||"").toUpperCase(),Zt=!!((et=$t==null?void 0:$t.me)!=null&&et.id);if(!(jt==="WORKING"&&Zt))break;await new Promise(Lt=>setTimeout(Lt,2e3))}e({title:"Disconnected",description:`Session ${V} disconnected`})}catch(nt){J((nt==null?void 0:nt.message)||"Failed to disconnect session")}finally{ae(nt=>{const Rt=new Set(nt);return Rt.delete(V),Rt})}}};return i.jsxs("div",{className:"flex h-[calc(100vh-120px)]",children:[i.jsx("div",{className:"w-80 border-r border-border bg-card",children:i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:"Platforms"})}),i.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"This is where you can connect all your platforms"}),i.jsx(Uc,{value:w,onValueChange:V=>b(V),className:"mb-3",children:i.jsxs(Tl,{className:"grid w-full grid-cols-3 bg-muted/50 p-1",children:[i.jsx(jr,{value:"whatsapp",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"WhatsApp"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kelola koneksi WhatsApp Business"})})]})}),i.jsx(jr,{value:"telegram",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Telegram"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kelola koneksi Bot Telegram"})})]})}),i.jsx(jr,{value:"web",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Live Chat"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kelola koneksi widget Live Chat"})})]})})]})}),n?i.jsx("div",{className:"space-y-2",children:[1,2,3].map(V=>i.jsx(Ue,{className:"animate-pulse",children:i.jsx(lt,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})})},V))}):r?i.jsx("div",{className:"text-sm text-red-600 p-4",children:r}):i.jsx("div",{className:"space-y-2",children:t.filter(V=>we(V)===w).length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"No platforms found. Create your first platform to get started."}):t.filter(V=>we(V)===w).map(V=>i.jsx(Ue,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${x===V.id?"border-primary shadow-sm":""}`,onClick:()=>y(V.id),children:i.jsx(lt,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:V.profile_photo_url?i.jsx("img",{src:V.profile_photo_url,alt:V.display_name||"Platform",className:"h-10 w-10 rounded-full object-cover"}):i.jsx("span",{className:"text-xs font-medium text-foreground/70",children:(V.display_name||"").charAt(0)||"?"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:V.display_name||"Unnamed Platform"}),i.jsx("p",{className:"text-[11px] text-muted-foreground capitalize",children:we(V)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:V.description||V.website_url||""})]}),i.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${V.status==="active"?"bg-green-500":"bg-gray-300"}`,"aria-label":V.status==="active"?"Active":"Inactive",title:V.status==="active"?"Active":"Inactive"})]})})},V.id))}),i.jsxs(wn,{open:j,onOpenChange:S,children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(lC,{asChild:!0,children:i.jsxs(re,{variant:"outline",className:"w-full mt-4",children:[i.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Add Channel"]})})}),i.jsx(ve,{children:i.jsx("p",{children:"Tambahkan saluran atau platform baru"})})]}),i.jsxs(hn,{className:"sm:max-w-xl p-0 overflow-hidden",children:[i.jsxs(mn,{className:"p-6 pb-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(pn,{className:"text-lg font-semibold",children:"Platform"})}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Select the platform you wish to establish your new inbox."})]}),i.jsxs("div",{className:"px-6 pb-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>Ee("whatsapp"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(Cv,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"WhatsApp"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your WhatsApp Business account"})]}),i.jsxs("button",{onClick:()=>Ee("web"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx($T,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Web Live Chat"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Add live chat to your website"})]}),i.jsxs("button",{onClick:()=>Ee("telegram"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(cm,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Telegram Bot"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your Telegram bot via BotFather"})]})]}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-muted-foreground",children:"More platforms coming soon"})})]})]})]}),i.jsx(pge,{isOpen:O==="whatsapp",onClose:()=>I(null),onSubmit:ye,isSubmitting:P}),i.jsx(gge,{isOpen:O==="telegram",onClose:()=>I(null),onSubmit:ye,isSubmitting:P}),i.jsx(vge,{isOpen:O==="web",onClose:()=>I(null),onSubmit:ye,isSubmitting:P}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Add a new platform inbox"})]})}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:se!=null&&se.display_name?se.display_name.toUpperCase():"Select Platform"}),i.jsx("p",{className:"text-muted-foreground",children:se?se.description||se.website_url||"":"Choose a platform to manage"})]})}),i.jsxs("div",{className:"grid gap-6",children:[se?se&&i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-base",children:"Channel Details"})}),i.jsxs(lt,{className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Provider",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Jenis platform komunikasi yang digunakan (WhatsApp, Telegram, Live Chat)"})})]})]}),i.jsx("div",{className:"capitalize",children:we(se)})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Status",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Status koneksi platform saat ini (Aktif atau Tidak Aktif)"})})]})]}),i.jsx("div",{children:se.status==="active"?"Active":"Inactive"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Display Name",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Nama yang ditampilkan untuk platform ini"})})]})]}),i.jsx("div",{children:se.display_name||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["AI Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Agen AI yang ditugaskan untuk menangani percakapan di platform ini"})})]})]}),i.jsx("div",{children:((Le=u.find(V=>V.id===(se==null?void 0:se.ai_profile_id)))==null?void 0:Le.name)||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Created At",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Tanggal dan waktu platform ini dibuat"})})]})]}),i.jsx("div",{children:se.created_at?new Date(se.created_at).toLocaleString():""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Secret Token",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Token rahasia untuk autentikasi dan keamanan platform"})})]})]}),i.jsx("div",{children:(()=>{const V=se==null?void 0:se.secret_token;return V?V.length>8?`${V.slice(0,4)}${V.slice(-2)}`:"":""})()})]})]}),i.jsxs("div",{className:"rounded-lg border p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-3",children:["Channel Profile",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kelola foto profil atau logo untuk platform ini"})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center overflow-hidden",children:se!=null&&se.profile_photo_url?i.jsx("img",{src:(se==null?void 0:se.profile_photo_url)||"",alt:"Avatar",className:"h-12 w-12 object-cover"}):i.jsx("span",{className:"text-xs text-foreground/70",children:((se==null?void 0:se.display_name)||"?").charAt(0)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",size:"sm",onClick:()=>{var V;return(V=E.current)==null?void 0:V.click()},disabled:!se||M||A,children:M?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"})," Uploading..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx($c,{className:"h-4 w-4"})," Upload Avatar"]})})}),i.jsx(ve,{children:i.jsx("p",{children:"Unggah foto profil atau logo untuk platform ini"})})]}),i.jsx("input",{ref:E,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:async V=>{var ke;const ne=(ke=V.currentTarget.files)==null?void 0:ke[0];if(!(!ne||!se))try{T(!0),await l(se.id,ne,se.org_id),e({title:"Avatar updated"}),await s()}catch(et){e({title:"Avatar upload failed",description:(et==null?void 0:et.message)||"Please try again",variant:"destructive"})}finally{T(!1);try{V.currentTarget.value=""}catch{}}}}),!!(se!=null&&se.logo_url||se!=null&&se.profile_photo_url)&&i.jsx(re,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",disabled:!se||M||A,onClick:async()=>{if(se)try{L(!0),await c(se.id,se.org_id),await s(),e({title:"Avatar removed"})}catch(V){e({title:"Failed to remove avatar",description:(V==null?void 0:V.message)||"Please try again",variant:"destructive"})}finally{L(!1)}},children:A?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"})," Removing..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(ma,{className:"h-4 w-4"})," Remove"]})})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-2 text-xs text-muted-foreground",children:["Accepted: PNG, JPG, WEBP  Max 5 MB",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Format file yang didukung: PNG, JPG, WEBP dengan ukuran maksimal 5 MB"})})]})]})]})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:i.jsx(Cv,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Platform Selected"}),i.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Select a platform from the left panel to view its details, manage settings, and configure agents."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-2xl",children:[i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(Cv,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"WhatsApp"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your WhatsApp business account"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(cm,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Telegram"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up a Telegram bot for customer support"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx($T,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Live Chat"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Embed chat widget on your website"})]})]})]}),Be==="web"&&i.jsx("div",{className:"grid gap-6",children:le(!0)}),Be==="whatsapp"&&i.jsxs("div",{className:"grid gap-6",children:[le(!1),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-base",children:"WhatsApp Sessions"})}),i.jsxs(lt,{children:[C&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading sessions..."}),Z&&i.jsx("div",{className:"text-sm text-red-600",children:Z}),!C&&!Z&&i.jsx("div",{className:"space-y-3",children:(()=>{const V=((se==null?void 0:se.display_name)||"").toLowerCase().replace(/\s/g,""),ne=B.filter(ke=>((ke==null?void 0:ke.name)||"").toLowerCase().replace(/\s/g,"")===V);if(ne.length===0){const ke=((se==null?void 0:se.display_name)||"").replace(/\s/g,"");return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"No session found for this channel."}),i.jsx(re,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:!!ge,onClick:()=>ue(ke),children:ge===ke?i.jsx(Vt,{className:"h-3 w-3 animate-spin"}):"Connect"})]})}return ne.map((ke,et)=>{var Qe,yn;const nt=((Qe=ke==null?void 0:ke.me)==null?void 0:Qe.id)||"",Rt=nt?nt.replace(/@c\.us$/,""):"",ht=((yn=ke==null?void 0:ke.me)==null?void 0:yn.pushName)||"-",$t=String((ke==null?void 0:ke.status)||"UNKNOWN").toUpperCase(),jt=(ke==null?void 0:ke.name)||"",Zt=ee.has(jt)||Q.has(jt)||ge===jt,Pt=!!Rt,Lt=$t==="SCAN_QR_CODE",Dt=$t==="WORKING"&&Pt;return i.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:ht}),i.jsx("div",{className:"text-xs text-muted-foreground",children:Lt||!Pt?"Not connected":Rt})]}),i.jsx("div",{className:"flex items-center gap-2",children:Dt?i.jsx(re,{variant:"outline",size:"sm",className:"text-amber-700 border-amber-200 hover:bg-amber-50",disabled:Zt,onClick:()=>Ne(jt),children:ee.has(jt)?i.jsx(Vt,{className:"h-3 w-3 animate-spin"}):"Disconnect"}):i.jsx(re,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:Zt,onClick:()=>ue(jt),children:ge===jt?i.jsx(Vt,{className:"h-3 w-3 animate-spin"}):"Connect"})})]},et)})})()})]})]}),i.jsx(wn,{open:De,onOpenChange:Ze,children:i.jsxs(hn,{className:"sm:max-w-md",children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Connect WhatsApp"}),i.jsx(zr,{children:"Scan this QR with your WhatsApp app to connect."})]}),K&&i.jsx("div",{className:"text-sm text-red-600",children:K}),Ie?i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("img",{src:Ie,alt:"QR",className:"w-56 h-56 rounded border"}),i.jsx(re,{variant:"outline",onClick:()=>ue(Ve||((se==null?void 0:se.display_name)||"").replace(/\s/g,"")),disabled:!!ge,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:ge?i.jsx(Vt,{className:"h-4 w-4 animate-spin"}):"Refresh QR"})]}):i.jsx("div",{className:"flex items-center justify-center h-60",children:i.jsx(Vt,{className:"h-6 w-6 animate-spin"})})]})})]}),Be==="telegram"&&i.jsx("div",{className:"grid gap-6",children:le(!1)})]}),se&&i.jsx("div",{className:"mt-8",children:i.jsxs(Ue,{className:"bg-red-50 border-2 border-red-200",children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-base text-red-700 flex items-center gap-2",children:["Danger Zone",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-red-600 cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Zona berbahaya untuk tindakan yang tidak dapat dibatalkan seperti menghapus platform"})})]})]})}),i.jsx(lt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-red-700",children:"Delete this channel"}),i.jsx("div",{className:"text-xs text-red-600/80",children:"This action cannot be undone."})]}),i.jsxs(Lb,{children:[i.jsx(nce,{asChild:!0,children:i.jsx(re,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:ot,"aria-busy":ot,children:ot?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete Channel"})}),i.jsxs(zp,{children:[i.jsxs(Wp,{children:[i.jsx(Hp,{children:"Delete channel?"}),i.jsxs(Kp,{children:["This will permanently delete ",(se==null?void 0:se.display_name)||"this channel",". This action cannot be undone."]})]}),i.jsxs(qp,{children:[i.jsx(Gp,{children:"Cancel"}),i.jsx(Vp,{className:`bg-red-600 hover:bg-red-700 text-white ${ot?"animate-pulse cursor-wait":""}`,"aria-busy":ot,disabled:ot,onClick:async()=>{if(!(!se||ot))try{te(!0),await Se(se),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(V){e({title:"Error",description:(V==null?void 0:V.message)||"Failed to delete channel",variant:"destructive"})}finally{te(!1)}},children:ot?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete"})]})]})]})]})})]})})]})})]})};var xge=Array.isArray,qa=xge,bge=typeof hr=="object"&&hr&&hr.Object===Object&&hr,Yz=bge,wge=Yz,jge=typeof self=="object"&&self&&self.Object===Object&&self,_ge=wge||jge||Function("return this")(),Ws=_ge,kge=Ws,Sge=kge.Symbol,Qp=Sge,vO=Qp,Xz=Object.prototype,Nge=Xz.hasOwnProperty,Cge=Xz.toString,rh=vO?vO.toStringTag:void 0;function Age(e){var t=Nge.call(e,rh),n=e[rh];try{e[rh]=void 0;var r=!0}catch{}var a=Cge.call(e);return r&&(t?e[rh]=n:delete e[rh]),a}var Ege=Age,Tge=Object.prototype,Pge=Tge.toString;function Oge(e){return Pge.call(e)}var Ige=Oge,yO=Qp,Rge=Ege,Mge=Ige,Dge="[object Null]",Lge="[object Undefined]",xO=yO?yO.toStringTag:void 0;function $ge(e){return e==null?e===void 0?Lge:Dge:xO&&xO in Object(e)?Rge(e):Mge(e)}var Oo=$ge;function Fge(e){return e!=null&&typeof e=="object"}var Io=Fge,Uge=Oo,Bge=Io,zge="[object Symbol]";function Wge(e){return typeof e=="symbol"||Bge(e)&&Uge(e)==zge}var Sf=Wge,qge=qa,Hge=Sf,Kge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vge=/^\w*$/;function Gge(e,t){if(qge(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Hge(e)?!0:Vge.test(e)||!Kge.test(e)||t!=null&&e in Object(t)}var QC=Gge;function Yge(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Kl=Yge;const Nf=jn(Kl);var Xge=Oo,Jge=Kl,Qge="[object AsyncFunction]",Zge="[object Function]",eve="[object GeneratorFunction]",tve="[object Proxy]";function nve(e){if(!Jge(e))return!1;var t=Xge(e);return t==Zge||t==eve||t==Qge||t==tve}var ZC=nve;const Kt=jn(ZC);var rve=Ws,ave=rve["__core-js_shared__"],ive=ave,jj=ive,bO=function(){var e=/[^.]+$/.exec(jj&&jj.keys&&jj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function sve(e){return!!bO&&bO in e}var ove=sve,lve=Function.prototype,cve=lve.toString;function uve(e){if(e!=null){try{return cve.call(e)}catch{}try{return e+""}catch{}}return""}var Jz=uve,dve=ZC,fve=ove,hve=Kl,mve=Jz,pve=/[\\^$.*+?()[\]{}|]/g,gve=/^\[object .+?Constructor\]$/,vve=Function.prototype,yve=Object.prototype,xve=vve.toString,bve=yve.hasOwnProperty,wve=RegExp("^"+xve.call(bve).replace(pve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jve(e){if(!hve(e)||fve(e))return!1;var t=dve(e)?wve:gve;return t.test(mve(e))}var _ve=jve;function kve(e,t){return e==null?void 0:e[t]}var Sve=kve,Nve=_ve,Cve=Sve;function Ave(e,t){var n=Cve(e,t);return Nve(n)?n:void 0}var cu=Ave,Eve=cu,Tve=Eve(Object,"create"),Xb=Tve,wO=Xb;function Pve(){this.__data__=wO?wO(null):{},this.size=0}var Ove=Pve;function Ive(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Rve=Ive,Mve=Xb,Dve="__lodash_hash_undefined__",Lve=Object.prototype,$ve=Lve.hasOwnProperty;function Fve(e){var t=this.__data__;if(Mve){var n=t[e];return n===Dve?void 0:n}return $ve.call(t,e)?t[e]:void 0}var Uve=Fve,Bve=Xb,zve=Object.prototype,Wve=zve.hasOwnProperty;function qve(e){var t=this.__data__;return Bve?t[e]!==void 0:Wve.call(t,e)}var Hve=qve,Kve=Xb,Vve="__lodash_hash_undefined__";function Gve(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Kve&&t===void 0?Vve:t,this}var Yve=Gve,Xve=Ove,Jve=Rve,Qve=Uve,Zve=Hve,eye=Yve;function Cf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cf.prototype.clear=Xve;Cf.prototype.delete=Jve;Cf.prototype.get=Qve;Cf.prototype.has=Zve;Cf.prototype.set=eye;var tye=Cf;function nye(){this.__data__=[],this.size=0}var rye=nye;function aye(e,t){return e===t||e!==e&&t!==t}var eA=aye,iye=eA;function sye(e,t){for(var n=e.length;n--;)if(iye(e[n][0],t))return n;return-1}var Jb=sye,oye=Jb,lye=Array.prototype,cye=lye.splice;function uye(e){var t=this.__data__,n=oye(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():cye.call(t,n,1),--this.size,!0}var dye=uye,fye=Jb;function hye(e){var t=this.__data__,n=fye(t,e);return n<0?void 0:t[n][1]}var mye=hye,pye=Jb;function gye(e){return pye(this.__data__,e)>-1}var vye=gye,yye=Jb;function xye(e,t){var n=this.__data__,r=yye(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var bye=xye,wye=rye,jye=dye,_ye=mye,kye=vye,Sye=bye;function Af(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Af.prototype.clear=wye;Af.prototype.delete=jye;Af.prototype.get=_ye;Af.prototype.has=kye;Af.prototype.set=Sye;var Qb=Af,Nye=cu,Cye=Ws,Aye=Nye(Cye,"Map"),tA=Aye,jO=tye,Eye=Qb,Tye=tA;function Pye(){this.size=0,this.__data__={hash:new jO,map:new(Tye||Eye),string:new jO}}var Oye=Pye;function Iye(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Rye=Iye,Mye=Rye;function Dye(e,t){var n=e.__data__;return Mye(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Zb=Dye,Lye=Zb;function $ye(e){var t=Lye(this,e).delete(e);return this.size-=t?1:0,t}var Fye=$ye,Uye=Zb;function Bye(e){return Uye(this,e).get(e)}var zye=Bye,Wye=Zb;function qye(e){return Wye(this,e).has(e)}var Hye=qye,Kye=Zb;function Vye(e,t){var n=Kye(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Gye=Vye,Yye=Oye,Xye=Fye,Jye=zye,Qye=Hye,Zye=Gye;function Ef(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ef.prototype.clear=Yye;Ef.prototype.delete=Xye;Ef.prototype.get=Jye;Ef.prototype.has=Qye;Ef.prototype.set=Zye;var nA=Ef,Qz=nA,exe="Expected a function";function rA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(exe);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var o=e.apply(this,r);return n.cache=s.set(a,o)||s,o};return n.cache=new(rA.Cache||Qz),n}rA.Cache=Qz;var Zz=rA;const txe=jn(Zz);var nxe=Zz,rxe=500;function axe(e){var t=nxe(e,function(r){return n.size===rxe&&n.clear(),r}),n=t.cache;return t}var ixe=axe,sxe=ixe,oxe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lxe=/\\(\\)?/g,cxe=sxe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(oxe,function(n,r,a,s){t.push(a?s.replace(lxe,"$1"):r||n)}),t}),uxe=cxe;function dxe(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var aA=dxe,_O=Qp,fxe=aA,hxe=qa,mxe=Sf,pxe=1/0,kO=_O?_O.prototype:void 0,SO=kO?kO.toString:void 0;function e8(e){if(typeof e=="string")return e;if(hxe(e))return fxe(e,e8)+"";if(mxe(e))return SO?SO.call(e):"";var t=e+"";return t=="0"&&1/e==-pxe?"-0":t}var gxe=e8,vxe=gxe;function yxe(e){return e==null?"":vxe(e)}var t8=yxe,xxe=qa,bxe=QC,wxe=uxe,jxe=t8;function _xe(e,t){return xxe(e)?e:bxe(e,t)?[e]:wxe(jxe(e))}var n8=_xe,kxe=Sf,Sxe=1/0;function Nxe(e){if(typeof e=="string"||kxe(e))return e;var t=e+"";return t=="0"&&1/e==-Sxe?"-0":t}var e0=Nxe,Cxe=n8,Axe=e0;function Exe(e,t){t=Cxe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Axe(t[n++])];return n&&n==r?e:void 0}var iA=Exe,Txe=iA;function Pxe(e,t,n){var r=e==null?void 0:Txe(e,t);return r===void 0?n:r}var r8=Pxe;const Ai=jn(r8);function Oxe(e){return e==null}var Ixe=Oxe;const vn=jn(Ixe);var Rxe=Oo,Mxe=qa,Dxe=Io,Lxe="[object String]";function $xe(e){return typeof e=="string"||!Mxe(e)&&Dxe(e)&&Rxe(e)==Lxe}var Fxe=$xe;const Gc=jn(Fxe);var a8={exports:{}},Sn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA=Symbol.for("react.element"),oA=Symbol.for("react.portal"),t0=Symbol.for("react.fragment"),n0=Symbol.for("react.strict_mode"),r0=Symbol.for("react.profiler"),a0=Symbol.for("react.provider"),i0=Symbol.for("react.context"),Uxe=Symbol.for("react.server_context"),s0=Symbol.for("react.forward_ref"),o0=Symbol.for("react.suspense"),l0=Symbol.for("react.suspense_list"),c0=Symbol.for("react.memo"),u0=Symbol.for("react.lazy"),Bxe=Symbol.for("react.offscreen"),i8;i8=Symbol.for("react.module.reference");function Ii(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case sA:switch(e=e.type,e){case t0:case r0:case n0:case o0:case l0:return e;default:switch(e=e&&e.$$typeof,e){case Uxe:case i0:case s0:case u0:case c0:case a0:return e;default:return t}}case oA:return t}}}Sn.ContextConsumer=i0;Sn.ContextProvider=a0;Sn.Element=sA;Sn.ForwardRef=s0;Sn.Fragment=t0;Sn.Lazy=u0;Sn.Memo=c0;Sn.Portal=oA;Sn.Profiler=r0;Sn.StrictMode=n0;Sn.Suspense=o0;Sn.SuspenseList=l0;Sn.isAsyncMode=function(){return!1};Sn.isConcurrentMode=function(){return!1};Sn.isContextConsumer=function(e){return Ii(e)===i0};Sn.isContextProvider=function(e){return Ii(e)===a0};Sn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===sA};Sn.isForwardRef=function(e){return Ii(e)===s0};Sn.isFragment=function(e){return Ii(e)===t0};Sn.isLazy=function(e){return Ii(e)===u0};Sn.isMemo=function(e){return Ii(e)===c0};Sn.isPortal=function(e){return Ii(e)===oA};Sn.isProfiler=function(e){return Ii(e)===r0};Sn.isStrictMode=function(e){return Ii(e)===n0};Sn.isSuspense=function(e){return Ii(e)===o0};Sn.isSuspenseList=function(e){return Ii(e)===l0};Sn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===t0||e===r0||e===n0||e===o0||e===l0||e===Bxe||typeof e=="object"&&e!==null&&(e.$$typeof===u0||e.$$typeof===c0||e.$$typeof===a0||e.$$typeof===i0||e.$$typeof===s0||e.$$typeof===i8||e.getModuleId!==void 0)};Sn.typeOf=Ii;a8.exports=Sn;var zxe=a8.exports,Wxe=Oo,qxe=Io,Hxe="[object Number]";function Kxe(e){return typeof e=="number"||qxe(e)&&Wxe(e)==Hxe}var s8=Kxe;const Vxe=jn(s8);var Gxe=s8;function Yxe(e){return Gxe(e)&&e!=+e}var Xxe=Yxe;const Zp=jn(Xxe);var Zi=function(t){return t===0?0:t>0?1:-1},vc=function(t){return Gc(t)&&t.indexOf("%")===t.length-1},tt=function(t){return Vxe(t)&&!Zp(t)},Jxe=function(t){return vn(t)},kr=function(t){return tt(t)||Gc(t)},Qxe=0,d0=function(t){var n=++Qxe;return"".concat(t||"").concat(n)},Yc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!tt(t)&&!Gc(t))return r;var s;if(vc(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return Zp(s)&&(s=r),a&&s>n&&(s=n),s},nl=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Zxe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Cu=function(t,n){return tt(t)&&tt(n)?function(r){return t+r*(n-t)}:function(){return n}};function V1(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Ai(r,t))===n})}var ebe=function(t,n){return tt(t)&&tt(n)?t-n:Gc(t)&&Gc(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function hd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function G1(e){"@babel/helpers - typeof";return G1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G1(e)}var tbe=["viewBox","children"],nbe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],NO=["points","pathLength"],_j={svg:tbe,polygon:NO,polyline:NO},lA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ry=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(p.isValidElement(t)&&(r=t.props),!Nf(r))return null;var a={};return Object.keys(r).forEach(function(s){lA.includes(s)&&(a[s]=n||function(o){return r[s](r,o)})}),a},rbe=function(t,n,r){return function(a){return t(n,r,a),null}},My=function(t,n,r){if(!Nf(t)||G1(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];lA.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=rbe(o,n,r))}),a},abe=["children"],ibe=["children"];function CO(e,t){if(e==null)return{};var n=sbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var AO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},po=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},EO=null,kj=null,cA=function e(t){if(t===EO&&Array.isArray(kj))return kj;var n=[];return p.Children.forEach(t,function(r){vn(r)||(zxe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),kj=n,EO=t,n};function is(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return po(a)}):r=[po(t)],cA(e).forEach(function(a){var s=Ai(a,"type.displayName")||Ai(a,"type.name");r.indexOf(s)!==-1&&n.push(a)}),n}function Qa(e,t){var n=is(e,t);return n&&n[0]}var TO=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!tt(r)||r<=0||!tt(a)||a<=0)},obe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lbe=function(t){return t&&t.type&&Gc(t.type)&&obe.indexOf(t.type)>=0},cbe=function(t,n,r,a){var s,o=(s=_j==null?void 0:_j[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Kt(t)&&(a&&o.includes(n)||nbe.includes(n))||r&&lA.includes(n)},gn=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!Nf(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;cbe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=a[o])}),s},Y1=function e(t,n){if(t===n)return!0;var r=p.Children.count(t);if(r!==p.Children.count(n))return!1;if(r===0)return!0;if(r===1)return PO(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!PO(s,o))return!1}return!0},PO=function(t,n){if(vn(t)&&vn(n))return!0;if(!vn(t)&&!vn(n)){var r=t.props||{},a=r.children,s=CO(r,abe),o=n.props||{},l=o.children,c=CO(o,ibe);return a&&l?hd(s,c)&&Y1(a,l):!a&&!l?hd(s,c):!1}return!1},OO=function(t,n){var r=[],a={};return cA(t).forEach(function(s,o){if(lbe(s))r.push(s);else if(s){var l=po(s.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(s,l,o);r.push(f),a[l]=!0}}}),r},ube=function(t){var n=t&&t.type;return n&&AO[n]?AO[n]:null},dbe=function(t,n){return cA(n).indexOf(t)},fbe=["children","width","height","viewBox","className","style","title","desc"];function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X1.apply(this,arguments)}function hbe(e,t){if(e==null)return{};var n=mbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function J1(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=hbe(e,fbe),d=a||{width:n,height:r,x:0,y:0},f=un("recharts-surface",s);return Y.createElement("svg",X1({},gn(u,!0,"svg"),{className:f,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Y.createElement("title",null,l),Y.createElement("desc",null,c),t)}var pbe=["children","className"];function Q1(){return Q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q1.apply(this,arguments)}function gbe(e,t){if(e==null)return{};var n=vbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Pr=Y.forwardRef(function(e,t){var n=e.children,r=e.className,a=gbe(e,pbe),s=un("recharts-layer",r);return Y.createElement("g",Q1({className:s},gn(a,!0),{ref:t}),n)}),go=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s]};function ybe(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}var xbe=ybe,bbe=xbe;function wbe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:bbe(e,t,n)}var jbe=wbe,_be="\\ud800-\\udfff",kbe="\\u0300-\\u036f",Sbe="\\ufe20-\\ufe2f",Nbe="\\u20d0-\\u20ff",Cbe=kbe+Sbe+Nbe,Abe="\\ufe0e\\ufe0f",Ebe="\\u200d",Tbe=RegExp("["+Ebe+_be+Cbe+Abe+"]");function Pbe(e){return Tbe.test(e)}var o8=Pbe;function Obe(e){return e.split("")}var Ibe=Obe,l8="\\ud800-\\udfff",Rbe="\\u0300-\\u036f",Mbe="\\ufe20-\\ufe2f",Dbe="\\u20d0-\\u20ff",Lbe=Rbe+Mbe+Dbe,$be="\\ufe0e\\ufe0f",Fbe="["+l8+"]",Z1="["+Lbe+"]",ek="\\ud83c[\\udffb-\\udfff]",Ube="(?:"+Z1+"|"+ek+")",c8="[^"+l8+"]",u8="(?:\\ud83c[\\udde6-\\uddff]){2}",d8="[\\ud800-\\udbff][\\udc00-\\udfff]",Bbe="\\u200d",f8=Ube+"?",h8="["+$be+"]?",zbe="(?:"+Bbe+"(?:"+[c8,u8,d8].join("|")+")"+h8+f8+")*",Wbe=h8+f8+zbe,qbe="(?:"+[c8+Z1+"?",Z1,u8,d8,Fbe].join("|")+")",Hbe=RegExp(ek+"(?="+ek+")|"+qbe+Wbe,"g");function Kbe(e){return e.match(Hbe)||[]}var Vbe=Kbe,Gbe=Ibe,Ybe=o8,Xbe=Vbe;function Jbe(e){return Ybe(e)?Xbe(e):Gbe(e)}var Qbe=Jbe,Zbe=jbe,e0e=o8,t0e=Qbe,n0e=t8;function r0e(e){return function(t){t=n0e(t);var n=e0e(t)?t0e(t):void 0,r=n?n[0]:t.charAt(0),a=n?Zbe(n,1).join(""):t.slice(1);return r[e]()+a}}var a0e=r0e,i0e=a0e,s0e=i0e("toUpperCase"),o0e=s0e;const f0=jn(o0e);function Rn(e){return function(){return e}}const m8=Math.cos,Dy=Math.sin,fs=Math.sqrt,Ly=Math.PI,h0=2*Ly,tk=Math.PI,nk=2*tk,sc=1e-6,l0e=nk-sc;function p8(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function c0e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return p8;const n=10**t;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class u0e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?p8:c0e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,s,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,a,s){if(t=+t,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,d=o-t,f=l-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>sc)if(!(Math.abs(f*c-u*d)>sc)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,g=a-l,v=c*c+u*u,x=m*m+g*g,y=Math.sqrt(v),w=Math.sqrt(h),b=s*Math.tan((tk-Math.acos((v+h-x)/(2*y*w)))/2),_=b/w,k=b/y;Math.abs(_-1)>sc&&this._append`L${t+_*d},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*m>d*g)},${this._x1=t+k*c},${this._y1=n+k*u}`}}arc(t,n,r,a,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,d=n+c,f=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>sc||Math.abs(this._y1-d)>sc)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%nk+nk),h>l0e?this._append`A${r},${r},0,1,${f},${t-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>sc&&this._append`A${r},${r},0,${+(h>=tk)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function uA(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new u0e(t)}function dA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g8(e){this._context=e}g8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function m0(e){return new g8(e)}function v8(e){return e[0]}function y8(e){return e[1]}function x8(e,t){var n=Rn(!0),r=null,a=m0,s=null,o=uA(l);e=typeof e=="function"?e:e===void 0?v8:Rn(e),t=typeof t=="function"?t:t===void 0?y8:Rn(t);function l(c){var u,d=(c=dA(c)).length,f,h=!1,m;for(r==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Rn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Rn(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Rn(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(s=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=s=null:s=a(r=c),l):r},l}function Gg(e,t,n){var r=null,a=Rn(!0),s=null,o=m0,l=null,c=uA(u);e=typeof e=="function"?e:e===void 0?v8:Rn(+e),t=typeof t=="function"?t:Rn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?y8:Rn(+n);function u(f){var h,m,g,v=(f=dA(f)).length,x,y=!1,w,b=new Array(v),_=new Array(v);for(s==null&&(l=o(w=c())),h=0;h<=v;++h){if(!(h<v&&a(x=f[h],h,f))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(b[g],_[g]);l.lineEnd(),l.areaEnd()}y&&(b[h]=+e(x,h,f),_[h]=+t(x,h,f),l.point(r?+r(x,h,f):b[h],n?+n(x,h,f):_[h]))}if(w)return l=null,w+""||null}function d(){return x8().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Rn(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Rn(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Rn(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Rn(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Rn(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Rn(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Rn(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class b8{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function d0e(e){return new b8(e,!0)}function f0e(e){return new b8(e,!1)}const fA={draw(e,t){const n=fs(t/Ly);e.moveTo(n,0),e.arc(0,0,n,0,h0)}},h0e={draw(e,t){const n=fs(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},w8=fs(1/3),m0e=w8*2,p0e={draw(e,t){const n=fs(t/m0e),r=n*w8;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},g0e={draw(e,t){const n=fs(t),r=-n/2;e.rect(r,r,n,n)}},v0e=.8908130915292852,j8=Dy(Ly/10)/Dy(7*Ly/10),y0e=Dy(h0/10)*j8,x0e=-m8(h0/10)*j8,b0e={draw(e,t){const n=fs(t*v0e),r=y0e*n,a=x0e*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const o=h0*s/5,l=m8(o),c=Dy(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},Sj=fs(3),w0e={draw(e,t){const n=-fs(t/(Sj*3));e.moveTo(0,n*2),e.lineTo(-Sj*n,-n),e.lineTo(Sj*n,-n),e.closePath()}},di=-.5,fi=fs(3)/2,rk=1/fs(12),j0e=(rk/2+1)*3,_0e={draw(e,t){const n=fs(t/j0e),r=n/2,a=n*rk,s=r,o=n*rk+n,l=-s,c=o;e.moveTo(r,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(di*r-fi*a,fi*r+di*a),e.lineTo(di*s-fi*o,fi*s+di*o),e.lineTo(di*l-fi*c,fi*l+di*c),e.lineTo(di*r+fi*a,di*a-fi*r),e.lineTo(di*s+fi*o,di*o-fi*s),e.lineTo(di*l+fi*c,di*c-fi*l),e.closePath()}};function k0e(e,t){let n=null,r=uA(a);e=typeof e=="function"?e:Rn(e||fA),t=typeof t=="function"?t:Rn(t===void 0?64:+t);function a(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Rn(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Rn(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function $y(){}function Fy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function _8(e){this._context=e}_8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S0e(e){return new _8(e)}function k8(e){this._context=e}k8.prototype={areaStart:$y,areaEnd:$y,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N0e(e){return new k8(e)}function S8(e){this._context=e}S8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C0e(e){return new S8(e)}function N8(e){this._context=e}N8.prototype={areaStart:$y,areaEnd:$y,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function A0e(e){return new N8(e)}function IO(e){return e<0?-1:1}function RO(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(s*a+o*r)/(r+a);return(IO(s)+IO(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function MO(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Nj(e,t,n){var r=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,a+l*t,s-l,o-l*n,s,o)}function Uy(e){this._context=e}Uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nj(this,this._t0,MO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Nj(this,MO(this,n=RO(this,e,t)),n);break;default:Nj(this,this._t0,n=RO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function C8(e){this._context=new A8(e)}(C8.prototype=Object.create(Uy.prototype)).point=function(e,t){Uy.prototype.point.call(this,t,e)};function A8(e){this._context=e}A8.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}};function E0e(e){return new Uy(e)}function T0e(e){return new C8(e)}function E8(e){this._context=e}E8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=DO(e),a=DO(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function DO(e){var t,n=e.length-1,r,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function P0e(e){return new E8(e)}function p0(e,t){this._context=e,this._t=t}p0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function O0e(e){return new p0(e,.5)}function I0e(e){return new p0(e,0)}function R0e(e){return new p0(e,1)}function zd(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function ak(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function M0e(e,t){return e[t]}function D0e(e){const t=[];return t.key=e,t}function L0e(){var e=Rn([]),t=ak,n=zd,r=M0e;function a(s){var o=Array.from(e.apply(this,arguments),D0e),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(f,o[l].key,u,s)]).data=f;for(l=0,d=dA(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Rn(Array.from(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:Rn(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?ak:typeof s=="function"?s:Rn(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??zd,a):n},a}function $0e(e,t){if((r=e.length)>0){for(var n,r,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}zd(e,t)}}function F0e(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,s=r.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}zd(e,t)}}function U0e(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[r][1]||0,h=d[r-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var v=e[t[g]],x=v[r][1]||0,y=v[r-1][1]||0;m+=x-y}c+=f,u+=m*f}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,zd(e,t)}}function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}var B0e=["type","size","sizeType"];function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ik.apply(this,arguments)}function LO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(n),!0).forEach(function(r){z0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z0e(e,t,n){return t=W0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W0e(e){var t=q0e(e,"string");return Im(t)=="symbol"?t:t+""}function q0e(e,t){if(Im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H0e(e,t){if(e==null)return{};var n=K0e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var T8={symbolCircle:fA,symbolCross:h0e,symbolDiamond:p0e,symbolSquare:g0e,symbolStar:b0e,symbolTriangle:w0e,symbolWye:_0e},V0e=Math.PI/180,G0e=function(t){var n="symbol".concat(f0(t));return T8[n]||fA},Y0e=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*V0e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},X0e=function(t,n){T8["symbol".concat(f0(t))]=n},hA=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=H0e(t,B0e),u=$O($O({},c),{},{type:r,size:s,sizeType:l}),d=function(){var x=G0e(r),y=k0e().type(x).size(Y0e(s,l,r));return y()},f=u.className,h=u.cx,m=u.cy,g=gn(u,!0);return h===+h&&m===+m&&s===+s?Y.createElement("path",ik({},g,{className:un("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};hA.registerSymbol=X0e;function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sk.apply(this,arguments)}function FO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function J0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(n),!0).forEach(function(r){Rm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O8(r.key),r)}}function ewe(e,t,n){return t&&Z0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function twe(e,t,n){return t=By(t),nwe(e,P8()?Reflect.construct(t,n||[],By(e).constructor):t.apply(e,n))}function nwe(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rwe(e)}function rwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P8=function(){return!!e})()}function By(e){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},By(e)}function awe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ok(e,t)}function ok(e,t){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ok(e,t)}function Rm(e,t,n){return t=O8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O8(e){var t=iwe(e,"string");return Wd(t)=="symbol"?t:t+""}function iwe(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hi=32,mA=function(e){function t(){return Q0e(this,t),twe(this,t,arguments)}return awe(t,e),ewe(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,s=hi/2,o=hi/6,l=hi/3,c=r.inactive?a:r.color;if(r.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:hi,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(hi,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return Y.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(hi/8,"h").concat(hi,"v").concat(hi*3/4,"h").concat(-hi,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(r.legendIcon)){var u=J0e({},r);return delete u.legendIcon,Y.cloneElement(r.legendIcon,u)}return Y.createElement(hA,{fill:c,cx:s,cy:s,size:hi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:hi,height:hi},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||c,x=un(Rm(Rm({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=Kt(m.value)?null:m.value;go(!Kt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=m.inactive?u:m.color;return Y.createElement("li",sk({className:x,style:f,key:"legend-item-".concat(g)},My(r.props,m,g)),Y.createElement(J1,{width:o,height:o,viewBox:d,style:h},r.renderIcon(m)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},v?v(y,m,g):y))})}},{key:"render",value:function(){var r=this.props,a=r.payload,s=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);Rm(mA,"displayName","Legend");Rm(mA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var swe=Qb;function owe(){this.__data__=new swe,this.size=0}var lwe=owe;function cwe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var uwe=cwe;function dwe(e){return this.__data__.get(e)}var fwe=dwe;function hwe(e){return this.__data__.has(e)}var mwe=hwe,pwe=Qb,gwe=tA,vwe=nA,ywe=200;function xwe(e,t){var n=this.__data__;if(n instanceof pwe){var r=n.__data__;if(!gwe||r.length<ywe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new vwe(r)}return n.set(e,t),this.size=n.size,this}var bwe=xwe,wwe=Qb,jwe=lwe,_we=uwe,kwe=fwe,Swe=mwe,Nwe=bwe;function Tf(e){var t=this.__data__=new wwe(e);this.size=t.size}Tf.prototype.clear=jwe;Tf.prototype.delete=_we;Tf.prototype.get=kwe;Tf.prototype.has=Swe;Tf.prototype.set=Nwe;var I8=Tf,Cwe="__lodash_hash_undefined__";function Awe(e){return this.__data__.set(e,Cwe),this}var Ewe=Awe;function Twe(e){return this.__data__.has(e)}var Pwe=Twe,Owe=nA,Iwe=Ewe,Rwe=Pwe;function zy(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Owe;++t<n;)this.add(e[t])}zy.prototype.add=zy.prototype.push=Iwe;zy.prototype.has=Rwe;var R8=zy;function Mwe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var M8=Mwe;function Dwe(e,t){return e.has(t)}var D8=Dwe,Lwe=R8,$we=M8,Fwe=D8,Uwe=1,Bwe=2;function zwe(e,t,n,r,a,s){var o=n&Uwe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),d=s.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=n&Bwe?new Lwe:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var g=e[f],v=t[f];if(r)var x=o?r(v,g,f,t,e,s):r(g,v,f,e,t,s);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!$we(t,function(y,w){if(!Fwe(m,w)&&(g===y||a(g,y,n,r,s)))return m.push(w)})){h=!1;break}}else if(!(g===v||a(g,v,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var L8=zwe,Wwe=Ws,qwe=Wwe.Uint8Array,Hwe=qwe;function Kwe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Vwe=Kwe;function Gwe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var pA=Gwe,UO=Qp,BO=Hwe,Ywe=eA,Xwe=L8,Jwe=Vwe,Qwe=pA,Zwe=1,eje=2,tje="[object Boolean]",nje="[object Date]",rje="[object Error]",aje="[object Map]",ije="[object Number]",sje="[object RegExp]",oje="[object Set]",lje="[object String]",cje="[object Symbol]",uje="[object ArrayBuffer]",dje="[object DataView]",zO=UO?UO.prototype:void 0,Cj=zO?zO.valueOf:void 0;function fje(e,t,n,r,a,s,o){switch(n){case dje:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case uje:return!(e.byteLength!=t.byteLength||!s(new BO(e),new BO(t)));case tje:case nje:case ije:return Ywe(+e,+t);case rje:return e.name==t.name&&e.message==t.message;case sje:case lje:return e==t+"";case aje:var l=Jwe;case oje:var c=r&Zwe;if(l||(l=Qwe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=eje,o.set(e,t);var d=Xwe(l(e),l(t),r,a,s,o);return o.delete(e),d;case cje:if(Cj)return Cj.call(e)==Cj.call(t)}return!1}var hje=fje;function mje(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var $8=mje,pje=$8,gje=qa;function vje(e,t,n){var r=t(e);return gje(e)?r:pje(r,n(e))}var yje=vje;function xje(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}var bje=xje;function wje(){return[]}var jje=wje,_je=bje,kje=jje,Sje=Object.prototype,Nje=Sje.propertyIsEnumerable,WO=Object.getOwnPropertySymbols,Cje=WO?function(e){return e==null?[]:(e=Object(e),_je(WO(e),function(t){return Nje.call(e,t)}))}:kje,Aje=Cje;function Eje(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Tje=Eje,Pje=Oo,Oje=Io,Ije="[object Arguments]";function Rje(e){return Oje(e)&&Pje(e)==Ije}var Mje=Rje,qO=Mje,Dje=Io,F8=Object.prototype,Lje=F8.hasOwnProperty,$je=F8.propertyIsEnumerable,Fje=qO(function(){return arguments}())?qO:function(e){return Dje(e)&&Lje.call(e,"callee")&&!$je.call(e,"callee")},gA=Fje,Wy={exports:{}};function Uje(){return!1}var Bje=Uje;Wy.exports;(function(e,t){var n=Ws,r=Bje,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(Wy,Wy.exports);var U8=Wy.exports,zje=9007199254740991,Wje=/^(?:0|[1-9]\d*)$/;function qje(e,t){var n=typeof e;return t=t??zje,!!t&&(n=="number"||n!="symbol"&&Wje.test(e))&&e>-1&&e%1==0&&e<t}var vA=qje,Hje=9007199254740991;function Kje(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hje}var yA=Kje,Vje=Oo,Gje=yA,Yje=Io,Xje="[object Arguments]",Jje="[object Array]",Qje="[object Boolean]",Zje="[object Date]",e_e="[object Error]",t_e="[object Function]",n_e="[object Map]",r_e="[object Number]",a_e="[object Object]",i_e="[object RegExp]",s_e="[object Set]",o_e="[object String]",l_e="[object WeakMap]",c_e="[object ArrayBuffer]",u_e="[object DataView]",d_e="[object Float32Array]",f_e="[object Float64Array]",h_e="[object Int8Array]",m_e="[object Int16Array]",p_e="[object Int32Array]",g_e="[object Uint8Array]",v_e="[object Uint8ClampedArray]",y_e="[object Uint16Array]",x_e="[object Uint32Array]",Un={};Un[d_e]=Un[f_e]=Un[h_e]=Un[m_e]=Un[p_e]=Un[g_e]=Un[v_e]=Un[y_e]=Un[x_e]=!0;Un[Xje]=Un[Jje]=Un[c_e]=Un[Qje]=Un[u_e]=Un[Zje]=Un[e_e]=Un[t_e]=Un[n_e]=Un[r_e]=Un[a_e]=Un[i_e]=Un[s_e]=Un[o_e]=Un[l_e]=!1;function b_e(e){return Yje(e)&&Gje(e.length)&&!!Un[Vje(e)]}var w_e=b_e;function j_e(e){return function(t){return e(t)}}var B8=j_e,qy={exports:{}};qy.exports;(function(e,t){var n=Yz,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(qy,qy.exports);var __e=qy.exports,k_e=w_e,S_e=B8,HO=__e,KO=HO&&HO.isTypedArray,N_e=KO?S_e(KO):k_e,z8=N_e,C_e=Tje,A_e=gA,E_e=qa,T_e=U8,P_e=vA,O_e=z8,I_e=Object.prototype,R_e=I_e.hasOwnProperty;function M_e(e,t){var n=E_e(e),r=!n&&A_e(e),a=!n&&!r&&T_e(e),s=!n&&!r&&!a&&O_e(e),o=n||r||a||s,l=o?C_e(e.length,String):[],c=l.length;for(var u in e)(t||R_e.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||P_e(u,c)))&&l.push(u);return l}var D_e=M_e,L_e=Object.prototype;function $_e(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||L_e;return e===n}var F_e=$_e;function U_e(e,t){return function(n){return e(t(n))}}var W8=U_e,B_e=W8,z_e=B_e(Object.keys,Object),W_e=z_e,q_e=F_e,H_e=W_e,K_e=Object.prototype,V_e=K_e.hasOwnProperty;function G_e(e){if(!q_e(e))return H_e(e);var t=[];for(var n in Object(e))V_e.call(e,n)&&n!="constructor"&&t.push(n);return t}var Y_e=G_e,X_e=ZC,J_e=yA;function Q_e(e){return e!=null&&J_e(e.length)&&!X_e(e)}var eg=Q_e,Z_e=D_e,e1e=Y_e,t1e=eg;function n1e(e){return t1e(e)?Z_e(e):e1e(e)}var g0=n1e,r1e=yje,a1e=Aje,i1e=g0;function s1e(e){return r1e(e,i1e,a1e)}var o1e=s1e,VO=o1e,l1e=1,c1e=Object.prototype,u1e=c1e.hasOwnProperty;function d1e(e,t,n,r,a,s){var o=n&l1e,l=VO(e),c=l.length,u=VO(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:u1e.call(t,h)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var x=o;++f<c;){h=l[f];var y=e[h],w=t[h];if(r)var b=o?r(w,y,h,t,e,s):r(y,w,h,e,t,s);if(!(b===void 0?y===w||a(y,w,n,r,s):b)){v=!1;break}x||(x=h=="constructor")}if(v&&!x){var _=e.constructor,k=t.constructor;_!=k&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof k=="function"&&k instanceof k)&&(v=!1)}return s.delete(e),s.delete(t),v}var f1e=d1e,h1e=cu,m1e=Ws,p1e=h1e(m1e,"DataView"),g1e=p1e,v1e=cu,y1e=Ws,x1e=v1e(y1e,"Promise"),b1e=x1e,w1e=cu,j1e=Ws,_1e=w1e(j1e,"Set"),q8=_1e,k1e=cu,S1e=Ws,N1e=k1e(S1e,"WeakMap"),C1e=N1e,lk=g1e,ck=tA,uk=b1e,dk=q8,fk=C1e,H8=Oo,Pf=Jz,GO="[object Map]",A1e="[object Object]",YO="[object Promise]",XO="[object Set]",JO="[object WeakMap]",QO="[object DataView]",E1e=Pf(lk),T1e=Pf(ck),P1e=Pf(uk),O1e=Pf(dk),I1e=Pf(fk),oc=H8;(lk&&oc(new lk(new ArrayBuffer(1)))!=QO||ck&&oc(new ck)!=GO||uk&&oc(uk.resolve())!=YO||dk&&oc(new dk)!=XO||fk&&oc(new fk)!=JO)&&(oc=function(e){var t=H8(e),n=t==A1e?e.constructor:void 0,r=n?Pf(n):"";if(r)switch(r){case E1e:return QO;case T1e:return GO;case P1e:return YO;case O1e:return XO;case I1e:return JO}return t});var R1e=oc,Aj=I8,M1e=L8,D1e=hje,L1e=f1e,ZO=R1e,eI=qa,tI=U8,$1e=z8,F1e=1,nI="[object Arguments]",rI="[object Array]",Yg="[object Object]",U1e=Object.prototype,aI=U1e.hasOwnProperty;function B1e(e,t,n,r,a,s){var o=eI(e),l=eI(t),c=o?rI:ZO(e),u=l?rI:ZO(t);c=c==nI?Yg:c,u=u==nI?Yg:u;var d=c==Yg,f=u==Yg,h=c==u;if(h&&tI(e)){if(!tI(t))return!1;o=!0,d=!1}if(h&&!d)return s||(s=new Aj),o||$1e(e)?M1e(e,t,n,r,a,s):D1e(e,t,c,n,r,a,s);if(!(n&F1e)){var m=d&&aI.call(e,"__wrapped__"),g=f&&aI.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,x=g?t.value():t;return s||(s=new Aj),a(v,x,n,r,s)}}return h?(s||(s=new Aj),L1e(e,t,n,r,a,s)):!1}var z1e=B1e,W1e=z1e,iI=Io;function K8(e,t,n,r,a){return e===t?!0:e==null||t==null||!iI(e)&&!iI(t)?e!==e&&t!==t:W1e(e,t,n,r,K8,a)}var xA=K8,q1e=I8,H1e=xA,K1e=1,V1e=2;function G1e(e,t,n,r){var a=n.length,s=a,o=!r;if(e==null)return!s;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new q1e;if(r)var h=r(u,d,c,e,t,f);if(!(h===void 0?H1e(d,u,K1e|V1e,r,f):h))return!1}}return!0}var Y1e=G1e,X1e=Kl;function J1e(e){return e===e&&!X1e(e)}var V8=J1e,Q1e=V8,Z1e=g0;function eke(e){for(var t=Z1e(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Q1e(a)]}return t}var tke=eke;function nke(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var G8=nke,rke=Y1e,ake=tke,ike=G8;function ske(e){var t=ake(e);return t.length==1&&t[0][2]?ike(t[0][0],t[0][1]):function(n){return n===e||rke(n,e,t)}}var oke=ske;function lke(e,t){return e!=null&&t in Object(e)}var cke=lke,uke=n8,dke=gA,fke=qa,hke=vA,mke=yA,pke=e0;function gke(e,t,n){t=uke(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var o=pke(t[r]);if(!(s=e!=null&&n(e,o)))break;e=e[o]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&mke(a)&&hke(o,a)&&(fke(e)||dke(e)))}var vke=gke,yke=cke,xke=vke;function bke(e,t){return e!=null&&xke(e,t,yke)}var wke=bke,jke=xA,_ke=r8,kke=wke,Ske=QC,Nke=V8,Cke=G8,Ake=e0,Eke=1,Tke=2;function Pke(e,t){return Ske(e)&&Nke(t)?Cke(Ake(e),t):function(n){var r=_ke(n,e);return r===void 0&&r===t?kke(n,e):jke(t,r,Eke|Tke)}}var Oke=Pke;function Ike(e){return e}var Of=Ike;function Rke(e){return function(t){return t==null?void 0:t[e]}}var Mke=Rke,Dke=iA;function Lke(e){return function(t){return Dke(t,e)}}var $ke=Lke,Fke=Mke,Uke=$ke,Bke=QC,zke=e0;function Wke(e){return Bke(e)?Fke(zke(e)):Uke(e)}var qke=Wke,Hke=oke,Kke=Oke,Vke=Of,Gke=qa,Yke=qke;function Xke(e){return typeof e=="function"?e:e==null?Vke:typeof e=="object"?Gke(e)?Kke(e[0],e[1]):Hke(e):Yke(e)}var Vl=Xke;function Jke(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var Y8=Jke;function Qke(e){return e!==e}var Zke=Qke;function eSe(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var tSe=eSe,nSe=Y8,rSe=Zke,aSe=tSe;function iSe(e,t,n){return t===t?aSe(e,t,n):nSe(e,rSe,n)}var sSe=iSe,oSe=sSe;function lSe(e,t){var n=e==null?0:e.length;return!!n&&oSe(e,t,0)>-1}var cSe=lSe;function uSe(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var dSe=uSe;function fSe(){}var hSe=fSe,Ej=q8,mSe=hSe,pSe=pA,gSe=1/0,vSe=Ej&&1/pSe(new Ej([,-0]))[1]==gSe?function(e){return new Ej(e)}:mSe,ySe=vSe,xSe=R8,bSe=cSe,wSe=dSe,jSe=D8,_Se=ySe,kSe=pA,SSe=200;function NSe(e,t,n){var r=-1,a=bSe,s=e.length,o=!0,l=[],c=l;if(n)o=!1,a=wSe;else if(s>=SSe){var u=t?null:_Se(e);if(u)return kSe(u);o=!1,a=jSe,c=new xSe}else c=t?[]:l;e:for(;++r<s;){var d=e[r],f=t?t(d):d;if(d=n||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,n)||(c!==l&&c.push(f),l.push(d))}return l}var CSe=NSe,ASe=Vl,ESe=CSe;function TSe(e,t){return e&&e.length?ESe(e,ASe(t)):[]}var PSe=TSe;const sI=jn(PSe);function X8(e,t,n){return t===!0?sI(e,n):Kt(t)?sI(e,t):e}function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}var OSe=["ref"];function oI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(n),!0).forEach(function(r){v0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ISe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q8(r.key),r)}}function RSe(e,t,n){return t&&lI(e.prototype,t),n&&lI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function MSe(e,t,n){return t=Hy(t),DSe(e,J8()?Reflect.construct(t,n||[],Hy(e).constructor):t.apply(e,n))}function DSe(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LSe(e)}function LSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J8=function(){return!!e})()}function Hy(e){return Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hy(e)}function $Se(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},hk(e,t)}function v0(e,t,n){return t=Q8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q8(e){var t=FSe(e,"string");return qd(t)=="symbol"?t:t+""}function FSe(e,t){if(qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function USe(e,t){if(e==null)return{};var n=BSe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function zSe(e){return e.value}function WSe(e,t){if(Y.isValidElement(e))return Y.cloneElement(e,t);if(typeof e=="function")return Y.createElement(e,t);t.ref;var n=USe(t,OSe);return Y.createElement(mA,n)}var cI=1,wi=function(e){function t(){var n;ISe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=MSe(this,t,[].concat(a)),v0(n,"lastBoundingBox",{width:-1,height:-1}),n}return $Se(t,e),RSe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>cI||Math.abs(a.height-this.lastBoundingBox.height)>cI)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Gs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Gs(Gs({},f),h)}},{key:"render",value:function(){var r=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Gs(Gs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Y.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){r.wrapperNode=m}},WSe(s,Gs(Gs({},this.props),{},{payload:X8(d,u,zSe)})))}}],[{key:"getWithHeight",value:function(r,a){var s=Gs(Gs({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&tt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(p.PureComponent);v0(wi,"displayName","Legend");v0(wi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uI=Qp,qSe=gA,HSe=qa,dI=uI?uI.isConcatSpreadable:void 0;function KSe(e){return HSe(e)||qSe(e)||!!(dI&&e&&e[dI])}var VSe=KSe,GSe=$8,YSe=VSe;function Z8(e,t,n,r,a){var s=-1,o=e.length;for(n||(n=YSe),a||(a=[]);++s<o;){var l=e[s];t>0&&n(l)?t>1?Z8(l,t-1,n,r,a):GSe(a,l):r||(a[a.length]=l)}return a}var eW=Z8;function XSe(e){return function(t,n,r){for(var a=-1,s=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(s[c],c,s)===!1)break}return t}}var JSe=XSe,QSe=JSe,ZSe=QSe(),eNe=ZSe,tNe=eNe,nNe=g0;function rNe(e,t){return e&&tNe(e,t,nNe)}var tW=rNe,aNe=eg;function iNe(e,t){return function(n,r){if(n==null)return n;if(!aNe(n))return e(n,r);for(var a=n.length,s=t?a:-1,o=Object(n);(t?s--:++s<a)&&r(o[s],s,o)!==!1;);return n}}var sNe=iNe,oNe=tW,lNe=sNe,cNe=lNe(oNe),bA=cNe,uNe=bA,dNe=eg;function fNe(e,t){var n=-1,r=dNe(e)?Array(e.length):[];return uNe(e,function(a,s,o){r[++n]=t(a,s,o)}),r}var nW=fNe;function hNe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var mNe=hNe,fI=Sf;function pNe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,s=fI(e),o=t!==void 0,l=t===null,c=t===t,u=fI(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!s&&!u&&e<t||u&&n&&a&&!r&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}var gNe=pNe,vNe=gNe;function yNe(e,t,n){for(var r=-1,a=e.criteria,s=t.criteria,o=a.length,l=n.length;++r<o;){var c=vNe(a[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var xNe=yNe,Tj=aA,bNe=iA,wNe=Vl,jNe=nW,_Ne=mNe,kNe=B8,SNe=xNe,NNe=Of,CNe=qa;function ANe(e,t,n){t.length?t=Tj(t,function(s){return CNe(s)?function(o){return bNe(o,s.length===1?s[0]:s)}:s}):t=[NNe];var r=-1;t=Tj(t,kNe(wNe));var a=jNe(e,function(s,o,l){var c=Tj(t,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return _Ne(a,function(s,o){return SNe(s,o,n)})}var ENe=ANe;function TNe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var PNe=TNe,ONe=PNe,hI=Math.max;function INe(e,t,n){return t=hI(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=hI(r.length-t,0),o=Array(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),ONe(e,this,l)}}var RNe=INe;function MNe(e){return function(){return e}}var DNe=MNe,LNe=cu,$Ne=function(){try{var e=LNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),rW=$Ne,FNe=DNe,mI=rW,UNe=Of,BNe=mI?function(e,t){return mI(e,"toString",{configurable:!0,enumerable:!1,value:FNe(t),writable:!0})}:UNe,zNe=BNe,WNe=800,qNe=16,HNe=Date.now;function KNe(e){var t=0,n=0;return function(){var r=HNe(),a=qNe-(r-n);if(n=r,a>0){if(++t>=WNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var VNe=KNe,GNe=zNe,YNe=VNe,XNe=YNe(GNe),JNe=XNe,QNe=Of,ZNe=RNe,eCe=JNe;function tCe(e,t){return eCe(ZNe(e,t,QNe),e+"")}var nCe=tCe,rCe=eA,aCe=eg,iCe=vA,sCe=Kl;function oCe(e,t,n){if(!sCe(n))return!1;var r=typeof t;return(r=="number"?aCe(n)&&iCe(t,n.length):r=="string"&&t in n)?rCe(n[t],e):!1}var y0=oCe,lCe=eW,cCe=ENe,uCe=nCe,pI=y0,dCe=uCe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&pI(e,t[0],t[1])?t=[]:n>2&&pI(t[0],t[1],t[2])&&(t=[t[0]]),cCe(e,lCe(t,1),[])}),fCe=dCe;const wA=jn(fCe);function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mk.apply(this,arguments)}function hCe(e,t){return vCe(e)||gCe(e,t)||pCe(e,t)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pCe(e,t){if(e){if(typeof e=="string")return gI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(e,t)}}function gI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function vCe(e){if(Array.isArray(e))return e}function vI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vI(Object(n),!0).forEach(function(r){yCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yCe(e,t,n){return t=xCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xCe(e){var t=bCe(e,"string");return Mm(t)=="symbol"?t:t+""}function bCe(e,t){if(Mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wCe(e){return Array.isArray(e)&&kr(e[0])&&kr(e[1])?e.join(" ~ "):e}var jCe=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,v=t.label,x=t.labelFormatter,y=t.accessibilityLayer,w=y===void 0?!1:y,b=function(){if(d&&d.length){var D={padding:0,margin:0},$=(h?wA(d,h):d).map(function(U,F){if(U.type==="none")return null;var M=Pj({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),T=U.formatter||f||wCe,A=U.value,L=U.name,E=A,B=L;if(T&&E!=null&&B!=null){var R=T(A,L,U,F,d);if(Array.isArray(R)){var C=hCe(R,2);E=C[0],B=C[1]}else E=R}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:M},kr(B)?Y.createElement("span",{className:"recharts-tooltip-item-name"},B):null,kr(B)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},E),Y.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},$)}return null},_=Pj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Pj({margin:0},u),j=!vn(v),S=j?v:"",O=un("recharts-default-tooltip",m),I=un("recharts-tooltip-label",g);j&&x&&d!==void 0&&d!==null&&(S=x(v,d));var P=w?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",mk({className:O,style:_},P),Y.createElement("p",{className:I,style:k},Y.isValidElement(S)?S:"".concat(S)),b())};function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function Xg(e,t,n){return t=_Ce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Ce(e){var t=kCe(e,"string");return Dm(t)=="symbol"?t:t+""}function kCe(e,t){if(Dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ah="recharts-tooltip-wrapper",SCe={visibility:"hidden"};function NCe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return un(ah,Xg(Xg(Xg(Xg({},"".concat(ah,"-right"),tt(n)&&t&&tt(t.x)&&n>=t.x),"".concat(ah,"-left"),tt(n)&&t&&tt(t.x)&&n<t.x),"".concat(ah,"-bottom"),tt(r)&&t&&tt(t.y)&&r>=t.y),"".concat(ah,"-top"),tt(r)&&t&&tt(t.y)&&r<t.y))}function yI(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&tt(s[r]))return s[r];var d=n[r]-l-a,f=n[r]+a;if(t[r])return o[r]?d:f;if(o[r]){var h=d,m=c[r];return h<m?Math.max(f,c[r]):Math.max(d,c[r])}var g=f+l,v=c[r]+u;return g>v?Math.max(d,c[r]):Math.max(f,c[r])}function CCe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function ACe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&n?(d=yI({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=yI({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=CCe({translateX:d,translateY:f,useTranslate3d:l})):u=SCe,{cssProperties:u,cssClasses:NCe({translateX:d,translateY:f,coordinate:n})}}function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function xI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function bI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(n),!0).forEach(function(r){gk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ECe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iW(r.key),r)}}function PCe(e,t,n){return t&&TCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OCe(e,t,n){return t=Ky(t),ICe(e,aW()?Reflect.construct(t,n||[],Ky(e).constructor):t.apply(e,n))}function ICe(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RCe(e)}function RCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aW=function(){return!!e})()}function Ky(e){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ky(e)}function MCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pk(e,t)}function pk(e,t){return pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},pk(e,t)}function gk(e,t,n){return t=iW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iW(e){var t=DCe(e,"string");return Hd(t)=="symbol"?t:t+""}function DCe(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wI=1,LCe=function(e){function t(){var n;ECe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=OCe(this,t,[].concat(a)),gk(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gk(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return MCe(t,e),PCe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>wI||Math.abs(r.height-this.state.lastBoundingBox.height)>wI)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,v=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,w=a.wrapperStyle,b=ACe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),_=b.cssClasses,k=b.cssProperties,j=bI(bI({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return Y.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(O){r.wrapperNode=O}},u)}}])}(p.PureComponent),$Ce=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jl={isSsr:$Ce(),get:function(t){return jl[t]},set:function(t,n){if(typeof t=="string")jl[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){jl[a]=t[a]})}}};function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function jI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(n),!0).forEach(function(r){jA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oW(r.key),r)}}function BCe(e,t,n){return t&&UCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zCe(e,t,n){return t=Vy(t),WCe(e,sW()?Reflect.construct(t,n||[],Vy(e).constructor):t.apply(e,n))}function WCe(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qCe(e)}function qCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sW=function(){return!!e})()}function Vy(e){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vy(e)}function HCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vk(e,t)}function vk(e,t){return vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},vk(e,t)}function jA(e,t,n){return t=oW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oW(e){var t=KCe(e,"string");return Kd(t)=="symbol"?t:t+""}function KCe(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VCe(e){return e.dataKey}function GCe(e,t){return Y.isValidElement(e)?Y.cloneElement(e,t):typeof e=="function"?Y.createElement(e,t):Y.createElement(jCe,t)}var or=function(e){function t(){return FCe(this,t),zCe(this,t,arguments)}return HCe(t,e),BCe(t,[{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,v=a.payloadUniqBy,x=a.position,y=a.reverseDirection,w=a.useTranslate3d,b=a.viewBox,_=a.wrapperStyle,k=g??[];f&&k.length&&(k=X8(g.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),v,VCe));var j=k.length>0;return Y.createElement(LCe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:d,hasPayload:j,offset:m,position:x,reverseDirection:y,useTranslate3d:w,viewBox:b,wrapperStyle:_},GCe(u,_I(_I({},this.props),{},{payload:k})))}}])}(p.PureComponent);jA(or,"displayName","Tooltip");jA(or,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var YCe=Ws,XCe=function(){return YCe.Date.now()},JCe=XCe,QCe=/\s/;function ZCe(e){for(var t=e.length;t--&&QCe.test(e.charAt(t)););return t}var eAe=ZCe,tAe=eAe,nAe=/^\s+/;function rAe(e){return e&&e.slice(0,tAe(e)+1).replace(nAe,"")}var aAe=rAe,iAe=aAe,kI=Kl,sAe=Sf,SI=NaN,oAe=/^[-+]0x[0-9a-f]+$/i,lAe=/^0b[01]+$/i,cAe=/^0o[0-7]+$/i,uAe=parseInt;function dAe(e){if(typeof e=="number")return e;if(sAe(e))return SI;if(kI(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=kI(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=iAe(e);var n=lAe.test(e);return n||cAe.test(e)?uAe(e.slice(2),n?2:8):oAe.test(e)?SI:+e}var lW=dAe,fAe=Kl,Oj=JCe,NI=lW,hAe="Expected a function",mAe=Math.max,pAe=Math.min;function gAe(e,t,n){var r,a,s,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(hAe);t=NI(t)||0,fAe(n)&&(d=!!n.leading,f="maxWait"in n,s=f?mAe(NI(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function m(j){var S=r,O=a;return r=a=void 0,u=j,o=e.apply(O,S),o}function g(j){return u=j,l=setTimeout(y,t),d?m(j):o}function v(j){var S=j-c,O=j-u,I=t-S;return f?pAe(I,s-O):I}function x(j){var S=j-c,O=j-u;return c===void 0||S>=t||S<0||f&&O>=s}function y(){var j=Oj();if(x(j))return w(j);l=setTimeout(y,v(j))}function w(j){return l=void 0,h&&r?m(j):(r=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function _(){return l===void 0?o:w(Oj())}function k(){var j=Oj(),S=x(j);if(r=arguments,a=this,c=j,S){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(y,t),m(c)}return l===void 0&&(l=setTimeout(y,t)),o}return k.cancel=b,k.flush=_,k}var vAe=gAe,yAe=vAe,xAe=Kl,bAe="Expected a function";function wAe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(bAe);return xAe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),yAe(e,t,{leading:r,maxWait:t,trailing:a})}var jAe=wAe;const cW=jn(jAe);function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function CI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Jg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CI(Object(n),!0).forEach(function(r){_Ae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _Ae(e,t,n){return t=kAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kAe(e){var t=SAe(e,"string");return Lm(t)=="symbol"?t:t+""}function SAe(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NAe(e,t){return TAe(e)||EAe(e,t)||AAe(e,t)||CAe()}function CAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AAe(e,t){if(e){if(typeof e=="string")return AI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AI(e,t)}}function AI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function EAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function TAe(e){if(Array.isArray(e))return e}var pi=p.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,v=g===void 0?0:g,x=e.id,y=e.className,w=e.onResize,b=e.style,_=b===void 0?{}:b,k=p.useRef(null),j=p.useRef();j.current=w,p.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var S=p.useState({containerWidth:a.width,containerHeight:a.height}),O=NAe(S,2),I=O[0],P=O[1],N=p.useCallback(function($,U){P(function(F){var M=Math.round($),T=Math.round(U);return F.containerWidth===M&&F.containerHeight===T?F:{containerWidth:M,containerHeight:T}})},[]);p.useEffect(function(){var $=function(L){var E,B=L[0].contentRect,R=B.width,C=B.height;N(R,C),(E=j.current)===null||E===void 0||E.call(j,R,C)};v>0&&($=cW($,v,{trailing:!0,leading:!1}));var U=new ResizeObserver($),F=k.current.getBoundingClientRect(),M=F.width,T=F.height;return N(M,T),U.observe(k.current),function(){U.disconnect()}},[N,v]);var D=p.useMemo(function(){var $=I.containerWidth,U=I.containerHeight;if($<0||U<0)return null;go(vc(o)||vc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),go(!n||n>0,"The aspect(%s) must be greater than zero.",n);var F=vc(o)?$:o,M=vc(c)?U:c;n&&n>0&&(F?M=F/n:M&&(F=M*n),h&&M>h&&(M=h)),go(F>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,M,o,c,d,f,n);var T=!Array.isArray(m)&&po(m.type).endsWith("Chart");return Y.Children.map(m,function(A){return Y.isValidElement(A)?p.cloneElement(A,Jg({width:F,height:M},T?{style:Jg({height:"100%",width:"100%",maxHeight:M,maxWidth:F},A.props.style)}:{})):A})},[n,m,c,h,f,d,I,o]);return Y.createElement("div",{id:x?"".concat(x):void 0,className:un("recharts-responsive-container",y),style:Jg(Jg({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:k},D)}),uW=function(t){return null};uW.displayName="Cell";function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function EI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(n),!0).forEach(function(r){PAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PAe(e,t,n){return t=OAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OAe(e){var t=IAe(e,"string");return $m(t)=="symbol"?t:t+""}function IAe(e,t){if($m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Au={widthCache:{},cacheCount:0},RAe=2e3,MAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TI="recharts_measurement_span";function DAe(e){var t=yk({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Bh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jl.isSsr)return{width:0,height:0};var r=DAe(n),a=JSON.stringify({text:t,copyStyle:r});if(Au.widthCache[a])return Au.widthCache[a];try{var s=document.getElementById(TI);s||(s=document.createElement("span"),s.setAttribute("id",TI),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=yk(yk({},MAe),r);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return Au.widthCache[a]=c,++Au.cacheCount>RAe&&(Au.cacheCount=0,Au.widthCache={}),c}catch{return{width:0,height:0}}},LAe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function Gy(e,t){return BAe(e)||UAe(e,t)||FAe(e,t)||$Ae()}function $Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FAe(e,t){if(e){if(typeof e=="string")return PI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PI(e,t)}}function PI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function BAe(e){if(Array.isArray(e))return e}function zAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qAe(r.key),r)}}function WAe(e,t,n){return t&&OI(e.prototype,t),n&&OI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qAe(e){var t=HAe(e,"string");return Fm(t)=="symbol"?t:t+""}function HAe(e,t){if(Fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var II=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,VAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},GAe=Object.keys(dW),Qu="NaN";function YAe(e,t){return e*dW[t]}var Qg=function(){function e(t,n){zAe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!KAe.test(n)&&(this.num=NaN,this.unit=""),GAe.includes(n)&&(this.num=YAe(t,n),this.unit="px")}return WAe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=VAe.exec(n))!==null&&r!==void 0?r:[],s=Gy(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function fW(e){if(e.includes(Qu))return Qu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=II.exec(t))!==null&&n!==void 0?n:[],a=Gy(r,4),s=a[1],o=a[2],l=a[3],c=Qg.parse(s??""),u=Qg.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Qu;t=t.replace(II,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=RI.exec(t))!==null&&f!==void 0?f:[],m=Gy(h,4),g=m[1],v=m[2],x=m[3],y=Qg.parse(g??""),w=Qg.parse(x??""),b=v==="+"?y.add(w):y.subtract(w);if(b.isNaN())return Qu;t=t.replace(RI,b.toString())}return t}var MI=/\(([^()]*)\)/;function XAe(e){for(var t=e;t.includes("(");){var n=MI.exec(t),r=Gy(n,2),a=r[1];t=t.replace(MI,fW(a))}return t}function JAe(e){var t=e.replace(/\s+/g,"");return t=XAe(t),t=fW(t),t}function QAe(e){try{return JAe(e)}catch{return Qu}}function Ij(e){var t=QAe(e.slice(5,-1));return t===Qu?"":t}var ZAe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],eEe=["dx","dy","angle","className","breakAll"];function xk(){return xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xk.apply(this,arguments)}function DI(e,t){if(e==null)return{};var n=tEe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tEe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function LI(e,t){return iEe(e)||aEe(e,t)||rEe(e,t)||nEe()}function nEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rEe(e,t){if(e){if(typeof e=="string")return $I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $I(e,t)}}function $I(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function iEe(e){if(Array.isArray(e))return e}var hW=/[ \f\n\r\t\v\u2028\u2029]+/,mW=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var s=[];vn(n)||(r?s=n.toString().split(""):s=n.toString().split(hW));var o=s.map(function(c){return{word:c,width:Bh(c,a).width}}),l=r?0:Bh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},sEe=function(t,n,r,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=tt(o),f=l,h=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(M,T){var A=T.word,L=T.width,E=M[M.length-1];if(E&&(a==null||s||E.width+L+r<Number(a)))E.words.push(A),E.width+=L+r;else{var B={words:[A],width:L};M.push(B)}return M},[])},m=h(n),g=function(F){return F.reduce(function(M,T){return M.width>T.width?M:T})};if(!d)return m;for(var v="",x=function(F){var M=f.slice(0,F),T=mW({breakAll:u,style:c,children:M+v}).wordsWithComputedWidth,A=h(T),L=A.length>o||g(A).width>Number(a);return[L,A]},y=0,w=f.length-1,b=0,_;y<=w&&b<=f.length-1;){var k=Math.floor((y+w)/2),j=k-1,S=x(j),O=LI(S,2),I=O[0],P=O[1],N=x(k),D=LI(N,1),$=D[0];if(!I&&!$&&(y=k+1),I&&$&&(w=k-1),!I&&$){_=P;break}b++}return _||m},FI=function(t){var n=vn(t)?[]:t.toString().split(hW);return[{words:n}]},oEe=function(t){var n=t.width,r=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!jl.isSsr){var c,u,d=mW({breakAll:o,children:a,style:s});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return FI(a);return sEe({breakAll:o,children:a,maxLines:l,style:s},c,u,n,r)}return FI(a)},UI="#808080",Yy=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,v=g===void 0?"end":g,x=t.fill,y=x===void 0?UI:x,w=DI(t,ZAe),b=p.useMemo(function(){return oEe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),_=w.dx,k=w.dy,j=w.angle,S=w.className,O=w.breakAll,I=DI(w,eEe);if(!kr(r)||!kr(s))return null;var P=r+(tt(_)?_:0),N=s+(tt(k)?k:0),D;switch(v){case"start":D=Ij("calc(".concat(u,")"));break;case"middle":D=Ij("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:D=Ij("calc(".concat(b.length-1," * -").concat(l,")"));break}var $=[];if(f){var U=b[0].width,F=w.width;$.push("scale(".concat((tt(F)?F/U:1)/U,")"))}return j&&$.push("rotate(".concat(j,", ").concat(P,", ").concat(N,")")),$.length&&(I.transform=$.join(" ")),Y.createElement("text",xk({},gn(I,!0),{x:P,y:N,className:un("recharts-text",S),textAnchor:m,fill:y.includes("url")?UI:y}),b.map(function(M,T){var A=M.words.join(O?"":" ");return Y.createElement("tspan",{x:P,dy:T===0?D:l,key:"".concat(A,"-").concat(T)},A)}))};function _l(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lEe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _A(e){let t,n,r;e.length!==2?(t=_l,n=(l,c)=>_l(e(l),c),r=(l,c)=>e(l)-c):(t=e===_l||e===lEe?e:cEe,n=e,r=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function cEe(){return 0}function pW(e){return e===null?NaN:+e}function*uEe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const dEe=_A(_l),tg=dEe.right;_A(pW).center;class BI extends Map{constructor(t,n=mEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(zI(this,t))}has(t){return super.has(zI(this,t))}set(t,n){return super.set(fEe(this,t),n)}delete(t){return super.delete(hEe(this,t))}}function zI({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function fEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function hEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function mEe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pEe(e=_l){if(e===_l)return gW;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function gW(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const gEe=Math.sqrt(50),vEe=Math.sqrt(10),yEe=Math.sqrt(2);function Xy(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=gEe?10:s>=vEe?5:s>=yEe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?Xy(e,t,n*2):[l,c,u]}function bk(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,s,o]=r?Xy(t,e,n):Xy(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function wk(e,t,n){return t=+t,e=+e,n=+n,Xy(e,t,n)[2]}function jk(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?wk(t,e,n):wk(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function WI(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function qI(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function vW(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?gW:pEe(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*f/c+h)),g=Math.min(r,Math.floor(t+(c-u)*f/c+h));vW(e,t,m,g,a)}const s=e[t];let o=n,l=r;for(ih(e,n,t),a(e[r],s)>0&&ih(e,n,r);o<l;){for(ih(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?ih(e,n,l):(++l,ih(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function ih(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function xEe(e,t,n){if(e=Float64Array.from(uEe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return qI(e);if(t>=1)return WI(e);var r,a=(r-1)*t,s=Math.floor(a),o=WI(vW(e,s).subarray(0,s+1)),l=qI(e.subarray(s+1));return o+(l-o)*(a-s)}}function bEe(e,t,n=pW){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function wEe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}function Ri(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ro(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _k=Symbol("implicit");function kA(){var e=new BI,t=[],n=[],r=_k;function a(s){let o=e.get(s);if(o===void 0){if(r!==_k)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new BI;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return kA(t,n).unknown(r)},Ri.apply(a,arguments),a}function Um(){var e=kA().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<r,g=m?a:r,v=m?r:a;s=(v-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(v-g-s*(h-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=wEe(h).map(function(y){return g+s*y});return n(m?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,a]=h,r=+r,a=+a,f()):[r,a]},e.rangeRound=function(h){return[r,a]=h,r=+r,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Um(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ri.apply(f(),arguments)}function yW(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yW(t())},e}function zh(){return yW(Um.apply(null,arguments).paddingInner(1))}function SA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xW(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ng(){}var Bm=.7,Jy=1/Bm,md="\\s*([+-]?\\d+)\\s*",zm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jEe=/^#([0-9a-f]{3,8})$/,_Ee=new RegExp(`^rgb\\(${md},${md},${md}\\)$`),kEe=new RegExp(`^rgb\\(${Is},${Is},${Is}\\)$`),SEe=new RegExp(`^rgba\\(${md},${md},${md},${zm}\\)$`),NEe=new RegExp(`^rgba\\(${Is},${Is},${Is},${zm}\\)$`),CEe=new RegExp(`^hsl\\(${zm},${Is},${Is}\\)$`),AEe=new RegExp(`^hsla\\(${zm},${Is},${Is},${zm}\\)$`),HI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SA(ng,Wm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:KI,formatHex:KI,formatHex8:EEe,formatHsl:TEe,formatRgb:VI,toString:VI});function KI(){return this.rgb().formatHex()}function EEe(){return this.rgb().formatHex8()}function TEe(){return bW(this).formatHsl()}function VI(){return this.rgb().formatRgb()}function Wm(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jEe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?GI(t):n===3?new Da(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Zg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Zg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_Ee.exec(e))?new Da(t[1],t[2],t[3],1):(t=kEe.exec(e))?new Da(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SEe.exec(e))?Zg(t[1],t[2],t[3],t[4]):(t=NEe.exec(e))?Zg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=CEe.exec(e))?JI(t[1],t[2]/100,t[3]/100,1):(t=AEe.exec(e))?JI(t[1],t[2]/100,t[3]/100,t[4]):HI.hasOwnProperty(e)?GI(HI[e]):e==="transparent"?new Da(NaN,NaN,NaN,0):null}function GI(e){return new Da(e>>16&255,e>>8&255,e&255,1)}function Zg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Da(e,t,n,r)}function PEe(e){return e instanceof ng||(e=Wm(e)),e?(e=e.rgb(),new Da(e.r,e.g,e.b,e.opacity)):new Da}function kk(e,t,n,r){return arguments.length===1?PEe(e):new Da(e,t,n,r??1)}function Da(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}SA(Da,kk,xW(ng,{brighter(e){return e=e==null?Jy:Math.pow(Jy,e),new Da(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bm:Math.pow(Bm,e),new Da(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Da(Tc(this.r),Tc(this.g),Tc(this.b),Qy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YI,formatHex:YI,formatHex8:OEe,formatRgb:XI,toString:XI}));function YI(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}`}function OEe(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}${yc((isNaN(this.opacity)?1:this.opacity)*255)}`}function XI(){const e=Qy(this.opacity);return`${e===1?"rgb(":"rgba("}${Tc(this.r)}, ${Tc(this.g)}, ${Tc(this.b)}${e===1?")":`, ${e})`}`}function Qy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yc(e){return e=Tc(e),(e<16?"0":"")+e.toString(16)}function JI(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ji(e,t,n,r)}function bW(e){if(e instanceof Ji)return new Ji(e.h,e.s,e.l,e.opacity);if(e instanceof ng||(e=Wm(e)),!e)return new Ji;if(e instanceof Ji)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ji(o,l,c,e.opacity)}function IEe(e,t,n,r){return arguments.length===1?bW(e):new Ji(e,t,n,r??1)}function Ji(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}SA(Ji,IEe,xW(ng,{brighter(e){return e=e==null?Jy:Math.pow(Jy,e),new Ji(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bm:Math.pow(Bm,e),new Ji(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Da(Rj(e>=240?e-240:e+120,a,r),Rj(e,a,r),Rj(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Ji(QI(this.h),ev(this.s),ev(this.l),Qy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qy(this.opacity);return`${e===1?"hsl(":"hsla("}${QI(this.h)}, ${ev(this.s)*100}%, ${ev(this.l)*100}%${e===1?")":`, ${e})`}`}}));function QI(e){return e=(e||0)%360,e<0?e+360:e}function ev(e){return Math.max(0,Math.min(1,e||0))}function Rj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const NA=e=>()=>e;function REe(e,t){return function(n){return e+n*t}}function MEe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function DEe(e){return(e=+e)==1?wW:function(t,n){return n-t?MEe(t,n,e):NA(isNaN(t)?n:t)}}function wW(e,t){var n=t-e;return n?REe(e,n):NA(isNaN(e)?t:e)}const ZI=function e(t){var n=DEe(t);function r(a,s){var o=n((a=kk(a)).r,(s=kk(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=wW(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return r.gamma=e,r}(1);function LEe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function $Ee(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function FEe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=If(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=a[o](l);return s}}function UEe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Zy(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function BEe(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=If(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var Sk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mj=new RegExp(Sk.source,"g");function zEe(e){return function(){return e}}function WEe(e){return function(t){return e(t)+""}}function qEe(e,t){var n=Sk.lastIndex=Mj.lastIndex=0,r,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Sk.exec(e))&&(a=Mj.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Zy(r,a)})),n=Mj.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?WEe(c[0].x):zEe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function If(e,t){var n=typeof t,r;return t==null||n==="boolean"?NA(t):(n==="number"?Zy:n==="string"?(r=Wm(t))?(t=r,ZI):qEe:t instanceof Wm?ZI:t instanceof Date?UEe:$Ee(t)?LEe:Array.isArray(t)?FEe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?BEe:Zy)(e,t)}function CA(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function HEe(e,t){t===void 0&&(t=e,e=If);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function KEe(e){return function(){return e}}function ex(e){return+e}var eR=[0,1];function va(e){return e}function Nk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:KEe(isNaN(t)?NaN:.5)}function VEe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function GEe(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=Nk(a,r),s=n(o,s)):(r=Nk(r,a),s=n(s,o)),function(l){return s(r(l))}}function YEe(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Nk(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=tg(e,l,1,r)-1;return s[c](a[c](l))}}function rg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function x0(){var e=eR,t=eR,n=If,r,a,s,o=va,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==va&&(o=VEe(e[0],e[h-1])),l=h>2?YEe:GEe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(r),Zy)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,ex),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=CA,d()},f.clamp=function(h){return arguments.length?(o=h?!0:va,d()):o!==va},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return r=h,a=m,d()}}function AA(){return x0()(va,va)}function XEe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Vd(e){return e=tx(Math.abs(e)),e?e[1]:NaN}function JEe(e,t){return function(n,r){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function QEe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ZEe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qm(e){if(!(t=ZEe.exec(e)))throw new Error("invalid format: "+e);var t;return new EA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qm.prototype=EA.prototype;function EA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}EA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eTe(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var jW;function tTe(e,t){var n=tx(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(jW=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+tx(e,Math.max(0,t+s-1))[0]}function tR(e,t){var n=tx(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const nR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:XEe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tR(e*100,t),r:tR,s:tTe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rR(e){return e}var aR=Array.prototype.map,iR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nTe(e){var t=e.grouping===void 0||e.thousands===void 0?rR:JEe(aR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?rR:QEe(aR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=qm(f);var h=f.fill,m=f.align,g=f.sign,v=f.symbol,x=f.zero,y=f.width,w=f.comma,b=f.precision,_=f.trim,k=f.type;k==="n"?(w=!0,k="g"):nR[k]||(b===void 0&&(b=12),_=!0,k="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var j=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=v==="$"?r:/[%p]/.test(k)?o:"",O=nR[k],I=/[defgprs%]/.test(k);b=b===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function P(N){var D=j,$=S,U,F,M;if(k==="c")$=O(N)+$,N="";else{N=+N;var T=N<0||1/N<0;if(N=isNaN(N)?c:O(Math.abs(N),b),_&&(N=eTe(N)),T&&+N==0&&g!=="+"&&(T=!1),D=(T?g==="("?g:l:g==="-"||g==="("?"":g)+D,$=(k==="s"?iR[8+jW/3]:"")+$+(T&&g==="("?")":""),I){for(U=-1,F=N.length;++U<F;)if(M=N.charCodeAt(U),48>M||M>57){$=(M===46?a+N.slice(U+1):N.slice(U))+$,N=N.slice(0,U);break}}}w&&!x&&(N=t(N,1/0));var A=D.length+N.length+$.length,L=A<y?new Array(y-A+1).join(h):"";switch(w&&x&&(N=t(L+N,L.length?y-$.length:1/0),L=""),m){case"<":N=D+N+$+L;break;case"=":N=D+L+N+$;break;case"^":N=L.slice(0,A=L.length>>1)+D+N+$+L.slice(A);break;default:N=L+D+N+$;break}return s(N)}return P.toString=function(){return f+""},P}function d(f,h){var m=u((f=qm(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Vd(h)/3)))*3,v=Math.pow(10,-g),x=iR[8+g/3];return function(y){return m(v*y)+x}}return{format:u,formatPrefix:d}}var tv,TA,_W;rTe({thousands:",",grouping:[3],currency:["$",""]});function rTe(e){return tv=nTe(e),TA=tv.format,_W=tv.formatPrefix,tv}function aTe(e){return Math.max(0,-Vd(Math.abs(e)))}function iTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vd(t)/3)))*3-Vd(Math.abs(e)))}function sTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vd(t)-Vd(e))+1}function kW(e,t,n,r){var a=jk(e,t,n),s;switch(r=qm(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=iTe(a,o))&&(r.precision=s),_W(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=sTe(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=aTe(a))&&(r.precision=s-(r.type==="%")*2);break}}return TA(r)}function Gl(e){var t=e.domain;return e.ticks=function(n){var r=t();return bk(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return kW(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],l=r[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=wk(o,l,n),u===c)return r[a]=o,r[s]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function nx(){var e=AA();return e.copy=function(){return rg(e,nx())},Ri.apply(e,arguments),Gl(e)}function SW(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ex),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return SW(e).unknown(t)},e=arguments.length?Array.from(e,ex):[0,1],Gl(n)}function NW(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}function sR(e){return Math.log(e)}function oR(e){return Math.exp(e)}function oTe(e){return-Math.log(-e)}function lTe(e){return-Math.exp(-e)}function cTe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uTe(e){return e===10?cTe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function dTe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lR(e){return(t,n)=>-e(-t,n)}function PA(e){const t=e(sR,oR),n=t.domain;let r=10,a,s;function o(){return a=dTe(r),s=uTe(r),n()[0]<0?(a=lR(a),s=lR(s),e(oTe,lTe)):e(sR,oR),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,v;const x=l==null?10:+l;let y=[];if(!(r%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<r;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}}else for(;h<=m;++h)for(g=r-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}y.length*2<x&&(y=bk(u,d,x))}else y=bk(h,m,Math.min(m-h,x)).map(s);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=qm(c)).precision==null&&(c.trim=!0),c=TA(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},t.nice=()=>n(NW(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function CW(){const e=PA(x0()).domain([1,10]);return e.copy=()=>rg(e,CW()).base(e.base()),Ri.apply(e,arguments),e}function cR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function OA(e){var t=1,n=e(cR(t),uR(t));return n.constant=function(r){return arguments.length?e(cR(t=+r),uR(t)):t},Gl(n)}function AW(){var e=OA(x0());return e.copy=function(){return rg(e,AW()).constant(e.constant())},Ri.apply(e,arguments)}function dR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fTe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hTe(e){return e<0?-e*e:e*e}function IA(e){var t=e(va,va),n=1;function r(){return n===1?e(va,va):n===.5?e(fTe,hTe):e(dR(n),dR(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Gl(t)}function RA(){var e=IA(x0());return e.copy=function(){return rg(e,RA()).exponent(e.exponent())},Ri.apply(e,arguments),e}function mTe(){return RA.apply(null,arguments).exponent(.5)}function fR(e){return Math.sign(e)*e*e}function pTe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function EW(){var e=AA(),t=[0,1],n=!1,r;function a(s){var o=pTe(e(s));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(s){return e.invert(fR(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,ex)).map(fR)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return EW(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ri.apply(a,arguments),Gl(a)}function TW(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=bEe(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[tg(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(_l),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return TW().domain(e).range(t).unknown(r)},Ri.apply(s,arguments)}function PW(){var e=0,t=1,n=1,r=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[tg(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return PW().domain([e,t]).range(a).unknown(s)},Ri.apply(Gl(o),arguments)}function OW(){var e=[.5],t=[0,1],n,r=1;function a(s){return s!=null&&s<=s?t[tg(e,s,0,r)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return OW().domain(e).range(t).unknown(n)},Ri.apply(a,arguments)}const Dj=new Date,Lj=new Date;function Nr(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Nr(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(Dj.setTime(+s),Lj.setTime(+o),e(Dj),e(Lj),Math.floor(n(Dj,Lj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?o=>r(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const rx=Nr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Nr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):rx);rx.range;const oo=1e3,ki=oo*60,lo=ki*60,No=lo*24,MA=No*7,hR=No*30,$j=No*365,xc=Nr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oo)},(e,t)=>(t-e)/oo,e=>e.getUTCSeconds());xc.range;const DA=Nr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getMinutes());DA.range;const LA=Nr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getUTCMinutes());LA.range;const $A=Nr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo-e.getMinutes()*ki)},(e,t)=>{e.setTime(+e+t*lo)},(e,t)=>(t-e)/lo,e=>e.getHours());$A.range;const FA=Nr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*lo)},(e,t)=>(t-e)/lo,e=>e.getUTCHours());FA.range;const ag=Nr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ki)/No,e=>e.getDate()-1);ag.range;const b0=Nr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>e.getUTCDate()-1);b0.range;const IW=Nr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>Math.floor(e/No));IW.range;function uu(e){return Nr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ki)/MA)}const w0=uu(0),ax=uu(1),gTe=uu(2),vTe=uu(3),Gd=uu(4),yTe=uu(5),xTe=uu(6);w0.range;ax.range;gTe.range;vTe.range;Gd.range;yTe.range;xTe.range;function du(e){return Nr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/MA)}const j0=du(0),ix=du(1),bTe=du(2),wTe=du(3),Yd=du(4),jTe=du(5),_Te=du(6);j0.range;ix.range;bTe.range;wTe.range;Yd.range;jTe.range;_Te.range;const UA=Nr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());UA.range;const BA=Nr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());BA.range;const Co=Nr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Co.range;const Ao=Nr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ao.range;function RW(e,t,n,r,a,s){const o=[[xc,1,oo],[xc,5,5*oo],[xc,15,15*oo],[xc,30,30*oo],[s,1,ki],[s,5,5*ki],[s,15,15*ki],[s,30,30*ki],[a,1,lo],[a,3,3*lo],[a,6,6*lo],[a,12,12*lo],[r,1,No],[r,2,2*No],[n,1,MA],[t,1,hR],[t,3,3*hR],[e,1,$j]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=_A(([,,x])=>x).right(o,h);if(m===o.length)return e.every(jk(u/$j,d/$j,f));if(m===0)return rx.every(Math.max(jk(u,d,f),1));const[g,v]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(v)}return[l,c]}const[kTe,STe]=RW(Ao,BA,j0,IW,FA,LA),[NTe,CTe]=RW(Co,UA,w0,ag,$A,DA);function Fj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Uj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ATe(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=oh(a),d=lh(a),f=oh(s),h=lh(s),m=oh(o),g=lh(o),v=oh(l),x=lh(l),y=oh(c),w=lh(c),b={a:T,A,b:L,B:E,c:null,d:xR,e:xR,f:JTe,g:oPe,G:cPe,H:GTe,I:YTe,j:XTe,L:MW,m:QTe,M:ZTe,p:B,q:R,Q:jR,s:_R,S:ePe,u:tPe,U:nPe,V:rPe,w:aPe,W:iPe,x:null,X:null,y:sPe,Y:lPe,Z:uPe,"%":wR},_={a:C,A:q,b:Z,B:J,c:null,d:bR,e:bR,f:mPe,g:kPe,G:NPe,H:dPe,I:fPe,j:hPe,L:LW,m:pPe,M:gPe,p:ee,q:ae,Q:jR,s:_R,S:vPe,u:yPe,U:xPe,V:bPe,w:wPe,W:jPe,x:null,X:null,y:_Pe,Y:SPe,Z:CPe,"%":wR},k={a:P,A:N,b:D,B:$,c:U,d:vR,e:vR,f:qTe,g:gR,G:pR,H:yR,I:yR,j:UTe,L:WTe,m:FTe,M:BTe,p:I,q:$Te,Q:KTe,s:VTe,S:zTe,u:ITe,U:RTe,V:MTe,w:OTe,W:DTe,x:F,X:M,y:gR,Y:pR,Z:LTe,"%":HTe};b.x=j(n,b),b.X=j(r,b),b.c=j(t,b),_.x=j(n,_),_.X=j(r,_),_.c=j(t,_);function j(Q,oe){return function(ge){var ie=[],Ie=-1,me=0,K=Q.length,fe,De,Ze;for(ge instanceof Date||(ge=new Date(+ge));++Ie<K;)Q.charCodeAt(Ie)===37&&(ie.push(Q.slice(me,Ie)),(De=mR[fe=Q.charAt(++Ie)])!=null?fe=Q.charAt(++Ie):De=fe==="e"?" ":"0",(Ze=oe[fe])&&(fe=Ze(ge,De)),ie.push(fe),me=Ie+1);return ie.push(Q.slice(me,Ie)),ie.join("")}}function S(Q,oe){return function(ge){var ie=sh(1900,void 0,1),Ie=O(ie,Q,ge+="",0),me,K;if(Ie!=ge.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(oe&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(me=Uj(sh(ie.y,0,1)),K=me.getUTCDay(),me=K>4||K===0?ix.ceil(me):ix(me),me=b0.offset(me,(ie.V-1)*7),ie.y=me.getUTCFullYear(),ie.m=me.getUTCMonth(),ie.d=me.getUTCDate()+(ie.w+6)%7):(me=Fj(sh(ie.y,0,1)),K=me.getDay(),me=K>4||K===0?ax.ceil(me):ax(me),me=ag.offset(me,(ie.V-1)*7),ie.y=me.getFullYear(),ie.m=me.getMonth(),ie.d=me.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),K="Z"in ie?Uj(sh(ie.y,0,1)).getUTCDay():Fj(sh(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(K+5)%7:ie.w+ie.U*7-(K+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Uj(ie)):Fj(ie)}}function O(Q,oe,ge,ie){for(var Ie=0,me=oe.length,K=ge.length,fe,De;Ie<me;){if(ie>=K)return-1;if(fe=oe.charCodeAt(Ie++),fe===37){if(fe=oe.charAt(Ie++),De=k[fe in mR?oe.charAt(Ie++):fe],!De||(ie=De(Q,ge,ie))<0)return-1}else if(fe!=ge.charCodeAt(ie++))return-1}return ie}function I(Q,oe,ge){var ie=u.exec(oe.slice(ge));return ie?(Q.p=d.get(ie[0].toLowerCase()),ge+ie[0].length):-1}function P(Q,oe,ge){var ie=m.exec(oe.slice(ge));return ie?(Q.w=g.get(ie[0].toLowerCase()),ge+ie[0].length):-1}function N(Q,oe,ge){var ie=f.exec(oe.slice(ge));return ie?(Q.w=h.get(ie[0].toLowerCase()),ge+ie[0].length):-1}function D(Q,oe,ge){var ie=y.exec(oe.slice(ge));return ie?(Q.m=w.get(ie[0].toLowerCase()),ge+ie[0].length):-1}function $(Q,oe,ge){var ie=v.exec(oe.slice(ge));return ie?(Q.m=x.get(ie[0].toLowerCase()),ge+ie[0].length):-1}function U(Q,oe,ge){return O(Q,t,oe,ge)}function F(Q,oe,ge){return O(Q,n,oe,ge)}function M(Q,oe,ge){return O(Q,r,oe,ge)}function T(Q){return o[Q.getDay()]}function A(Q){return s[Q.getDay()]}function L(Q){return c[Q.getMonth()]}function E(Q){return l[Q.getMonth()]}function B(Q){return a[+(Q.getHours()>=12)]}function R(Q){return 1+~~(Q.getMonth()/3)}function C(Q){return o[Q.getUTCDay()]}function q(Q){return s[Q.getUTCDay()]}function Z(Q){return c[Q.getUTCMonth()]}function J(Q){return l[Q.getUTCMonth()]}function ee(Q){return a[+(Q.getUTCHours()>=12)]}function ae(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var oe=j(Q+="",b);return oe.toString=function(){return Q},oe},parse:function(Q){var oe=S(Q+="",!1);return oe.toString=function(){return Q},oe},utcFormat:function(Q){var oe=j(Q+="",_);return oe.toString=function(){return Q},oe},utcParse:function(Q){var oe=S(Q+="",!0);return oe.toString=function(){return Q},oe}}}var mR={"-":"",_:" ",0:"0"},Mr=/^\s*\d+/,ETe=/^%/,TTe=/[\\^$*+?|[\]().{}]/g;function fn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function PTe(e){return e.replace(TTe,"\\$&")}function oh(e){return new RegExp("^(?:"+e.map(PTe).join("|")+")","i")}function lh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function OTe(e,t,n){var r=Mr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ITe(e,t,n){var r=Mr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function RTe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function MTe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function DTe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function pR(e,t,n){var r=Mr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function gR(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function LTe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $Te(e,t,n){var r=Mr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function FTe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function vR(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function UTe(e,t,n){var r=Mr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function yR(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function BTe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function zTe(e,t,n){var r=Mr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function WTe(e,t,n){var r=Mr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function qTe(e,t,n){var r=Mr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function HTe(e,t,n){var r=ETe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function KTe(e,t,n){var r=Mr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function VTe(e,t,n){var r=Mr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function xR(e,t){return fn(e.getDate(),t,2)}function GTe(e,t){return fn(e.getHours(),t,2)}function YTe(e,t){return fn(e.getHours()%12||12,t,2)}function XTe(e,t){return fn(1+ag.count(Co(e),e),t,3)}function MW(e,t){return fn(e.getMilliseconds(),t,3)}function JTe(e,t){return MW(e,t)+"000"}function QTe(e,t){return fn(e.getMonth()+1,t,2)}function ZTe(e,t){return fn(e.getMinutes(),t,2)}function ePe(e,t){return fn(e.getSeconds(),t,2)}function tPe(e){var t=e.getDay();return t===0?7:t}function nPe(e,t){return fn(w0.count(Co(e)-1,e),t,2)}function DW(e){var t=e.getDay();return t>=4||t===0?Gd(e):Gd.ceil(e)}function rPe(e,t){return e=DW(e),fn(Gd.count(Co(e),e)+(Co(e).getDay()===4),t,2)}function aPe(e){return e.getDay()}function iPe(e,t){return fn(ax.count(Co(e)-1,e),t,2)}function sPe(e,t){return fn(e.getFullYear()%100,t,2)}function oPe(e,t){return e=DW(e),fn(e.getFullYear()%100,t,2)}function lPe(e,t){return fn(e.getFullYear()%1e4,t,4)}function cPe(e,t){var n=e.getDay();return e=n>=4||n===0?Gd(e):Gd.ceil(e),fn(e.getFullYear()%1e4,t,4)}function uPe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fn(t/60|0,"0",2)+fn(t%60,"0",2)}function bR(e,t){return fn(e.getUTCDate(),t,2)}function dPe(e,t){return fn(e.getUTCHours(),t,2)}function fPe(e,t){return fn(e.getUTCHours()%12||12,t,2)}function hPe(e,t){return fn(1+b0.count(Ao(e),e),t,3)}function LW(e,t){return fn(e.getUTCMilliseconds(),t,3)}function mPe(e,t){return LW(e,t)+"000"}function pPe(e,t){return fn(e.getUTCMonth()+1,t,2)}function gPe(e,t){return fn(e.getUTCMinutes(),t,2)}function vPe(e,t){return fn(e.getUTCSeconds(),t,2)}function yPe(e){var t=e.getUTCDay();return t===0?7:t}function xPe(e,t){return fn(j0.count(Ao(e)-1,e),t,2)}function $W(e){var t=e.getUTCDay();return t>=4||t===0?Yd(e):Yd.ceil(e)}function bPe(e,t){return e=$W(e),fn(Yd.count(Ao(e),e)+(Ao(e).getUTCDay()===4),t,2)}function wPe(e){return e.getUTCDay()}function jPe(e,t){return fn(ix.count(Ao(e)-1,e),t,2)}function _Pe(e,t){return fn(e.getUTCFullYear()%100,t,2)}function kPe(e,t){return e=$W(e),fn(e.getUTCFullYear()%100,t,2)}function SPe(e,t){return fn(e.getUTCFullYear()%1e4,t,4)}function NPe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Yd(e):Yd.ceil(e),fn(e.getUTCFullYear()%1e4,t,4)}function CPe(){return"+0000"}function wR(){return"%"}function jR(e){return+e}function _R(e){return Math.floor(+e/1e3)}var Eu,FW,UW;APe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function APe(e){return Eu=ATe(e),FW=Eu.format,Eu.parse,UW=Eu.utcFormat,Eu.utcParse,Eu}function EPe(e){return new Date(e)}function TPe(e){return e instanceof Date?+e:+new Date(+e)}function zA(e,t,n,r,a,s,o,l,c,u){var d=AA(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),w=u("%b %d"),b=u("%B"),_=u("%Y");function k(j){return(c(j)<j?m:l(j)<j?g:o(j)<j?v:s(j)<j?x:r(j)<j?a(j)<j?y:w:n(j)<j?b:_)(j)}return d.invert=function(j){return new Date(f(j))},d.domain=function(j){return arguments.length?h(Array.from(j,TPe)):h().map(EPe)},d.ticks=function(j){var S=h();return e(S[0],S[S.length-1],j??10)},d.tickFormat=function(j,S){return S==null?k:u(S)},d.nice=function(j){var S=h();return(!j||typeof j.range!="function")&&(j=t(S[0],S[S.length-1],j??10)),j?h(NW(S,j)):d},d.copy=function(){return rg(d,zA(e,t,n,r,a,s,o,l,c,u))},d}function PPe(){return Ri.apply(zA(NTe,CTe,Co,UA,w0,ag,$A,DA,xc,FW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function OPe(){return Ri.apply(zA(kTe,STe,Ao,BA,j0,b0,FA,LA,xc,UW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _0(){var e=0,t=1,n,r,a,s,o=va,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-n)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(If),u.rangeRound=d(CA),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(e),r=f(t),a=n===r?0:1/(r-n),u}}function Yl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BW(){var e=Gl(_0()(va));return e.copy=function(){return Yl(e,BW())},Ro.apply(e,arguments)}function zW(){var e=PA(_0()).domain([1,10]);return e.copy=function(){return Yl(e,zW()).base(e.base())},Ro.apply(e,arguments)}function WW(){var e=OA(_0());return e.copy=function(){return Yl(e,WW()).constant(e.constant())},Ro.apply(e,arguments)}function WA(){var e=IA(_0());return e.copy=function(){return Yl(e,WA()).exponent(e.exponent())},Ro.apply(e,arguments)}function IPe(){return WA.apply(null,arguments).exponent(.5)}function qW(){var e=[],t=va;function n(r){if(r!=null&&!isNaN(r=+r))return t((tg(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(_l),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>xEe(e,s/r))},n.copy=function(){return qW(t).domain(e)},Ro.apply(n,arguments)}function k0(){var e=0,t=.5,n=1,r=1,a,s,o,l,c,u=va,d,f=!1,h;function m(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-s)*(r*v<r*s?l:c),u(f?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,a=d(e=+e),s=d(t=+t),o=d(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(f=!!v,m):f},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(x){var y,w,b;return arguments.length?([y,w,b]=x,u=HEe(v,[y,w,b]),m):[u(0),u(.5),u(1)]}}return m.range=g(If),m.rangeRound=g(CA),m.unknown=function(v){return arguments.length?(h=v,m):h},function(v){return d=v,a=v(e),s=v(t),o=v(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m}}function HW(){var e=Gl(k0()(va));return e.copy=function(){return Yl(e,HW())},Ro.apply(e,arguments)}function KW(){var e=PA(k0()).domain([.1,1,10]);return e.copy=function(){return Yl(e,KW()).base(e.base())},Ro.apply(e,arguments)}function VW(){var e=OA(k0());return e.copy=function(){return Yl(e,VW()).constant(e.constant())},Ro.apply(e,arguments)}function qA(){var e=IA(k0());return e.copy=function(){return Yl(e,qA()).exponent(e.exponent())},Ro.apply(e,arguments)}function RPe(){return qA.apply(null,arguments).exponent(.5)}const kR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Um,scaleDiverging:HW,scaleDivergingLog:KW,scaleDivergingPow:qA,scaleDivergingSqrt:RPe,scaleDivergingSymlog:VW,scaleIdentity:SW,scaleImplicit:_k,scaleLinear:nx,scaleLog:CW,scaleOrdinal:kA,scalePoint:zh,scalePow:RA,scaleQuantile:TW,scaleQuantize:PW,scaleRadial:EW,scaleSequential:BW,scaleSequentialLog:zW,scaleSequentialPow:WA,scaleSequentialQuantile:qW,scaleSequentialSqrt:IPe,scaleSequentialSymlog:WW,scaleSqrt:mTe,scaleSymlog:AW,scaleThreshold:OW,scaleTime:PPe,scaleUtc:OPe,tickFormat:kW},Symbol.toStringTag,{value:"Module"}));var MPe=Sf;function DPe(e,t,n){for(var r=-1,a=e.length;++r<a;){var s=e[r],o=t(s);if(o!=null&&(l===void 0?o===o&&!MPe(o):n(o,l)))var l=o,c=s}return c}var GW=DPe;function LPe(e,t){return e>t}var $Pe=LPe,FPe=GW,UPe=$Pe,BPe=Of;function zPe(e){return e&&e.length?FPe(e,BPe,UPe):void 0}var WPe=zPe;const S0=jn(WPe);function qPe(e,t){return e<t}var HPe=qPe,KPe=GW,VPe=HPe,GPe=Of;function YPe(e){return e&&e.length?KPe(e,GPe,VPe):void 0}var XPe=YPe;const N0=jn(XPe);var JPe=aA,QPe=Vl,ZPe=nW,e2e=qa;function t2e(e,t){var n=e2e(e)?JPe:ZPe;return n(e,QPe(t))}var n2e=t2e,r2e=eW,a2e=n2e;function i2e(e,t){return r2e(a2e(e,t),1)}var s2e=i2e;const o2e=jn(s2e);var l2e=xA;function c2e(e,t){return l2e(e,t)}var u2e=c2e;const HA=jn(u2e);var Rf=1e9,d2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},VA,Kn=!0,Pi="[DecimalError] ",Pc=Pi+"Invalid argument: ",KA=Pi+"Exponent out of range: ",Mf=Math.floor,lc=Math.pow,f2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ei,Er=1e7,Bn=7,YW=9007199254740991,sx=Mf(YW/Bn),gt={};gt.absoluteValue=gt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};gt.comparedTo=gt.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};gt.decimalPlaces=gt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Bn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};gt.dividedBy=gt.div=function(e){return vo(this,new this.constructor(e))};gt.dividedToIntegerBy=gt.idiv=function(e){var t=this,n=t.constructor;return En(vo(t,new n(e),0,1),n.precision)};gt.equals=gt.eq=function(e){return!this.cmp(e)};gt.exponent=function(){return gr(this)};gt.greaterThan=gt.gt=function(e){return this.cmp(e)>0};gt.greaterThanOrEqualTo=gt.gte=function(e){return this.cmp(e)>=0};gt.isInteger=gt.isint=function(){return this.e>this.d.length-2};gt.isNegative=gt.isneg=function(){return this.s<0};gt.isPositive=gt.ispos=function(){return this.s>0};gt.isZero=function(){return this.s===0};gt.lessThan=gt.lt=function(e){return this.cmp(e)<0};gt.lessThanOrEqualTo=gt.lte=function(e){return this.cmp(e)<1};gt.logarithm=gt.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ei))throw Error(Pi+"NaN");if(n.s<1)throw Error(Pi+(n.s?"NaN":"-Infinity"));return n.eq(ei)?new r(0):(Kn=!1,t=vo(Hm(n,s),Hm(e,s),s),Kn=!0,En(t,a))};gt.minus=gt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QW(t,e):XW(t,(e.s=-e.s,e))};gt.modulo=gt.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Pi+"NaN");return n.s?(Kn=!1,t=vo(n,e,0,1).times(e),Kn=!0,n.minus(t)):En(new r(n),a)};gt.naturalExponential=gt.exp=function(){return JW(this)};gt.naturalLogarithm=gt.ln=function(){return Hm(this)};gt.negated=gt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};gt.plus=gt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XW(t,e):QW(t,(e.s=-e.s,e))};gt.precision=gt.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Pc+e);if(t=gr(a)+1,r=a.d.length-1,n=r*Bn+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};gt.squareRoot=gt.sqrt=function(){var e,t,n,r,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Pi+"NaN")}for(e=gr(l),Kn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=As(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Mf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=r,r=s.plus(vo(l,s,o+2)).times(.5),As(s.d).slice(0,o)===(t=As(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(En(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;o+=4}return Kn=!0,En(r,n)};gt.times=gt.mul=function(e){var t,n,r,a,s,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+m[r]*h[a-r-1]+t,s[a--]=l%Er|0,t=l/Er|0;s[a]=(s[a]+t)%Er|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Kn?En(e,f.precision):e};gt.toDecimalPlaces=gt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:($s(e,0,Rf),t===void 0?t=r.rounding:$s(t,0,8),En(n,e+gr(n)+1,t))};gt.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Xc(r,!0):($s(e,0,Rf),t===void 0?t=a.rounding:$s(t,0,8),r=En(new a(r),e+1,t),n=Xc(r,!0,e+1)),n};gt.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?Xc(a):($s(e,0,Rf),t===void 0?t=s.rounding:$s(t,0,8),r=En(new s(a),e+gr(a)+1,t),n=Xc(r.abs(),!1,e+gr(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};gt.toInteger=gt.toint=function(){var e=this,t=e.constructor;return En(new t(e),gr(e)+1,t.rounding)};gt.toNumber=function(){return+this};gt.toPower=gt.pow=function(e){var t,n,r,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(ei);if(l=new c(l),!l.s){if(e.s<1)throw Error(Pi+"Infinity");return l}if(l.eq(ei))return l;if(r=c.precision,e.eq(ei))return En(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=d<0?-d:d)<=YW){for(a=new c(ei),t=Math.ceil(r/Bn+4),Kn=!1;n%2&&(a=a.times(l),NR(a.d,t)),n=Mf(n/2),n!==0;)l=l.times(l),NR(l.d,t);return Kn=!0,e.s<0?new c(ei).div(a):En(a,r)}}else if(s<0)throw Error(Pi+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Kn=!1,a=e.times(Hm(l,r+u)),Kn=!0,a=JW(a),a.s=s,a};gt.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?(n=gr(a),r=Xc(a,n<=s.toExpNeg||n>=s.toExpPos)):($s(e,1,Rf),t===void 0?t=s.rounding:$s(t,0,8),a=En(new s(a),e,t),n=gr(a),r=Xc(a,e<=n||n<=s.toExpNeg,e)),r};gt.toSignificantDigits=gt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):($s(e,1,Rf),t===void 0?t=r.rounding:$s(t,0,8)),En(new r(n),e,t)};gt.toString=gt.valueOf=gt.val=gt.toJSON=gt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=gr(e),n=e.constructor;return Xc(e,t<=n.toExpNeg||t>=n.toExpPos)};function XW(e,t){var n,r,a,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Kn?En(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(f/Bn),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/Er|0,c[s]%=Er;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Kn?En(t,f):t}function $s(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Pc+e)}function As(e){var t,n,r,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)r=e[t]+"",n=Bn-r.length,n&&(s+=Xo(n)),s+=r;o=e[t],r=o+"",n=Bn-r.length,n&&(s+=Xo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var vo=function(){function e(r,a){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*a+o,r[l]=s%Er|0,o=s/Er|0;return o&&r.unshift(o),r}function t(r,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,s){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*Er+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o){var l,c,u,d,f,h,m,g,v,x,y,w,b,_,k,j,S,O,I=r.constructor,P=r.s==a.s?1:-1,N=r.d,D=a.d;if(!r.s)return new I(r);if(!a.s)throw Error(Pi+"Division by zero");for(c=r.e-a.e,S=D.length,k=N.length,m=new I(P),g=m.d=[],u=0;D[u]==(N[u]||0);)++u;if(D[u]>(N[u]||0)&&--c,s==null?w=s=I.precision:o?w=s+(gr(r)-gr(a))+1:w=s,w<0)return new I(0);if(w=w/Bn+2|0,u=0,S==1)for(d=0,D=D[0],w++;(u<k||d)&&w--;u++)b=d*Er+(N[u]||0),g[u]=b/D|0,d=b%D|0;else{for(d=Er/(D[0]+1)|0,d>1&&(D=e(D,d),N=e(N,d),S=D.length,k=N.length),_=S,v=N.slice(0,S),x=v.length;x<S;)v[x++]=0;O=D.slice(),O.unshift(0),j=D[0],D[1]>=Er/2&&++j;do d=0,l=t(D,v,S,x),l<0?(y=v[0],S!=x&&(y=y*Er+(v[1]||0)),d=y/j|0,d>1?(d>=Er&&(d=Er-1),f=e(D,d),h=f.length,x=v.length,l=t(f,v,h,x),l==1&&(d--,n(f,S<h?O:D,h))):(d==0&&(l=d=1),f=D.slice()),h=f.length,h<x&&f.unshift(0),n(v,f,x),l==-1&&(x=v.length,l=t(D,v,S,x),l<1&&(d++,n(v,S<x?O:D,x))),x=v.length):l===0&&(d++,v=[0]),g[u++]=d,l&&v[0]?v[x++]=N[_]||0:(v=[N[_]],x=1);while((_++<k||v[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,En(m,o?s+gr(m)+1:s)}}();function JW(e,t){var n,r,a,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(gr(e)>16)throw Error(KA+gr(e));if(!e.s)return new d(ei);for(t==null?(Kn=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(lc(2,u))/Math.LN10*2+5|0,l+=r,n=a=s=new d(ei),d.precision=l;;){if(a=En(a.times(e),l),n=n.times(++c),o=s.plus(vo(a,n,l)),As(o.d).slice(0,l)===As(s.d).slice(0,l)){for(;u--;)s=En(s.times(s),l);return d.precision=f,t==null?(Kn=!0,En(s,f)):s}s=o}}function gr(e){for(var t=e.e*Bn,n=e.d[0];n>=10;n/=10)t++;return t}function Bj(e,t,n){if(t>e.LN10.sd())throw Kn=!0,n&&(e.precision=n),Error(Pi+"LN10 precision limit exceeded");return En(new e(e.LN10),t)}function Xo(e){for(var t="";e--;)t+="0";return t}function Hm(e,t){var n,r,a,s,o,l,c,u,d,f=1,h=10,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(Pi+(m.s?"NaN":"-Infinity"));if(m.eq(ei))return new v(0);if(t==null?(Kn=!1,u=x):u=t,m.eq(10))return t==null&&(Kn=!0),Bj(v,u);if(u+=h,v.precision=u,n=As(g),r=n.charAt(0),s=gr(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=As(m.d),r=n.charAt(0),f++;s=gr(m),r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1))}else return c=Bj(v,u+2,x).times(s+""),m=Hm(new v(r+"."+n.slice(1)),u-h).plus(c),v.precision=x,t==null?(Kn=!0,En(m,x)):m;for(l=o=m=vo(m.minus(ei),m.plus(ei),u),d=En(m.times(m),u),a=3;;){if(o=En(o.times(d),u),c=l.plus(vo(o,new v(a),u)),As(c.d).slice(0,u)===As(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(Bj(v,u+2,x).times(s+""))),l=vo(l,new v(f),u),v.precision=x,t==null?(Kn=!0,En(l,x)):l;l=c,a+=2}}function SR(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Mf(n/Bn),e.d=[],r=(n+1)%Bn,n<0&&(r+=Bn),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Bn;r<a;)e.d.push(+t.slice(r,r+=Bn));t=t.slice(r),r=Bn-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Kn&&(e.e>sx||e.e<-sx))throw Error(KA+n)}else e.s=0,e.e=0,e.d=[0];return e}function En(e,t,n){var r,a,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(r=t-o,r<0)r+=Bn,a=t,u=f[d=0];else{if(d=Math.ceil((r+1)/Bn),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;r%=Bn,a=r-Bn+o}if(n!==void 0&&(s=lc(10,o-a-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/lc(10,o-a):0:f[d-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return c?(s=gr(e),f.length=1,t=t-s-1,f[0]=lc(10,(Bn-t%Bn)%Bn),e.e=Mf(-t/Bn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=lc(10,Bn-r),f[d]=a>0?(u/lc(10,o-a)%lc(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Er&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Er)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Kn&&(e.e>sx||e.e<-sx))throw Error(KA+gr(e));return e}function QW(e,t){var n,r,a,s,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Kn?En(t,m):t;if(c=e.d,f=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=f.length):(n=f,r=u,l=c.length),a=Math.max(Math.ceil(m/Bn),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(n=c,c=f,f=n,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Er-1;--c[s],c[a]+=Er}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Kn?En(t,m):t):new h(0)}function Xc(e,t,n){var r,a=gr(e),s=As(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Xo(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Xo(-a-1)+s,n&&(r=n-o)>0&&(s+=Xo(r))):a>=o?(s+=Xo(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+Xo(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=Xo(r))),e.s<0?"-"+s:s}function NR(e,t){if(e.length>t)return e.length=t,!0}function ZW(e){var t,n,r;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Pc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return SR(o,s.toString())}else if(typeof s!="string")throw Error(Pc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,f2e.test(s))SR(o,s);else throw Error(Pc+s)}if(a.prototype=gt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ZW,a.config=a.set=h2e,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function h2e(e){if(!e||typeof e!="object")throw Error(Pi+"Object expected");var t,n,r,a=["precision",1,Rf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Mf(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Pc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Pc+n+": "+r);return this}var VA=ZW(d2e);ei=new VA(1);const Cn=VA;function m2e(e){return y2e(e)||v2e(e)||g2e(e)||p2e()}function p2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g2e(e,t){if(e){if(typeof e=="string")return Ck(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ck(e,t)}}function v2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function y2e(e){if(Array.isArray(e))return Ck(e)}function Ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x2e=function(t){return t},eq={"@@functional/placeholder":!0},tq=function(t){return t===eq},CR=function(t){return function n(){return arguments.length===0||arguments.length===1&&tq(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},b2e=function e(t,n){return t===1?n:CR(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==eq}).length;return o>=t?n.apply(void 0,a):e(t-o,CR(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return tq(f)?c.shift():f});return n.apply(void 0,m2e(d).concat(c))}))})},C0=function(t){return b2e(t.length,t)},Ak=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},w2e=C0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),j2e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return x2e;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},Ek=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},nq=function(t){var n=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function _2e(e){var t;return e===0?t=1:t=Math.floor(new Cn(e).abs().log(10).toNumber())+1,t}function k2e(e,t,n){for(var r=new Cn(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var S2e=C0(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),N2e=C0(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),C2e=C0(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const A0={rangeStep:k2e,getDigitCount:_2e,interpolateNumber:S2e,uninterpolateNumber:N2e,uninterpolateTruncation:C2e};function Tk(e){return T2e(e)||E2e(e)||rq(e)||A2e()}function A2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function T2e(e){if(Array.isArray(e))return Pk(e)}function Km(e,t){return I2e(e)||O2e(e,t)||rq(e,t)||P2e()}function P2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rq(e,t){if(e){if(typeof e=="string")return Pk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pk(e,t)}}function Pk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O2e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function I2e(e){if(Array.isArray(e))return e}function aq(e){var t=Km(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function iq(e,t,n){if(e.lte(0))return new Cn(0);var r=A0.getDigitCount(e.toNumber()),a=new Cn(10).pow(r),s=e.div(a),o=r!==1?.05:.1,l=new Cn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new Cn(Math.ceil(c))}function R2e(e,t,n){var r=1,a=new Cn(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new Cn(10).pow(A0.getDigitCount(e)-1),a=new Cn(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new Cn(Math.floor(e)))}else e===0?a=new Cn(Math.floor((t-1)/2)):n||(a=new Cn(Math.floor(e)));var o=Math.floor((t-1)/2),l=j2e(w2e(function(c){return a.add(new Cn(c-o).mul(r)).toNumber()}),Ak);return l(0,t)}function sq(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Cn(0),tickMin:new Cn(0),tickMax:new Cn(0)};var s=iq(new Cn(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new Cn(0):(o=new Cn(e).add(t).div(2),o=o.sub(new Cn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new Cn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?sq(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new Cn(l).mul(s)),tickMax:o.add(new Cn(c).mul(s))})}function M2e(e){var t=Km(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=aq([n,r]),c=Km(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Tk(Ak(0,a-1).map(function(){return 1/0}))):[].concat(Tk(Ak(0,a-1).map(function(){return-1/0})),[d]);return n>r?Ek(f):f}if(u===d)return R2e(u,a,s);var h=sq(u,d,o,s),m=h.step,g=h.tickMin,v=h.tickMax,x=A0.rangeStep(g,v.add(new Cn(.1).mul(m)),m);return n>r?Ek(x):x}function D2e(e,t){var n=Km(e,2),r=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=aq([r,a]),l=Km(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var d=Math.max(t,2),f=iq(new Cn(u).sub(c).div(d-1),s,0),h=[].concat(Tk(A0.rangeStep(new Cn(c),new Cn(u).sub(new Cn(.99).mul(f)),f)),[u]);return r>a?Ek(h):h}var L2e=nq(M2e),$2e=nq(D2e),F2e="Invariant failed";function Jc(e,t){throw new Error(F2e)}var U2e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(this,arguments)}function B2e(e,t){return H2e(e)||q2e(e,t)||W2e(e,t)||z2e()}function z2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W2e(e,t){if(e){if(typeof e=="string")return AR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AR(e,t)}}function AR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function H2e(e){if(Array.isArray(e))return e}function K2e(e,t){if(e==null)return{};var n=V2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function V2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function G2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cq(r.key),r)}}function X2e(e,t,n){return t&&Y2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J2e(e,t,n){return t=lx(t),Q2e(e,oq()?Reflect.construct(t,n||[],lx(e).constructor):t.apply(e,n))}function Q2e(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z2e(e)}function Z2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oq=function(){return!!e})()}function lx(e){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lx(e)}function eOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ok(e,t)}function Ok(e,t){return Ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ok(e,t)}function lq(e,t,n){return t=cq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cq(e){var t=tOe(e,"string");return Xd(t)=="symbol"?t:t+""}function tOe(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E0=function(e){function t(){return G2e(this,t),J2e(this,t,arguments)}return eOe(t,e),X2e(t,[{key:"render",value:function(){var r=this.props,a=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=K2e(r,U2e),m=gn(h,!1);this.props.direction==="x"&&d.type!=="number"&&Jc();var g=c.map(function(v){var x=u(v,l),y=x.x,w=x.y,b=x.value,_=x.errorVal;if(!_)return null;var k=[],j,S;if(Array.isArray(_)){var O=B2e(_,2);j=O[0],S=O[1]}else j=S=_;if(s==="vertical"){var I=d.scale,P=w+a,N=P+o,D=P-o,$=I(b-j),U=I(b+S);k.push({x1:U,y1:N,x2:U,y2:D}),k.push({x1:$,y1:P,x2:U,y2:P}),k.push({x1:$,y1:N,x2:$,y2:D})}else if(s==="horizontal"){var F=f.scale,M=y+a,T=M-o,A=M+o,L=F(b-j),E=F(b+S);k.push({x1:T,y1:E,x2:A,y2:E}),k.push({x1:M,y1:L,x2:M,y2:E}),k.push({x1:T,y1:L,x2:A,y2:L})}return Y.createElement(Pr,ox({className:"recharts-errorBar",key:"bar-".concat(k.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},m),k.map(function(B){return Y.createElement("line",ox({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return Y.createElement(Pr,{className:"recharts-errorBars"},g)}}])}(Y.Component);lq(E0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});lq(E0,"displayName","ErrorBar");function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(n),!0).forEach(function(r){nOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nOe(e,t,n){return t=rOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rOe(e){var t=aOe(e,"string");return Vm(t)=="symbol"?t:t+""}function aOe(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uq=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=Qa(n,wi);if(!o)return null;var l=wi.defaultProps,c=l!==void 0?ec(ec({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?ec(ec({},h),f.props):{},g=m.dataKey,v=m.name,x=m.legendType,y=m.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:GA(f),value:v||g,payload:m}}),ec(ec(ec({},c),wi.getWithHeight(o,a)),{},{payload:u,item:o})};function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function TR(e){return lOe(e)||oOe(e)||sOe(e)||iOe()}function iOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sOe(e,t){if(e){if(typeof e=="string")return Ik(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ik(e,t)}}function oOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lOe(e){if(Array.isArray(e))return Ik(e)}function Ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function PR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PR(Object(n),!0).forEach(function(r){pd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pd(e,t,n){return t=cOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cOe(e){var t=uOe(e,"string");return Gm(t)=="symbol"?t:t+""}function uOe(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(e,t,n){return vn(e)||vn(t)?n:kr(t)?Ai(e,t,n):Kt(t)?t(e):n}function Wh(e,t,n,r){var a=o2e(e,function(l){return Fs(l,t)});if(n==="number"){var s=a.filter(function(l){return tt(l)||parseFloat(l)});return s.length?[N0(s),S0(s)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!vn(l)}):a;return o.map(function(l){return kr(l)||l instanceof Date?l:""})}var dOe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Zi(f-d)!==Zi(h-f)){var g=[];if(Zi(h-f)===Zi(c[1]-c[0])){m=h;var v=f+c[1]-c[0];g[0]=Math.min(v,(v+d)/2),g[1]=Math.max(v,(v+d)/2)}else{m=d;var x=h+c[1]-c[0];g[0]=Math.min(f,(x+f)/2),g[1]=Math.max(f,(x+f)/2)}var y=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var w=Math.min(d,h),b=Math.max(d,h);if(t>(w+f)/2&&t<=(b+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<l-1&&t>(r[_].coordinate+r[_-1].coordinate)/2&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_===l-1&&t>(r[_].coordinate+r[_-1].coordinate)/2){o=r[_].index;break}return o},GA=function(t){var n,r=t,a=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?nr(nr({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},fOe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],v=g.items,x=g.cateAxisId,y=v.filter(function(S){return po(S.type).indexOf("Bar")>=0});if(y&&y.length){var w=y[0].type.defaultProps,b=w!==void 0?nr(nr({},w),y[0].props):y[0].props,_=b.barSize,k=b[x];o[k]||(o[k]=[]);var j=vn(_)?n:_;o[k].push({item:y[0],stackList:y.slice(1),barSize:vn(j)?void 0:Yc(j,r,0)})}}return o},hOe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Yc(n,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(_,k){return _+k.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var v=(a-g)/2>>0,x={offset:v-u,size:0};d=o.reduce(function(_,k){var j={item:k.item,position:{offset:x.offset+x.size+u,size:h?m:k.barSize}},S=[].concat(TR(_),[j]);return x=S[S.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(O){S.push({item:O,position:x})}),S},f)}else{var y=Yc(r,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var w=(a-2*y-(c-1)*u)/c;w>1&&(w>>=0);var b=l===+l?Math.min(w,l):w;d=o.reduce(function(_,k,j){var S=[].concat(TR(_),[{item:k.item,position:{offset:y+(w+u)*j+(w-b)/2,size:b}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(O){S.push({item:O,position:S[S.length-1].position})}),S},f)}return d},mOe=function(t,n,r,a){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=uq({children:s,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&tt(t[m]))return nr(nr({},t),{},pd({},m,t[m]+(f||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&tt(t[g]))return nr(nr({},t),{},pd({},g,t[g]+(h||0)))}return t},pOe=function(t,n,r){return vn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},dq=function(t,n,r,a,s){var o=n.props.children,l=is(o,E0).filter(function(u){return pOe(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Fs(d,r);if(vn(f))return u;var h=Array.isArray(f)?[N0(f),S0(f)]:[f,f],m=c.reduce(function(g,v){var x=Fs(d,v,0),y=h[0]-Math.abs(Array.isArray(x)?x[0]:x),w=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(w,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},gOe=function(t,n,r,a,s){var o=n.map(function(l){return dq(t,l,r,s,a)}).filter(function(l){return!vn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},fq=function(t,n,r,a,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&dq(t,c,u,a)||Wh(t,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},hq=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},mq=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},co=function(t,n,r){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Zi(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Zp(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:s?s[f]:f,index:h,offset:u}})},zj=new WeakMap,nv=function(t,n){if(typeof n!="function")return t;zj.has(t)||zj.set(t,new WeakMap);var r=zj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},vOe=function(t,n,r){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Um(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:nx(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:zh(),realScaleType:"point"}:s==="category"?{scale:Um(),realScaleType:"band"}:{scale:nx(),realScaleType:"linear"};if(Gc(a)){var c="scale".concat(f0(a));return{scale:(kR[c]||zh)(),realScaleType:kR[c]?c:"point"}}return Kt(a)?{scale:a}:{scale:zh(),realScaleType:"point"}},OR=1e-4,yOe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),s=Math.min(a[0],a[1])-OR,o=Math.max(a[0],a[1])+OR,l=t(n[0]),c=t(n[r-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[r-1]])}},xOe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},bOe=function(t,n){if(!n||n.length!==2||!tt(n[0])||!tt(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!tt(t[0])||t[0]<r)&&(s[0]=r),(!tt(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},wOe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Zp(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},jOe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0;o<n;++o){var l=Zp(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},_Oe={sign:wOe,expand:$0e,none:zd,silhouette:F0e,wiggle:U0e,positive:jOe},kOe=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),s=_Oe[r],o=L0e().keys(a).value(function(l,c){return+Fs(l,c,0)}).order(ak).offset(s);return o(t)},SOe=function(t,n,r,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?nr(nr({},h.type.defaultProps),h.props):h.props,v=g.stackId,x=g.hide;if(x)return f;var y=g[r],w=f[y]||{hasStack:!1,stackGroups:{}};if(kr(v)){var b=w.stackGroups[v]||{numericAxisId:r,cateAxisId:a,items:[]};b.items.push(h),w.hasStack=!0,w.stackGroups[v]=b}else w.stackGroups[d0("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[h]};return nr(nr({},f),{},pd({},y,w))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,x){var y=m.stackGroups[x];return nr(nr({},v),{},pd({},x,{numericAxisId:r,cateAxisId:a,items:y.items,stackedData:kOe(t,y.items,s)}))},g)}return nr(nr({},f),{},pd({},h,m))},d)},NOe=function(t,n){var r=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=L2e(u,s,l);return t.domain([N0(d),S0(d)]),{niceTicks:d}}if(s&&a==="number"){var f=t.domain(),h=$2e(f,s,l);return{niceTicks:h}}return null},IR=function(t){var n=t.axis,r=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=Fs(o,n.dataKey,n.domain[l]);return vn(c)?null:n.scale(c)-s/2+a},COe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},AOe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?nr(nr({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(kr(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},EOe=function(t){return t.reduce(function(n,r){return[N0(r.concat([n[0]]).filter(tt)),S0(r.concat([n[1]]).filter(tt))]},[1/0,-1/0])},pq=function(t,n,r){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,d){var f=EOe(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},RR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Rk=function(t,n,r){if(Kt(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(tt(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(RR.test(t[0])){var s=+RR.exec(t[0])[1];a[0]=n[0]-s}else Kt(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(tt(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(MR.test(t[1])){var o=+MR.exec(t[1])[1];a[1]=n[1]+o}else Kt(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},cx=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var s=wA(n,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},DR=function(t,n,r){return!t||!t.length||HA(t,Ai(r,"type.defaultProps.domain"))?n:t},gq=function(t,n){var r=t.type.defaultProps?nr(nr({},t.type.defaultProps),t.props):t.props,a=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return nr(nr({},gn(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:GA(t),value:Fs(n,a),type:c,payload:n,chartType:u,hide:d})};function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function LR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LR(Object(n),!0).forEach(function(r){TOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TOe(e,t,n){return t=POe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function POe(e){var t=OOe(e,"string");return Ym(t)=="symbol"?t:t+""}function OOe(e,t){if(Ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ux=Math.PI/180,IOe=function(t){return t*180/Math.PI},Wr=function(t,n,r,a){return{x:t+Math.cos(-ux*a)*r,y:n+Math.sin(-ux*a)*r}},ROe=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))},MOe=function(t,n){var r=t.x,a=t.y,s=n.cx,o=n.cy,l=ROe({x:r,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:IOe(u),angleInRadian:u}},DOe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:r-o*360}},LOe=function(t,n){var r=n.startAngle,a=n.endAngle,s=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},FR=function(t,n){var r=t.x,a=t.y,s=MOe({x:r,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=DOe(n),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?$R($R({},n),{},{radius:o,angle:LOe(m,n)}):null};function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}var $Oe=["offset"];function FOe(e){return WOe(e)||zOe(e)||BOe(e)||UOe()}function UOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BOe(e,t){if(e){if(typeof e=="string")return Mk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mk(e,t)}}function zOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WOe(e){if(Array.isArray(e))return Mk(e)}function Mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qOe(e,t){if(e==null)return{};var n=HOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function HOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function UR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(n),!0).forEach(function(r){KOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KOe(e,t,n){return t=VOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VOe(e){var t=GOe(e,"string");return Xm(t)=="symbol"?t:t+""}function GOe(e,t){if(Xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jm(){return Jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jm.apply(this,arguments)}var YOe=function(t){var n=t.value,r=t.formatter,a=vn(t.children)?n:t.children;return Kt(r)?r(a):a},XOe=function(t,n){var r=Zi(n-t),a=Math.min(Math.abs(n-t),360);return r*a},JOe=function(t,n,r){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,v=c.clockWise,x=(f+h)/2,y=XOe(m,g),w=y>=0?1:-1,b,_;a==="insideStart"?(b=m+w*o,_=v):a==="insideEnd"?(b=g-w*o,_=!v):a==="end"&&(b=g+w*o,_=v),_=y<=0?_:!_;var k=Wr(u,d,x,b),j=Wr(u,d,x,b+(_?1:-1)*359),S="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),O=vn(t.id)?d0("recharts-radial-line-"):t.id;return Y.createElement("text",Jm({},r,{dominantBaseline:"central",className:un("recharts-radial-bar-label",l)}),Y.createElement("defs",null,Y.createElement("path",{id:O,d:S})),Y.createElement("textPath",{xlinkHref:"#".concat(O)},n))},QOe=function(t){var n=t.viewBox,r=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,h=(d+f)/2;if(a==="outside"){var m=Wr(o,l,u+r,h),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=Wr(o,l,x,h),w=y.x,b=y.y;return{x:w,y:b,textAnchor:"middle",verticalAnchor:"middle"}},ZOe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",v=u>=0?1:-1,x=v*a,y=v>0?"end":"start",w=v>0?"start":"end";if(s==="top"){var b={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return yr(yr({},b),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return yr(yr({},_),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var k={x:l-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return yr(yr({},k),r?{width:Math.max(k.x-r.x,0),height:d}:{})}if(s==="right"){var j={x:l+u+x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return yr(yr({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:d}:{})}var S=r?{width:u,height:d}:{};return s==="insideLeft"?yr({x:l+x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},S):s==="insideRight"?yr({x:l+u-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},S):s==="insideTop"?yr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},S):s==="insideBottom"?yr({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},S):s==="insideTopLeft"?yr({x:l+x,y:c+h,textAnchor:w,verticalAnchor:g},S):s==="insideTopRight"?yr({x:l+u-x,y:c+h,textAnchor:y,verticalAnchor:g},S):s==="insideBottomLeft"?yr({x:l+x,y:c+d-h,textAnchor:w,verticalAnchor:m},S):s==="insideBottomRight"?yr({x:l+u-x,y:c+d-h,textAnchor:y,verticalAnchor:m},S):Nf(s)&&(tt(s.x)||vc(s.x))&&(tt(s.y)||vc(s.y))?yr({x:l+Yc(s.x,u),y:c+Yc(s.y,d),textAnchor:"end",verticalAnchor:"end"},S):yr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},eIe=function(t){return"cx"in t&&tt(t.cx)};function ta(e){var t=e.offset,n=t===void 0?5:t,r=qOe(e,$Oe),a=yr({offset:n},r),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!s||vn(l)&&vn(c)&&!p.isValidElement(u)&&!Kt(u))return null;if(p.isValidElement(u))return p.cloneElement(u,a);var m;if(Kt(u)){if(m=p.createElement(u,a),p.isValidElement(m))return m}else m=YOe(a);var g=eIe(s),v=gn(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return JOe(a,m,v);var x=g?QOe(a):ZOe(a);return Y.createElement(Yy,Jm({className:un("recharts-label",f)},v,x,{breakAll:h}),m)}ta.displayName="Label";var vq=function(t){var n=t.cx,r=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,v=t.width,x=t.height,y=t.clockWise,w=t.labelViewBox;if(w)return w;if(tt(v)&&tt(x)){if(tt(f)&&tt(h))return{x:f,y:h,width:v,height:x};if(tt(m)&&tt(g))return{x:m,y:g,width:v,height:x}}return tt(f)&&tt(h)?{x:f,y:h,width:0,height:0}:tt(n)&&tt(r)?{cx:n,cy:r,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},tIe=function(t,n){return t?t===!0?Y.createElement(ta,{key:"label-implicit",viewBox:n}):kr(t)?Y.createElement(ta,{key:"label-implicit",viewBox:n,value:t}):p.isValidElement(t)?t.type===ta?p.cloneElement(t,{key:"label-implicit",viewBox:n}):Y.createElement(ta,{key:"label-implicit",content:t,viewBox:n}):Kt(t)?Y.createElement(ta,{key:"label-implicit",content:t,viewBox:n}):Nf(t)?Y.createElement(ta,Jm({viewBox:n},t,{key:"label-implicit"})):null:null},nIe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,s=vq(t),o=is(a,ta).map(function(c,u){return p.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=tIe(t.label,n||s);return[l].concat(FOe(o))};ta.parseViewBox=vq;ta.renderCallByParent=nIe;function rIe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var aIe=rIe;const iIe=jn(aIe);function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}var sIe=["valueAccessor"],oIe=["data","dataKey","clockWise","id","textBreakAll"];function lIe(e){return fIe(e)||dIe(e)||uIe(e)||cIe()}function cIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uIe(e,t){if(e){if(typeof e=="string")return Dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dk(e,t)}}function dIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fIe(e){if(Array.isArray(e))return Dk(e)}function Dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dx(){return dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dx.apply(this,arguments)}function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(r){hIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hIe(e,t,n){return t=mIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mIe(e){var t=pIe(e,"string");return Qm(t)=="symbol"?t:t+""}function pIe(e,t){if(Qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WR(e,t){if(e==null)return{};var n=gIe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gIe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var vIe=function(t){return Array.isArray(t.value)?iIe(t.value):t.value};function es(e){var t=e.valueAccessor,n=t===void 0?vIe:t,r=WR(e,sIe),a=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=WR(r,oIe);return!a||!a.length?null:Y.createElement(Pr,{className:"recharts-label-list"},a.map(function(d,f){var h=vn(s)?n(d,f):Fs(d&&d.payload,s),m=vn(l)?{}:{id:"".concat(l,"-").concat(f)};return Y.createElement(ta,dx({},gn(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:ta.parseViewBox(vn(o)?d:zR(zR({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}es.displayName="LabelList";function yIe(e,t){return e?e===!0?Y.createElement(es,{key:"labelList-implicit",data:t}):Y.isValidElement(e)||Kt(e)?Y.createElement(es,{key:"labelList-implicit",data:t,content:e}):Nf(e)?Y.createElement(es,dx({data:t},e,{key:"labelList-implicit"})):null:null}function xIe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=is(r,es).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=yIe(e.label,t);return[s].concat(lIe(a))}es.renderCallByParent=xIe;function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function Lk(){return Lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lk.apply(this,arguments)}function qR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function HR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(n),!0).forEach(function(r){bIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bIe(e,t,n){return t=wIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wIe(e){var t=jIe(e,"string");return Zm(t)=="symbol"?t:t+""}function jIe(e,t){if(Zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Ie=function(t,n){var r=Zi(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},rv=function(t){var n=t.cx,r=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/ux,h=u?s:s+o*f,m=Wr(n,r,d,h),g=Wr(n,r,a,h),v=u?s-o*f:s,x=Wr(n,r,d*Math.cos(f*ux),v);return{center:m,circleTangency:g,lineTangency:x,theta:f}},yq=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=_Ie(o,l),u=o+c,d=Wr(n,r,s,o),f=Wr(n,r,s,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Wr(n,r,a,o),g=Wr(n,r,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},kIe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Zi(d-u),h=rv({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,v=h.theta,x=rv({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=x.circleTangency,w=x.lineTangency,b=x.theta,_=c?Math.abs(u-d):Math.abs(u-d)-v-b;if(_<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):yq({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d});var k="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(a>0){var j=rv({cx:n,cy:r,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=j.circleTangency,O=j.lineTangency,I=j.theta,P=rv({cx:n,cy:r,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),N=P.circleTangency,D=P.lineTangency,$=P.theta,U=c?Math.abs(u-d):Math.abs(u-d)-I-$;if(U<0&&o===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(U>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},SIe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},xq=function(t){var n=HR(HR({},SIe),t),r=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(o<s||d===f)return null;var m=un("recharts-sector",h),g=o-s,v=Yc(l,g,0,!0),x;return v>0&&Math.abs(d-f)<360?x=kIe({cx:r,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=yq({cx:r,cy:a,innerRadius:s,outerRadius:o,startAngle:d,endAngle:f}),Y.createElement("path",Lk({},gn(n,!0),{className:m,d:x,role:"img"}))};function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$k.apply(this,arguments)}function KR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function VR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KR(Object(n),!0).forEach(function(r){NIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NIe(e,t,n){return t=CIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CIe(e){var t=AIe(e,"string");return ep(t)=="symbol"?t:t+""}function AIe(e,t){if(ep(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GR={curveBasisClosed:N0e,curveBasisOpen:C0e,curveBasis:S0e,curveBumpX:d0e,curveBumpY:f0e,curveLinearClosed:A0e,curveLinear:m0,curveMonotoneX:E0e,curveMonotoneY:T0e,curveNatural:P0e,curveStep:O0e,curveStepAfter:R0e,curveStepBefore:I0e},av=function(t){return t.x===+t.x&&t.y===+t.y},ch=function(t){return t.x},uh=function(t){return t.y},EIe=function(t,n){if(Kt(t))return t;var r="curve".concat(f0(t));return(r==="curveMonotone"||r==="curveBump")&&n?GR["".concat(r).concat(n==="vertical"?"Y":"X")]:GR[r]||m0},TIe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=EIe(r,l),f=u?s.filter(function(v){return av(v)}):s,h;if(Array.isArray(o)){var m=u?o.filter(function(v){return av(v)}):o,g=f.map(function(v,x){return VR(VR({},v),{},{base:m[x]})});return l==="vertical"?h=Gg().y(uh).x1(ch).x0(function(v){return v.base.x}):h=Gg().x(ch).y1(uh).y0(function(v){return v.base.y}),h.defined(av).curve(d),h(g)}return l==="vertical"&&tt(o)?h=Gg().y(uh).x1(ch).x0(o):tt(o)?h=Gg().x(ch).y1(uh).y0(o):h=x8().x(ch).y(uh),h.defined(av).curve(d),h(f)},YR=function(t){var n=t.className,r=t.points,a=t.path,s=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?TIe(t):a;return p.createElement("path",$k({},gn(t,!1),Ry(t),{className:un("recharts-curve",n),d:o,ref:s}))},bq={exports:{}},PIe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",OIe=PIe,IIe=OIe;function wq(){}function jq(){}jq.resetWarningCache=wq;var RIe=function(){function e(r,a,s,o,l,c){if(c!==IIe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:jq,resetWarningCache:wq};return n.PropTypes=n,n};bq.exports=RIe();var MIe=bq.exports;const xn=jn(MIe);var DIe=Object.getOwnPropertyNames,LIe=Object.getOwnPropertySymbols,$Ie=Object.prototype.hasOwnProperty;function XR(e,t){return function(r,a,s){return e(r,a,s)&&t(r,a,s)}}function iv(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var s=a.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,a);return s.delete(n),s.delete(r),c}}function JR(e){return DIe(e).concat(LIe(e))}var FIe=Object.hasOwn||function(e,t){return $Ie.call(e,t)};function fu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var UIe="__v",BIe="__o",zIe="_owner",QR=Object.getOwnPropertyDescriptor,ZR=Object.keys;function WIe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function qIe(e,t){return fu(e.getTime(),t.getTime())}function HIe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function KIe(e,t){return e===t}function eM(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(n.equals(h[0],m[0],c,f,e,t,n)&&n.equals(h[1],m[1],h[0],m[0],e,t,n)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var VIe=fu;function GIe(e,t,n){var r=ZR(e),a=r.length;if(ZR(t).length!==a)return!1;for(;a-- >0;)if(!_q(e,t,n,r[a]))return!1;return!0}function dh(e,t,n){var r=JR(e),a=r.length;if(JR(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=r[a],!_q(e,t,n,s)||(o=QR(e,s),l=QR(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function YIe(e,t){return fu(e.valueOf(),t.valueOf())}function XIe(e,t){return e.source===t.source&&e.flags===t.flags}function tM(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function JIe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function QIe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function _q(e,t,n,r){return(r===zIe||r===BIe||r===UIe)&&(e.$$typeof||t.$$typeof)?!0:FIe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var ZIe="[object Arguments]",eRe="[object Boolean]",tRe="[object Date]",nRe="[object Error]",rRe="[object Map]",aRe="[object Number]",iRe="[object Object]",sRe="[object RegExp]",oRe="[object Set]",lRe="[object String]",cRe="[object URL]",uRe=Array.isArray,nM=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rM=Object.assign,dRe=Object.prototype.toString.call.bind(Object.prototype.toString);function fRe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var y=typeof g;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?o(g,v,x):y==="function"?a(g,v,x):!1;var w=g.constructor;if(w!==v.constructor)return!1;if(w===Object)return l(g,v,x);if(uRe(g))return t(g,v,x);if(nM!=null&&nM(g))return f(g,v,x);if(w===Date)return n(g,v,x);if(w===RegExp)return u(g,v,x);if(w===Map)return s(g,v,x);if(w===Set)return d(g,v,x);var b=dRe(g);return b===tRe?n(g,v,x):b===sRe?u(g,v,x):b===rRe?s(g,v,x):b===oRe?d(g,v,x):b===iRe?typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x):b===cRe?h(g,v,x):b===nRe?r(g,v,x):b===ZIe?l(g,v,x):b===eRe||b===aRe||b===lRe?c(g,v,x):!1}}function hRe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?dh:WIe,areDatesEqual:qIe,areErrorsEqual:HIe,areFunctionsEqual:KIe,areMapsEqual:r?XR(eM,dh):eM,areNumbersEqual:VIe,areObjectsEqual:r?dh:GIe,arePrimitiveWrappersEqual:YIe,areRegExpsEqual:XIe,areSetsEqual:r?XR(tM,dh):tM,areTypedArraysEqual:r?dh:JIe,areUrlsEqual:QIe};if(n&&(a=rM({},a,n(a))),t){var s=iv(a.areArraysEqual),o=iv(a.areMapsEqual),l=iv(a.areObjectsEqual),c=iv(a.areSetsEqual);a=rM({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function mRe(e){return function(t,n,r,a,s,o,l){return e(t,n,l)}}function pRe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(c,u){var d=r(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return n(c,u,{cache:h,equals:a,meta:m,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var gRe=Xl();Xl({strict:!0});Xl({circular:!0});Xl({circular:!0,strict:!0});Xl({createInternalComparator:function(){return fu}});Xl({strict:!0,createInternalComparator:function(){return fu}});Xl({circular:!0,createInternalComparator:function(){return fu}});Xl({circular:!0,createInternalComparator:function(){return fu},strict:!0});function Xl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=hRe(e),c=fRe(l),u=r?r(c):mRe(c);return pRe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function vRe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function aM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):vRe(a)};requestAnimationFrame(r)}function Fk(e){"@babel/helpers - typeof";return Fk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fk(e)}function yRe(e){return jRe(e)||wRe(e)||bRe(e)||xRe()}function xRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bRe(e,t){if(e){if(typeof e=="string")return iM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iM(e,t)}}function iM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jRe(e){if(Array.isArray(e))return e}function _Re(){var e={},t=function(){return null},n=!1,r=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=yRe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){aM(a.bind(null,u),c);return}a(c),aM(a.bind(null,u));return}Fk(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sM(Object(n),!0).forEach(function(r){kq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kq(e,t,n){return t=kRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kRe(e){var t=SRe(e,"string");return tp(t)==="symbol"?t:String(t)}function SRe(e,t){if(tp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NRe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(s){return a.includes(s)})})},CRe=function(t){return t},ARe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},qh=function(t,n){return Object.keys(n).reduce(function(r,a){return oM(oM({},r),{},kq({},a,t(a,n[a])))},{})},lM=function(t,n,r){return t.map(function(a){return"".concat(ARe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function ERe(e,t){return ORe(e)||PRe(e,t)||Sq(e,t)||TRe()}function TRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PRe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ORe(e){if(Array.isArray(e))return e}function IRe(e){return DRe(e)||MRe(e)||Sq(e)||RRe()}function RRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sq(e,t){if(e){if(typeof e=="string")return Uk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uk(e,t)}}function MRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DRe(e){if(Array.isArray(e))return Uk(e)}function Uk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fx=1e-4,Nq=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},Cq=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},cM=function(t,n){return function(r){var a=Nq(t,n);return Cq(a,r)}},LRe=function(t,n){return function(r){var a=Nq(t,n),s=[].concat(IRe(a.map(function(o,l){return o*l}).slice(1)),[0]);return Cq(s,r)}},uM=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=ERe(u,4);a=d[0],s=d[1],o=d[2],l=d[3]}}}var f=cM(a,o),h=cM(s,l),m=LRe(a,o),g=function(y){return y>1?1:y<0?0:y},v=function(y){for(var w=y>1?1:y,b=w,_=0;_<8;++_){var k=f(b)-w,j=m(b);if(Math.abs(k-w)<fx||j<fx)return h(b);b=g(b-k/j)}return h(b)};return v.isStepper=!1,v},$Re=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*r,g=h*s,v=h+(m-g)*l/1e3,x=h*l/1e3+d;return Math.abs(x-f)<fx&&Math.abs(v)<fx?[f,0]:[x,v]};return c.isStepper=!0,c.dt=l,c},FRe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uM(a);case"spring":return $Re();default:if(a.split("(")[0]==="cubic-bezier")return uM(a)}return typeof a=="function"?a:null};function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function dM(e){return zRe(e)||BRe(e)||Aq(e)||URe()}function URe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zRe(e){if(Array.isArray(e))return zk(e)}function fM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fM(Object(n),!0).forEach(function(r){Bk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bk(e,t,n){return t=WRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WRe(e){var t=qRe(e,"string");return np(t)==="symbol"?t:String(t)}function qRe(e,t){if(np(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(np(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HRe(e,t){return GRe(e)||VRe(e,t)||Aq(e,t)||KRe()}function KRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aq(e,t){if(e){if(typeof e=="string")return zk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zk(e,t)}}function zk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VRe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function GRe(e){if(Array.isArray(e))return e}var hx=function(t,n,r){return t+(n-t)*r},Wk=function(t){var n=t.from,r=t.to;return n!==r},YRe=function e(t,n,r){var a=qh(function(s,o){if(Wk(o)){var l=t(o.from,o.to,o.velocity),c=HRe(l,2),u=c[0],d=c[1];return Fr(Fr({},o),{},{from:u,velocity:d})}return o},n);return r<1?qh(function(s,o){return Wk(o)?Fr(Fr({},o),{},{velocity:hx(o.velocity,a[s].velocity,r),from:hx(o.from,a[s].from,r)}):o},n):e(t,a,r-1)};const XRe=function(e,t,n,r,a){var s=NRe(e,t),o=s.reduce(function(x,y){return Fr(Fr({},x),{},Bk({},y,[e[y],t[y]]))},{}),l=s.reduce(function(x,y){return Fr(Fr({},x),{},Bk({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return qh(function(y,w){return w.from},l)},m=function(){return!Object.values(l).filter(Wk).length},g=function(y){u||(u=y);var w=y-u,b=w/n.dt;l=YRe(n,l,b),a(Fr(Fr(Fr({},e),t),h())),u=y,m()||(c=requestAnimationFrame(f))},v=function(y){d||(d=y);var w=(y-d)/r,b=qh(function(k,j){return hx.apply(void 0,dM(j).concat([n(w)]))},o);if(a(Fr(Fr(Fr({},e),t),b)),w<1)c=requestAnimationFrame(f);else{var _=qh(function(k,j){return hx.apply(void 0,dM(j).concat([n(1)]))},o);a(Fr(Fr(Fr({},e),t),_))}};return f=n.isStepper?g:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}var JRe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function QRe(e,t){if(e==null)return{};var n=ZRe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ZRe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Wj(e){return rMe(e)||nMe(e)||tMe(e)||eMe()}function eMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tMe(e,t){if(e){if(typeof e=="string")return qk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qk(e,t)}}function nMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rMe(e){if(Array.isArray(e))return qk(e)}function qk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(n),!0).forEach(function(r){jh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jh(e,t,n){return t=Eq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eq(r.key),r)}}function sMe(e,t,n){return t&&iMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eq(e){var t=oMe(e,"string");return Jd(t)==="symbol"?t:String(t)}function oMe(e,t){if(Jd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hk(e,t)}function Hk(e,t){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Hk(e,t)}function cMe(e){var t=uMe();return function(){var r=mx(e),a;if(t){var s=mx(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Kk(this,a)}}function Kk(e,t){if(t&&(Jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vk(e)}function Vk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mx(e){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mx(e)}var Il=function(e){lMe(n,e);var t=cMe(n);function n(r,a){var s;aMe(this,n),s=t.call(this,r,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Vk(s)),s.changeStyle=s.changeStyle.bind(Vk(s)),!l||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:d}),Kk(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},Kk(s);s.state={style:c?jh({},c,u):u}}else s.state={style:{}};return s}return sMe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,h=this.state.style;if(l){if(!o){var m={style:c?jh({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(gRe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?f:a.to;if(this.state&&h){var x={style:c?jh({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(x)}this.runAnimation($i($i({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=XRe(o,l,FRe(u),c,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(v,x,y){if(y===0)return v;var w=x.duration,b=x.easing,_=b===void 0?"ease":b,k=x.style,j=x.properties,S=x.onAnimationEnd,O=y>0?o[y-1]:x,I=j||Object.keys(k);if(typeof _=="function"||_==="spring")return[].concat(Wj(v),[s.runJSAnimation.bind(s,{from:O.style,to:k,duration:w,easing:_}),w]);var P=lM(I,w,_),N=$i($i($i({},O.style),k),{},{transition:P});return[].concat(Wj(v),[N,w,S]).filter(CRe)};return this.manager.start([c].concat(Wj(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=_Re());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var v=l?jh({},l,c):c,x=lM(Object.keys(v),o,u);g.start([d,s,$i($i({},v),{},{transition:x}),o,f])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=QRe(a,JRe),u=p.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var f=function(m){var g=m.props,v=g.style,x=v===void 0?{}:v,y=g.className,w=p.cloneElement(m,$i($i({},c),{},{style:$i($i({},x),d),className:y}));return w};return u===1?f(p.Children.only(s)):Y.createElement("div",null,p.Children.map(s,function(h){return f(h)}))}}]),n}(p.PureComponent);Il.displayName="Animate";Il.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Il.propTypes={from:xn.oneOfType([xn.object,xn.string]),to:xn.oneOfType([xn.object,xn.string]),attributeName:xn.string,duration:xn.number,begin:xn.number,easing:xn.oneOfType([xn.string,xn.func]),steps:xn.arrayOf(xn.shape({duration:xn.number.isRequired,style:xn.object.isRequired,easing:xn.oneOfType([xn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xn.func]),properties:xn.arrayOf("string"),onAnimationEnd:xn.func})),children:xn.oneOfType([xn.node,xn.func]),isActive:xn.bool,canBegin:xn.bool,onAnimationEnd:xn.func,shouldReAnimate:xn.bool,onAnimationStart:xn.func,onAnimationReStart:xn.func};function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},px.apply(this,arguments)}function dMe(e,t){return pMe(e)||mMe(e,t)||hMe(e,t)||fMe()}function fMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hMe(e,t){if(e){if(typeof e=="string")return mM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mM(e,t)}}function mM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function pMe(e){if(Array.isArray(e))return e}function pM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(n),!0).forEach(function(r){gMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gMe(e,t,n){return t=vMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vMe(e){var t=yMe(e,"string");return rp(t)=="symbol"?t:t+""}function yMe(e,t){if(rp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vM=function(t,n,r,a,s){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,d;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=s[h]>o?o:s[h];d="M".concat(t,",").concat(n+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(n)),d+="L ".concat(t+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*f[1])),d+="L ".concat(t+r,",").concat(n+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+r-c*f[2],",").concat(n+a)),d+="L ".concat(t+c*f[3],",").concat(n+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*f[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);d="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},xMe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return r>=u&&r<=d&&a>=f&&a<=h}return!1},bMe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YA=function(t){var n=gM(gM({},bMe),t),r=p.useRef(),a=p.useState(-1),s=dMe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&l(_)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isAnimationActive,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=un("recharts-rectangle",m);return w?Y.createElement(Il,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:v,animationEasing:g,isActive:w},function(_){var k=_.width,j=_.height,S=_.x,O=_.y;return Y.createElement(Il,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:y,easing:g},Y.createElement("path",px({},gn(n,!0),{className:b,d:vM(S,O,k,j,h),ref:r})))}):Y.createElement("path",px({},gn(n,!0),{className:b,d:vM(c,u,d,f,h)}))};function Gk(){return Gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gk.apply(this,arguments)}var Tq=function(t){var n=t.cx,r=t.cy,a=t.r,s=t.className,o=un("recharts-dot",s);return n===+n&&r===+r&&a===+a?p.createElement("circle",Gk({},gn(t,!1),Ry(t),{className:o,cx:n,cy:r,r:a})):null};function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}var wMe=["x","y","top","left","width","height","className"];function Yk(){return Yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yk.apply(this,arguments)}function yM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jMe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yM(Object(n),!0).forEach(function(r){_Me(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _Me(e,t,n){return t=kMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kMe(e){var t=SMe(e,"string");return ap(t)=="symbol"?t:t+""}function SMe(e,t){if(ap(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NMe(e,t){if(e==null)return{};var n=CMe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function CMe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var AMe=function(t,n,r,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},EMe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,v=NMe(t,wMe),x=jMe({x:r,y:s,top:l,left:u,width:f,height:m},v);return!tt(r)||!tt(s)||!tt(f)||!tt(m)||!tt(l)||!tt(u)?null:Y.createElement("path",Yk({},gn(x,!0),{className:un("recharts-cross",g),d:AMe(r,s,f,m,l,u)}))},TMe=W8,PMe=TMe(Object.getPrototypeOf,Object),OMe=PMe,IMe=Oo,RMe=OMe,MMe=Io,DMe="[object Object]",LMe=Function.prototype,$Me=Object.prototype,Pq=LMe.toString,FMe=$Me.hasOwnProperty,UMe=Pq.call(Object);function BMe(e){if(!MMe(e)||IMe(e)!=DMe)return!1;var t=RMe(e);if(t===null)return!0;var n=FMe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Pq.call(n)==UMe}var zMe=BMe;const WMe=jn(zMe);var qMe=Oo,HMe=Io,KMe="[object Boolean]";function VMe(e){return e===!0||e===!1||HMe(e)&&qMe(e)==KMe}var GMe=VMe;const YMe=jn(GMe);function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gx.apply(this,arguments)}function XMe(e,t){return eDe(e)||ZMe(e,t)||QMe(e,t)||JMe()}function JMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QMe(e,t){if(e){if(typeof e=="string")return xM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xM(e,t)}}function xM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function eDe(e){if(Array.isArray(e))return e}function bM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bM(Object(n),!0).forEach(function(r){tDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tDe(e,t,n){return t=nDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nDe(e){var t=rDe(e,"string");return ip(t)=="symbol"?t:t+""}function rDe(e,t){if(ip(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jM=function(t,n,r,a,s){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+s),l+="L ".concat(t+r-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},aDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},iDe=function(t){var n=wM(wM({},aDe),t),r=p.useRef(),a=p.useState(-1),s=XMe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var w=un("recharts-trapezoid",m);return y?Y.createElement(Il,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:v,animationEasing:g,isActive:y},function(b){var _=b.upperWidth,k=b.lowerWidth,j=b.height,S=b.x,O=b.y;return Y.createElement(Il,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},Y.createElement("path",gx({},gn(n,!0),{className:w,d:jM(S,O,_,k,j),ref:r})))}):Y.createElement("g",null,Y.createElement("path",gx({},gn(n,!0),{className:w,d:jM(c,u,d,f,h)})))},sDe=["option","shapeType","propTransformer","activeClassName","isActive"];function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function oDe(e,t){if(e==null)return{};var n=lDe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lDe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_M(Object(n),!0).forEach(function(r){cDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cDe(e,t,n){return t=uDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uDe(e){var t=dDe(e,"string");return sp(t)=="symbol"?t:t+""}function dDe(e,t){if(sp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fDe(e,t){return vx(vx({},t),e)}function hDe(e,t){return e==="symbols"}function kM(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Y.createElement(YA,n);case"trapezoid":return Y.createElement(iDe,n);case"sector":return Y.createElement(xq,n);case"symbols":if(hDe(t))return Y.createElement(hA,n);break;default:return null}}function mDe(e){return p.isValidElement(e)?e.props:e}function pDe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?fDe:r,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=oDe(e,sDe),u;if(p.isValidElement(t))u=p.cloneElement(t,vx(vx({},c),mDe(t)));else if(Kt(t))u=t(c);else if(WMe(t)&&!YMe(t)){var d=a(t,c);u=Y.createElement(kM,{shapeType:n,elementProps:d})}else{var f=c;u=Y.createElement(kM,{shapeType:n,elementProps:f})}return l?Y.createElement(Pr,{className:o},u):u}function T0(e,t){return t!=null&&"trapezoids"in e.props}function P0(e,t){return t!=null&&"sectors"in e.props}function op(e,t){return t!=null&&"points"in e.props}function gDe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&s}function vDe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function yDe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function xDe(e,t){var n;return T0(e,t)?n=gDe:P0(e,t)?n=vDe:op(e,t)&&(n=yDe),n}function bDe(e,t){var n;return T0(e,t)?n="trapezoids":P0(e,t)?n="sectors":op(e,t)&&(n="points"),n}function wDe(e,t){if(T0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(P0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return op(e,t)?t.payload:{}}function jDe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=bDe(n,t),s=wDe(n,t),o=r.filter(function(c,u){var d=HA(s,c),f=n.props[a].filter(function(g){var v=xDe(n,t);return v(g,t)}),h=n.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var _De=Math.ceil,kDe=Math.max;function SDe(e,t,n,r){for(var a=-1,s=kDe(_De((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++a]=e,e+=n;return o}var NDe=SDe,CDe=lW,SM=1/0,ADe=17976931348623157e292;function EDe(e){if(!e)return e===0?e:0;if(e=CDe(e),e===SM||e===-SM){var t=e<0?-1:1;return t*ADe}return e===e?e:0}var Oq=EDe,TDe=NDe,PDe=y0,qj=Oq;function ODe(e){return function(t,n,r){return r&&typeof r!="number"&&PDe(t,n,r)&&(n=r=void 0),t=qj(t),n===void 0?(n=t,t=0):n=qj(n),r=r===void 0?t<n?1:-1:qj(r),TDe(t,n,r,e)}}var IDe=ODe,RDe=IDe,MDe=RDe(),DDe=MDe;const yx=jn(DDe);function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function NM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function CM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NM(Object(n),!0).forEach(function(r){Iq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iq(e,t,n){return t=LDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LDe(e){var t=$De(e,"string");return lp(t)=="symbol"?t:t+""}function $De(e,t){if(lp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FDe=["Webkit","Moz","O","ms"],UDe=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=FDe.reduce(function(s,o){return CM(CM({},s),{},Iq({},o+r,n))},{});return a[t]=n,a};function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function xx(){return xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xx.apply(this,arguments)}function AM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(n),!0).forEach(function(r){Xa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mq(r.key),r)}}function zDe(e,t,n){return t&&EM(e.prototype,t),n&&EM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function WDe(e,t,n){return t=bx(t),qDe(e,Rq()?Reflect.construct(t,n||[],bx(e).constructor):t.apply(e,n))}function qDe(e,t){if(t&&(Qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HDe(e)}function HDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rq=function(){return!!e})()}function bx(e){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bx(e)}function KDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xk(e,t)}function Xk(e,t){return Xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Xk(e,t)}function Xa(e,t,n){return t=Mq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mq(e){var t=VDe(e,"string");return Qd(t)=="symbol"?t:t+""}function VDe(e,t){if(Qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GDe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=zh().domain(yx(0,c)).range([s,s+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:d}},TM=function(t){return t.changedTouches&&!!t.changedTouches.length},Zd=function(e){function t(n){var r;return BDe(this,t),r=WDe(this,t,[n]),Xa(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Xa(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Xa(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),Xa(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Xa(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Xa(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Xa(r,"handleSlideDragStart",function(a){var s=TM(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return KDe(t,e),zDe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,s),h=Math.max(a,s),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=Fs(s[r],l,r);return Kt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,v=r.pageX-s;v>0?v=Math.min(v,u+d-f-l,u+d-f-o):v<0&&(v=Math.max(v,u-o,u-l));var x=this.getIndex({startX:o+v,endX:l+v});(x.startIndex!==h||x.endIndex!==m)&&g&&g(x),this.setState({startX:o+v,endX:l+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var s=TM(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,v=d.gap,x=d.data,y={startX:this.state.startX,endX:this.state.endX},w=r.pageX-s;w>0?w=Math.min(w,f+h-m-u):w<0&&(w=Math.max(w,f-u)),y[o]=u+w;var b=this.getIndex(y),_=b.startIndex,k=b.endIndex,j=function(){var O=x.length-1;return o==="startX"&&(l>c?_%v===0:k%v===0)||l<c&&k===O||o==="endX"&&(l>c?k%v===0:_%v===0)||l>c&&k===O};this.setState(Xa(Xa({},o,u+w),"brushMoveStartX",r.pageX),function(){g&&j()&&g(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Xa({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return Y.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,f=p.Children.only(u);return f?Y.cloneElement(f,{x:a,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,v=c.startIndex,x=c.endIndex,y=Math.max(r,this.props.x),w=Hj(Hj({},gn(this.props,!1)),{},{x:y,y:u,width:d,height:f}),b=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return Y.createElement(Pr,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,a)+u,f=Math.max(Math.abs(a-r)-u,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return Y.createElement(Pr,{className:"recharts-brush-texts"},Y.createElement(Yy,xx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(a)),Y.createElement(Yy,xx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,m=h.startX,g=h.endX,v=h.isTextActive,x=h.isSlideMoving,y=h.isTravellerMoving,w=h.isTravellerFocused;if(!a||!a.length||!tt(l)||!tt(c)||!tt(u)||!tt(d)||u<=0||d<=0)return null;var b=un("recharts-brush",s),_=Y.Children.count(o)===1,k=UDe("userSelect","none");return Y.createElement(Pr,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||x||y||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),Y.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var s;return Y.isValidElement(r)?s=Y.cloneElement(r,a):Kt(r)?s=r(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(r,a){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return Hj({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?GDe({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,a){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(p.PureComponent);Xa(Zd,"displayName","Brush");Xa(Zd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var YDe=bA;function XDe(e,t){var n;return YDe(e,function(r,a,s){return n=t(r,a,s),!n}),!!n}var JDe=XDe,QDe=M8,ZDe=Vl,eLe=JDe,tLe=qa,nLe=y0;function rLe(e,t,n){var r=tLe(e)?QDe:eLe;return n&&nLe(e,t,n)&&(t=void 0),r(e,ZDe(t))}var aLe=rLe;const iLe=jn(aLe);var Rs=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},PM=rW;function sLe(e,t,n){t=="__proto__"&&PM?PM(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var oLe=sLe,lLe=oLe,cLe=tW,uLe=Vl;function dLe(e,t){var n={};return t=uLe(t),cLe(e,function(r,a,s){lLe(n,a,t(r,a,s))}),n}var fLe=dLe;const hLe=jn(fLe);function mLe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var pLe=mLe,gLe=bA;function vLe(e,t){var n=!0;return gLe(e,function(r,a,s){return n=!!t(r,a,s),n}),n}var yLe=vLe,xLe=pLe,bLe=yLe,wLe=Vl,jLe=qa,_Le=y0;function kLe(e,t,n){var r=jLe(e)?xLe:bLe;return n&&_Le(e,t,n)&&(t=void 0),r(e,wLe(t))}var SLe=kLe;const Dq=jn(SLe);var NLe=["x","y"];function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function Jk(){return Jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jk.apply(this,arguments)}function OM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OM(Object(n),!0).forEach(function(r){CLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CLe(e,t,n){return t=ALe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ALe(e){var t=ELe(e,"string");return cp(t)=="symbol"?t:t+""}function ELe(e,t){if(cp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TLe(e,t){if(e==null)return{};var n=PLe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PLe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function OLe(e,t){var n=e.x,r=e.y,a=TLe(e,NLe),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return fh(fh(fh(fh(fh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function IM(e){return Y.createElement(pDe,Jk({shapeType:"rectangle",propTransformer:OLe,activeClassName:"recharts-active-bar"},e))}var ILe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var s=tt(r)||Jxe(r);return s?t(r,a):(s||Jc(),n)}},RLe=["value","background"],Lq;function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function MLe(e,t){if(e==null)return{};var n=DLe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function DLe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wx.apply(this,arguments)}function RM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RM(Object(n),!0).forEach(function(r){dl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fq(r.key),r)}}function $Le(e,t,n){return t&&MM(e.prototype,t),n&&MM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function FLe(e,t,n){return t=jx(t),ULe(e,$q()?Reflect.construct(t,n||[],jx(e).constructor):t.apply(e,n))}function ULe(e,t){if(t&&(ef(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BLe(e)}function BLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($q=function(){return!!e})()}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jx(e)}function zLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qk(e,t)}function Qk(e,t){return Qk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Qk(e,t)}function dl(e,t,n){return t=Fq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fq(e){var t=WLe(e,"string");return ef(t)=="symbol"?t:t+""}function WLe(e,t){if(ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yn=function(e){function t(){var n;LLe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=FLe(this,t,[].concat(a)),dl(n,"state",{isAnimationFinished:!1}),dl(n,"id",d0("recharts-bar-")),dl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),dl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return zLe(t,e),$Le(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=gn(this.props,!1);return r&&r.map(function(f,h){var m=h===c,g=m?u:o,v=dr(dr(dr({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Y.createElement(Pr,wx({className:"recharts-bar-rectangle"},My(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),Y.createElement(IM,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return Y.createElement(Il,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=s.map(function(x,y){var w=h&&h[y];if(w){var b=Cu(w.x,x.x),_=Cu(w.y,x.y),k=Cu(w.width,x.width),j=Cu(w.height,x.height);return dr(dr({},x),{},{x:b(g),y:_(g),width:k(g),height:j(g)})}if(o==="horizontal"){var S=Cu(0,x.height),O=S(g);return dr(dr({},x),{},{y:x.y+x.height-O,height:O})}var I=Cu(0,x.width),P=I(g);return dr(dr({},x),{},{width:P})});return Y.createElement(Pr,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!HA(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=gn(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,h=MLe(u,RLe);if(!f)return null;var m=dr(dr(dr(dr(dr({},h),{},{fill:"#eee"},f),c),My(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return Y.createElement(IM,wx({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=is(d,E0);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,y){var w=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:w,errorVal:Fs(x,y)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return Y.createElement(Pr,g,f.map(function(v){return Y.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,m=r.isAnimationActive,g=r.background,v=r.id;if(a||!s||!s.length)return null;var x=this.state.isAnimationFinished,y=un("recharts-bar",o),w=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,_=w||b,k=vn(v)?this.id:v;return Y.createElement(Pr,{className:y},w||b?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(k)},Y.createElement("rect",{x:w?u:u-f/2,y:b?d:d-h/2,width:w?f:f*2,height:b?h:h*2}))):null,Y.createElement(Pr,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(k,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,k),(!m||x)&&es.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(p.PureComponent);Lq=Yn;dl(Yn,"displayName","Bar");dl(Yn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});dl(Yn,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=xOe(r,n);if(!m)return null;var g=t.layout,v=n.type.defaultProps,x=v!==void 0?dr(dr({},v),n.props):n.props,y=x.dataKey,w=x.children,b=x.minPointSize,_=g==="horizontal"?o:s,k=u?_.scale.domain():null,j=COe({numericAxis:_}),S=is(w,uW),O=f.map(function(I,P){var N,D,$,U,F,M;u?N=bOe(u[d+P],k):(N=Fs(I,y),Array.isArray(N)||(N=[j,N]));var T=ILe(b,Lq.defaultProps.minPointSize)(N[1],P);if(g==="horizontal"){var A,L=[o.scale(N[0]),o.scale(N[1])],E=L[0],B=L[1];D=IR({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:I,index:P}),$=(A=B??E)!==null&&A!==void 0?A:void 0,U=m.size;var R=E-B;if(F=Number.isNaN(R)?0:R,M={x:D,y:o.y,width:U,height:o.height},Math.abs(T)>0&&Math.abs(F)<Math.abs(T)){var C=Zi(F||T)*(Math.abs(T)-Math.abs(F));$-=C,F+=C}}else{var q=[s.scale(N[0]),s.scale(N[1])],Z=q[0],J=q[1];if(D=Z,$=IR({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:I,index:P}),U=J-Z,F=m.size,M={x:s.x,y:$,width:s.width,height:F},Math.abs(T)>0&&Math.abs(U)<Math.abs(T)){var ee=Zi(U||T)*(Math.abs(T)-Math.abs(U));U+=ee}}return dr(dr(dr({},I),{},{x:D,y:$,width:U,height:F,value:u?N:N[1],payload:I,background:M},S&&S[P]&&S[P].props),{},{tooltipPayload:[gq(n,I)],tooltipPosition:{x:D+U/2,y:$+F/2}})});return dr({data:O,layout:g},h)});function up(e){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(e)}function qLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uq(r.key),r)}}function HLe(e,t,n){return t&&DM(e.prototype,t),n&&DM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LM(Object(n),!0).forEach(function(r){O0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O0(e,t,n){return t=Uq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uq(e){var t=KLe(e,"string");return up(t)=="symbol"?t:t+""}function KLe(e,t){if(up(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VLe=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!Qa(u,Yn);return d.reduce(function(m,g){var v=n[g],x=v.orientation,y=v.domain,w=v.padding,b=w===void 0?{}:w,_=v.mirror,k=v.reversed,j="".concat(x).concat(_?"Mirror":""),S,O,I,P,N;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var D=y[1]-y[0],$=1/0,U=v.categoricalDomain.sort(ebe);if(U.forEach(function(q,Z){Z>0&&($=Math.min((q||0)-(U[Z-1]||0),$))}),Number.isFinite($)){var F=$/D,M=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(S=F*M/2),v.padding==="no-gap"){var T=Yc(t.barCategoryGap,F*M),A=F*M/2;S=A-T-(A-T)/M*T}}}a==="xAxis"?O=[r.left+(b.left||0)+(S||0),r.left+r.width-(b.right||0)-(S||0)]:a==="yAxis"?O=c==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(S||0),r.top+r.height-(b.bottom||0)-(S||0)]:O=v.range,k&&(O=[O[1],O[0]]);var L=vOe(v,s,h),E=L.scale,B=L.realScaleType;E.domain(y).range(O),yOe(E);var R=NOe(E,Gi(Gi({},v),{},{realScaleType:B}));a==="xAxis"?(N=x==="top"&&!_||x==="bottom"&&_,I=r.left,P=f[j]-N*v.height):a==="yAxis"&&(N=x==="left"&&!_||x==="right"&&_,I=f[j]-N*v.width,P=r.top);var C=Gi(Gi(Gi({},v),R),{},{realScaleType:B,x:I,y:P,scale:E,width:a==="xAxis"?r.width:v.width,height:a==="yAxis"?r.height:v.height});return C.bandSize=cx(C,R),!v.hide&&a==="xAxis"?f[j]+=(N?-1:1)*C.height:v.hide||(f[j]+=(N?-1:1)*C.width),Gi(Gi({},m),{},O0({},g,C))},{})},Bq=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(a,o),width:Math.abs(s-r),height:Math.abs(o-a)}},GLe=function(t){var n=t.x1,r=t.y1,a=t.x2,s=t.y2;return Bq({x:n,y:r},{x:a,y:s})},zq=function(){function e(t){qLe(this,e),this.scale=t}return HLe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();O0(zq,"EPS",1e-4);var XA=function(t){var n=Object.keys(t).reduce(function(r,a){return Gi(Gi({},r),{},O0({},a,zq.create(t[a])))},{});return Gi(Gi({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return hLe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return Dq(a,function(s,o){return n[o].isInRange(s)})}})};function YLe(e){return(e%180+180)%180}var XLe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=YLe(a),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},JLe=Vl,QLe=eg,ZLe=g0;function e$e(e){return function(t,n,r){var a=Object(t);if(!QLe(t)){var s=JLe(n);t=ZLe(t),n=function(l){return s(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[s?t[o]:o]:void 0}}var t$e=e$e,n$e=Oq;function r$e(e){var t=n$e(e),n=t%1;return t===t?n?t-n:t:0}var a$e=r$e,i$e=Y8,s$e=Vl,o$e=a$e,l$e=Math.max;function c$e(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:o$e(n);return a<0&&(a=l$e(r+a,0)),i$e(e,s$e(t),a)}var u$e=c$e,d$e=t$e,f$e=u$e,h$e=d$e(f$e),m$e=h$e;const p$e=jn(m$e);var g$e=txe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),JA=p.createContext(void 0),QA=p.createContext(void 0),Wq=p.createContext(void 0),qq=p.createContext({}),Hq=p.createContext(void 0),Kq=p.createContext(0),Vq=p.createContext(0),$M=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=g$e(s);return Y.createElement(JA.Provider,{value:r},Y.createElement(QA.Provider,{value:a},Y.createElement(qq.Provider,{value:s},Y.createElement(Wq.Provider,{value:d},Y.createElement(Hq.Provider,{value:o},Y.createElement(Kq.Provider,{value:u},Y.createElement(Vq.Provider,{value:c},l)))))))},v$e=function(){return p.useContext(Hq)},Gq=function(t){var n=p.useContext(JA);n==null&&Jc();var r=n[t];return r==null&&Jc(),r},y$e=function(){var t=p.useContext(JA);return nl(t)},x$e=function(){var t=p.useContext(QA),n=p$e(t,function(r){return Dq(r.domain,Number.isFinite)});return n||nl(t)},Yq=function(t){var n=p.useContext(QA);n==null&&Jc();var r=n[t];return r==null&&Jc(),r},b$e=function(){var t=p.useContext(Wq);return t},w$e=function(){return p.useContext(qq)},ZA=function(){return p.useContext(Vq)},eE=function(){return p.useContext(Kq)};function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function j$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _$e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jq(r.key),r)}}function k$e(e,t,n){return t&&_$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S$e(e,t,n){return t=_x(t),N$e(e,Xq()?Reflect.construct(t,n||[],_x(e).constructor):t.apply(e,n))}function N$e(e,t){if(t&&(tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C$e(e)}function C$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xq=function(){return!!e})()}function _x(e){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_x(e)}function A$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zk(e,t)}function Zk(e,t){return Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Zk(e,t)}function FM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function UM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FM(Object(n),!0).forEach(function(r){tE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tE(e,t,n){return t=Jq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jq(e){var t=E$e(e,"string");return tf(t)=="symbol"?t:t+""}function E$e(e,t){if(tf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T$e(e,t){return R$e(e)||I$e(e,t)||O$e(e,t)||P$e()}function P$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O$e(e,t){if(e){if(typeof e=="string")return BM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BM(e,t)}}function BM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I$e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function R$e(e){if(Array.isArray(e))return e}function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eS.apply(this,arguments)}var M$e=function(t,n){var r;return Y.isValidElement(t)?r=Y.cloneElement(t,n):Kt(t)?r=t(n):r=Y.createElement("line",eS({},n,{className:"recharts-reference-line-line"})),r},D$e=function(t,n,r,a,s,o,l,c,u){var d=s.x,f=s.y,h=s.width,m=s.height;if(r){var g=u.y,v=t.y.apply(g,{position:o});if(Rs(u,"discard")&&!t.y.isInRange(v))return null;var x=[{x:d+h,y:v},{x:d,y:v}];return c==="left"?x.reverse():x}if(n){var y=u.x,w=t.x.apply(y,{position:o});if(Rs(u,"discard")&&!t.x.isInRange(w))return null;var b=[{x:w,y:f+m},{x:w,y:f}];return l==="top"?b.reverse():b}if(a){var _=u.segment,k=_.map(function(j){return t.apply(j,{position:o})});return Rs(u,"discard")&&iLe(k,function(j){return!t.isInRange(j)})?null:k}return null};function L$e(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=v$e(),d=Gq(a),f=Yq(s),h=b$e();if(!u||!h)return null;go(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=XA({x:d.scale,y:f.scale}),g=kr(t),v=kr(n),x=r&&r.length===2,y=D$e(m,g,v,x,h,e.position,d.orientation,f.orientation,e);if(!y)return null;var w=T$e(y,2),b=w[0],_=b.x,k=b.y,j=w[1],S=j.x,O=j.y,I=Rs(e,"hidden")?"url(#".concat(u,")"):void 0,P=UM(UM({clipPath:I},gn(e,!0)),{},{x1:_,y1:k,x2:S,y2:O});return Y.createElement(Pr,{className:un("recharts-reference-line",l)},M$e(o,P),ta.renderCallByParent(e,GLe({x1:_,y1:k,x2:S,y2:O})))}var nE=function(e){function t(){return j$e(this,t),S$e(this,t,arguments)}return A$e(t,e),k$e(t,[{key:"render",value:function(){return Y.createElement(L$e,this.props)}}])}(Y.Component);tE(nE,"displayName","ReferenceLine");tE(nE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tS(){return tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tS.apply(this,arguments)}function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function zM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function WM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(n),!0).forEach(function(r){I0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F$e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zq(r.key),r)}}function U$e(e,t,n){return t&&F$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B$e(e,t,n){return t=kx(t),z$e(e,Qq()?Reflect.construct(t,n||[],kx(e).constructor):t.apply(e,n))}function z$e(e,t){if(t&&(nf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W$e(e)}function W$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qq=function(){return!!e})()}function kx(e){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kx(e)}function q$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nS(e,t)}function nS(e,t){return nS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},nS(e,t)}function I0(e,t,n){return t=Zq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zq(e){var t=H$e(e,"string");return nf(t)=="symbol"?t:t+""}function H$e(e,t){if(nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K$e=function(t){var n=t.x,r=t.y,a=t.xAxis,s=t.yAxis,o=XA({x:a.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Rs(t,"discard")&&!o.isInRange(l)?null:l},R0=function(e){function t(){return $$e(this,t),B$e(this,t,arguments)}return q$e(t,e),U$e(t,[{key:"render",value:function(){var r=this.props,a=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=kr(a),d=kr(s);if(go(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=K$e(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,v=g.shape,x=g.className,y=Rs(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=WM(WM({clipPath:y},gn(this.props,!0)),{},{cx:h,cy:m});return Y.createElement(Pr,{className:un("recharts-reference-dot",x)},t.renderDot(v,w),ta.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(Y.Component);I0(R0,"displayName","ReferenceDot");I0(R0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});I0(R0,"renderDot",function(e,t){var n;return Y.isValidElement(e)?n=Y.cloneElement(e,t):Kt(e)?n=e(t):n=Y.createElement(Tq,tS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function rS(){return rS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rS.apply(this,arguments)}function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function qM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function HM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qM(Object(n),!0).forEach(function(r){M0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G$e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t9(r.key),r)}}function Y$e(e,t,n){return t&&G$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function X$e(e,t,n){return t=Sx(t),J$e(e,e9()?Reflect.construct(t,n||[],Sx(e).constructor):t.apply(e,n))}function J$e(e,t){if(t&&(rf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q$e(e)}function Q$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e9=function(){return!!e})()}function Sx(e){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sx(e)}function Z$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aS(e,t)}function aS(e,t){return aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},aS(e,t)}function M0(e,t,n){return t=t9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t9(e){var t=e4e(e,"string");return rf(t)=="symbol"?t:t+""}function e4e(e,t){if(rf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t4e=function(t,n,r,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var h=XA({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Rs(s,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:Bq(m,g)},D0=function(e){function t(){return V$e(this,t),X$e(this,t,arguments)}return Z$e(t,e),Y$e(t,[{key:"render",value:function(){var r=this.props,a=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;go(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=kr(a),h=kr(s),m=kr(o),g=kr(l),v=this.props.shape;if(!f&&!h&&!m&&!g&&!v)return null;var x=t4e(f,h,m,g,this.props);if(!x&&!v)return null;var y=Rs(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Y.createElement(Pr,{className:un("recharts-reference-area",c)},t.renderRect(v,HM(HM({clipPath:y},gn(this.props,!0)),x)),ta.renderCallByParent(this.props,x))}}])}(Y.Component);M0(D0,"displayName","ReferenceArea");M0(D0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});M0(D0,"renderRect",function(e,t){var n;return Y.isValidElement(e)?n=Y.cloneElement(e,t):Kt(e)?n=e(t):n=Y.createElement(YA,rS({},t,{className:"recharts-reference-area-rect"})),n});function n9(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function n4e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return XLe(r,n)}function r4e(e,t,n){var r=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:r?a:s,end:r?a+o:s+l}:{start:r?a+o:s+l,end:r?a:s}}function Nx(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function a4e(e,t){return n9(e,t+1)}function i4e(e,t,n,r,a){for(var s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:n9(r,u)};var v=c,x,y=function(){return x===void 0&&(x=n(g,v)),x},w=g.coordinate,b=c===0||Nx(e,w,y,d,l);b||(c=0,d=o,u+=1),b&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function KM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KM(Object(n),!0).forEach(function(r){s4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s4e(e,t,n){return t=o4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o4e(e){var t=l4e(e,"string");return dp(t)=="symbol"?t:t+""}function l4e(e,t){if(dp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c4e(e,t,n,r,a){for(var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(h){var m=s[h],g,v=function(){return g===void 0&&(g=n(m,h)),g};if(h===o-1){var x=e*(m.coordinate+e*v()/2-c);s[h]=m=Zr(Zr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else s[h]=m=Zr(Zr({},m),{},{tickCoord:m.coordinate});var y=Nx(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+a),s[h]=Zr(Zr({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function u4e(e,t,n,r,a,s){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var d=r[l-1],f=n(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Zr(Zr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Nx(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Zr(Zr({},d),{},{isShow:!0}))}for(var g=s?l-1:l,v=function(w){var b=o[w],_,k=function(){return _===void 0&&(_=n(b,w)),_};if(w===0){var j=e*(b.coordinate-e*k()/2-c);o[w]=b=Zr(Zr({},b),{},{tickCoord:j<0?b.coordinate-j*e:b.coordinate})}else o[w]=b=Zr(Zr({},b),{},{tickCoord:b.coordinate});var S=Nx(e,b.tickCoord,k,c,u);S&&(c=b.tickCoord+e*(k()/2+a),o[w]=Zr(Zr({},b),{},{isShow:!0}))},x=0;x<g;x++)v(x);return o}function rE(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!r)return[];if(tt(c)||jl.isSsr)return a4e(a,typeof c=="number"&&tt(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Bh(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(b,_){var k=Kt(u)?u(b.value,_):b.value;return m==="width"?n4e(Bh(k,{fontSize:t,letterSpacing:n}),g,f):Bh(k,{fontSize:t,letterSpacing:n})[m]},x=a.length>=2?Zi(a[1].coordinate-a[0].coordinate):1,y=r4e(s,x,m);return c==="equidistantPreserveStart"?i4e(x,y,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=u4e(x,y,v,a,o,c==="preserveStartEnd"):h=c4e(x,y,v,a,o),h.filter(function(w){return w.isShow}))}var d4e=["viewBox"],f4e=["viewBox"],h4e=["ticks"];function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function Zu(){return Zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zu.apply(this,arguments)}function VM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VM(Object(n),!0).forEach(function(r){aE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kj(e,t){if(e==null)return{};var n=m4e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function m4e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function p4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a9(r.key),r)}}function g4e(e,t,n){return t&&GM(e.prototype,t),n&&GM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v4e(e,t,n){return t=Cx(t),y4e(e,r9()?Reflect.construct(t,n||[],Cx(e).constructor):t.apply(e,n))}function y4e(e,t){if(t&&(af(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x4e(e)}function x4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r9=function(){return!!e})()}function Cx(e){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cx(e)}function b4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iS(e,t)}function iS(e,t){return iS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},iS(e,t)}function aE(e,t,n){return t=a9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a9(e){var t=w4e(e,"string");return af(t)=="symbol"?t:t+""}function w4e(e,t){if(af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Df=function(e){function t(n){var r;return p4e(this,t),r=v4e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return b4e(t,e),g4e(t,[{key:"shouldComponentUpdate",value:function(r,a){var s=r.viewBox,o=Kj(r,d4e),l=this.props,c=l.viewBox,u=Kj(l,f4e);return!hd(s,c)||!hd(o,u)||!hd(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,v,x,y,w,b=f?-1:1,_=r.tickSize||d,k=tt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,x=o+ +!f*c,v=x-b*_,w=v-b*h,y=k;break;case"left":v=x=r.coordinate,g=s+ +!f*l,m=g-b*_,y=m-b*h,w=k;break;case"right":v=x=r.coordinate,g=s+ +f*l,m=g+b*_,y=m+b*h,w=k;break;default:m=g=r.coordinate,x=o+ +f*c,v=x+b*_,w=v+b*h,y=k;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:y,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=vr(vr(vr({},gn(this.props,!1)),gn(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=vr(vr({},f),{},{x1:a,y1:s+h*l,x2:a+o,y2:s+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=vr(vr({},f),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return Y.createElement("line",Zu({},f,{className:un("recharts-cartesian-axis-line",Ai(d,"className"))}))}},{key:"renderTicks",value:function(r,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=rE(vr(vr({},this.props),{},{ticks:r}),a,s),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=gn(this.props,!1),y=gn(d,!1),w=vr(vr({},x),{},{fill:"none"},gn(c,!1)),b=m.map(function(_,k){var j=o.getTickLineCoord(_),S=j.line,O=j.tick,I=vr(vr(vr(vr({textAnchor:g,verticalAnchor:v},x),{},{stroke:"none",fill:u},y),O),{},{index:k,payload:_,visibleTicksCount:m.length,tickFormatter:f});return Y.createElement(Pr,Zu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},My(o.props,_,k)),c&&Y.createElement("line",Zu({},w,S,{className:un("recharts-cartesian-axis-tick-line",Ai(c,"className"))})),d&&t.renderTickItem(d,I,"".concat(Kt(f)?f(_.value,k):_.value).concat(h||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=Kj(f,h4e),g=h;return Kt(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:Y.createElement(Pr,{className:un("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),ta.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,s){var o,l=un(a.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(r)?o=Y.cloneElement(r,vr(vr({},a),{},{className:l})):Kt(r)?o=r(vr(vr({},a),{},{className:l})):o=Y.createElement(Yy,Zu({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(p.Component);aE(Df,"displayName","CartesianAxis");aE(Df,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var j4e=["x1","y1","x2","y2","key"],_4e=["offset"];function Qc(e){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function YM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(n),!0).forEach(function(r){k4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k4e(e,t,n){return t=S4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S4e(e){var t=N4e(e,"string");return Qc(t)=="symbol"?t:t+""}function N4e(e,t){if(Qc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}function XM(e,t){if(e==null)return{};var n=C4e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function C4e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var A4e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return Y.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function i9(e,t){var n;if(Y.isValidElement(e))n=Y.cloneElement(e,t);else if(Kt(e))n=e(t);else{var r=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=XM(t,j4e),u=gn(c,!1);u.offset;var d=XM(u,_4e);n=Y.createElement("line",bc({},d,{x1:r,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function E4e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=na(na({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return i9(a,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function T4e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=na(na({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return i9(a,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function P4e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],v=g?a+o-h:d[m+1]-h;if(v<=0)return null;var x=m%t.length;return Y.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:v,width:s,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function O4e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],v=g?s+l-h:d[m+1]-h;if(v<=0)return null;var x=m%r.length;return Y.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:v,height:c,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var I4e=function(t,n){var r=t.xAxis,a=t.width,s=t.height,o=t.offset;return mq(rE(na(na(na({},Df.defaultProps),r),{},{ticks:co(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},R4e=function(t,n){var r=t.yAxis,a=t.width,s=t.height,o=t.offset;return mq(rE(na(na(na({},Df.defaultProps),r),{},{ticks:co(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},Tu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function sS(e){var t,n,r,a,s,o,l=ZA(),c=eE(),u=w$e(),d=na(na({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Tu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Tu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Tu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Tu.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Tu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Tu.verticalFill,x:tt(e.x)?e.x:u.left,y:tt(e.y)?e.y:u.top,width:tt(e.width)?e.width:u.width,height:tt(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,v=d.syncWithTicks,x=d.horizontalValues,y=d.verticalValues,w=y$e(),b=x$e();if(!tt(m)||m<=0||!tt(g)||g<=0||!tt(f)||f!==+f||!tt(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||I4e,k=d.horizontalCoordinatesGenerator||R4e,j=d.horizontalPoints,S=d.verticalPoints;if((!j||!j.length)&&Kt(k)){var O=x&&x.length,I=k({yAxis:b?na(na({},b),{},{ticks:O?x:b.ticks}):void 0,width:l,height:c,offset:u},O?!0:v);go(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(I),"]")),Array.isArray(I)&&(j=I)}if((!S||!S.length)&&Kt(_)){var P=y&&y.length,N=_({xAxis:w?na(na({},w),{},{ticks:P?y:w.ticks}):void 0,width:l,height:c,offset:u},P?!0:v);go(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(N),"]")),Array.isArray(N)&&(S=N)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(A4e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Y.createElement(E4e,bc({},d,{offset:u,horizontalPoints:j,xAxis:w,yAxis:b})),Y.createElement(T4e,bc({},d,{offset:u,verticalPoints:S,xAxis:w,yAxis:b})),Y.createElement(P4e,bc({},d,{horizontalPoints:j})),Y.createElement(O4e,bc({},d,{verticalPoints:S})))}sS.displayName="CartesianGrid";function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function M4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l9(r.key),r)}}function L4e(e,t,n){return t&&D4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $4e(e,t,n){return t=Ax(t),F4e(e,s9()?Reflect.construct(t,n||[],Ax(e).constructor):t.apply(e,n))}function F4e(e,t){if(t&&(sf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U4e(e)}function U4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s9=function(){return!!e})()}function Ax(e){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ax(e)}function B4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oS(e,t)}function oS(e,t){return oS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},oS(e,t)}function o9(e,t,n){return t=l9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l9(e){var t=z4e(e,"string");return sf(t)=="symbol"?t:t+""}function z4e(e,t){if(sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lS(){return lS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lS.apply(this,arguments)}function W4e(e){var t=e.xAxisId,n=ZA(),r=eE(),a=Gq(t);return a==null?null:p.createElement(Df,lS({},a,{className:un("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return co(o,!0)}}))}var ua=function(e){function t(){return M4e(this,t),$4e(this,t,arguments)}return B4e(t,e),L4e(t,[{key:"render",value:function(){return p.createElement(W4e,this.props)}}])}(p.Component);o9(ua,"displayName","XAxis");o9(ua,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function q4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d9(r.key),r)}}function K4e(e,t,n){return t&&H4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function V4e(e,t,n){return t=Ex(t),G4e(e,c9()?Reflect.construct(t,n||[],Ex(e).constructor):t.apply(e,n))}function G4e(e,t){if(t&&(of(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y4e(e)}function Y4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c9=function(){return!!e})()}function Ex(e){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ex(e)}function X4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cS(e,t)}function cS(e,t){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},cS(e,t)}function u9(e,t,n){return t=d9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d9(e){var t=J4e(e,"string");return of(t)=="symbol"?t:t+""}function J4e(e,t){if(of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uS.apply(this,arguments)}var Q4e=function(t){var n=t.yAxisId,r=ZA(),a=eE(),s=Yq(n);return s==null?null:p.createElement(Df,uS({},s,{className:un("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return co(l,!0)}}))},da=function(e){function t(){return q4e(this,t),V4e(this,t,arguments)}return X4e(t,e),K4e(t,[{key:"render",value:function(){return p.createElement(Q4e,this.props)}}])}(p.Component);u9(da,"displayName","YAxis");u9(da,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JM(e){return nFe(e)||tFe(e)||eFe(e)||Z4e()}function Z4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eFe(e,t){if(e){if(typeof e=="string")return dS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dS(e,t)}}function tFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nFe(e){if(Array.isArray(e))return dS(e)}function dS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fS=function(t,n,r,a,s){var o=is(t,nE),l=is(t,R0),c=[].concat(JM(o),JM(l)),u=is(t,D0),d="".concat(a,"Id"),f=a[0],h=n;if(c.length&&(h=c.reduce(function(v,x){if(x.props[d]===r&&Rs(x.props,"extendDomain")&&tt(x.props[f])){var y=x.props[f];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(v,x){if(x.props[d]===r&&Rs(x.props,"extendDomain")&&tt(x.props[m])&&tt(x.props[g])){var y=x.props[m],w=x.props[g];return[Math.min(v[0],y,w),Math.max(v[1],y,w)]}return v},h)}return s&&s.length&&(h=s.reduce(function(v,x){return tt(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},h)),h},f9={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,w,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,m),!0;case 6:return x.fn.call(x.context,d,f,h,m,g),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];x.fn.apply(x.context,w)}else{var _=x.length,k;for(b=0;b<_;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),y){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,h);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];x[b].fn.apply(x[b].context,w)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==d||h&&!g[v].once||f&&g[v].context!==f)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(f9);var rFe=f9.exports;const aFe=jn(rFe);var Vj=new aFe,Gj="recharts.syncMouseEvents";function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function iFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h9(r.key),r)}}function oFe(e,t,n){return t&&sFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yj(e,t,n){return t=h9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h9(e){var t=lFe(e,"string");return fp(t)=="symbol"?t:t+""}function lFe(e,t){if(fp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cFe=function(){function e(){iFe(this,e),Yj(this,"activeIndex",0),Yj(this,"coordinateList",[]),Yj(this,"layout","horizontal")}return oFe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function uFe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&tt(r)&&tt(a))return!0}return!1}function dFe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function m9(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle,o=Wr(t,n,r,a),l=Wr(t,n,r,s);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function fFe(e,t,n){var r,a,s,o;if(e==="horizontal")r=t.x,s=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Wr(l,c,u,f),m=Wr(l,c,d,f);r=h.x,a=h.y,s=m.x,o=m.y}else return m9(t);return[{x:r,y:a},{x:s,y:o}]}function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function QM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QM(Object(n),!0).forEach(function(r){hFe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hFe(e,t,n){return t=mFe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mFe(e){var t=pFe(e,"string");return hp(t)=="symbol"?t:t+""}function pFe(e,t){if(hp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gFe(e){var t,n,r=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,v=YR;if(h==="ScatterChart")g=o,v=EMe;else if(h==="BarChart")g=dFe(f,o,c,d),v=YA;else if(f==="radial"){var x=m9(o),y=x.cx,w=x.cy,b=x.radius,_=x.startAngle,k=x.endAngle;g={cx:y,cy:w,startAngle:_,endAngle:k,innerRadius:b,outerRadius:b},v=xq}else g={points:fFe(f,o,c)},v=YR;var j=sv(sv(sv(sv({stroke:"#ccc",pointerEvents:"none"},c),g),gn(m,!1)),{},{payload:l,payloadIndex:u,className:un("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,j):p.createElement(v,j)}var vFe=["item"],yFe=["children","className","width","height","style","compact","title","desc"];function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function ed(){return ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ed.apply(this,arguments)}function ZM(e,t){return wFe(e)||bFe(e,t)||g9(e,t)||xFe()}function xFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bFe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function wFe(e){if(Array.isArray(e))return e}function eD(e,t){if(e==null)return{};var n=jFe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jFe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v9(r.key),r)}}function SFe(e,t,n){return t&&kFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NFe(e,t,n){return t=Tx(t),CFe(e,p9()?Reflect.construct(t,n||[],Tx(e).constructor):t.apply(e,n))}function CFe(e,t){if(t&&(lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AFe(e)}function AFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p9=function(){return!!e})()}function Tx(e){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tx(e)}function EFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},hS(e,t)}function cf(e){return OFe(e)||PFe(e)||g9(e)||TFe()}function TFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g9(e,t){if(e){if(typeof e=="string")return mS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mS(e,t)}}function PFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OFe(e){if(Array.isArray(e))return mS(e)}function mS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tD(Object(n),!0).forEach(function(r){Et(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Et(e,t,n){return t=v9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v9(e){var t=IFe(e,"string");return lf(t)=="symbol"?t:t+""}function IFe(e,t){if(lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RFe={xAxis:["bottom","top"],yAxis:["left","right"]},MFe={width:"100%",height:"100%"},y9={x:0,y:0};function ov(e){return e}var DFe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},LFe=function(t,n,r,a){var s=n.find(function(d){return d&&d.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return Ae(Ae(Ae({},a),Wr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return Ae(Ae(Ae({},a),Wr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return y9},L0=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(cf(l),cf(u)):l},[]);return o.length>0?o:t&&t.length&&tt(a)&&tt(s)?t.slice(a,s+1):[]};function x9(e){return e==="number"?[0,"auto"]:void 0}var pS=function(t,n,r,a){var s=t.graphicalItems,o=t.tooltipAxis,l=L0(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=V1(m,o.dataKey,a)}else h=f&&f[r]||l[r];return h?[].concat(cf(c),[gq(u,h)]):c},[])},nD=function(t,n,r,a){var s=a||{x:t.chartX,y:t.chartY},o=DFe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=dOe(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=pS(t,n,d,f),m=LFe(r,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},$Fe=function(t,n){var r=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=hq(d,s);return r.reduce(function(g,v){var x,y=v.type.defaultProps!==void 0?Ae(Ae({},v.type.defaultProps),v.props):v.props,w=y.type,b=y.dataKey,_=y.allowDataOverflow,k=y.allowDuplicatedCategory,j=y.scale,S=y.ticks,O=y.includeHidden,I=y[o];if(g[I])return g;var P=L0(t.data,{graphicalItems:a.filter(function(R){var C,q=o in R.props?R.props[o]:(C=R.type.defaultProps)===null||C===void 0?void 0:C[o];return q===I}),dataStartIndex:c,dataEndIndex:u}),N=P.length,D,$,U;uFe(y.domain,_,w)&&(D=Rk(y.domain,null,_),m&&(w==="number"||j!=="auto")&&(U=Wh(P,b,"category")));var F=x9(w);if(!D||D.length===0){var M,T=(M=y.domain)!==null&&M!==void 0?M:F;if(b){if(D=Wh(P,b,w),w==="category"&&m){var A=Zxe(D);k&&A?($=D,D=yx(0,N)):k||(D=DR(T,D,v).reduce(function(R,C){return R.indexOf(C)>=0?R:[].concat(cf(R),[C])},[]))}else if(w==="category")k?D=D.filter(function(R){return R!==""&&!vn(R)}):D=DR(T,D,v).reduce(function(R,C){return R.indexOf(C)>=0||C===""||vn(C)?R:[].concat(cf(R),[C])},[]);else if(w==="number"){var L=gOe(P,a.filter(function(R){var C,q,Z=o in R.props?R.props[o]:(C=R.type.defaultProps)===null||C===void 0?void 0:C[o],J="hide"in R.props?R.props.hide:(q=R.type.defaultProps)===null||q===void 0?void 0:q.hide;return Z===I&&(O||!J)}),b,s,d);L&&(D=L)}m&&(w==="number"||j!=="auto")&&(U=Wh(P,b,"category"))}else m?D=yx(0,N):l&&l[I]&&l[I].hasStack&&w==="number"?D=h==="expand"?[0,1]:pq(l[I].stackGroups,c,u):D=fq(P,a.filter(function(R){var C=o in R.props?R.props[o]:R.type.defaultProps[o],q="hide"in R.props?R.props.hide:R.type.defaultProps.hide;return C===I&&(O||!q)}),w,d,!0);if(w==="number")D=fS(f,D,I,s,S),T&&(D=Rk(T,D,_));else if(w==="category"&&T){var E=T,B=D.every(function(R){return E.indexOf(R)>=0});B&&(D=E)}}return Ae(Ae({},g),{},Et({},I,Ae(Ae({},y),{},{axisType:s,domain:D,categoricalDomain:U,duplicateDomain:$,originalDomain:(x=y.domain)!==null&&x!==void 0?x:F,isCategorical:m,layout:d})))},{})},FFe=function(t,n){var r=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,f=t.children,h=L0(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=hq(d,s),v=-1;return r.reduce(function(x,y){var w=y.type.defaultProps!==void 0?Ae(Ae({},y.type.defaultProps),y.props):y.props,b=w[o],_=x9("number");if(!x[b]){v++;var k;return g?k=yx(0,m):l&&l[b]&&l[b].hasStack?(k=pq(l[b].stackGroups,c,u),k=fS(f,k,b,s)):(k=Rk(_,fq(h,r.filter(function(j){var S,O,I=o in j.props?j.props[o]:(S=j.type.defaultProps)===null||S===void 0?void 0:S[o],P="hide"in j.props?j.props.hide:(O=j.type.defaultProps)===null||O===void 0?void 0:O.hide;return I===b&&!P}),"number",d),a.defaultProps.allowDataOverflow),k=fS(f,k,b,s)),Ae(Ae({},x),{},Et({},b,Ae(Ae({axisType:s},a.defaultProps),{},{hide:!0,orientation:Ai(RFe,"".concat(s,".").concat(v%2),null),domain:k,originalDomain:_,isCategorical:g,layout:d})))}return x},{})},UFe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=is(d,s),m={};return h&&h.length?m=$Fe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=FFe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},BFe=function(t){var n=nl(t),r=co(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:wA(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:cx(n,r)}},rD=function(t){var n=t.children,r=t.defaultShowTooltip,a=Qa(n,Zd),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},zFe=function(t){return!t||!t.length?!1:t.some(function(n){var r=po(n&&n.type);return r&&r.indexOf("Bar")>=0})},aD=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},WFe=function(t,n){var r=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,f=r.children,h=r.margin||{},m=Qa(f,Zd),g=Qa(f,wi),v=Object.keys(c).reduce(function(k,j){var S=c[j],O=S.orientation;return!S.mirror&&!S.hide?Ae(Ae({},k),{},Et({},O,k[O]+S.width)):k},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(k,j){var S=o[j],O=S.orientation;return!S.mirror&&!S.hide?Ae(Ae({},k),{},Et({},O,Ai(k,"".concat(O))+S.height)):k},{top:h.top||0,bottom:h.bottom||0}),y=Ae(Ae({},x),v),w=y.bottom;m&&(y.bottom+=m.props.height||Zd.defaultProps.height),g&&n&&(y=mOe(y,a,r,n));var b=u-y.left-y.right,_=d-y.top-y.bottom;return Ae(Ae({brushBottom:w},y),{},{width:Math.max(b,0),height:Math.max(_,0)})},qFe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},HFe=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(y,w){var b=w.graphicalItems,_=w.stackGroups,k=w.offset,j=w.updateId,S=w.dataStartIndex,O=w.dataEndIndex,I=y.barSize,P=y.layout,N=y.barGap,D=y.barCategoryGap,$=y.maxBarSize,U=aD(P),F=U.numericAxisName,M=U.cateAxisName,T=zFe(b),A=[];return b.forEach(function(L,E){var B=L0(y.data,{graphicalItems:[L],dataStartIndex:S,dataEndIndex:O}),R=L.type.defaultProps!==void 0?Ae(Ae({},L.type.defaultProps),L.props):L.props,C=R.dataKey,q=R.maxBarSize,Z=R["".concat(F,"Id")],J=R["".concat(M,"Id")],ee={},ae=c.reduce(function(Ye,ot){var te=w["".concat(ot.axisType,"Map")],Xe=R["".concat(ot.axisType,"Id")];te&&te[Xe]||ot.axisType==="zAxis"||Jc();var dt=te[Xe];return Ae(Ae({},Ye),{},Et(Et({},ot.axisType,dt),"".concat(ot.axisType,"Ticks"),co(dt)))},ee),Q=ae[M],oe=ae["".concat(M,"Ticks")],ge=_&&_[Z]&&_[Z].hasStack&&AOe(L,_[Z].stackGroups),ie=po(L.type).indexOf("Bar")>=0,Ie=cx(Q,oe),me=[],K=T&&fOe({barSize:I,stackGroups:_,totalSize:qFe(ae,M)});if(ie){var fe,De,Ze=vn(q)?$:q,Ve=(fe=(De=cx(Q,oe,!0))!==null&&De!==void 0?De:Ze)!==null&&fe!==void 0?fe:0;me=hOe({barGap:N,barCategoryGap:D,bandSize:Ve!==Ie?Ve:Ie,sizeList:K[J],maxBarSize:Ze}),Ve!==Ie&&(me=me.map(function(Ye){return Ae(Ae({},Ye),{},{position:Ae(Ae({},Ye.position),{},{offset:Ye.position.offset-Ve/2})})}))}var ut=L&&L.type&&L.type.getComposedData;ut&&A.push({props:Ae(Ae({},ut(Ae(Ae({},ae),{},{displayedData:B,props:y,dataKey:C,item:L,bandSize:Ie,barPosition:me,offset:k,stackedData:ge,layout:P,dataStartIndex:S,dataEndIndex:O}))),{},Et(Et(Et({key:L.key||"item-".concat(E)},F,ae[F]),M,ae[M]),"animationId",j)),childIndex:dbe(L,y.children),item:L})}),A},m=function(y,w){var b=y.props,_=y.dataStartIndex,k=y.dataEndIndex,j=y.updateId;if(!TO({props:b}))return null;var S=b.children,O=b.layout,I=b.stackOffset,P=b.data,N=b.reverseStackOrder,D=aD(O),$=D.numericAxisName,U=D.cateAxisName,F=is(S,r),M=SOe(P,F,"".concat($,"Id"),"".concat(U,"Id"),I,N),T=c.reduce(function(R,C){var q="".concat(C.axisType,"Map");return Ae(Ae({},R),{},Et({},q,UFe(b,Ae(Ae({},C),{},{graphicalItems:F,stackGroups:C.axisType===$&&M,dataStartIndex:_,dataEndIndex:k}))))},{}),A=WFe(Ae(Ae({},T),{},{props:b,graphicalItems:F}),w==null?void 0:w.legendBBox);Object.keys(T).forEach(function(R){T[R]=d(b,T[R],A,R.replace("Map",""),n)});var L=T["".concat(U,"Map")],E=BFe(L),B=h(b,Ae(Ae({},T),{},{dataStartIndex:_,dataEndIndex:k,updateId:j,graphicalItems:F,stackGroups:M,offset:A}));return Ae(Ae({formattedGraphicalItems:B,graphicalItems:F,offset:A,stackGroups:M},E),T)},g=function(x){function y(w){var b,_,k;return _Fe(this,y),k=NFe(this,y,[w]),Et(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Et(k,"accessibilityManager",new cFe),Et(k,"handleLegendBBoxUpdate",function(j){if(j){var S=k.state,O=S.dataStartIndex,I=S.dataEndIndex,P=S.updateId;k.setState(Ae({legendBBox:j},m({props:k.props,dataStartIndex:O,dataEndIndex:I,updateId:P},Ae(Ae({},k.state),{},{legendBBox:j}))))}}),Et(k,"handleReceiveSyncEvent",function(j,S,O){if(k.props.syncId===j){if(O===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(S)}}),Et(k,"handleBrushChange",function(j){var S=j.startIndex,O=j.endIndex;if(S!==k.state.dataStartIndex||O!==k.state.dataEndIndex){var I=k.state.updateId;k.setState(function(){return Ae({dataStartIndex:S,dataEndIndex:O},m({props:k.props,dataStartIndex:S,dataEndIndex:O,updateId:I},k.state))}),k.triggerSyncEvent({dataStartIndex:S,dataEndIndex:O})}}),Et(k,"handleMouseEnter",function(j){var S=k.getMouseInfo(j);if(S){var O=Ae(Ae({},S),{},{isTooltipActive:!0});k.setState(O),k.triggerSyncEvent(O);var I=k.props.onMouseEnter;Kt(I)&&I(O,j)}}),Et(k,"triggeredAfterMouseMove",function(j){var S=k.getMouseInfo(j),O=S?Ae(Ae({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(O),k.triggerSyncEvent(O);var I=k.props.onMouseMove;Kt(I)&&I(O,j)}),Et(k,"handleItemMouseEnter",function(j){k.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Et(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Et(k,"handleMouseMove",function(j){j.persist(),k.throttleTriggeredAfterMouseMove(j)}),Et(k,"handleMouseLeave",function(j){k.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};k.setState(S),k.triggerSyncEvent(S);var O=k.props.onMouseLeave;Kt(O)&&O(S,j)}),Et(k,"handleOuterEvent",function(j){var S=ube(j),O=Ai(k.props,"".concat(S));if(S&&Kt(O)){var I,P;/.*touch.*/i.test(S)?P=k.getMouseInfo(j.changedTouches[0]):P=k.getMouseInfo(j),O((I=P)!==null&&I!==void 0?I:{},j)}}),Et(k,"handleClick",function(j){var S=k.getMouseInfo(j);if(S){var O=Ae(Ae({},S),{},{isTooltipActive:!0});k.setState(O),k.triggerSyncEvent(O);var I=k.props.onClick;Kt(I)&&I(O,j)}}),Et(k,"handleMouseDown",function(j){var S=k.props.onMouseDown;if(Kt(S)){var O=k.getMouseInfo(j);S(O,j)}}),Et(k,"handleMouseUp",function(j){var S=k.props.onMouseUp;if(Kt(S)){var O=k.getMouseInfo(j);S(O,j)}}),Et(k,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Et(k,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.handleMouseDown(j.changedTouches[0])}),Et(k,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.handleMouseUp(j.changedTouches[0])}),Et(k,"handleDoubleClick",function(j){var S=k.props.onDoubleClick;if(Kt(S)){var O=k.getMouseInfo(j);S(O,j)}}),Et(k,"handleContextMenu",function(j){var S=k.props.onContextMenu;if(Kt(S)){var O=k.getMouseInfo(j);S(O,j)}}),Et(k,"triggerSyncEvent",function(j){k.props.syncId!==void 0&&Vj.emit(Gj,k.props.syncId,j,k.eventEmitterSymbol)}),Et(k,"applySyncEvent",function(j){var S=k.props,O=S.layout,I=S.syncMethod,P=k.state.updateId,N=j.dataStartIndex,D=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)k.setState(Ae({dataStartIndex:N,dataEndIndex:D},m({props:k.props,dataStartIndex:N,dataEndIndex:D,updateId:P},k.state)));else if(j.activeTooltipIndex!==void 0){var $=j.chartX,U=j.chartY,F=j.activeTooltipIndex,M=k.state,T=M.offset,A=M.tooltipTicks;if(!T)return;if(typeof I=="function")F=I(A,j);else if(I==="value"){F=-1;for(var L=0;L<A.length;L++)if(A[L].value===j.activeLabel){F=L;break}}var E=Ae(Ae({},T),{},{x:T.left,y:T.top}),B=Math.min($,E.x+E.width),R=Math.min(U,E.y+E.height),C=A[F]&&A[F].value,q=pS(k.state,k.props.data,F),Z=A[F]?{x:O==="horizontal"?A[F].coordinate:B,y:O==="horizontal"?R:A[F].coordinate}:y9;k.setState(Ae(Ae({},j),{},{activeLabel:C,activeCoordinate:Z,activePayload:q,activeTooltipIndex:F}))}else k.setState(j)}),Et(k,"renderCursor",function(j){var S,O=k.state,I=O.isTooltipActive,P=O.activeCoordinate,N=O.activePayload,D=O.offset,$=O.activeTooltipIndex,U=O.tooltipAxisBandSize,F=k.getTooltipEventType(),M=(S=j.props.active)!==null&&S!==void 0?S:I,T=k.props.layout,A=j.key||"_recharts-cursor";return Y.createElement(gFe,{key:A,activeCoordinate:P,activePayload:N,activeTooltipIndex:$,chartName:n,element:j,isActive:M,layout:T,offset:D,tooltipAxisBandSize:U,tooltipEventType:F})}),Et(k,"renderPolarAxis",function(j,S,O){var I=Ai(j,"type.axisType"),P=Ai(k.state,"".concat(I,"Map")),N=j.type.defaultProps,D=N!==void 0?Ae(Ae({},N),j.props):j.props,$=P&&P[D["".concat(I,"Id")]];return p.cloneElement(j,Ae(Ae({},$),{},{className:un(I,$.className),key:j.key||"".concat(S,"-").concat(O),ticks:co($,!0)}))}),Et(k,"renderPolarGrid",function(j){var S=j.props,O=S.radialLines,I=S.polarAngles,P=S.polarRadius,N=k.state,D=N.radiusAxisMap,$=N.angleAxisMap,U=nl(D),F=nl($),M=F.cx,T=F.cy,A=F.innerRadius,L=F.outerRadius;return p.cloneElement(j,{polarAngles:Array.isArray(I)?I:co(F,!0).map(function(E){return E.coordinate}),polarRadius:Array.isArray(P)?P:co(U,!0).map(function(E){return E.coordinate}),cx:M,cy:T,innerRadius:A,outerRadius:L,key:j.key||"polar-grid",radialLines:O})}),Et(k,"renderLegend",function(){var j=k.state.formattedGraphicalItems,S=k.props,O=S.children,I=S.width,P=S.height,N=k.props.margin||{},D=I-(N.left||0)-(N.right||0),$=uq({children:O,formattedGraphicalItems:j,legendWidth:D,legendContent:u});if(!$)return null;var U=$.item,F=eD($,vFe);return p.cloneElement(U,Ae(Ae({},F),{},{chartWidth:I,chartHeight:P,margin:N,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Et(k,"renderTooltip",function(){var j,S=k.props,O=S.children,I=S.accessibilityLayer,P=Qa(O,or);if(!P)return null;var N=k.state,D=N.isTooltipActive,$=N.activeCoordinate,U=N.activePayload,F=N.activeLabel,M=N.offset,T=(j=P.props.active)!==null&&j!==void 0?j:D;return p.cloneElement(P,{viewBox:Ae(Ae({},M),{},{x:M.left,y:M.top}),active:T,label:F,payload:T?U:[],coordinate:$,accessibilityLayer:I})}),Et(k,"renderBrush",function(j){var S=k.props,O=S.margin,I=S.data,P=k.state,N=P.offset,D=P.dataStartIndex,$=P.dataEndIndex,U=P.updateId;return p.cloneElement(j,{key:j.key||"_recharts-brush",onChange:nv(k.handleBrushChange,j.props.onChange),data:I,x:tt(j.props.x)?j.props.x:N.left,y:tt(j.props.y)?j.props.y:N.top+N.height+N.brushBottom-(O.bottom||0),width:tt(j.props.width)?j.props.width:N.width,startIndex:D,endIndex:$,updateId:"brush-".concat(U)})}),Et(k,"renderReferenceElement",function(j,S,O){if(!j)return null;var I=k,P=I.clipPathId,N=k.state,D=N.xAxisMap,$=N.yAxisMap,U=N.offset,F=j.type.defaultProps||{},M=j.props,T=M.xAxisId,A=T===void 0?F.xAxisId:T,L=M.yAxisId,E=L===void 0?F.yAxisId:L;return p.cloneElement(j,{key:j.key||"".concat(S,"-").concat(O),xAxis:D[A],yAxis:$[E],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:P})}),Et(k,"renderActivePoints",function(j){var S=j.item,O=j.activePoint,I=j.basePoint,P=j.childIndex,N=j.isRange,D=[],$=S.props.key,U=S.item.type.defaultProps!==void 0?Ae(Ae({},S.item.type.defaultProps),S.item.props):S.item.props,F=U.activeDot,M=U.dataKey,T=Ae(Ae({index:P,dataKey:M,cx:O.x,cy:O.y,r:4,fill:GA(S.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},gn(F,!1)),Ry(F));return D.push(y.renderActiveDot(F,T,"".concat($,"-activePoint-").concat(P))),I?D.push(y.renderActiveDot(F,Ae(Ae({},T),{},{cx:I.x,cy:I.y}),"".concat($,"-basePoint-").concat(P))):N&&D.push(null),D}),Et(k,"renderGraphicChild",function(j,S,O){var I=k.filterFormatItem(j,S,O);if(!I)return null;var P=k.getTooltipEventType(),N=k.state,D=N.isTooltipActive,$=N.tooltipAxis,U=N.activeTooltipIndex,F=N.activeLabel,M=k.props.children,T=Qa(M,or),A=I.props,L=A.points,E=A.isRange,B=A.baseLine,R=I.item.type.defaultProps!==void 0?Ae(Ae({},I.item.type.defaultProps),I.item.props):I.item.props,C=R.activeDot,q=R.hide,Z=R.activeBar,J=R.activeShape,ee=!!(!q&&D&&T&&(C||Z||J)),ae={};P!=="axis"&&T&&T.props.trigger==="click"?ae={onClick:nv(k.handleItemMouseEnter,j.props.onClick)}:P!=="axis"&&(ae={onMouseLeave:nv(k.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:nv(k.handleItemMouseEnter,j.props.onMouseEnter)});var Q=p.cloneElement(j,Ae(Ae({},I.props),ae));function oe(ot){return typeof $.dataKey=="function"?$.dataKey(ot.payload):null}if(ee)if(U>=0){var ge,ie;if($.dataKey&&!$.allowDuplicatedCategory){var Ie=typeof $.dataKey=="function"?oe:"payload.".concat($.dataKey.toString());ge=V1(L,Ie,F),ie=E&&B&&V1(B,Ie,F)}else ge=L==null?void 0:L[U],ie=E&&B&&B[U];if(J||Z){var me=j.props.activeIndex!==void 0?j.props.activeIndex:U;return[p.cloneElement(j,Ae(Ae(Ae({},I.props),ae),{},{activeIndex:me})),null,null]}if(!vn(ge))return[Q].concat(cf(k.renderActivePoints({item:I,activePoint:ge,basePoint:ie,childIndex:U,isRange:E})))}else{var K,fe=(K=k.getItemByXY(k.state.activeCoordinate))!==null&&K!==void 0?K:{graphicalItem:Q},De=fe.graphicalItem,Ze=De.item,Ve=Ze===void 0?j:Ze,ut=De.childIndex,Ye=Ae(Ae(Ae({},I.props),ae),{},{activeIndex:ut});return[p.cloneElement(Ve,Ye),null,null]}return E?[Q,null,null]:[Q,null]}),Et(k,"renderCustomized",function(j,S,O){return p.cloneElement(j,Ae(Ae({key:"recharts-customized-".concat(O)},k.props),k.state))}),Et(k,"renderMap",{CartesianGrid:{handler:ov,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:ov},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:ov},YAxis:{handler:ov},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=w.id)!==null&&b!==void 0?b:d0("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=cW(k.triggeredAfterMouseMove,(_=w.throttleDelay)!==null&&_!==void 0?_:1e3/60),k.state={},k}return EFe(y,x),SFe(y,[{key:"componentDidMount",value:function(){var b,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,_=b.children,k=b.data,j=b.height,S=b.layout,O=Qa(_,or);if(O){var I=O.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,N=pS(this.state,k,I,P),D=this.state.tooltipTicks[I].coordinate,$=(this.state.offset.top+j)/2,U=S==="horizontal",F=U?{x:D,y:$}:{y:D,x:$},M=this.state.formattedGraphicalItems.find(function(A){var L=A.item;return L.type.name==="Scatter"});M&&(F=Ae(Ae({},F),M.props.points[I].tooltipPosition),N=M.props.points[I].tooltipPayload);var T={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:P,activePayload:N,activeCoordinate:F};this.setState(T),this.renderCursor(O),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,j;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(b){Y1([Qa(b.children,or)],[Qa(this.props.children,or)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Qa(this.props.children,or);if(b&&typeof b.props.shared=="boolean"){var _=b.props.shared?"axis":"item";return l.indexOf(_)>=0?_:s}return s}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var _=this.container,k=_.getBoundingClientRect(),j=LAe(k),S={chartX:Math.round(b.pageX-j.left),chartY:Math.round(b.pageY-j.top)},O=k.width/_.offsetWidth||1,I=this.inRange(S.chartX,S.chartY,O);if(!I)return null;var P=this.state,N=P.xAxisMap,D=P.yAxisMap,$=this.getTooltipEventType(),U=nD(this.state,this.props.data,this.props.layout,I);if($!=="axis"&&N&&D){var F=nl(N).scale,M=nl(D).scale,T=F&&F.invert?F.invert(S.chartX):null,A=M&&M.invert?M.invert(S.chartY):null;return Ae(Ae({},S),{},{xValue:T,yValue:A},U)}return U?Ae(Ae({},S),U):null}},{key:"inRange",value:function(b,_){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,S=b/k,O=_/k;if(j==="horizontal"||j==="vertical"){var I=this.state.offset,P=S>=I.left&&S<=I.left+I.width&&O>=I.top&&O<=I.top+I.height;return P?{x:S,y:O}:null}var N=this.state,D=N.angleAxisMap,$=N.radiusAxisMap;if(D&&$){var U=nl(D);return FR({x:S,y:O},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,_=this.getTooltipEventType(),k=Qa(b,or),j={};k&&_==="axis"&&(k.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Ry(this.props,this.handleOuterEvent);return Ae(Ae({},S),j)}},{key:"addListener",value:function(){Vj.on(Gj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Vj.removeListener(Gj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,_,k){for(var j=this.state.formattedGraphicalItems,S=0,O=j.length;S<O;S++){var I=j[S];if(I.item===b||I.props.key===b.key||_===po(I.item.type)&&k===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,_=this.state.offset,k=_.left,j=_.top,S=_.height,O=_.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:b},Y.createElement("rect",{x:k,y:j,height:S,width:O})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(_,k){var j=ZM(k,2),S=j[0],O=j[1];return Ae(Ae({},_),{},Et({},S,O.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(_,k){var j=ZM(k,2),S=j[0],O=j[1];return Ae(Ae({},_),{},Et({},S,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(b){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(b){var _=this.state,k=_.formattedGraphicalItems,j=_.activeItem;if(k&&k.length)for(var S=0,O=k.length;S<O;S++){var I=k[S],P=I.props,N=I.item,D=N.type.defaultProps!==void 0?Ae(Ae({},N.type.defaultProps),N.props):N.props,$=po(N.type);if($==="Bar"){var U=(P.data||[]).find(function(A){return xMe(b,A)});if(U)return{graphicalItem:I,payload:U}}else if($==="RadialBar"){var F=(P.data||[]).find(function(A){return FR(b,A)});if(F)return{graphicalItem:I,payload:F}}else if(T0(I,j)||P0(I,j)||op(I,j)){var M=jDe({graphicalItem:I,activeTooltipItem:j,itemData:D.data}),T=D.activeIndex===void 0?M:D.activeIndex;return{graphicalItem:Ae(Ae({},I),{},{childIndex:T}),payload:op(I,j)?D.data[M]:I.props.data[M]}}}return null}},{key:"render",value:function(){var b=this;if(!TO(this))return null;var _=this.props,k=_.children,j=_.className,S=_.width,O=_.height,I=_.style,P=_.compact,N=_.title,D=_.desc,$=eD(_,yFe),U=gn($,!1);if(P)return Y.createElement($M,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(J1,ed({},U,{width:S,height:O,title:N,desc:D}),this.renderClipPath(),OO(k,this.renderMap)));if(this.props.accessibilityLayer){var F,M;U.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,U.role=(M=this.props.role)!==null&&M!==void 0?M:"application",U.onKeyDown=function(A){b.accessibilityManager.keyboardEvent(A)},U.onFocus=function(){b.accessibilityManager.focus()}}var T=this.parseEventsOfWrapper();return Y.createElement($M,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",ed({className:un("recharts-wrapper",j),style:Ae({position:"relative",cursor:"default",width:S,height:O},I)},T,{ref:function(L){b.container=L}}),Y.createElement(J1,ed({},U,{width:S,height:O,title:N,desc:D,style:MFe}),this.renderClipPath(),OO(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);Et(g,"displayName",n),Et(g,"defaultProps",Ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Et(g,"getDerivedStateFromProps",function(x,y){var w=x.dataKey,b=x.data,_=x.children,k=x.width,j=x.height,S=x.layout,O=x.stackOffset,I=x.margin,P=y.dataStartIndex,N=y.dataEndIndex;if(y.updateId===void 0){var D=rD(x);return Ae(Ae(Ae({},D),{},{updateId:0},m(Ae(Ae({props:x},D),{},{updateId:0}),y)),{},{prevDataKey:w,prevData:b,prevWidth:k,prevHeight:j,prevLayout:S,prevStackOffset:O,prevMargin:I,prevChildren:_})}if(w!==y.prevDataKey||b!==y.prevData||k!==y.prevWidth||j!==y.prevHeight||S!==y.prevLayout||O!==y.prevStackOffset||!hd(I,y.prevMargin)){var $=rD(x),U={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},F=Ae(Ae({},nD(y,b,S)),{},{updateId:y.updateId+1}),M=Ae(Ae(Ae({},$),U),F);return Ae(Ae(Ae({},M),m(Ae({props:x},M),y)),{},{prevDataKey:w,prevData:b,prevWidth:k,prevHeight:j,prevLayout:S,prevStackOffset:O,prevMargin:I,prevChildren:_})}if(!Y1(_,y.prevChildren)){var T,A,L,E,B=Qa(_,Zd),R=B&&(T=(A=B.props)===null||A===void 0?void 0:A.startIndex)!==null&&T!==void 0?T:P,C=B&&(L=(E=B.props)===null||E===void 0?void 0:E.endIndex)!==null&&L!==void 0?L:N,q=R!==P||C!==N,Z=!vn(b),J=Z&&!q?y.updateId:y.updateId+1;return Ae(Ae({updateId:J},m(Ae(Ae({props:x},y),{},{updateId:J,dataStartIndex:R,dataEndIndex:C}),y)),{},{prevChildren:_,dataStartIndex:R,dataEndIndex:C})}return null}),Et(g,"renderActiveDot",function(x,y,w){var b;return p.isValidElement(x)?b=p.cloneElement(x,y):Kt(x)?b=x(y):b=Y.createElement(Tq,y),Y.createElement(Pr,{className:"recharts-active-dot",key:w},b)});var v=p.forwardRef(function(y,w){return Y.createElement(g,ed({},y,{ref:w}))});return v.displayName=g.displayName,v},gi=HFe({chartName:"BarChart",GraphicalChild:Yn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ua},{axisType:"yAxis",AxisComp:da}],formatAxisMap:VLe});const KFe=[{name:"Resolved by Human",value:15},{name:"Resolved by AI",value:85}],Lr=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],Pn=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:t})})]})]});function VFe(){p.useMemo(()=>Lr.slice(0,KFe.length),[]),Ir();const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState([]),[o,l]=p.useState(0),[c,u]=p.useState(0),[d,f]=p.useState({total:0,ai:0,rate:0,handover:0,handover_rate:0}),[h,m]=p.useState("all"),[g,v]=p.useState([]),[x,y]=p.useState([]),[w,b]=p.useState(!1),[_,k]=p.useState([]),[j,S]=p.useState([]),[O,I]=p.useState([]),[P,N]=p.useState({input:0,output:0,total:0}),[D,$]=p.useState([]),[U,F]=p.useState([]),[M,T]=p.useState([]),[A,L]=p.useState("all"),[E,B]=p.useState([]),[R,C]=p.useState(null),[q,Z]=p.useState(null),[J,ee]=p.useState([]),[ae,Q]=p.useState(null),[oe,ge]=p.useState(void 0),[ie,Ie]=p.useState(!1),me=te=>{if(!te||te.trim().length===0)return"(unspecified)";if(te.startsWith("other:"))return te.replace(/^other:/,"Other: ");switch(te){case"ambiguous":return"Ambiguous intent";case"payment":return"Payment-related";case"policy":return"Policy/compliance";default:return te}},K=()=>{const te=new Date,Xe=n?new Date(n):te,dt=e?new Date(e):new Date(te.getTime()-29*24*60*60*1e3),de=new Date(Date.UTC(dt.getUTCFullYear(),dt.getUTCMonth(),dt.getUTCDate(),0,0,0)),we=new Date(Date.UTC(Xe.getUTCFullYear(),Xe.getUTCMonth(),Xe.getUTCDate()+1,0,0,0));return{start:de.toISOString(),end:we.toISOString()}},fe=async()=>{const{start:te,end:Xe}=K(),{data:dt}=await kt.rpc("get_channel_chat_counts",{p_from:te,p_to:Xe});s((dt||[]).map(Ge=>({provider:Ge.provider,display_name:Ge.display_name,thread_count:Number(Ge.thread_count||0)})));const{data:de}=await kt.rpc("get_response_time_stats",{p_from:te,p_to:Xe,p_channel:h!=="all"?h:null});if(de&&de.length>0){const Ge=de[0];l(Number(Ge.ai_avg||0)),u(Number(Ge.agent_avg||0))}const{data:we,error:se}=await kt.rpc("get_containment_and_handover",{p_from:te,p_to:Xe});if(!se&&we&&we.length>0){const Ge=we[0];f({total:Number(Ge.total_threads||0),ai:Number(Ge.ai_resolved_count||0),rate:Number(Ge.containment_rate||0),handover:Number(Ge.handover_count||0),handover_rate:Number(Ge.handover_rate||0)})}else if(se&&se.code==="PGRST202"){const{data:Ge}=await kt.rpc("get_containment",{p_from:te,p_to:Xe});let vt=0,wt=0,Nt=0,yt=0,xt=0;if(Ge&&Ge.length>0){const ye=Ge[0];vt=Number(ye.total_threads||0),wt=Number(ye.ai_resolved_count||0),Nt=Number(ye.rate||0)}const{data:le}=await kt.rpc("get_handover_stats",{p_from:te,p_to:Xe}),Ee=(le||[]).reduce((ye,H)=>ye+Number(H.count||0),0);yt=Ee,xt=vt>0?Ee/vt:0,f({total:vt,ai:wt,rate:Nt,handover:yt,handover_rate:xt})}const{data:Be}=await kt.rpc("get_chats_timeseries",{p_from:te,p_to:Xe,p_channel:h!=="all"?h:null});v((Be||[]).map(Ge=>({bucket:Ge.bucket,provider:Ge.provider,count:Number(Ge.count||0)})));const{data:je}=await kt.rpc("get_handover_stats",{p_from:te,p_to:Xe});y((je||[]).map(Ge=>({reason:me(Ge.reason)||"(unspecified)",count:Number(Ge.count||0),total:Number(Ge.total||0),rate:Number(Ge.rate||0)})));try{const{data:Ge}=await ce.from("token_usage_logs").select("made_at, prompt_tokens, completion_tokens, total_tokens, model, channel_id").gte("made_at",te).lt("made_at",Xe).order("made_at",{ascending:!0}),vt={},wt={};let Nt=0,yt=0,xt=0;for(const ye of Ge||[]){const H=new Date(ye.made_at).toISOString().slice(0,10),z=Number(ye.prompt_tokens||0),G=Number(ye.completion_tokens||0),ue=Number(ye.total_tokens||z+G);vt[H]||(vt[H]={input:0,output:0,total:0}),vt[H].input+=z,vt[H].output+=G,vt[H].total+=ue;const Se=String(ye.model||"unknown");wt[Se]=(wt[Se]||0)+ue,Nt+=z,yt+=G,xt+=ue}const le=Object.keys(vt).sort().map(ye=>({day:ye,...vt[ye]})),Ee=Object.entries(wt).sort((ye,H)=>H[1]-ye[1]).slice(0,8).map(([ye,H])=>({model:ye,tokens:H}));S(le),I(Ee),N({input:Nt,output:yt,total:xt})}catch{}try{const{data:Ge}=await kt.rpc("get_handover_by_super_agent",{p_from:te,p_to:Xe});$((Ge||[]).map(yt=>({super_agent_id:yt.super_agent_id,super_agent_name:yt.super_agent_name,human_resolved:Number(yt.human_resolved||0),ai_resolved:Number(yt.ai_resolved||0),handover_rate:Number(yt.handover_rate||0)})));const vt=A!=="all"?A:null,[{data:wt},{data:Nt}]=await Promise.all([kt.rpc("get_handover_by_agent",{p_from:te,p_to:Xe,p_super_agent_id:vt}),kt.rpc("get_agent_kpis",{p_from:te,p_to:Xe,p_super_agent_id:vt})]);F((wt||[]).map(yt=>({agent_user_id:yt.agent_user_id,agent_name:yt.agent_name,super_agent_id:yt.super_agent_id,human_resolved:Number(yt.human_resolved||0),ai_resolved:Number(yt.ai_resolved||0),handover_rate:Number(yt.handover_rate||0)}))),T((Nt||[]).map(yt=>({agent_user_id:yt.agent_user_id,agent_name:yt.agent_name,resolved_count:Number(yt.resolved_count||0),avg_resolution_minutes:yt.avg_resolution_minutes!=null?Number(yt.avg_resolution_minutes):null})))}catch{}},De=async()=>{try{const{data:te,error:Xe}=await kt.rpc("get_database_stats_detailed");if(Xe){console.error("Error fetching database stats:",Xe);return}te&&(console.log("Database stats fetched:",te.length,"tables"),B(te.map(je=>({tablename:je.tablename,total_size_bytes:Number(je.total_size_bytes||0),total_size_pretty:je.total_size_pretty||"0 bytes",table_size_bytes:Number(je.table_size_bytes||0),table_size_pretty:je.table_size_pretty||"0 bytes",indexes_size_bytes:Number(je.indexes_size_bytes||0),indexes_size_pretty:je.indexes_size_pretty||"0 bytes",row_count:Number(je.row_count||0),dead_rows:Number(je.dead_rows||0),sequential_scans:Number(je.sequential_scans||0),index_scans:Number(je.index_scans||0),table_scan_ratio:Number(je.table_scan_ratio||0),last_vacuum:je.last_vacuum||null,last_autovacuum:je.last_autovacuum||null,last_analyze:je.last_analyze||null,last_autoanalyze:je.last_autoanalyze||null,inserts:Number(je.inserts||0),updates:Number(je.updates||0),deletes:Number(je.deletes||0),hot_updates:Number(je.hot_updates||0)}))));const{data:dt,error:de}=await kt.rpc("get_database_overview");if(de&&console.error("Error fetching database overview:",de),dt&&dt.length>0){console.log("Database overview fetched:",dt);const je=dt[0];C({total_size_bytes:Number(je.total_size_bytes||0),total_size_pretty:je.total_size_pretty||"0 bytes",data_size_bytes:Number(je.data_size_bytes||0),data_size_pretty:je.data_size_pretty||"0 bytes",indexes_size_bytes:Number(je.indexes_size_bytes||0),indexes_size_pretty:je.indexes_size_pretty||"0 bytes",total_tables:Number(je.total_tables||0),total_rows:Number(je.total_rows||0),total_indexes:Number(je.total_indexes||0),total_sequences:Number(je.total_sequences||0)})}const{data:we}=await kt.rpc("get_database_memory_stats");if(we&&we.length>0){const je=we[0];Z({shared_buffers_hit:Number(je.shared_buffers_hit||0),shared_buffers_read:Number(je.shared_buffers_read||0),shared_buffers_hit_ratio:Number(je.shared_buffers_hit_ratio||0),cache_hit_ratio:Number(je.cache_hit_ratio||0),heap_hit_ratio:Number(je.heap_hit_ratio||0),idx_scan_ratio:Number(je.idx_scan_ratio||0),total_sequential_scans:Number(je.total_sequential_scans||0),total_index_scans:Number(je.total_index_scans||0)})}const{data:se}=await kt.rpc("get_index_stats");se&&ee(se.map(je=>({tablename:je.tablename,indexname:je.indexname,index_size_bytes:Number(je.index_size_bytes||0),index_size_pretty:je.index_size_pretty||"0 bytes",index_scans:Number(je.index_scans||0),index_tup_reads:Number(je.index_tup_reads||0),index_tup_fetches:Number(je.index_tup_fetches||0),idx_blks_hit:Number(je.idx_blks_hit||0),idx_blks_read:Number(je.idx_blks_read||0)})));const{data:Be}=await kt.rpc("get_database_activity");if(Be&&Be.length>0){const je=Be[0];Q({total_inserts:Number(je.total_inserts||0),total_updates:Number(je.total_updates||0),total_deletes:Number(je.total_deletes||0),total_sequential_scans:Number(je.total_sequential_scans||0),total_index_scans:Number(je.total_index_scans||0),total_blocks_hit:Number(je.total_blocks_hit||0),total_blocks_read:Number(je.total_blocks_read||0),cache_hit_percentage:Number(je.cache_hit_percentage||0)})}}catch(te){console.error("Failed to fetch database stats:",te),B([]),C(null),Z(null),ee([]),Q(null)}},Ze=te=>te.toISOString().slice(0,10),Ve=te=>{if(!te)return"";const Xe=new Date(te);return Number.isNaN(Xe.getTime())?"":Xe.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},ut=p.useMemo(()=>e&&n?`${Ve(e)}  ${Ve(n)}`:e?`From ${Ve(e)}`:n?`Until ${Ve(n)}`:"Select date range",[e,n]);p.useEffect(()=>{ge(te=>{const Xe=e?new Date(e):void 0,dt=n?new Date(n):void 0;if(!Xe&&!dt)return te&&void 0;const de=te!=null&&te.from?te.from.getTime():void 0,we=te!=null&&te.to?te.to.getTime():void 0,se=Xe?Xe.getTime():void 0,Be=dt?dt.getTime():void 0;return de===se&&we===Be?te:{from:Xe,to:dt}})},[e,n]);const Ye=te=>{if(ge(te),!te){t(""),r("");return}const Xe=te.from?Ze(te.from):"",dt=te.to?Ze(te.to):"";t(Xe),r(dt),te.from&&te.to&&Ie(!1)},ot=()=>{ge(void 0),t(""),r(""),Ie(!1)};return p.useEffect(()=>{if(ie)return;(()=>{fe(),De()})()},[e,n,h,ie]),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level KPIs for conversations, AI agents, and human agents."})]}),i.jsxs("div",{className:"flex items-end gap-3 flex-wrap",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Date Range"}),i.jsxs(Ns,{open:ie,onOpenChange:Ie,children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(re,{variant:"outline",className:`justify-start text-left font-normal h-9 w-[220px] ${!e&&!n?"text-muted-foreground":""}`,children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),ut]})}),i.jsxs(Qi,{className:"w-auto min-w-[520px] p-0",align:"start",children:[i.jsx(Sm,{mode:"range",numberOfMonths:2,selected:oe,defaultMonth:(oe==null?void 0:oe.from)??new Date,onSelect:Ye,disabled:te=>te>new Date,initialFocus:!0}),i.jsxs("div",{className:"flex items-center justify-between border-t px-3 py-2",children:[i.jsx(re,{variant:"ghost",size:"sm",onClick:ot,children:"Clear"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(re,{variant:"outline",size:"sm",onClick:()=>Ie(!1),disabled:!(oe!=null&&oe.from)&&!(oe!=null&&oe.to),children:"Done"})})]})]})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Channel"}),i.jsxs(rn,{value:h,onValueChange:async te=>{m(te);try{await nn({action:"analytics.channel_filter",resource:"analytics",context:{channel:te}})}catch{}},children:[i.jsx(en,{className:"h-9 w-[180px]",children:i.jsx(Xt,{placeholder:"All"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All"}),i.jsx(at,{value:"whatsapp",children:"WhatsApp"}),i.jsx(at,{value:"web",children:"Web"}),i.jsx(at,{value:"telegram",children:"Telegram"})]})]})]}),i.jsx(re,{variant:"outline",className:"h-9",onClick:()=>{fe(),De()},children:"Refresh"})]}),i.jsxs(Uc,{defaultValue:"conversation",className:"w-full mt-4",children:[i.jsxs(Tl,{className:"grid w-full max-w-2xl grid-cols-5 bg-muted/50 p-1",children:[i.jsx(jr,{value:"conversation",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Conversation"})}),i.jsx(ve,{children:i.jsx("p",{children:"Lihat analitik percakapan dan KPI"})})]})}),i.jsx(jr,{value:"ai-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"AI Agent"})}),i.jsx(ve,{children:i.jsx("p",{children:"Lihat metrik kinerja agen AI"})})]})}),i.jsx(jr,{value:"human-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Human Agent"})}),i.jsx(ve,{children:i.jsx("p",{children:"Lihat metrik kinerja agen manusia"})})]})}),i.jsx(jr,{value:"database",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Database"})}),i.jsx(ve,{children:i.jsx("p",{children:"Lihat statistik penggunaan database dan ukuran tabel"})})]})})]}),i.jsxs(sr,{value:"conversation",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Chats",description:"Jumlah total percakapan yang terjadi dalam periode yang dipilih"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:d.total})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"AI Containment Rate",description:"Persentase percakapan yang berhasil diselesaikan oleh AI tanpa perlu intervensi manusia. Semakin tinggi semakin baik."})})}),i.jsxs(lt,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(d.rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.ai," / ",d.total]}),i.jsx(re,{variant:"outline",className:"mt-2 h-8",onClick:async()=>{b(!0);const{start:te,end:Xe}=K(),{data:dt}=await kt.rpc("get_non_contained",{p_from:te,p_to:Xe,p_limit:100,p_offset:0});k(dt||[])},children:"View non-contained"})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Handover Rate",description:"Persentase percakapan yang dialihkan dari AI ke agen manusia karena memerlukan intervensi manual"})})}),i.jsxs(lt,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(d.handover_rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.handover," / ",d.total]})]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Chats per Channel",description:"Distribusi jumlah percakapan berdasarkan saluran komunikasi (WhatsApp, Telegram, Web Chat, dll)"})})}),i.jsx(lt,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:a.map(te=>({name:te.display_name||te.provider,count:te.thread_count})),children:[i.jsx(ua,{dataKey:"name"}),i.jsx(da,{}),i.jsx(or,{}),i.jsx(Yn,{dataKey:"count",fill:Lr[2],radius:[4,4,0,0],children:i.jsx(es,{dataKey:"count",position:"top"})})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Chats Time Series (Asia/Jakarta)",description:"Grafik tren jumlah percakapan dari waktu ke waktu dalam zona waktu Asia/Jakarta, dikelompokkan berdasarkan saluran"})})}),i.jsx(lt,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:(()=>{const te=Array.from(new Set(g.map(de=>de.provider))),dt=Array.from(new Set(g.map(de=>de.bucket))).sort().map(de=>{var se;const we={bucket:new Date(de).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"})};for(const Be of te)we[Be]=((se=g.find(je=>je.bucket===de&&je.provider===Be))==null?void 0:se.count)||0;return we});return i.jsxs(gi,{data:dt,children:[i.jsx(ua,{dataKey:"bucket"}),i.jsx(da,{}),i.jsx(or,{}),i.jsx(wi,{}),te.map((de,we)=>i.jsx(Yn,{dataKey:de,stackId:void 0,fill:Lr[we%(Lr.length-1)+1]},de))]})})()})})]})]}),i.jsxs(sr,{value:"ai-agent",className:"space-y-6",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"AI Token Usage (by day)",description:"Penggunaan token AI per hari, menunjukkan token input (prompt) dan output (completion). Token adalah unit penggunaan untuk menghitung biaya AI"})})}),i.jsxs(lt,{className:"h-64",children:[i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:j.map(te=>({day:new Date(te.day).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"}),input:te.input,output:te.output})),children:[i.jsx(ua,{dataKey:"day"}),i.jsx(da,{}),i.jsx(or,{}),i.jsx(wi,{}),i.jsx(Yn,{dataKey:"input",stackId:"tokens",fill:Lr[1],name:"Prompt tokens"}),i.jsx(Yn,{dataKey:"output",stackId:"tokens",fill:Lr[2],name:"Completion tokens"})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Total tokens: ",P.total.toLocaleString()," (input ",P.input.toLocaleString(),", output ",P.output.toLocaleString(),")"]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Top Models by Tokens",description:"Model AI yang paling banyak menggunakan token, diurutkan berdasarkan total penggunaan. Membantu mengidentifikasi model mana yang paling banyak digunakan"})})}),i.jsx(lt,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:O.map(te=>({name:te.model,tokens:te.tokens})),layout:"vertical",children:[i.jsx(ua,{type:"number"}),i.jsx(da,{type:"category",dataKey:"name",width:160}),i.jsx(or,{}),i.jsx(Yn,{dataKey:"tokens",fill:Lr[4],radius:[0,4,4,0],children:i.jsx(es,{dataKey:"tokens",position:"right"})})]})})})]})]}),i.jsxs(sr,{value:"human-agent",className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Super Agent"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Filter untuk melihat metrik agen yang berada di bawah super agent tertentu. Pilih 'All' untuk melihat semua agen"})})]})]}),i.jsxs(rn,{value:A,onValueChange:te=>L(te),children:[i.jsx(en,{className:"w-[220px] h-9",children:i.jsx(Xt,{placeholder:"All"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All"}),D.map(te=>i.jsx(at,{value:String(te.super_agent_id||"none"),children:te.super_agent_name||""},te.super_agent_id||"none"))]})]}),i.jsx(re,{variant:"outline",className:"h-9",onClick:fe,children:"Apply"})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Agent KPIs",description:"Key Performance Indicators untuk setiap agen manusia: jumlah percakapan yang diselesaikan dan waktu rata-rata penyelesaian (dalam menit)"})})}),i.jsx(lt,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:M.map(te=>({name:te.agent_name||"",resolved:te.resolved_count,avgMin:Math.round(te.avg_resolution_minutes||0)})),children:[i.jsx(ua,{dataKey:"name"}),i.jsx(da,{}),i.jsx(or,{}),i.jsx(wi,{}),i.jsx(Yn,{dataKey:"resolved",name:"Resolved",fill:Lr[3],radius:[4,4,0,0]}),i.jsx(Yn,{dataKey:"avgMin",name:"Avg Resolution (min)",fill:Lr[5],radius:[4,4,0,0]})]})})})]})]}),i.jsxs(sr,{value:"database",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Database Size",description:"Total ukuran database termasuk semua tabel, indeks, dan metadata dalam format yang mudah dibaca"})})}),i.jsxs(lt,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:(R==null?void 0:R.total_size_pretty)||"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Data: ",(R==null?void 0:R.data_size_pretty)||""," | Indexes: ",(R==null?void 0:R.indexes_size_pretty)||""]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Tables",description:"Jumlah total tabel yang ada di database public schema"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(R==null?void 0:R.total_tables)||0})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Rows",description:"Jumlah total baris data di semua tabel database"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((R==null?void 0:R.total_rows)||0).toLocaleString()})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Indexes",description:"Jumlah total indeks yang ada di database. Indeks membantu mempercepat query"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(R==null?void 0:R.total_indexes)||0})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Cache Hit Ratio",description:"Persentase data yang ditemukan di cache memory. Semakin tinggi semakin baik (idealnya >95%). Menunjukkan efisiensi penggunaan memory"})})}),i.jsxs(lt,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:q?`${(q.cache_hit_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",q?q.shared_buffers_hit.toLocaleString():""," | Reads: ",q?q.shared_buffers_read.toLocaleString():""]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Index Scan Ratio",description:"Persentase scan yang menggunakan indeks dibanding sequential scan. Semakin tinggi semakin baik. Menunjukkan efektivitas indeks"})})}),i.jsxs(lt,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:q?`${(q.idx_scan_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Index: ",q?q.total_index_scans.toLocaleString():""," | Seq: ",q?q.total_sequential_scans.toLocaleString():""]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Heap Hit Ratio",description:"Persentase hit pada heap (tabel data) di cache memory. Semakin tinggi semakin baik"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:q?`${(q.heap_hit_ratio*100).toFixed(2)}%`:"Loading..."})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Inserts",description:"Jumlah total operasi INSERT yang pernah dilakukan di semua tabel"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ae==null?void 0:ae.total_inserts)||0).toLocaleString()})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Updates",description:"Jumlah total operasi UPDATE yang pernah dilakukan di semua tabel"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ae==null?void 0:ae.total_updates)||0).toLocaleString()})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Total Deletes",description:"Jumlah total operasi DELETE yang pernah dilakukan di semua tabel"})})}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ae==null?void 0:ae.total_deletes)||0).toLocaleString()})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Cache Hit %",description:"Persentase blok yang ditemukan di cache vs yang dibaca dari disk. Semakin tinggi semakin baik untuk performa"})})}),i.jsxs(lt,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:ae?`${ae.cache_hit_percentage.toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",ae?ae.total_blocks_hit.toLocaleString():""," | Reads: ",ae?ae.total_blocks_read.toLocaleString():""]})]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Table Sizes",description:"Ukuran total (termasuk indeks) untuk setiap tabel diurutkan dari yang terbesar. Membantu mengidentifikasi tabel yang memakan banyak ruang"})})}),i.jsx(lt,{className:"h-64",children:E.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:E.slice(0,10).map(te=>({name:te.tablename,size:te.total_size_bytes/1024})),layout:"vertical",children:[i.jsx(ua,{type:"number"}),i.jsx(da,{type:"category",dataKey:"name",width:160}),i.jsx(or,{formatter:te=>`${te.toFixed(2)} KB`,labelFormatter:te=>`Table: ${te}`}),i.jsx(Yn,{dataKey:"size",fill:Lr[1],radius:[0,4,4,0],children:i.jsx(es,{dataKey:"size",position:"right",formatter:te=>`${te.toFixed(2)} KB`})})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Row Counts by Table",description:"Jumlah baris data per tabel, diurutkan dari yang terbanyak. Menunjukkan tabel mana yang paling aktif menyimpan data"})})}),i.jsx(lt,{className:"h-64",children:E.filter(te=>te.row_count>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:E.filter(te=>te.row_count>0).slice(0,10).map(te=>({name:te.tablename,rows:te.row_count})),layout:"vertical",children:[i.jsx(ua,{type:"number"}),i.jsx(da,{type:"category",dataKey:"name",width:160}),i.jsx(or,{}),i.jsx(Yn,{dataKey:"rows",fill:Lr[3],radius:[0,4,4,0],children:i.jsx(es,{dataKey:"rows",position:"right"})})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Index Sizes (Top 15)",description:"Ukuran setiap indeks diurutkan dari yang terbesar. Indeks besar mungkin perlu dioptimasi"})})}),i.jsx(lt,{className:"h-64",children:J.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:J.slice(0,15).map(te=>({name:`${te.tablename}.${te.indexname}`.substring(0,30),size:te.index_size_bytes/1024,scans:te.index_scans})),layout:"vertical",children:[i.jsx(ua,{type:"number"}),i.jsx(da,{type:"category",dataKey:"name",width:200}),i.jsx(or,{formatter:(te,Xe)=>Xe==="size"?`${te.toFixed(2)} KB`:te.toLocaleString(),labelFormatter:te=>`Index: ${te}`}),i.jsx(wi,{}),i.jsx(Yn,{dataKey:"size",name:"Size (KB)",fill:Lr[1],radius:[0,4,4,0]})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Table Activity (Top 10)",description:"Jumlah operasi INSERT, UPDATE, dan DELETE per tabel. Menunjukkan tabel mana yang paling aktif"})})}),i.jsx(lt,{className:"h-64",children:E.filter(te=>te.inserts+te.updates+te.deletes>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:E.filter(te=>te.inserts+te.updates+te.deletes>0).slice(0,10).map(te=>({name:te.tablename,inserts:te.inserts,updates:te.updates,deletes:te.deletes})),layout:"vertical",children:[i.jsx(ua,{type:"number"}),i.jsx(da,{type:"category",dataKey:"name",width:160}),i.jsx(or,{}),i.jsx(wi,{}),i.jsx(Yn,{dataKey:"inserts",stackId:"activity",fill:Lr[2],name:"Inserts"}),i.jsx(Yn,{dataKey:"updates",stackId:"activity",fill:Lr[4],name:"Updates"}),i.jsx(Yn,{dataKey:"deletes",stackId:"activity",fill:Lr[5],name:"Deletes"})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Table Scan Ratios",description:"Rasio sequential scan vs index scan per tabel. Sequential scan tinggi menunjukkan perlu indeks yang lebih baik"})})}),i.jsx(lt,{className:"h-64",children:E.filter(te=>te.sequential_scans+te.index_scans>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:E.filter(te=>te.sequential_scans+te.index_scans>0).slice(0,10).map(te=>({name:te.tablename,seqRatio:Number((te.table_scan_ratio*100).toFixed(1)),idxRatio:Number(((1-te.table_scan_ratio)*100).toFixed(1))})),layout:"vertical",children:[i.jsx(ua,{type:"number",domain:[0,100]}),i.jsx(da,{type:"category",dataKey:"name",width:160}),i.jsx(or,{formatter:te=>`${te}%`}),i.jsx(wi,{}),i.jsx(Yn,{dataKey:"seqRatio",stackId:"scan",fill:Lr[5],name:"Seq Scan %"}),i.jsx(Yn,{dataKey:"idxRatio",stackId:"scan",fill:Lr[3],name:"Index Scan %"})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Comprehensive Table Statistics",description:"Rincian lengkap setiap tabel: ukuran, baris, statistik scan, operasi DML, dan informasi maintenance"})})}),i.jsx(lt,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Total Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Dead Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Inserts"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Updates"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Deletes"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Seq Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Idx Scans"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Last Vacuum"})]})}),i.jsx("tbody",{children:E.slice(0,25).map(te=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:te.tablename}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.total_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:te.row_count.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.dead_rows>0?i.jsx("span",{className:"text-orange-600",children:te.dead_rows.toLocaleString()}):"0"}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.inserts.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.updates.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.deletes.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.sequential_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-left text-xs text-muted-foreground",children:te.last_vacuum?new Date(te.last_vacuum).toLocaleDateString():te.last_autovacuum?`Auto: ${new Date(te.last_autovacuum).toLocaleDateString()}`:"Never"})]},te.tablename))})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:i.jsx(Pn,{label:"Index Statistics",description:"Statistik lengkap setiap indeks: ukuran, jumlah scan, dan performa cache. Membantu mengidentifikasi indeks yang tidak digunakan atau perlu dioptimasi"})})}),i.jsx(lt,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Index"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Read"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Fetched"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Hits"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Reads"})]})}),i.jsx("tbody",{children:J.slice(0,30).map((te,Xe)=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:te.tablename}),i.jsx("td",{className:"py-2 px-2 font-mono text-xs",children:te.indexname}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.index_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:te.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.index_tup_reads.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.index_tup_fetches.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.idx_blks_hit.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:te.idx_blks_read.toLocaleString()})]},Xe))})]})})})]})]})]}),i.jsx(wn,{open:w,onOpenChange:b,children:i.jsxs(hn,{className:"max-w-3xl",children:[i.jsx(mn,{children:i.jsx(pn,{children:"Non-contained Conversations"})}),i.jsx("div",{className:"max-h-80 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2",children:"Time"}),i.jsx("th",{className:"text-left py-2",children:"Contact"}),i.jsx("th",{className:"text-left py-2",children:"Handover Reason"}),i.jsx("th",{className:"text-left py-2",children:"Status"})]})}),i.jsx("tbody",{children:_.map(te=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-1",children:new Date(te.created_at).toLocaleString()}),i.jsx("td",{className:"py-1",children:te.contact_name}),i.jsx("td",{className:"py-1",children:te.handover_reason||"(none)"}),i.jsx("td",{className:"py-1",children:te.status})]},te.id))})]})})]})})]})}var $0="Switch",[GFe,O5e]=Rr($0),[YFe,XFe]=GFe($0),b9=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=p.useState(null),g=Mt(t,b=>m(b)),v=p.useRef(!1),x=h?d||!!h.closest("form"):!0,[y,w]=Ba({prop:a,defaultProp:s??!1,onChange:u,caller:$0});return i.jsxs(YFe,{scope:n,checked:y,disabled:l,children:[i.jsx(st.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":k9(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:qe(e.onClick,b=>{w(_=>!_),x&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),x&&i.jsx(_9,{control:h,bubbles:!v.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});b9.displayName=$0;var w9="SwitchThumb",j9=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=XFe(w9,n);return i.jsx(st.span,{"data-state":k9(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});j9.displayName=w9;var JFe="SwitchBubbleInput",_9=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},s)=>{const o=p.useRef(null),l=Mt(o,s),c=NC(n),u=TN(t);return p.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&m){const g=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(g)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});_9.displayName=JFe;function k9(e){return e?"checked":"unchecked"}var S9=b9,QFe=j9;const Es=p.forwardRef(({className:e,...t},n)=>i.jsx(S9,{className:Pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(QFe,{className:Pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Es.displayName=S9.displayName;var F0="Collapsible",[ZFe,N9]=Rr(F0),[e3e,iE]=ZFe(F0),C9=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:s,onOpenChange:o,...l}=e,[c,u]=Ba({prop:r,defaultProp:a??!1,onChange:o,caller:F0});return i.jsx(e3e,{scope:n,disabled:s,contentId:mr(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:i.jsx(st.div,{"data-state":cE(c),"data-disabled":s?"":void 0,...l,ref:t})})});C9.displayName=F0;var A9="CollapsibleTrigger",sE=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=iE(A9,n);return i.jsx(st.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":cE(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:qe(e.onClick,a.onOpenToggle)})});sE.displayName=A9;var oE="CollapsibleContent",lE=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=iE(oE,e.__scopeCollapsible);return i.jsx(Sr,{present:n||a.open,children:({present:s})=>i.jsx(t3e,{...r,ref:t,present:s})})});lE.displayName=oE;var t3e=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...s}=e,o=iE(oE,n),[l,c]=p.useState(r),u=p.useRef(null),d=Mt(t,u),f=p.useRef(0),h=f.current,m=p.useRef(0),g=m.current,v=o.open||l,x=p.useRef(v),y=p.useRef(void 0);return p.useEffect(()=>{const w=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(w)},[]),ar(()=>{const w=u.current;if(w){y.current=y.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const b=w.getBoundingClientRect();f.current=b.height,m.current=b.width,x.current||(w.style.transitionDuration=y.current.transitionDuration,w.style.animationName=y.current.animationName),c(r)}},[o.open,r]),i.jsx(st.div,{"data-state":cE(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...s,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&a})});function cE(e){return e?"open":"closed"}var E9=C9,n3e=sE,r3e=lE;const iD=E9,sD=sE,oD=lE,T9=e=>{const[t,n]=p.useState(!0),[r,a]=p.useState(!1),[s,o]=p.useState(null),[l,c]=p.useState(null),u=async()=>{try{if(n(!0),c(null),e){const{data:m,error:g}=await ce.from("ai_profiles").select("*").eq("id",e).single();if(g)throw g;m&&o(m)}else o(null)}catch(m){console.error("Error fetching AI profile:",m),c(m instanceof Error?m.message:"Failed to fetch profile")}finally{n(!1)}},d=async m=>{try{if(a(!0),c(null),s!=null&&s.id){const{error:g}=await ce.from("ai_profiles").update(m).eq("id",s.id);try{await nn({action:"ai_profile.update",resource:"ai_profile",resourceId:s.id,context:m})}catch{}if(g)throw g}else{const{data:g,error:v}=await ce.from("ai_profiles").insert([{...m,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(v)throw v;g&&o(g);try{await nn({action:"ai_profile.create",resource:"ai_profile",resourceId:(g==null?void 0:g.id)??null,context:m})}catch{}}await u()}catch(g){console.error("Error saving AI profile:",g),c(g instanceof Error?g.message:"Failed to save profile")}finally{a(!1)}},f=async m=>{try{n(!0),c(null);const{data:g,error:v}=await ce.from("ai_profiles").select("*").eq("org_id",m||"00000000-0000-0000-0000-000000000001").order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return console.error("Error fetching AI profiles:",g),c(g instanceof Error?g.message:"Failed to fetch profiles"),[]}finally{n(!1)}},h=async m=>{try{a(!0),c(null);const{error:g}=await ce.from("ai_profiles").delete().eq("id",m);try{await nn({action:"ai_profile.delete",resource:"ai_profile",resourceId:m})}catch{}if(g)throw g}catch(g){throw console.error("Error deleting AI profile:",g),c(g instanceof Error?g.message:"Failed to delete profile"),g}finally{a(!1)}};return p.useEffect(()=>{e?u():n(!1)},[e]),{profile:s,loading:t,saving:r,error:l,fetchProfile:u,saveProfile:d,fetchAllProfiles:f,deleteProfile:h}},a3e={Conservative:.3,Balanced:.5,Creative:.7};function P9(e,t=.5){if(!e)return t;const n=e.trim();return a3e[n]??t}const i3e="00000000-0000-0000-0000-000000000001",s3e=({welcomeMessage:e,systemPrompt:t,modelDisplay:n,profile:r,profileId:a,modelName:s,temperature:o,transfer_conditions:l})=>{const c=r==null?void 0:r.response_temperature,u=c?P9(c,o||.5):o||.5,[d,f]=p.useState([]);p.useEffect(()=>{f([{id:"1",content:e||(r==null?void 0:r.welcome_message)||"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?",sender:"ai",timestamp:new Date}])},[e]);const[h,m]=p.useState(""),[g,v]=p.useState(!1),[x,y]=p.useState(!0),[w,b]=p.useState(""),[_,k]=p.useState(null),[j,S]=p.useState(!1),O=p.useRef(null),I=p.useRef(null);p.useEffect(()=>{(()=>{const M=Date.now(),T=Math.random().toString(36).substring(2,15),A=`session_${M}_${T}`;b(A),console.log("Generated session ID:",A)})()},[]);const P=()=>{I.current&&(I.current.scrollTop=I.current.scrollHeight)};p.useEffect(()=>{P()},[d]);const N=async()=>{if(!h.trim()&&!_||g)return;let F=null;if(_){S(!0);try{F=await Dz(_.file)}catch(A){console.error("File upload error:",A),$e.error(`Upload failed: ${A.message}`),S(!1);return}S(!1),k(null)}const M=F?h.trim()?h:` ${F.fileName}`:h,T={id:Date.now().toString(),content:M,sender:"user",timestamp:new Date,type:(F==null?void 0:F.type)||"text",file_link:F==null?void 0:F.url};f(A=>[...A,T]),m(""),v(!0);try{const A={message:h.trim()||(F?`[${F.type==="image"?"Image":"File"}: ${F.fileName}]`:""),model:s,temperature:u,session_id:w,timestamp:new Date().toISOString(),ai_profile_id:(r==null?void 0:r.id)||a,...F&&{type:F.type,file_link:F.url,file_name:F.fileName,mime_type:F.mimeType}};console.log("Sending request to API:",A);const L=await ji(An.ENDPOINTS.AI_AGENT.CHAT_TEST,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const E=await L.json();console.log("API Response:",E);const B={id:(Date.now()+1).toString(),content:E.output||"Sorry, I couldn't process your message.",sender:"ai",timestamp:new Date};f(R=>[...R,B]),$e.success("Message sent successfully!"),y(!0)}catch(A){console.error("Error sending message:",A),$e.error("Failed to send message"),y(!1);const L={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again later.",sender:"ai",timestamp:new Date};f(E=>[...E,L])}finally{v(!1)}},D=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),N())},$=()=>{f([{id:"1",content:e||(r==null?void 0:r.welcome_message)||"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?",sender:"ai",timestamp:new Date}]),k(null),$e.info("Chat history cleared")},U=()=>{const F=Date.now(),M=Math.random().toString(36).substring(2,15),T=`session_${F}_${M}`;b(T),f([{id:"1",content:e||(r==null?void 0:r.welcome_message)||"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?",sender:"ai",timestamp:new Date}]),$e.success("Session refreshed! New session ID: "+T),console.log("New session ID:",T)};return i.jsxs(Ue,{className:"flex flex-col h-[600px] border-2 border-primary/20",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 border-b bg-primary/5",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:i.jsx(y4,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium",children:"AI Agent Chat"}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Model: ",n,"  Temp: ",c||"Legacy"," (",u,i.jsx("span",{className:`ml-2 px-1 rounded text-xs ${x?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x?"Connected":"Disconnected"})]}),w&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Session: ",w.substring(0,20),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g&&i.jsx(Vt,{className:"w-4 h-4 animate-spin"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"sm",onClick:U,"aria-label":"Refresh session",children:i.jsx(Jx,{className:"w-4 h-4"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Segarkan sesi"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"sm",onClick:$,"aria-label":"Clear chat history",children:i.jsx(A4,{className:"w-4 h-4"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Hapus riwayat chat"})})]})]})]}),i.jsxs("div",{ref:I,className:"flex-1 p-4 space-y-4 overflow-auto max-h-[400px]",children:[d.map(F=>i.jsx("div",{className:`flex ${F.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${F.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[F.file_link&&F.type&&F.type!=="text"&&i.jsx("div",{className:"mb-2",children:i.jsx(YC,{fileLink:F.file_link,type:F.type})}),i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:F.content}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:F.timestamp.toLocaleTimeString()})]})},F.id)),g&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{className:"text-sm",children:"AI is typing..."})]})})}),i.jsx("div",{ref:O})]}),i.jsxs("div",{className:"p-4 border-t bg-muted/30",children:[_&&i.jsx("div",{className:"mb-2",children:i.jsx($z,{stagedFile:_,onRemove:()=>k(null),isUploading:j})}),i.jsxs("div",{className:"flex gap-2 items-start",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("div",{children:i.jsx(Lz,{onFileStaged:k,disabled:g||j||!!_,className:"mt-2"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Lampirkan file"})})]}),i.jsx("textarea",{value:h,onChange:F=>m(F.target.value),onKeyPress:D,placeholder:_?"Add a caption (optional)...":"Type your message...",className:"flex-1 p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20",rows:2,disabled:g||j,title:g?"Please wait":void 0}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{size:"sm",onClick:N,disabled:!h.trim()&&!_||g||j,className:"px-4 mt-2",children:i.jsx(cm,{className:"w-4 h-4"})})}),i.jsx(ve,{children:i.jsx("p",{children:"Kirim pesan ke agen AI"})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})},Pu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",lv=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,o3e=({agentName:e,onBack:t,profileId:n,initialModelId:r})=>{var Vr,Ot,Ln,X,_e;const[a,s]=p.useState("general"),[o,l]=p.useState("text"),[c,u]=p.useState({behavior:!0,welcome:!0,transfer:!1}),[d,f]=p.useState(!n),h=W=>{u(he=>({...he,[W]:!he[W]}))},m=!n,{hasPermission:g,hasRole:v}=Ir(),{user:x}=ia(),y=v==null?void 0:v("master_agent"),w=v==null?void 0:v("super_agent"),b=g("ai_agent_files.manage")||g("ai_agent_files.create")||!!y||!!w,_=(W,he,pe)=>Number.isNaN(W)?he:Math.min(pe,Math.max(he,W)),k=50,j=100,S=40,O=1e3,I=25,P=24*60,{profile:N,loading:D,saving:$,error:U,saveProfile:F}=T9(n),[M,T]=p.useState((N==null?void 0:N.super_agent_id)??null),[A,L]=p.useState([]),[E,B]=p.useState(!1),[R,C]=p.useState(null);p.useEffect(()=>{N!=null&&N.super_agent_id?T(N.super_agent_id):w&&(x!=null&&x.id)?T(x.id):N!=null&&N.super_agent_id||T(null)},[N==null?void 0:N.super_agent_id,w,x==null?void 0:x.id]),p.useEffect(()=>{if(m&&!M)try{const W=localStorage.getItem("ai.new.super_agent_id");W&&(T(W),localStorage.removeItem("ai.new.super_agent_id"))}catch{}},[m,M]),p.useEffect(()=>{let W=!1;return(async()=>{try{B(!0),C(null);const{data:pe,error:Me}=await Sa.from("v_human_agents").select("user_id, agent_name, email, role_name").eq("org_id",(N==null?void 0:N.org_id)??i3e).ilike("role_name","%super%");if(Me)throw Me;if(W)return;const We=(pe||[]).map(Ce=>({id:Ce.user_id,name:Ce.agent_name||Ce.email||String(Ce.user_id).slice(0,8)}));L(We),N!=null&&N.super_agent_id||(w&&(x!=null&&x.id)?T(x.id):We.length===1&&!w&&y&&T(We[0].id))}catch(pe){W||C(pe instanceof Error?pe.message:"Failed to load super agents")}finally{W||B(!1)}})(),()=>{W=!0}},[N==null?void 0:N.org_id,N==null?void 0:N.super_agent_id,w,y,x==null?void 0:x.id]);const[q,Z]=p.useState(m?"You are a helpful AI assistant for customer service. Be friendly, professional, and helpful. Always respond in Indonesian unless the customer speaks in another language.":(N==null?void 0:N.system_prompt)||""),[J,ee]=p.useState(m?"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?":(N==null?void 0:N.welcome_message)||""),[ae,Q]=p.useState(m?`Transfer to human agent when:
- Customer requests to speak with a human
- Complex technical issues arise
- Customer is dissatisfied or angry
- Payment or billing issues
- Escalation is needed`:(N==null?void 0:N.transfer_conditions)||""),[oe,ge]=p.useState((N==null?void 0:N.stop_ai_after_handoff)??!0),[ie,Ie]=p.useState([]),[me,K]=p.useState([]),[fe,De]=p.useState(""),[Ze,Ve]=p.useState("");p.useState(()=>{const W=(N==null?void 0:N.temperature)??.3;return Math.max(0,Math.min(1,W))});const[ut,Ye]=p.useState(""),[ot,te]=p.useState(!!((N==null?void 0:N.enable_resolve)??!1)),[Xe,dt]=p.useState(""),[de,we]=p.useState(()=>_((N==null?void 0:N.read_file_limit)??3,0,I)),[se,Be]=p.useState((N==null?void 0:N.response_temperature)??"Balanced"),[je,Ge]=p.useState((N==null?void 0:N.message_await)??3),[vt,wt]=p.useState(""),[Nt,yt]=p.useState(!!((N==null?void 0:N.enable_followup_message)??!1)),[xt,le]=p.useState(""),[Ee,ye]=p.useState(!!((N==null?void 0:N.enable_followup_assigned)??!1)),[H,z]=p.useState(""),[G,ue]=p.useState(m?"":(N==null?void 0:N.followup_message)||""),[Se,Ne]=p.useState(m?"":(N==null?void 0:N.guide_content)||""),Le=W=>W.replace(/[^0-9]/g,""),V=W=>{if(!W)return 0;const he=parseInt(W,10);return Number.isNaN(he)?0:he};p.useEffect(()=>{(async()=>{var he,pe;try{const{data:Me,error:We}=await Sa.from("ai_models").select("*").eq("is_active",!0).order("display_name",{ascending:!0});if(We)throw We;const Ce=Me||[],Re=Ce.filter(Ut=>(Ut.display_name||"").toLowerCase()!=="fallback"),Ct=Ce.filter(Ut=>(Ut.display_name||"").toLowerCase()==="fallback");Ie(Re),K(Ct);const Fe=(N==null?void 0:N.model_id)||r||"";fe||(Fe&&Re.some(Ut=>Ut.id===Fe)?De(Fe):Re.length>0&&De(((he=Re[0])==null?void 0:he.id)||"")),!Ze&&Ct.length>0&&Ve(((pe=Ct[0])==null?void 0:pe.id)||"")}catch(Me){console.error("Failed to load ai_models",Me)}})()},[N==null?void 0:N.id,r]),p.useEffect(()=>{!fe&&(N!=null&&N.model_id)&&ie.some(W=>W.id===N.model_id)&&De(N.model_id)},[ie]),p.useEffect(()=>{if(!N)return;const W=N==null?void 0:N.auto_resolve_after_minutes;Ye(typeof W=="number"&&!Number.isNaN(W)?W.toString():"0");const he=_((N==null?void 0:N.history_limit)??k,0,j);dt(he.toString());const pe=_((N==null?void 0:N.message_limit)??O,0,O);wt(pe.toString());const Me=(N==null?void 0:N.followup_message_delay)??60;le(Me.toString());const We=(N==null?void 0:N.followup_delay_assigned)??60;z(We.toString())},[N==null?void 0:N.id]);const ne=ie.find(W=>W.id===fe)||null,ke=p.useMemo(()=>{const W=ne==null?void 0:ne.max_context_tokens;return typeof W=="number"&&W>0?_(W,0,j):j},[ne==null?void 0:ne.max_context_tokens]);p.useEffect(()=>{if(!Xe)return;const W=parseInt(Xe,10);Number.isNaN(W)||W>ke&&dt(ke.toString())},[Xe,ke]);const et=W=>{const he=Le(W);if(he===""){Ye("");return}const pe=_(parseInt(he,10),0,P);Ye(pe.toString())},nt=W=>{const he=Le(W);if(he===""){dt("");return}const pe=_(parseInt(he,10),0,ke);dt(pe.toString())},Rt=W=>{const he=Le(W);if(he===""){wt("");return}const pe=_(parseInt(he,10),0,O);wt(pe.toString())},[ht,$t]=p.useState([]),jt=p.useRef(null),[Zt,Pt]=p.useState(!1),Lt=async()=>{const W=(N==null?void 0:N.id)??n;if(!W)throw new Error("Please save the AI Agent first before uploading files.");let he=(N==null?void 0:N.org_id)??null;if(!he){const{data:{user:pe}}=await Sa.auth.getUser();if(pe){const{data:Me}=await Sa.from("org_members").select("org_id").eq("user_id",pe.id).limit(1).maybeSingle();he=(Me==null?void 0:Me.org_id)??null}}if(!he)throw new Error("Could not determine your organization. Please re-login or contact support.");return{orgId:he,profileId:W}},Dt=async(W,he)=>{try{if(!b)throw new Error("You do not have permission to upload agent files.");const pe=((W==null?void 0:W.type)||"").toLowerCase()==="application/pdf",Me=((W==null?void 0:W.name)||"").toLowerCase().endsWith(".pdf");if(!pe&&!Me)throw new Error("Only PDF files are supported");const{orgId:We,profileId:Ce}=await Lt();let Re="";try{if(typeof crypto<"u"&&crypto.subtle){const _a=await W.arrayBuffer(),ms=await crypto.subtle.digest("SHA-256",_a);Re=Array.from(new Uint8Array(ms)).map(dH=>dH.toString(16).padStart(2,"0")).join("")}else{console.warn("crypto.subtle not available, using fallback hash");const _a=`${W.name}-${W.size}-${W.lastModified}-${Date.now()}`;let ms=5381;for(let og=0;og<_a.length;og++)ms=(ms<<5)+ms+_a.charCodeAt(og);Re=(Math.abs(ms)+Date.now()).toString(16).padStart(64,"0")}}catch(_a){console.warn("Error computing hash, using standard fallback:",_a),Re=`fallback-${Date.now()}-${Math.random().toString(36).substring(2)}`}const Fe=((W==null?void 0:W.name)||"file.pdf").replace(/[^a-zA-Z0-9_.-]/g,"").replace(/\.pdf$/i,""),Ut=`${Re}_${Fe}.pdf`,At=`org_${We}/profile_${Ce}/${Ut}`,Gr=`${El}/storage/v1/object/ai-agent-files/${At}`,Gn=crypto.randomUUID(),{error:mE}=await Sa.from("files").insert({id:Gn,org_id:We,ai_profile_id:Ce,bucket:"ai-agent-files",path:At,filename:W.name,mime_type:W.type||"application/pdf",byte_size:W.size,checksum:Re});if(mE)throw console.error("Error inserting into public.files:",mE),new Error("Failed to record file metadata");const pE=new FormData;pE.append("file",W);const lH={"x-file-name":W.name||"file.pdf","x-file-url":Gr,"x-org-id":We,"x-profile-id":Ce,"x-file-hash":Re,"x-file-id":Gn},ig=await fetch(An.buildUrl(An.ENDPOINTS.KNOWLEDGE.FILE_UPLOAD),{method:"POST",headers:lH,body:pE});if(!ig.ok){let _a=`Upload failed (${ig.status})`;try{const ms=await ig.json();_a=(ms==null?void 0:ms.message)||_a}catch{}throw new Error(_a)}const Hs=await ig.json().catch(()=>({})),cH=(Hs==null?void 0:Hs.document_id)||(Hs==null?void 0:Hs.documentId)||void 0,z0=String((Hs==null?void 0:Hs.status)||"").toLowerCase();if(z0==="duplicate"){const _a=new Error("duplicate");throw _a.code="DUPLICATE_CONTENT",_a}if(z0!=="success")throw new Error(`Upload webhook returned unexpected status: ${z0||"unknown"}`);let gE=null;const{error:mu}=await Sa.storage.from("ai-agent-files").upload(At,W,{cacheControl:"31536000",contentType:"application/pdf",upsert:!1});if(mu&&!(typeof(mu==null?void 0:mu.message)=="string"&&/exists|duplicate|409/i.test(mu.message)))throw mu;const{data:sg,error:uH}=await Sa.storage.from("ai-agent-files").createSignedUrl(At,60*60*24*7);return!uH&&(sg!=null&&sg.signedUrl)&&(gE=sg.signedUrl),{url:gE||"",filePath:At,documentId:cH,fileId:Gn}}catch(pe){throw console.error("Error uploading file to Supabase:",pe),new Error(`Failed to upload ${W.name}: ${(pe==null?void 0:pe.message)||"Unknown error"}`)}},Qe=async()=>{try{Pt(!0);const{orgId:W,profileId:he}=await Lt(),{data:pe,error:Me}=await Sa.from("files").select("*").eq("ai_profile_id",he).order("created_at",{ascending:!1});if(Me)throw Me;const We=(pe||[]).map(Ce=>({id:Ce.id,name:Ce.filename,size:Ce.byte_size||0,uploadedAt:Ce.created_at,status:"ready",url:"",filePath:Ce.path,isEnabled:Ce.is_enabled??!0}));await Promise.all(We.map(async Ce=>{if(Ce.filePath){const{data:Re}=await Sa.storage.from("ai-agent-files").createSignedUrl(Ce.filePath,604800);Re!=null&&Re.signedUrl&&(Ce.url=Re.signedUrl)}})),$t(We)}catch(W){console.error("Failed to load knowledge files:",W)}finally{Pt(!1)}},yn=async(W,he)=>{if($t(pe=>pe.map(Me=>Me.id===W?{...Me,isEnabled:!he}:Me)),typeof W=="string")try{const{error:pe}=await Sa.from("files").update({is_enabled:!he}).eq("id",W);if(pe)throw pe}catch{$e.error("Failed to update status"),$t(Me=>Me.map(We=>We.id===W?{...We,isEnabled:he}:We))}};p.useEffect(()=>{o==="file"&&Qe()},[o,N==null?void 0:N.id,n]);const Wn=async W=>{const he=Array.from(W.target.files||[]);if(he.length===0)return;if(he.length>1){$e.error("Please upload one file at a time.");return}const pe=he.filter(Ce=>Ce.type==="application/pdf"||Ce.name.toLowerCase().endsWith(".pdf"));if(pe.length<he.length&&$e.error("Only PDF files are supported. Some files were skipped."),pe.length===0){jt.current&&(jt.current.value="");return}try{await Lt()}catch(Ce){$e.error((Ce==null?void 0:Ce.message)||"Unable to upload at this time"),jt.current&&(jt.current.value="");return}const Me=new Date().toISOString(),We=pe.map(Ce=>({id:Date.now()+Math.random(),name:Ce.name,size:Ce.size,uploadedAt:Me,status:"uploading"}));$t(Ce=>[...We,...Ce]);for(let Ce=0;Ce<pe.length;Ce++){const Re=pe[Ce],Ct=We[Ce];try{const{url:Fe,filePath:Ut,fileId:At}=await Dt(Re,Ct.id);$t(Gr=>Gr.map(Gn=>Gn.id===Ct.id?{...Gn,status:"ready",url:Fe,filePath:Ut,id:At||Gn.id,isEnabled:!0}:Gn)),$e.success(`${Re.name} uploaded successfully!`)}catch(Fe){if(String((Fe==null?void 0:Fe.message)||"").toLowerCase().includes("duplicate")||(Fe==null?void 0:Fe.code)==="DUPLICATE_CONTENT"){$t(Ut=>Ut.map(At=>At.id===Ct.id?{...At,status:"ready"}:At)),setTimeout(()=>{var Ut,At;(At=(Ut=Qe())==null?void 0:Ut.catch)==null||At.call(Ut,()=>{})},0),$e.info(`${Re.name} already exists. Skipped re-upload.`);continue}$t(Ut=>Ut.map(At=>At.id===Ct.id?{...At,status:"failed"}:At)),$e.error(Fe.message||`Failed to upload ${Re.name}`)}}jt.current&&(jt.current.value="")},Cr=async W=>{W.preventDefault();const he=Array.from(W.dataTransfer.files||[]);if(he.length===0)return;if(he.length>1){$e.error("Please upload one file at a time.");return}const pe=he.filter(Ce=>Ce.type==="application/pdf"||Ce.name.toLowerCase().endsWith(".pdf"));if(pe.length<he.length&&$e.error("Only PDF files are supported. Some files were skipped."),pe.length===0)return;try{await Lt()}catch(Ce){$e.error((Ce==null?void 0:Ce.message)||"Unable to upload at this time");return}const Me=new Date().toISOString(),We=pe.map(Ce=>({id:Date.now()+Math.random(),name:Ce.name,size:Ce.size,uploadedAt:Me,status:"uploading"}));$t(Ce=>[...We,...Ce]);for(let Ce=0;Ce<pe.length;Ce++){const Re=pe[Ce],Ct=We[Ce];try{const{url:Fe,filePath:Ut}=await Dt(Re,Ct.id);$t(At=>At.map(Gr=>Gr.id===Ct.id?{...Gr,status:"ready",url:Fe,filePath:Ut}:Gr)),$e.success(`${Re.name} uploaded successfully!`)}catch(Fe){$t(Ut=>Ut.map(At=>At.id===Ct.id?{...At,status:"failed"}:At)),$e.error(Fe.message||`Failed to upload ${Re.name}`)}}},Dr=W=>{W.preventDefault()},ui=async W=>{const he=ht.find(pe=>pe.id===W);try{const{orgId:pe,profileId:Me}=await Lt(),We=new URLSearchParams({org_id:pe,profile_id:Me,file_key:(he==null?void 0:he.filePath)||"",file_id:String((he==null?void 0:he.id)||"")}),Ce=await fetch(`${An.buildUrl(An.ENDPOINTS.KNOWLEDGE.FILE_DELETE)}?${We.toString()}`,{method:"POST"});if(!Ce.ok){let Fe=`Delete failed (${Ce.status})`;try{const Ut=await Ce.json();Fe=(Ut==null?void 0:Ut.message)||Fe}catch{}throw new Error(Fe)}let Re={};try{Re=await Ce.json()}catch{}if(String((Re==null?void 0:Re.status)||"").toLowerCase()!=="deleted")throw new Error((Re==null?void 0:Re.message)||"Delete not confirmed by webhook");$t(Fe=>Fe.filter(Ut=>Ut.id!==W)),$e.info(`${(he==null?void 0:he.name)||"File"} removed`)}catch(pe){console.error("Error deleting file via webhook:",pe),$e.error((pe==null?void 0:pe.message)||"Failed to delete file")}},ir=async W=>{try{const he=W.filePath;if(!he)throw new Error("Missing file path");const{data:pe,error:Me}=await Sa.storage.from("ai-agent-files").createSignedUrl(he,60*60,{download:W.name||"file.pdf"});if(Me)throw Me;const We=(pe==null?void 0:pe.signedUrl)||W.url||"";if(!We)throw new Error("Unable to generate download link");const Ce=document.createElement("a");Ce.href=We,Ce.download=W.name||"",Ce.target="_blank",Ce.rel="noopener",document.body.appendChild(Ce),Ce.click(),Ce.remove()}catch(he){$e.error((he==null?void 0:he.message)||"Failed to download file")}},Mo=async()=>{const W=ht.filter(he=>he.filePath);if(W.length>0)try{const{orgId:he,profileId:pe}=await Lt();await Promise.all(W.map(async Me=>{try{const We=new URLSearchParams({org_id:he,profile_id:pe,file_key:Me.filePath||"",file_id:String(Me.id||""),document_id:(Me==null?void 0:Me.documentId)||""}),Ce=await fetch(`${An.buildUrl(An.ENDPOINTS.KNOWLEDGE.FILE_DELETE)}?${We.toString()}`,{method:"POST"});if(Ce.ok){let Re={};try{Re=await Ce.json()}catch{}const Ct=String((Re==null?void 0:Re.status)||"").toLowerCase();Ct!=="deleted"&&console.warn("Delete webhook did not confirm deletion for",Me.filePath,Ct)}else{let Re=`Delete failed (${Ce.status})`;try{const Ct=await Ce.json();Re=(Ct==null?void 0:Ct.message)||Re}catch{}console.warn("Delete webhook failed for",Me.filePath,Re)}}catch(We){console.warn("Delete webhook error for",Me.filePath,We)}}))}catch(he){console.error("Error clearing files via webhook:",he)}$t([]),$e.info("All files cleared")},[cr,Ha]=p.useState([{id:Date.now(),question:"",answer:""}]),[Lf,ja]=p.useState([{id:Date.now(),question:"",answer:""}]),hu=()=>{const W={id:Date.now()+Math.random(),question:"",answer:""};Ha(he=>[W,...he]),ja(he=>[JSON.parse(JSON.stringify(W)),...he])},Kr=W=>{Ha(he=>he.filter(pe=>pe.id!==W)),ja(he=>he.filter(pe=>pe.id!==W))},Mi=(W,he,pe)=>{Ha(Me=>Me.map(We=>We.id===W?{...We,[he]:pe}:We))},qs=W=>{const he=Lf.find(We=>We.id===W.id),pe=(W.question||"").trim(),Me=(W.answer||"").trim();return he?pe!==(he.question||"").trim()||Me!==(he.answer||"").trim():pe!==""||Me!==""},[Ka,Va]=p.useState([{id:1,prompt:"Hai! Ada yang bisa saya bantu lagi?",delay:60,expanded:!1},{id:2,prompt:"Jika ada pertanyaan lain, jangan ragu untuk bertanya!",delay:120,expanded:!1}]),Te=()=>{const W={id:Date.now(),prompt:"",delay:60,expanded:!1};Va([...Ka,W])},mt=W=>{Va(Ka.filter(he=>he.id!==W))},bt=(W,he,pe)=>{Va(Ka.map(Me=>Me.id===W?{...Me,[he]:pe}:Me))},Ft=W=>{Va(Ka.map(he=>he.id===W?{...he,expanded:!he.expanded}:he))},_t=()=>{if(N&&!m){Z(N.system_prompt||""),ee(N.welcome_message||""),Q(N.transfer_conditions||""),ge(N.stop_ai_after_handoff),Ye(String((N==null?void 0:N.auto_resolve_after_minutes)??0)),te(!!((N==null?void 0:N.enable_resolve)??!1)),dt(String(_((N==null?void 0:N.history_limit)??k,0,j))),we(_((N==null?void 0:N.read_file_limit)??3,0,I)),Be((N==null?void 0:N.response_temperature)??"Balanced"),Ge((N==null?void 0:N.message_await)??3),wt(String(_((N==null?void 0:N.message_limit)??O,0,O))),yt(!!((N==null?void 0:N.enable_followup_message)??!1)),le(String((N==null?void 0:N.followup_message_delay)??60)),ye(!!((N==null?void 0:N.enable_followup_assigned)??!1)),z(String((N==null?void 0:N.followup_delay_assigned)??60)),ue(N.followup_message||"");const W=N==null?void 0:N.qna;if(W&&Array.isArray(W)){const he=W.map((pe,Me)=>({id:Date.now()+Me,question:pe.q??pe.question??"",answer:pe.a??pe.answer??""}));Ha(he),ja(JSON.parse(JSON.stringify(he)))}Ne((N==null?void 0:N.guide_content)||"")}};p.useEffect(()=>{_t()},[N,m]),p.useEffect(()=>{m&&ja(JSON.parse(JSON.stringify(cr)))},[]);const Vn=async()=>{if(!M){$e.error("Please assign a super agent before saving this AI agent.");return}const W=_(V(ut),0,P),he=_(V(Xe),0,ke),pe=_(V(vt),0,O),Me=V(xt),We=V(H),Ce=(()=>{const Fe=ne==null?void 0:ne.max_context_tokens;return typeof Fe=="number"&&Fe>0?Math.max(1,Math.floor(Fe/1e3)):S})(),Re=_(_((N==null?void 0:N.context_limit)??28,0,S),0,Ce),Ct={system_prompt:q,welcome_message:J,transfer_conditions:ae,stop_ai_after_handoff:oe,model_id:fe||null,name:e,auto_resolve_after_minutes:W,enable_resolve:ot,history_limit:he,read_file_limit:de,context_limit:Re,response_temperature:se,message_await:je,message_limit:pe,super_agent_id:M,enable_followup_message:Nt,followup_message_delay:Me,enable_followup_assigned:Ee,followup_delay_assigned:We,followup_message:G,qna:cr.filter(Fe=>{var Ut,At;return((Ut=Fe.question)==null?void 0:Ut.trim())||((At=Fe.answer)==null?void 0:At.trim())}).map(({question:Fe,answer:Ut})=>({q:Fe.trim(),a:Ut.trim()})),guide_content:Se};try{await F(Ct),f(!1),$e.success(m?"AI agent created successfully!":"AI agent settings saved successfully!")}catch{$e.error(m?"Failed to create AI agent":"Failed to save AI agent settings")}},Ar=async()=>{try{await F({name:e,guide_content:Se}),$e.success("Knowledge text saved")}catch(W){$e.error((W==null?void 0:W.message)||"Failed to save knowledge text")}},Nn=async()=>{try{await F({name:e,qna:cr.filter(W=>{var he,pe;return((he=W.question)==null?void 0:he.trim())||((pe=W.answer)==null?void 0:pe.trim())}).map(({question:W,answer:he})=>({q:W.trim(),a:he.trim()}))}),ja(JSON.parse(JSON.stringify(cr))),$e.success("Q&A saved")}catch(W){$e.error((W==null?void 0:W.message)||"Failed to save Q&A")}};return D&&!m?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Vt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI profile..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"sm",onClick:t,className:"gap-2",children:[i.jsx(kp,{className:"w-4 h-4"}),"Back"]})}),i.jsx(ve,{children:i.jsx("p",{children:"Kembali ke daftar agen AI"})})]}),i.jsx("h1",{className:"text-2xl font-bold",children:e}),m?i.jsx(Tt,{variant:"outline",className:"text-blue-600 border-blue-600",children:"New Agent"}):N&&i.jsxs(Tt,{variant:"secondary",children:["Last Updated: ",new Date(N.created_at).toLocaleDateString()]}),!D&&i.jsx("div",{className:"ml-auto flex items-center gap-2",children:d?i.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>{m?t():(f(!1),_t())},className:"gap-2",children:[i.jsx(ma,{className:"w-4 h-4"}),"Cancel"]}):i.jsxs(re,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"gap-2",children:[i.jsx(YV,{className:"w-4 h-4"}),"Edit Settings"]})})]}),U&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",U]})}),i.jsxs(Uc,{value:a,onValueChange:s,children:[i.jsxs(Tl,{className:"grid w-full grid-cols-2 bg-muted/60 p-1 rounded-lg",children:[i.jsx(jr,{value:"general",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(fo,{className:"w-4 h-4"}),i.jsx("span",{children:"General"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Konfigurasi pengaturan umum agen AI"})})]})}),i.jsx(jr,{value:"knowledge",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Nv,{className:"w-4 h-4"}),i.jsx("span",{children:"Knowledge Sources"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Kelola sumber pengetahuan dan pasangan T&J"})})]})})]}),i.jsx(sr,{value:"general",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 space-y-4",children:[i.jsxs(Ue,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center text-lg font-semibold",children:e.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:e}),i.jsx("p",{className:"text-muted-foreground",children:m?"New AI Agent - Configure your settings below":(N==null?void 0:N.description)||"AI Agent"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:m?"Not saved yet":`Last Updated: ${N?new Date(N.created_at).toLocaleString():"Never"}`})]})]}),i.jsxs("div",{className:"space-y-2 pt-4",children:[i.jsx("span",{className:"text-sm font-medium",children:"Assigned Super Agent"}),E?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading super agents..."}):R?i.jsx("div",{className:"text-sm text-destructive",children:R}):w&&(x!=null&&x.id)?i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-muted px-3 py-2 text-sm",children:[i.jsxs("span",{children:[" ",((Vr=A.find(W=>W.id===x.id))==null?void 0:Vr.name)||x.email||"You"]}),i.jsx(Tt,{variant:"secondary",children:"Your account"})]}):A.length===0?i.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 px-3 py-2 text-sm text-muted-foreground",children:"No super agents available. Create a super agent first before assigning this AI agent."}):i.jsxs(rn,{value:M||"",onValueChange:W=>T(W),disabled:!y||!d,children:[i.jsx(en,{className:"w-full",children:i.jsx(Xt,{placeholder:"Choose a super agent"})}),i.jsx(tn,{className:"bg-background border z-50",children:A.map(W=>i.jsxs(at,{value:W.id,children:[" ",W.name]},W.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Only the assigned super agent and their human agents can view and use this AI agent."})]})]}),i.jsx(Ue,{className:"p-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Model"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Pilih model AI yang menentukan kecepatan dan kualitas respons."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the balance between speed and intelligence for this agent."})]}),ne&&i.jsx(Tt,{variant:"secondary",className:"whitespace-nowrap",children:Pu(ne==null?void 0:ne.provider)})]}),i.jsxs(rn,{value:fe,onValueChange:De,disabled:ie.length===0||!d,children:[i.jsx(en,{className:"w-full py-3",children:ne?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[(ne==null?void 0:ne.display_name)||"Custom","  ",lv(ne==null?void 0:ne.cost_per_1m_tokens),"  ",Pu(ne==null?void 0:ne.provider)]})}):i.jsx(Xt,{placeholder:"Select an AI model"})}),i.jsx(tn,{className:"bg-background border z-50",children:ie.map(W=>i.jsx(at,{value:W.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(W==null?void 0:W.display_name)||"Custom","  ",lv(W==null?void 0:W.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(W==null?void 0:W.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[W==null?void 0:W.model_name,"  ",Pu(W==null?void 0:W.provider)]})]})},W.id))})]}),ie.length===0&&i.jsx("p",{className:"text-xs text-destructive mt-2",children:"No AI models available. Please contact your administrator."})]}),me.length>0&&i.jsxs("div",{className:"border-t pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Fallback Model"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Model yang digunakan secara otomatis jika model utama tidak tersedia."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic backup model used when primary model is unavailable."})]}),me.find(W=>W.id===Ze)&&i.jsx(Tt,{variant:"secondary",className:"whitespace-nowrap",children:Pu((Ot=me.find(W=>W.id===Ze))==null?void 0:Ot.provider)})]}),i.jsxs(rn,{value:Ze,onValueChange:Ve,disabled:me.length===0||!d,children:[i.jsx(en,{className:"w-full py-3",children:me.find(W=>W.id===Ze)?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[((Ln=me.find(W=>W.id===Ze))==null?void 0:Ln.display_name)||"Custom","  ",lv((X=me.find(W=>W.id===Ze))==null?void 0:X.cost_per_1m_tokens),"  ",Pu((_e=me.find(W=>W.id===Ze))==null?void 0:_e.provider)]})}):i.jsx(Xt,{placeholder:"Select a fallback model"})}),i.jsx(tn,{className:"bg-background border z-50",children:me.map(W=>i.jsx(at,{value:W.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(W==null?void 0:W.display_name)||"Custom","  ",lv(W==null?void 0:W.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(W==null?void 0:W.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[W==null?void 0:W.model_name,"  ",Pu(W==null?void 0:W.provider)]})]})},W.id))})]})]})]})}),i.jsxs(Ue,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>h("behavior"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Agent Behavior"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Konfigurasi kepribadian dan perilaku agen AI untuk menentukan cara berinteraksi dengan pelanggan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure AI personality and behavior"})]}),i.jsx(Pa,{className:`w-5 h-5 transition-transform ${c.behavior?"rotate-180":""}`})]}),c.behavior&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Br,{className:"min-h-[120px]",value:q,onChange:W=>Z(W.target.value),disabled:!d,placeholder:m?"Define your AI's personality, behavior, and capabilities here...":"Enter system prompt..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[q.length,"/15000"]})]})]}),i.jsxs(Ue,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>h("welcome"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Welcome Message"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Pesan selamat datang yang dikirim otomatis kepada pelanggan saat memulai percakapan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"First message sent to users"})]}),i.jsx(Pa,{className:`w-5 h-5 transition-transform ${c.welcome?"rotate-180":""}`})]}),c.welcome&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Br,{className:"min-h-[80px]",value:J,onChange:W=>ee(W.target.value),disabled:!d,placeholder:m?"This is the first message your AI will send to customers...":"Enter welcome message..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[J.length,"/5000"]}),i.jsxs("div",{className:"pt-4 border-t space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"space-y-0.5",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto Follow-up Message"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kirim pesan otomatis kedua jika tidak ada aktivitas lebih lanjut dari kedua pihak setelah waktu tertentu."})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically nudge users after inactivity (configure separately for Unassigned and Assigned threads)"})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-primary",children:"Follow-up Template"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:'Contoh: "Halo, apakah ada yang bisa saya bantu lagi? Jika tidak ada, tiket ini akan saya tutup."'})})]})]}),i.jsx(Br,{className:"min-h-[80px]",value:G,onChange:W=>ue(W.target.value),placeholder:"Enter follow-up message (shared for both Unassigned and Assigned)...",disabled:!d}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[G.length,"/5000"]})]}),i.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-orange-50/30 dark:bg-orange-950/10",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Unassigned Threads"}),i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300",children:"AI Handling"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Trigger follow-up when AI is handling the conversation"})]}),i.jsx(Es,{checked:Nt,onCheckedChange:yt,disabled:!d})]}),Nt&&i.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-primary",children:"Inactivity Timeout (seconds)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Waktu dalam detik sebelum pesan tindak lanjut dikirim untuk percakapan Unassigned."})})]})]}),i.jsx(it,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 120",value:xt,onChange:W=>le(Le(W.target.value)),disabled:!d,className:"max-w-[200px]"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-blue-50/30 dark:bg-blue-950/10",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Assigned Threads"}),i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300",children:"Agent Handling"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Trigger follow-up when a human agent is handling the conversation"})]}),i.jsx(Es,{checked:Ee,onCheckedChange:ye,disabled:!d})]}),Ee&&i.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-primary",children:"Inactivity Timeout (seconds)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Waktu dalam detik sebelum pesan tindak lanjut dikirim untuk percakapan Assigned."})})]})]}),i.jsx(it,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 300",value:H,onChange:W=>z(Le(W.target.value)),disabled:!d,className:"max-w-[200px]"})]})]})]})]})]}),i.jsxs(Ue,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>h("transfer"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Agent Transfer Conditions"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kondisi yang menentukan kapan percakapan dialihkan dari agen AI ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"When to transfer to human agents"})]}),i.jsx(Pa,{className:`w-5 h-5 transition-transform ${c.transfer?"rotate-180":""}`})]}),c.transfer&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Br,{className:"min-h-[80px]",value:ae,onChange:W=>Q(W.target.value),disabled:!d,placeholder:m?"Define when your AI should transfer the conversation to a human agent...":"Enter transfer conditions..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[ae.length,"/750"]})]})]}),i.jsx(Ue,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Stop AI after Handoff"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Menghentikan agen AI mengirim pesan setelah percakapan dialihkan ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Stop AI from sending messages after handoff"})]}),i.jsx(Es,{checked:oe,onCheckedChange:ge,disabled:!d})]})}),i.jsx(Ue,{className:"p-6",children:i.jsxs(iD,{defaultOpen:!1,children:[i.jsxs(sD,{className:"flex w-full items-center justify-between py-1 font-medium [&[data-state=open]>svg]:rotate-180",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Additional Settings"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Pengaturan tambahan untuk konfigurasi lanjutan agen AI seperti batas riwayat, konteks, dan resolusi otomatis"})})]})]}),i.jsx(Pa,{className:"w-5 h-5 transition-transform"})]}),i.jsx(oD,{className:"mt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Enable auto-resolve"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Mengaktifkan resolusi otomatis percakapan setelah waktu tertentu tanpa respons pelanggan"})})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(Es,{checked:ot,onCheckedChange:te,disabled:!d})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto-resolve timeout (minutes)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Waktu dalam menit sebelum percakapan secara otomatis diselesaikan (0 = nonaktif)"})})]})]}),i.jsx(it,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 30",value:ut,onChange:W=>et(W.target.value),disabled:!ot||!d,className:`mt-1 ${!ot||!d?"opacity-60 cursor-not-allowed bg-muted/50":""}`}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ot?"Set 0 to disable auto-resolve.":"Enable Auto-resolve to edit this value."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Conversation History (messages)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan riwayat percakapan yang dapat diingat AI"})})]})]}),i.jsx(it,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${ke}`,value:Xe,onChange:W=>nt(W.target.value),disabled:!d,className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:`Supports up to ${ke} messages.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creativity Preset"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Preset kreativitas AI: Conservative (akurat), Balanced (seimbang), Creative (kreatif)"})})]})]}),i.jsxs("select",{value:se,onChange:W=>Be(W.target.value),disabled:!d,className:"w-full p-2 border rounded-lg mt-1",children:[i.jsx("option",{value:"Conservative",children:"Conservative"}),i.jsx("option",{value:"Balanced",children:"Balanced"}),i.jsx("option",{value:"Creative",children:"Creative"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Message Cap"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan yang dapat dikirim AI dalam satu percakapan"})})]})]}),i.jsx(it,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 1000",value:vt,onChange:W=>Rt(W.target.value),disabled:!d,className:"mt-1"})]})]})})]})}),d&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{className:"w-full",onClick:Vn,disabled:$,children:$?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"w-4 h-4 mr-2 animate-spin"}),m?"Creating...":"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(fo,{className:"w-4 h-4 mr-2"}),m?"Create AI Agent":"Save AI Settings"]})})}),i.jsx(ve,{children:i.jsx("p",{children:m?"Buat agen AI baru dengan pengaturan ini":"Simpan semua pengaturan saat ini"})})]})]}),i.jsx("div",{className:"xl:col-span-2",children:i.jsx(s3e,{welcomeMessage:J,systemPrompt:q,modelDisplay:(ne==null?void 0:ne.display_name)||(ne==null?void 0:ne.model_name)||"Not selected",profile:N,profileId:n,modelName:(ne==null?void 0:ne.model_name)||"",temperature:P9(se),transfer_conditions:ae})})]})}),i.jsx(sr,{value:"knowledge",className:"space-y-6",children:i.jsx(Ue,{className:"p-6",children:i.jsxs(Uc,{value:o,onValueChange:l,className:"w-full",children:[i.jsxs(Tl,{className:"grid w-full grid-cols-3 mb-6",children:[i.jsxs(jr,{value:"text",className:"gap-2",children:[i.jsx(WV,{className:"w-4 h-4"}),"Text"]}),i.jsxs(jr,{value:"file",className:"gap-2",children:[i.jsx(Rh,{className:"w-4 h-4"}),"File"]}),i.jsxs(jr,{value:"qa",className:"gap-2",children:[i.jsx(ze,{className:"w-4 h-4"}),"Q&A"]})]}),i.jsxs(sr,{value:"text",className:"space-y-4",children:[i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Knowledge Text Content"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-2",children:"Add custom knowledge text that your AI agent can reference when responding to customers."}),i.jsx(Br,{className:"min-h-[300px] font-mono text-sm",value:Se,onChange:W=>Ne(W.target.value),placeholder:"Enter your knowledge content here...",disabled:!d})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs(re,{onClick:Ar,disabled:$,size:"sm",className:"gap-2",children:[i.jsx(BT,{className:"w-4 h-4"}),"Save Text"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[Se.length," Characters"]})]})]}),i.jsxs(sr,{value:"website",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Provide Link"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Provide a link to the page you want the AI to learn from."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(re,{variant:"default",size:"sm",className:"bg-muted text-foreground hover:bg-muted/80",children:"Batch Link"}),i.jsx(re,{variant:"outline",size:"sm",children:"Single Link"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Web Link Collector"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(it,{placeholder:"Link URL",className:"flex-1"}),i.jsx(re,{className:"bg-blue-600 hover:bg-blue-700",children:"Collect Link"})]}),i.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-600",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}),i.jsxs("p",{children:["Start with URL and this tool will gather up to ",i.jsx("strong",{children:"30 unique"})," links from the site, excluding any files"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Trained Link"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"select-all",className:"rounded"}),i.jsx("label",{htmlFor:"select-all",className:"text-sm text-blue-600 cursor-pointer",children:"Select"})]}),i.jsx(it,{placeholder:"Search Links",className:"flex-1"})]})]})]}),i.jsxs(sr,{value:"file",className:"space-y-6",children:[i.jsxs("div",{onDrop:b&&d?Cr:void 0,onDragOver:b&&d?Dr:void 0,className:`border border-dashed rounded-lg p-6 text-center ${b&&d?"bg-muted/30":"bg-muted/50 opacity-70 cursor-not-allowed"}`,children:[i.jsx("input",{ref:jt,type:"file",hidden:!0,onChange:Wn,disabled:!b||!d}),i.jsx(Rh,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground"}),b&&d?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Drag & drop a document here, or"}),i.jsx(re,{size:"sm",onClick:()=>{var W;return(W=jt.current)==null?void 0:W.click()},disabled:!d,children:"Browse Files"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported: PDF"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:d?"You don't have permission to upload files.":"Enter edit mode to manage files."}),d&&!b&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires permission: ai_agent_files.create"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-medium",children:["Uploaded Files (",ht.length,")"]}),ht.length>0&&d&&i.jsx(re,{variant:"ghost",size:"sm",onClick:Mo,className:"text-red-600 hover:text-red-700",disabled:!d,children:"Clear All"})]}),Zt?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading files..."}):ht.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No files uploaded yet."}):i.jsx("div",{className:"border rounded-md divide-y",children:ht.map(W=>i.jsxs("div",{className:"flex items-center justify-between p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(Bd,{checked:W.isEnabled??!0,onCheckedChange:()=>yn(W.id,W.isEnabled??!0),disabled:!d}),i.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:i.jsx(Rh,{className:"w-4 h-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-medium",children:W.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[(W.size/1024).toFixed(1)," KB  ",new Date(W.uploadedAt).toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${W.status==="ready"?"bg-green-100 text-green-700":W.status==="uploading"?"bg-blue-100 text-blue-700":W.status==="processing"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:W.status==="uploading"?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Vt,{className:"w-3 h-3 animate-spin"}),"uploading"]}):W.status}),i.jsx(re,{size:"sm",variant:"outline",onClick:()=>ir(W),disabled:W.status==="uploading",children:"Download"}),i.jsx(re,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>ui(W.id),disabled:W.status==="uploading"||!d,children:i.jsx(ma,{className:"w-4 h-4"})})]})]},W.id))})]})]}),i.jsxs(sr,{value:"qa",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Q&A Knowledge"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Add questionanswer pairs the AI can reference."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{size:"sm",variant:"outline",onClick:Nn,disabled:$||!d,className:"gap-2",children:[i.jsx(BT,{className:"w-4 h-4"}),"Save Q&A"]}),i.jsxs(re,{size:"sm",onClick:()=>{l("qa"),hu()},className:"gap-2",disabled:!d,children:[i.jsx(Ms,{className:"w-4 h-4"}),"Add Pair"]})]})]}),cr.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No Q&A pairs. Click Add Pair to create one."}):i.jsx("div",{className:"space-y-3",children:cr.map(W=>i.jsx(Ue,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(it,{placeholder:"Question",value:W.question,onChange:he=>Mi(W.id,"question",he.target.value),disabled:!d}),i.jsx(Br,{placeholder:"Answer",className:"min-h-[80px]",value:W.answer,onChange:he=>Mi(W.id,"answer",he.target.value),disabled:!d})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[qs(W)&&i.jsx(re,{variant:"outline",size:"sm",onClick:async he=>{he.preventDefault(),he.stopPropagation(),l("qa");try{await F({name:e,qna:cr.filter(pe=>{var Me,We;return((Me=pe.question)==null?void 0:Me.trim())||((We=pe.answer)==null?void 0:We.trim())}).map(({question:pe,answer:Me})=>({q:pe.trim(),a:Me.trim()}))}),ja(JSON.parse(JSON.stringify(cr))),$e.success("Q&A saved")}catch(pe){$e.error((pe==null?void 0:pe.message)||"Failed to save Q&A")}},children:"Save"}),i.jsx(re,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>Kr(W.id),disabled:!d,children:i.jsx(ma,{className:"w-4 h-4"})})]})]})},W.id))})]}),i.jsx(sr,{value:"product",children:i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(VV,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Product knowledge and catalog integration"})]})})]})})}),i.jsx(sr,{value:"integrations",children:i.jsxs(Ue,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Integrations"}),i.jsx("p",{className:"text-muted-foreground",children:"Set up integrations with external services."})]})}),i.jsx(sr,{value:"followups",className:"space-y-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Followups"}),i.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Tambahkan pesan Followup yang akan dikirim kepada ",i.jsx("span",{className:"text-blue-600",children:"pelanggan setelah jeda waktu tertentu"}),"."]}),i.jsx("p",{children:"Isi dengan prompt. Prompt adalah arahan yang AI akan pakai untuk menulis Followup sesuai dengan history chat dan knowledge anda."}),i.jsx("p",{children:"Anda juga bisa menulis kondisi Handoff to Agent anda di Prompt"}),i.jsx("p",{className:"text-blue-600",children:"Anda bisa mengirim gambar di followup. Klik disini untuk Upload gambar."})]})]}),i.jsx("div",{className:"space-y-4",children:Ka.map((W,he)=>i.jsx(Ue,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Prompt:"}),i.jsx(re,{variant:"ghost",size:"sm",onClick:()=>mt(W.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",disabled:!d,children:i.jsx(ma,{className:"w-4 h-4"})})]}),i.jsx(Br,{value:W.prompt,onChange:pe=>bt(W.id,"prompt",pe.target.value),className:"min-h-[80px]",placeholder:"Enter followup message...",disabled:!d}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Delay (min):"}),i.jsx(it,{type:"number",value:W.delay,onChange:pe=>bt(W.id,"delay",parseInt(pe.target.value)||1),className:"w-20",min:"1",disabled:!d})]})}),i.jsxs(iD,{children:[i.jsxs(sD,{onClick:()=>Ft(W.id),className:"flex items-center gap-2 text-sm font-medium hover:text-primary",children:[i.jsx(Pa,{className:`w-4 h-4 transition-transform ${W.expanded?"rotate-180":""}`}),"Options"]}),i.jsx(oD,{className:"pt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Additional options for this followup message can be configured here."})})]})]})},W.id))}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(re,{onClick:Te,className:"gap-2",disabled:!d,children:[i.jsx(Ms,{className:"w-4 h-4"}),"Add Followup"]})}),i.jsx(ve,{children:i.jsx("p",{children:"Tambah pesan tindak lanjut baru"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{className:"bg-green-600 hover:bg-green-700",disabled:!d,children:"Save Followups"})}),i.jsx(ve,{children:i.jsx("p",{children:"Simpan semua pesan tindak lanjut"})})]})]})]})}),i.jsx(sr,{value:"evaluation",children:i.jsxs(Ue,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Evaluation"}),i.jsx("p",{className:"text-muted-foreground",children:"Review AI agent performance metrics."})]})})]})]})},cv=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,$u=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",uv="00000000-0000-0000-0000-000000000001",l3e=({agent:e,onSettings:t,onDelete:n})=>i.jsxs(Ue,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center text-xl font-semibold text-muted-foreground",children:e.initials}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.creator}),e.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),(e.modelName||e.provider)&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.modelName?`Model: ${e.modelName}`:null,e.modelName&&e.provider?"  ":"",e.provider?`Provider: ${$u(e.provider)}`:null]}),i.jsxs("div",{className:"space-y-1 mt-1",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Super Agent: ",e.superAgentName??"Unassigned"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(an,{permission:"ai_profiles.update",children:i.jsxs(re,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>t(e),children:[i.jsx(fo,{className:"w-4 h-4"}),"Settings"]})})}),i.jsx(ve,{children:i.jsx("p",{children:"Konfigurasi pengaturan agen AI"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(an,{permission:"ai_profiles.delete",children:i.jsxs(re,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",onClick:()=>n(e.id),children:[i.jsx(ma,{className:"w-4 h-4"}),"Delete"]})})}),i.jsx(ve,{children:i.jsx("p",{children:"Hapus agen AI ini"})})]})]})]}),c3e=({onClick:e})=>i.jsx(Ue,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow bg-blue-600 text-white cursor-pointer group",onClick:e,children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors",children:i.jsx(Ms,{className:"w-8 h-8"})}),i.jsx("h3",{className:"font-semibold text-lg",children:"Create New"})]})}),u3e=()=>{var ye,H;const[e,t]=p.useState(null),[n,r]=p.useState([]),[a,s]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState(!1),[h,m]=p.useState(""),[g,v]=p.useState("customer-service"),[x,y]=p.useState([]),[w,b]=p.useState([]),[_,k]=p.useState(!1),[j,S]=p.useState(null),[O,I]=p.useState(""),[P,N]=p.useState(""),[D,$]=p.useState(""),[U,F]=p.useState(""),[M,T]=p.useState("all"),[A,L]=p.useState("all"),[E,B]=p.useState("newest"),[R,C]=p.useState(0),[q,Z]=p.useState(0),[J,ee]=p.useState(null),[ae,Q]=p.useState(null),[oe,ge]=p.useState(!1),ie=p.useRef(!0);ia();const{mode:Ie,superAgentId:me,loading:K,error:fe}=Vz(),{agents:De}=ql(),[Ze,Ve]=p.useState(!1),[ut,Ye]=p.useState(null),ot=Ie==="super"&&!!me,te=z=>z.replace(/[%_\\]/g,G=>`\\${G}`).replace(/'/g,"''"),Xe=p.useMemo(()=>{const z=new Map;return[...x,...w].forEach(G=>{z.set(G.id,G)}),z},[x,w]),{deleteProfile:dt}=T9(),de=(z,G,ue)=>({id:z.id,name:z.name,initials:z.name.split(" ").map(Se=>Se.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",description:z.description||void 0,created_at:z.created_at,model:(z==null?void 0:z.model_id)??null,modelName:(G==null?void 0:G.display_name)??(G==null?void 0:G.model_name)??null,provider:(G==null?void 0:G.provider)??null,superAgentId:(z==null?void 0:z.super_agent_id)??null,superAgentName:ue??null}),we=p.useCallback(async()=>{if(!K){if(Ie==="none"){Z(0),ee(null);return}try{let z=ce.from("ai_profiles").select("id",{count:"exact",head:!0}).eq("org_id",uv);if(Ie==="super"||Ie==="agent"){if(!me){Z(0),ee(null);return}z=z.eq("super_agent_id",me)}const{count:G}=await z;if(Z(G||0),(G||0)>0){let ue=ce.from("ai_profiles").select("created_at").order("created_at",{ascending:!1}).limit(1).eq("org_id",uv);(Ie==="super"||Ie==="agent")&&me&&(ue=ue.eq("super_agent_id",me));const{data:Se}=await ue.maybeSingle();ee(Se?new Date(Se.created_at):null)}else ee(null)}catch(z){console.error("Error fetching AI agent stats:",z)}}},[Ie,me,K]),se=p.useCallback(async()=>{if(K){s(!0);return}try{if(ie.current?s(!0):l(!0),u(null),Ie==="none"){ie.current=!1,r([]),C(0),s(!1),l(!1),u(fe??"Tidak ada agen AI yang tersedia untuk akun ini.");return}let z=ce.from("ai_profiles").select("*, ai_models:ai_models!ai_profiles_model_id_fkey(id, display_name, model_name, provider)",{count:"exact"}).eq("org_id",uv);if(Ie==="super"||Ie==="agent"){if(!me){ie.current=!1,r([]),C(0),s(!1),l(!1),u(fe??"Tidak ada agen AI yang tersedia untuk akun ini.");return}z=z.eq("super_agent_id",me)}if(U){const ne=te(U);z=z.or(`name.ilike.%${ne}%,description.ilike.%${ne}%`)}A!=="all"&&(z=z.eq("model",A)),M!=="all"&&(M==="unknown"?z=z.or("model.is.null,ai_models.provider.is.null"):z=z.eq("ai_models.provider",M)),E==="az"?z=z.order("name",{ascending:!0,nullsFirst:!1}):E==="oldest"?z=z.order("created_at",{ascending:!0}):z=z.order("created_at",{ascending:!1});const{data:G,error:ue,count:Se}=await z;if(ue)throw ue;const Ne=Array.from(new Set(G.map(ne=>ne==null?void 0:ne.super_agent_id).filter(ne=>!!ne)));let Le=new Map;if(Ne.length){const{data:ne}=await ce.from("v_human_agents").select("user_id, agent_name, email").in("user_id",Ne);ne==null||ne.forEach(ke=>{const et=ke.agent_name||ke.email||String(ke.user_id).slice(0,8);Le.set(ke.user_id,et)})}C(Se||0);const V=(G||[]).map(ne=>de(ne,ne.ai_models||(ne.model?Xe.get(ne.model):void 0),Le.get(ne.super_agent_id??"")??null));r(V)}catch(z){console.error("Error fetching AI agents:",z),u("Failed to load AI agents"),$e.error("Failed to load AI agents"),r([]),C(0)}finally{ie.current?(ie.current=!1,s(!1)):l(!1)}},[U,A,M,E,Xe,Ie,me,K,fe]);p.useEffect(()=>{ot&&me&&(Ye(me),Ve(!1))},[ot,me]);const Be=p.useMemo(()=>{const z=new Set;return[...x,...w].forEach(G=>{G.provider&&z.add(G.provider)}),z.add("unknown"),Array.from(z).sort((G,ue)=>G.localeCompare(ue))},[x,w]),je=p.useMemo(()=>{const z=new Map;return[...x,...w].forEach(G=>{z.set(G.id,G.display_name||G.model_name||"Unnamed")}),Array.from(z.entries()).sort((G,ue)=>G[1].localeCompare(ue[1]))},[x,w]);p.useEffect(()=>{const z=setTimeout(()=>F(D.trim()),250);return()=>clearTimeout(z)},[D]),p.useEffect(()=>{se()},[se]),p.useEffect(()=>{we()},[we]),p.useEffect(()=>{M!=="all"&&!Be.includes(M)&&T("all")},[M,Be]),p.useEffect(()=>{A!=="all"&&!je.some(([z])=>z===A)&&L("all")},[A,je]);const Ge=z=>{const G=n.find(ue=>ue.id===z);G&&Q(G)},vt=async()=>{if(ae)try{ge(!0),await dt(ae.id),await Promise.all([se(),we()]),$e.success(`"${ae.name}" has been deleted successfully`),Q(null)}catch(z){console.error("Error deleting agent:",z),u("Failed to delete AI agent"),$e.error("Failed to delete AI agent")}finally{ge(!1)}},wt=()=>{f(!0)},Nt=async()=>{var z,G;if(!h.trim()){$e.error("Please enter an AI agent name");return}if(!O){$e.error("Please select an AI model");return}if(!ut){$e.error("Please choose a Super Agent");return}try{const{data:ue,error:Se}=await ce.from("ai_profiles").insert([{org_id:uv,name:h.trim(),description:null,system_prompt:"",welcome_message:"",transfer_conditions:"",stop_ai_after_handoff:!0,model_id:O,super_agent_id:ut}]).select("id, name, created_at, model_id, super_agent_id").single();if(Se)throw Se;if(!ue)throw new Error("No data returned from insert");const Le={id:ue==null?void 0:ue.id,name:ue.name||h.trim(),initials:((ue==null?void 0:ue.name)||h.trim()).split(" ").map(V=>V.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",created_at:(ue==null?void 0:ue.created_at)||new Date().toISOString(),model:(ue==null?void 0:ue.model_id)||O,modelName:((z=x.find(V=>V.id===((ue==null?void 0:ue.model_id)||O)))==null?void 0:z.display_name)||void 0,provider:((G=x.find(V=>V.id===((ue==null?void 0:ue.model_id)||O)))==null?void 0:G.provider)||null,superAgentId:(ue==null?void 0:ue.super_agent_id)||ut,superAgentName:void 0};t(Le),f(!1),m(""),v("customer-service"),Ye(null),$e.success("AI agent created successfully"),se(),we()}catch(ue){console.error("Create AI Agent failed:",ue),$e.error((ue==null?void 0:ue.message)||"Failed to create AI agent")}},yt=p.useRef(!1),xt=p.useCallback(async()=>{try{k(!0),S(null);const{data:z,error:G}=await ce.from("ai_models").select("id, display_name, model_name, provider, cost_per_1m_tokens, is_active").eq("is_active",!0).order("display_name",{ascending:!0});if(G)throw G;const ue=z||[],Se=ue.filter(Le=>(Le.display_name||"").toLowerCase()!=="fallback"),Ne=ue.filter(Le=>(Le.display_name||"").toLowerCase()==="fallback");y(Se),b(Ne),yt.current||(Se.length>0&&I(Le=>Le||Se[0].id),Ne.length>0&&N(Le=>Le||Ne[0].id),yt.current=!0)}catch(z){console.error("Error loading AI models:",z),S("Failed to load AI models"),$e.error("Failed to load AI models")}finally{k(!1)}},[]);if(p.useEffect(()=>{xt()},[xt]),p.useEffect(()=>{se()},[]),e)return i.jsx(o3e,{agentName:e.name,onBack:()=>{t(null),se(),we()},profileId:e.id==="new"?void 0:e.id,initialModelId:e.model||void 0});if(a)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Vt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI agents..."})]});const le=n.length,Ee=Be.length?Be:[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"AI Agents"}),i.jsxs("div",{className:"text-muted-foreground max-w-2xl mx-auto",children:[i.jsx("p",{children:"Ini adalah halaman di mana Anda dapat mengunjungi AI yang telah Anda buat sebelumnya."}),i.jsx("p",{children:"Jangan ragu untuk membuat perubahan dan membuat chatbot sebanyak yang Anda inginkan kapan saja!"})]})]}),c&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",c]}),i.jsx(re,{variant:"outline",size:"sm",className:"mt-2",onClick:se,children:"Retry"})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-72",children:[i.jsx(rs,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(it,{value:D,onChange:z=>$(z.target.value),placeholder:"Search AI agents...",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(rn,{value:M,onValueChange:T,children:[i.jsx(en,{className:"w-[160px] bg-background border",children:i.jsx(Xt,{placeholder:"Provider"})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"all",children:"All providers"}),Ee.map(z=>i.jsx(at,{value:z,children:z==="unknown"?"Unknown":$u(z)},z))]})]}),i.jsxs(rn,{value:A,onValueChange:L,children:[i.jsx(en,{className:"w-[160px] bg-background border",children:i.jsx(Xt,{placeholder:"AI model"})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"all",children:"All models"}),je.map(([z,G])=>i.jsx(at,{value:z,children:G},z))]})]}),i.jsxs(rn,{value:E,onValueChange:z=>B(z),children:[i.jsx(en,{className:"w-[150px] bg-background border",children:i.jsx(Xt,{placeholder:"Sort"})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"newest",children:"Newest first"}),i.jsx(at,{value:"oldest",children:"Oldest first"}),i.jsx(at,{value:"az",children:"Name AZ"})]})]})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",le," of ",q," agents"]}),o&&!a&&i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Updating list"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ue,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:q}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total AI Agents"})]}),i.jsxs(Ue,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:le}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Filters"})]}),i.jsxs(Ue,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:J?J.toLocaleDateString():"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Created"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.map(z=>i.jsx(l3e,{agent:z,onSettings:t,onDelete:Ge},z.id)),i.jsx(an,{permission:"ai_profiles.create",children:i.jsx(c3e,{onClick:wt})})]}),le===0&&!a&&q===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:i.jsx(Ms,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Agents Yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first AI agent to get started with automated customer support."}),i.jsxs(re,{onClick:wt,children:[i.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Create Your First AI Agent"]})]}),le===0&&!a&&q>0&&i.jsx("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"No AI agents match your current filters. Try adjusting the search or filter settings above."}),i.jsx(an,{permission:"ai_profiles.create",children:i.jsx(wn,{open:d,onOpenChange:f,children:i.jsxs(hn,{className:"sm:max-w-[425px]",children:[i.jsx(mn,{children:i.jsx(pn,{className:"text-xl font-semibold",children:"Create New AI Agent"})}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(it,{placeholder:"Enter AI name",value:h,onChange:z=>m(z.target.value),className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Super Agent *"}),ot?i.jsx(it,{readOnly:!0,disabled:!0,value:((ye=De.find(z=>z.user_id===me))==null?void 0:ye.display_name)||((H=De.find(z=>z.user_id===me))==null?void 0:H.email)||me||"Current super agent",className:"w-full"}):i.jsxs(Ns,{open:Ze,onOpenChange:Ve,children:[i.jsx(Cs,{asChild:!0,children:i.jsx(re,{variant:"outline",role:"combobox",className:"w-full justify-between",children:(()=>{const z=De.find(G=>G.primaryRole==="super_agent"&&G.user_id===ut);return(z==null?void 0:z.display_name)||(z==null?void 0:z.email)||ut||"Choose a super agent"})()})}),i.jsx(Qi,{className:"w-[360px] p-0",children:i.jsxs(Nm,{children:[i.jsx(Cm,{placeholder:"Search super agents..."}),i.jsx(Am,{children:"No super agents found."}),i.jsx(Em,{children:De.filter(z=>z.primaryRole==="super_agent").map(z=>i.jsx(Tm,{onSelect:()=>{Ye(z.user_id),Ve(!1)},children:i.jsx("span",{className:"ml-2",children:z.display_name||z.email||z.user_id.slice(0,8)})},z.user_id))})]})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agents can only create AI Agents for themselves."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Template"}),i.jsxs(rn,{value:g,onValueChange:v,children:[i.jsx(en,{className:"w-full",children:i.jsx(Xt,{placeholder:"Select a template"})}),i.jsx(tn,{})]}),g==="customer-service"&&i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"and sales inquiries for your business."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Model"}),i.jsxs(rn,{value:O,onValueChange:I,disabled:_||x.length===0,children:[i.jsx(en,{className:"w-full py-3",children:O?(()=>{const z=x.find(G=>G.id===O);return z?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[z.display_name||"Custom","  ",cv(z.cost_per_1m_tokens),"  ",$u(z.provider)]})}):i.jsx(Xt,{placeholder:_?"Loading models...":"Select an AI model"})})():i.jsx(Xt,{placeholder:_?"Loading models...":"Select an AI model"})}),i.jsx(tn,{side:"bottom",align:"start",sideOffset:4,children:x.map(z=>i.jsx(at,{value:z.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:z.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:cv(z.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:z.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[z.model_name,"  ",$u(z.provider)]})]})},z.id))})]}),j&&i.jsx("p",{className:"text-xs text-destructive",children:j})]}),w.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Fallback Model"}),i.jsxs(rn,{value:P,onValueChange:N,disabled:_||w.length===0,children:[i.jsx(en,{className:"w-full py-3",children:P?(()=>{const z=w.find(G=>G.id===P);return z?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[z.display_name||"Custom","  ",cv(z.cost_per_1m_tokens),"  ",$u(z.provider)]})}):i.jsx(Xt,{placeholder:_?"Loading models...":"Select a fallback model"})})():i.jsx(Xt,{placeholder:_?"Loading models...":"Select a fallback model"})}),i.jsx(tn,{side:"bottom",align:"start",sideOffset:4,children:w.map(z=>i.jsx(at,{value:z.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:z.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:cv(z.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:z.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[z.model_name,"  ",$u(z.provider)]})]})},z.id))})]})]}),i.jsx(re,{onClick:Nt,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!h.trim()||!O||!ut,children:"Create AI Agent"})]})]})})})]}),i.jsx(Lb,{open:!!ae,onOpenChange:z=>{!z&&!oe&&Q(null)},children:i.jsxs(zp,{children:[i.jsxs(Wp,{children:[i.jsx(Hp,{children:"Delete AI Agent?"}),i.jsx(Kp,{children:ae?`Are you sure you want to delete "${ae.name}"? This action cannot be undone.`:"Are you sure you want to delete this AI agent?"})]}),i.jsxs(qp,{children:[i.jsx(Gp,{disabled:oe,children:"Cancel"}),i.jsx(Vp,{onClick:vt,disabled:oe,className:"bg-destructive hover:bg-destructive/90 focus:ring-destructive/50",children:oe?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Vt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})},O9=({className:e,...t})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:Pe("mx-auto flex w-full justify-center",e),...t});O9.displayName="Pagination";const I9=p.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,className:Pe("flex flex-row items-center gap-1",e),...t}));I9.displayName="PaginationContent";const Lv=p.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,className:Pe("",e),...t}));Lv.displayName="PaginationItem";const uE=({className:e,isActive:t,size:n="icon",...r})=>i.jsx("a",{"aria-current":t?"page":void 0,className:Pe(Rd({variant:t?"outline":"ghost",size:n}),e),...r});uE.displayName="PaginationLink";const R9=({className:e,...t})=>i.jsxs(uE,{"aria-label":"Go to previous page",size:"default",className:Pe("gap-1 pl-2.5",e),...t,children:[i.jsx(yN,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});R9.displayName="PaginationPrevious";const M9=({className:e,...t})=>i.jsxs(uE,{"aria-label":"Go to next page",size:"default",className:Pe("gap-1 pr-2.5",e),...t,children:[i.jsx("span",{children:"Next"}),i.jsx(Sp,{className:"h-4 w-4"})]});M9.displayName="PaginationNext";const d3e=e=>e.replace(/\s/g,"").toLowerCase(),lD=()=>{const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(!1),[d,f]=p.useState({enabled:!1,perDay:0,perMonth:0,twoFA:!1}),[h,m]=p.useState("7d"),[g,v]=p.useState("7d"),[x,y]=p.useState(null),[w,b]=p.useState(!1),[_,k]=p.useState(null),[j,S]=p.useState({}),[O,I]=p.useState(!1),[P,N]=p.useState(null),[D,$]=p.useState({name:"",email:"",role:"agent"}),[U,F]=p.useState(!1),[M,T]=p.useState(!1),[A,L]=p.useState(null),[E,B]=p.useState(!1),[R,C]=p.useState(!1),[q,Z]=p.useState(null),{toast:J}=nu(),ee=p.useRef(null),{hasPermission:ae,hasRole:Q}=Ir();Q(bn.MASTER_AGENT);const oe=Q(bn.SUPER_AGENT),ge=[bn.MASTER_AGENT,bn.SUPER_AGENT],[ie,Ie]=p.useState([]),[me,K]=p.useState([]),[fe,De]=p.useState(0),[Ze,Ve]=p.useState(0),[ut,Ye]=p.useState(1),[ot,te]=p.useState(1),[Xe,dt]=p.useState(10),[de,we]=p.useState(10),[se,Be]=p.useState(!1),[je,Ge]=p.useState(!1),[vt,wt]=p.useState("active"),[Nt,yt]=p.useState({}),[xt,le]=p.useState(null),[Ee,ye]=p.useState(""),[H,z]=p.useState(""),[G,ue]=p.useState("all"),[Se,Ne]=p.useState("all"),[Le,V]=p.useState("all"),ne=Q(bn.SUPER_AGENT)&&!Q(bn.MASTER_AGENT);p.useEffect(()=>{const Te=setTimeout(()=>z(Ee.trim()),300);return()=>clearTimeout(Te)},[Ee]),p.useEffect(()=>{oe&&vt!=="active"&&wt("active")},[oe,vt]),p.useEffect(()=>{!Q(bn.MASTER_AGENT)&&D.role==="super_agent"&&$({...D,role:"agent"})},[Q,D.role]);const ke=Te=>Te.replace(/[%_\\]/g,mt=>`\\${mt}`).replace(/'/g,"''"),et=D.name.trim()&&D.email.trim()&&(D.role!=="agent"||A),{agents:nt,loading:Rt,error:ht,fetchAgents:$t,createAgent:jt,updateAgentStatus:Zt,updateAgentRole:Pt,deleteAgent:Lt,setEnable2FAFlagForCreate:Dt}=ql();p.useEffect(()=>{ht&&ht!==ee.current&&(J({title:"Error",description:ht,variant:"destructive"}),ee.current=ht),ht||(ee.current=null)},[ht,J]);const Qe=Te=>{if(!Te)return null;const mt=String(Te).toLowerCase();return mt.includes("master")?"master_agent":mt.includes("super")?"super_agent":mt.includes("agent")?"agent":null},yn=async({invited:Te,page:mt,pageSize:bt,search:Ft,role:_t,activeStatus:Vn,pendingStatus:Ar})=>{try{Te?Ge(!0):Be(!0);const Nn=(mt-1)*bt,Vr=Nn+bt-1;let Ot=ce.from("v_human_agents").select("*",{count:"exact"});const Ln=Ft?ke(Ft):"";if(Ln&&(Ot=Ot.or(`agent_name.ilike.%${Ln}%,email.ilike.%${Ln}%`)),_t&&_t!=="all"){const Me=_t==="master_agent"?"%master%":_t==="super_agent"?"%super%":"%agent%";Ot=Ot.ilike("role_name",Me)}const X=Q(bn.MASTER_AGENT);if(Q(bn.SUPER_AGENT)){if(!P){Te?Ge(!1):Be(!1);return}try{let Me=ce.from("super_agent_members").select("agent_user_id").eq("super_agent_id",P);xt&&(Me=Me.eq("org_id",xt));const{data:We}=await Me,Ce=[P,...(We||[]).map(Re=>String(Re.agent_user_id)).filter(Boolean)];Ce.length>0?Ot=Ot.in("user_id",Ce):Ot=Ot.eq("user_id",P)}catch{Ot=Ot.eq("user_id",P)}}else if(!X){Te?(K([]),Ve(0),Ge(!1)):(Ie([]),De(0),Be(!1));return}Te?Ar==="expired"?Ot=Ot.eq("confirmation_status","expired"):Ar==="invited"?Ot=Ot.or("confirmation_status.is.null,confirmation_status.eq.invited,confirmation_status.eq.pending"):Ot=Ot.or("confirmation_status.is.null,confirmation_status.neq.accepted"):(Ot=Ot.eq("confirmation_status","accepted"),Vn&&Vn!=="all"&&(Ot=Ot.eq("is_active",Vn==="active")));const{data:W,count:he,error:pe}=await Ot.order("agent_name",{ascending:!0}).range(Nn,Vr);if(pe)throw pe;if(Te)K(W||[]),Ve(he||0);else{const Me=W||[];Ie(Me),De(he||0);try{const We=Me.filter(Ce=>String((Ce==null?void 0:Ce.role_name)||"").toLowerCase()==="agent").map(Ce=>Ce.user_id);if(We.length>0){let Ce=ce.from("super_agent_members").select("agent_user_id, super_agent_id").in("agent_user_id",We);xt&&(Ce=Ce.eq("org_id",xt));const{data:Re}=await Ce,Ct={};(Re||[]).forEach(Fe=>{Fe!=null&&Fe.agent_user_id&&(Ct[String(Fe.agent_user_id)]=String(Fe.super_agent_id||""))}),yt(Ct)}else yt({})}catch{yt({})}}}catch(Nn){J({title:"Error",description:(Nn==null?void 0:Nn.message)||"Failed to fetch agents",variant:"destructive"}),Te?(K([]),Ve(0)):(Ie([]),De(0))}finally{Te?Ge(!1):Be(!1)}};p.useEffect(()=>{yn({invited:!1,page:ut,pageSize:Xe,search:H,role:G,activeStatus:Se})},[ut,Xe,H,G,Se]),p.useEffect(()=>{ut!==1&&Ye(1)},[H,G,Se]),p.useEffect(()=>{vt==="pending"&&yn({invited:!0,page:ot,pageSize:de,search:H,role:G,pendingStatus:Le})},[vt,ot,de,H,G,Le]),p.useEffect(()=>{vt==="pending"&&ot!==1&&te(1)},[H,G,Le,vt]);const Wn=(Te,mt,bt,Ft,_t,Vn,Ar,Nn,Vr)=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rounded-lg border bg-card",children:[i.jsxs("div",{className:`grid gap-4 p-4 border-b bg-muted/50 font-medium text-sm ${Nn?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsx("div",{children:"Agent Name"}),i.jsx("div",{children:"Email"}),i.jsx("div",{children:"Role"}),!Nn&&i.jsx("div",{children:"Token Usage"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Action"})]}),i.jsx("div",{className:"divide-y",children:mt?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading agents..."})]})}):Te.length===0?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(wN,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",Nn?"Pending":"Active"," Agents"]}),i.jsx("p",{className:"text-muted-foreground",children:Nn?"Invited users will appear here until they sign in.":"Create your first agent to get started."})]})}):!Nn&&Vr?(()=>{const Ot=Re=>String(Re||"").toLowerCase(),Ln=Re=>Ot(Re.role_name).includes("master"),X=Re=>Ot(Re.role_name).includes("super"),_e=Re=>{const Ct=Ot(Re.role_name);return Ct==="agent"||Ct==="agent_only"},W=Te.filter(Ln),he=Te.filter(X),pe=Te.filter(_e),Me=Object.fromEntries(he.map(Re=>[String(Re.user_id),Re])),We={},Ce=[];for(const Re of pe){const Ct=Vr[String(Re.user_id)];Ct&&Me[Ct]?(We[Ct]=We[Ct]||[]).push(Re):Ce.push(Re)}return i.jsxs(i.Fragment,{children:[W.map(Re=>{const Ct="master_agent",Fe={user_id:String(Re.user_id),email:Re.email||"",display_name:Re.agent_name||Re.email||"Unknown",avatar_url:Re.avatar_url||null,timezone:null,created_at:"",roles:[Ct],primaryRole:Ct,status:Re.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-blue-50/30 dark:bg-transparent",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oa,{className:"h-8 w-8",children:i.jsx(Ia,{className:"text-xs bg-blue-100 text-blue-700",children:Mi(Fe.display_name||"U")})}),i.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:Fe.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Fe.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Tt,{className:`text-xs ${Ka(Fe.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Master Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(fc,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Fe.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(Fe.status)}`}),i.jsx("span",{className:"text-xs",children:Fe.status}),Fe.primaryRole!=="master_agent"&&i.jsx(Pa,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(ca,{onClick:()=>Kr(Fe.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ca,{onClick:()=>Kr(Fe.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(an,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ui(Fe),title:"Edit limits",children:i.jsx(Ea,{className:"h-4 w-4"})})}),Q(bn.MASTER_AGENT)&&i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(Fe),title:"View token usage",children:i.jsx(Kf,{className:"h-4 w-4"})}),Va(Fe)&&i.jsx(an,{permission:"super_agents.delete",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Z(Fe),B(!0)},children:i.jsx(ma,{className:"h-4 w-4"})})})]})]},`master-${Re.user_id}`)}),he.map(Re=>{const Ct="super_agent",Fe={user_id:String(Re.user_id),email:Re.email||"",display_name:Re.agent_name||Re.email||"Unknown",avatar_url:Re.avatar_url||null,timezone:null,created_at:"",roles:[Ct],primaryRole:Ct,status:Re.is_active?"Active":"Inactive",super_agent_id:null},Ut=We[String(Re.user_id)]||[];return i.jsxs("div",{className:"",children:[i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-green-50/30 dark:bg-transparent",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oa,{className:"h-8 w-8",children:i.jsx(Ia,{className:"text-xs bg-green-100 text-green-700",children:Mi(Fe.display_name||"U")})}),i.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:Fe.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Fe.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Tt,{className:`text-xs ${Ka(Fe.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Super Agent"})}),i.jsx("div",{className:"text-sm font-medium",children:O?"":(j[Fe.user_id]??0).toLocaleString()}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(fc,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Fe.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(Fe.status)}`}),i.jsx("span",{className:"text-xs",children:Fe.status}),Fe.primaryRole!=="master_agent"&&i.jsx(Pa,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(ca,{onClick:()=>Kr(Fe.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ca,{onClick:()=>Kr(Fe.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(an,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ui(Fe),title:"Edit limits",children:i.jsx(Ea,{className:"h-4 w-4"})})}),Q(bn.MASTER_AGENT)&&i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(Fe),title:"View token usage",children:i.jsx(Kf,{className:"h-4 w-4"})}),Va(Fe)&&i.jsx(an,{permission:"super_agents.delete",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Z(Fe),B(!0)},children:i.jsx(ma,{className:"h-4 w-4"})})})]})]}),Ut.map(At=>{const Gr="agent",Gn={user_id:String(At.user_id),email:At.email||"",display_name:At.agent_name||At.email||"Unknown",avatar_url:At.avatar_url||null,timezone:null,created_at:"",roles:[Gr],primaryRole:Gr,status:At.is_active?"Active":"Inactive",super_agent_id:Fe.user_id};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-gray-50/30 dark:bg-transparent pl-12",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 border-l-2 border-b-2 border-gray-300 rounded-bl"})}),i.jsx(Oa,{className:"h-8 w-8",children:i.jsx(Ia,{className:"text-xs bg-gray-100 text-gray-700",children:Mi(Gn.display_name||"U")})}),i.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:Gn.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Gn.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Tt,{className:`text-xs ${Ka(Gn.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(fc,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Gn.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(Gn.status)}`}),i.jsx("span",{className:"text-xs",children:Gn.status}),Gn.primaryRole!=="master_agent"&&i.jsx(Pa,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(ca,{onClick:()=>Kr(Gn.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ca,{onClick:()=>Kr(Gn.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(an,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ui(Gn),title:"Edit limits",children:i.jsx(Ea,{className:"h-4 w-4"})})}),Q(bn.MASTER_AGENT)&&i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(Gn),title:"View token usage",children:i.jsx(Kf,{className:"h-4 w-4"})}),Va(Gn)&&i.jsx(an,{permission:"super_agents.delete",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Z(Gn),B(!0)},children:i.jsx(ma,{className:"h-4 w-4"})})})]})]},`agent-${At.user_id}`)})]},`super-${Re.user_id}`)}),Ce.map(Re=>{const Ct="agent",Fe={user_id:String(Re.user_id),email:Re.email||"",display_name:Re.agent_name||Re.email||"Unknown",avatar_url:Re.avatar_url||null,timezone:null,created_at:"",roles:[Ct],primaryRole:Ct,status:Re.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-orange-50/30 dark:bg-transparent",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oa,{className:"h-8 w-8",children:i.jsx(Ia,{className:"text-xs bg-orange-100 text-orange-700",children:Mi(Fe.display_name||"U")})}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:Fe.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Fe.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Tt,{className:`text-xs ${Ka(Fe.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent (Unassigned)"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(fc,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Fe.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(Fe.status)}`}),i.jsx("span",{className:"text-xs",children:Fe.status}),Fe.primaryRole!=="master_agent"&&i.jsx(Pa,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(ca,{onClick:()=>Kr(Fe.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ca,{onClick:()=>Kr(Fe.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(an,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ui(Fe),title:"Edit limits",children:i.jsx(Ea,{className:"h-4 w-4"})})}),Q(bn.MASTER_AGENT)&&i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(Fe),title:"View token usage",children:i.jsx(Kf,{className:"h-4 w-4"})}),Va(Fe)&&i.jsx(an,{permission:"super_agents.delete",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Z(Fe),B(!0)},children:i.jsx(ma,{className:"h-4 w-4"})})})]})]},`unassigned-${Re.user_id}`)})]})})():Te.map(Ot=>{const Ln=Qe(Ot.role_name),X={user_id:String(Ot.user_id),email:Ot.email||"",display_name:Ot.agent_name||Ot.email||"Unknown",avatar_url:Ot.avatar_url||null,timezone:null,created_at:"",roles:Ln?[Ln]:[],primaryRole:Ln,status:Ot.is_active?"Active":"Inactive",super_agent_id:null},_e=String(Ot.confirmation_status||"").toLowerCase()==="expired";return i.jsxs("div",{className:`grid gap-4 p-4 items-center hover:bg-muted/30 transition-colors ${Nn?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oa,{className:"h-8 w-8",children:i.jsx(Ia,{className:"text-xs",children:Mi(X.display_name||"U")})}),i.jsx("span",{className:"font-medium",children:X.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:X.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Tt,{className:`text-xs ${Ka(X.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:X.primaryRole==="master_agent"?"Master Agent":X.primaryRole==="super_agent"?"Super Agent":"Agent"})}),!Nn&&i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:Nn?i.jsx(Tt,{className:`text-xs leading-none h-6 px-2 inline-flex items-center ${_e?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:_e?"Expired":"Invited"}):i.jsxs(dc,{children:[i.jsx(fc,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:X.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(X.status)}`}),i.jsx("span",{className:"text-xs",children:X.status}),X.primaryRole!=="master_agent"&&i.jsx(Pa,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(ca,{onClick:()=>Kr(X.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ca,{onClick:()=>Kr(X.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[!Nn&&i.jsx(an,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ui(X),title:"Edit limits",children:i.jsx(Ea,{className:"h-4 w-4"})})}),Q(bn.MASTER_AGENT)&&!Nn&&i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(X),title:"View token usage",children:i.jsx(Kf,{className:"h-4 w-4"})}),Nn?i.jsxs(i.Fragment,{children:[_e&&i.jsx(an,{permission:"super_agents.create",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{await ce.functions.invoke("admin-create-user",{body:{email:X.email,full_name:X.display_name,role:X.primaryRole||"agent",reinvite:!0}}),J({title:"Reinvite sent",description:`${X.email}`}),yn({invited:!0,page:Ft,pageSize:_t})}catch(W){J({title:"Error",description:(W==null?void 0:W.message)||"Failed to reinvite",variant:"destructive"})}},title:"Reinvite user",children:i.jsx(A4,{className:"h-4 w-4"})})}),Va(X)&&i.jsx(an,{permission:"super_agents.delete",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Z(X),B(!0)},children:i.jsx(ma,{className:"h-4 w-4"})})})]}):Va(X)&&i.jsx(an,{permission:"super_agents.delete",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Z(X),B(!0)},children:i.jsx(ma,{className:"h-4 w-4"})})})]})]},Ot.user_id)})})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:bt>0?i.jsxs("span",{children:["Showing ",Math.min((Ft-1)*_t+1,bt),"",Math.min(Ft*_t,bt)," of ",bt]}):i.jsx("span",{children:"0 results"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(Je,{className:"text-sm text-muted-foreground",children:"Rows"}),i.jsxs(rn,{value:String(_t),onValueChange:Ot=>Ar(Number(Ot)),children:[i.jsx(en,{className:"h-8 w-[100px] bg-background border",children:i.jsx(Xt,{})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"10",children:"10"}),i.jsx(at,{value:"20",children:"20"}),i.jsx(at,{value:"50",children:"50"})]})]})]}),i.jsx(O9,{children:i.jsxs(I9,{children:[i.jsx(Lv,{children:i.jsx(R9,{className:Ft<=1?"pointer-events-none opacity-50":"",onClick:()=>Ft>1&&Vn(Ft-1),href:"#"})}),i.jsx(Lv,{children:i.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",Ft," of ",Math.max(1,Math.ceil((bt||0)/Math.max(1,_t)))]})}),i.jsx(Lv,{children:i.jsx(M9,{className:Ft>=Math.max(1,Math.ceil((bt||0)/Math.max(1,_t)))?"pointer-events-none opacity-50":"",onClick:()=>Ft<Math.max(1,Math.ceil((bt||0)/Math.max(1,_t)))&&Vn(Ft+1),href:"#"})})]})})]})]})]}),Cr=async()=>{var Te,mt;if(!D.name||!D.email){J({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(D.role==="agent"&&!A){J({title:"Error",description:"Please select a Super Agent for this agent",variant:"destructive"});return}try{T(!0),Dt(U);let bt=xt||null;if(!bt)try{const{data:_t}=await ce.auth.getUser(),{data:Vn}=await ce.from("org_members").select("org_id").eq("user_id",((Te=_t==null?void 0:_t.user)==null?void 0:Te.id)||"").limit(1);bt=((mt=Vn==null?void 0:Vn[0])==null?void 0:mt.org_id)||null}catch{}const Ft=await jt({full_name:D.name,email:D.email,role:D.role,super_agent_id:D.role==="agent"&&A||null,org_id:bt});$({name:"",email:"",role:"agent"}),L(null),F(!1),t(!1),J({title:"Success",description:"Agent created successfully"})}catch(bt){J({title:"Error",description:bt instanceof Error?bt.message:"Failed to create agent",variant:"destructive"})}finally{T(!1)}},Dr=async Te=>{var mt,bt,Ft;try{if((q==null?void 0:q.primaryRole)==="master_agent"||(Ft=(bt=(mt=ie.find(_t=>String(_t.user_id)===Te))==null?void 0:mt.role_name)==null?void 0:bt.toLowerCase)!=null&&Ft.call(bt).includes("master")){J({title:"Error",description:"Master agent tidak dapat dihapus.",variant:"destructive"}),B(!1),Z(null);return}C(!0),await Lt(Te),J({title:"Success",description:"Agent deleted successfully"}),B(!1),Z(null),vt==="pending"?me.length<=1&&ot>1?te(_t=>Math.max(1,_t-1)):await yn({invited:!0,page:ot,pageSize:de,search:H,role:G,pendingStatus:Le}):ie.length<=1&&ut>1?Ye(_t=>Math.max(1,_t-1)):await yn({invited:!1,page:ut,pageSize:Xe,search:H,role:G,activeStatus:Se})}catch(_t){J({title:"Error",description:_t instanceof Error?_t.message:"Failed to delete agent",variant:"destructive"})}finally{C(!1)}},ui=async Te=>{try{l(Te);const{data:mt,error:bt}=await ce.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month, is_2fa_email_enabled").eq("user_id",Te.user_id).maybeSingle();if(bt)throw bt;f({enabled:!!(mt!=null&&mt.token_limit_enabled),perDay:Number((mt==null?void 0:mt.max_tokens_per_day)??0),perMonth:Number((mt==null?void 0:mt.max_tokens_per_month)??0),twoFA:!!(mt!=null&&mt.is_2fa_email_enabled)}),r(!0)}catch(mt){J({title:"Error",description:(mt==null?void 0:mt.message)||"Failed to load token limits",variant:"destructive"})}},ir=async()=>{if(o)try{u(!0);const{error:Te}=await ce.from("users_profile").update({token_limit_enabled:d.enabled,max_tokens_per_day:Math.max(0,Math.floor(d.perDay||0)),max_tokens_per_month:Math.max(0,Math.floor(d.perMonth||0)),is_2fa_email_enabled:d.twoFA}).eq("user_id",o.user_id);if(Te)throw Te;J({title:"Saved",description:"Token limits updated."}),r(!1)}catch(Te){J({title:"Error",description:(Te==null?void 0:Te.message)||"Failed to save token limits",variant:"destructive"})}finally{u(!1)}},Mo=Te=>{const mt=new Date;let bt;if(Te==="this_month")bt=new Date(Date.UTC(mt.getUTCFullYear(),mt.getUTCMonth(),1,0,0,0));else{const _t=Te==="7d"?7:30;bt=new Date(Date.UTC(mt.getUTCFullYear(),mt.getUTCMonth(),mt.getUTCDate(),0,0,0)),bt.setUTCDate(bt.getUTCDate()-(_t-1))}const Ft=mt;return{start:bt.toISOString(),end:Ft.toISOString()}},cr=async Te=>{try{I(!0);const mt=Lf.filter(_t=>_t.primaryRole==="super_agent").map(_t=>_t.user_id);if(mt.length===0){S({});return}let bt={};if(Te==="all")try{const{data:_t}=await ce.from("v_super_agent_token_usage").select("super_agent_id,total_tokens");for(const Vn of _t||[]){const Ar=String(Vn.super_agent_id||"");Ar&&(bt[Ar]=Number(Vn.total_tokens||0))}}catch{}else{const{start:_t,end:Vn}=Mo(Te),{data:Ar}=await ce.from("token_usage_logs").select("id,channel_id,total_tokens,made_at").gte("made_at",_t).lt("made_at",Vn),Nn=Array.from(new Set((Ar||[]).map(Ln=>Ln.channel_id).filter(Boolean)));let Vr={};if(Nn.length>0){const{data:Ln}=await ce.from("channels").select("id,super_agent_id").in("id",Nn);Vr=Object.fromEntries((Ln||[]).map(X=>[String(X.id),String(X.super_agent_id||"")]))}const Ot=new Set;for(const Ln of Ar||[]){const X=String(Ln.id);if(Ot.has(X))continue;Ot.add(X);const _e=String(Ln.channel_id||""),W=_e&&Vr[_e]||"";W&&(bt[W]=(bt[W]||0)+Number(Ln.total_tokens||0))}}const Ft={};for(const _t of mt)Ft[_t]=bt[_t]||0;S(Ft)}catch(mt){J({title:"Error",description:(mt==null?void 0:mt.message)||"Failed to load usage",variant:"destructive"})}finally{I(!1)}};p.useEffect(()=>{nt.length>0&&cr(h)},[nt,h]),p.useEffect(()=>{(async()=>{var Te,mt;try{const{data:bt}=await ce.auth.getUser();N(((Te=bt==null?void 0:bt.user)==null?void 0:Te.id)||null);try{const{data:Ft}=await ce.from("org_members").select("org_id").eq("user_id",((mt=bt==null?void 0:bt.user)==null?void 0:mt.id)||"").limit(1).maybeSingle();le((Ft==null?void 0:Ft.org_id)||null)}catch{}}catch{}})()},[]),p.useEffect(()=>{P&&(yn({invited:!1,page:ut,pageSize:Xe}),vt==="pending"&&yn({invited:!0,page:ot,pageSize:de}))},[P]);const Ha=()=>Q(bn.MASTER_AGENT)?nt:Q(bn.SUPER_AGENT)?P?nt.filter(Te=>Te.primaryRole==="super_agent"&&Te.user_id===P||Te.primaryRole==="agent"&&Te.super_agent_id===P):[]:[],Lf=p.useMemo(()=>Ha(),[nt,Q,P]),ja=async Te=>{l(Te),s(!0),await hu(Te.user_id,g)},hu=async(Te,mt)=>{var bt;try{b(!0);const{start:Ft,end:_t}=Mo(mt),Vn=((bt=nt.find(We=>We.user_id===Te))==null?void 0:bt.super_agent_id)||null,Ar=Vn?nt.filter(We=>We.primaryRole==="agent"&&We.super_agent_id===Vn).map(We=>We.user_id):[Te],{data:Nn}=await ce.from("threads").select("id").in("assignee_user_id",Ar).gte("created_at",Ft).lt("created_at",_t),Vr=(Nn||[]).map(We=>We.id),[Ot,Ln]=await Promise.all([Vr.length>0?ce.from("token_usage_logs").select("id,total_tokens").in("thread_id",Vr).gte("made_at",Ft).lt("made_at",_t):Promise.resolve({data:[]}),ce.from("token_usage_logs").select("id,total_tokens").in("user_id",Ar).gte("made_at",Ft).lt("made_at",_t)]),X=new Set;let _e=0;for(const We of[...Ot.data||[],...Ln.data||[]]){const Ce=String(We.id);X.has(Ce)||(X.add(Ce),_e+=Number(We.total_tokens||0))}y(_e);const[W,he,pe,Me]=await Promise.all([ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Ft).lt("created_at",_t).eq("assignee_user_id",Te),ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Ft).lt("created_at",_t).eq("assigned_by_user_id",Te),ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Ft).lt("created_at",_t).eq("resolved_by_user_id",Te),ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Ft).lt("created_at",_t).eq("assignee_user_id",Te).not("ai_handoff_at","is",null)]);k({assignedTo:W.count||0,assignedBy:he.count||0,resolvedBy:pe.count||0,handoverFromAI:Me.count||0})}catch(Ft){y(null),k(null),J({title:"Error",description:(Ft==null?void 0:Ft.message)||"Failed to load usage",variant:"destructive"})}finally{b(!1)}},Kr=async(Te,mt)=>{try{const{error:bt}=await ce.from("users_profile").update({is_active:mt==="Active"}).eq("user_id",Te);if(bt)throw bt;J({title:"Success",description:`Status changed to ${mt}`}),await $t()}catch(bt){J({title:"Error",description:(bt==null?void 0:bt.message)||"Failed to change status",variant:"destructive"})}},Mi=Te=>Te.split(" ").map(mt=>mt[0]).join("").toUpperCase().slice(0,2),qs=Te=>Te==="Active"?"bg-green-500":"bg-gray-400",Ka=Te=>Te==="master_agent"?"bg-blue-100 text-blue-700":Te==="super_agent"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700",Va=Te=>!(!Te||Te.primaryRole==="master_agent"||ne&&P&&Te.user_id===P);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Human Agent Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your human agents"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(Je,{className:"text-sm text-muted-foreground",children:"Usage"}),i.jsxs(rn,{value:h,onValueChange:async Te=>{const mt=Te;m(mt);try{await cr(mt)}catch{}},children:[i.jsx(en,{className:"h-8 w-[160px] bg-background border",children:i.jsx(Xt,{placeholder:"Range"})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"all",children:"All time"}),i.jsx(at,{value:"7d",children:"Last 7 days"}),i.jsx(at,{value:"30d",children:"Last 30 days"}),i.jsx(at,{value:"this_month",children:"This month"})]})]})]}),!oe&&i.jsx(an,{permission:"users_profile.create",fallback:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:i.jsxs(re,{className:"gap-2 bg-blue-600 text-white",disabled:!0,children:[i.jsx(Ms,{className:"h-4 w-4"}),"Create Agent"]})})}),i.jsx(ve,{children:i.jsx("p",{children:"You do not have permission to create agents."})})]}),children:i.jsxs(wn,{open:e,onOpenChange:t,children:[i.jsx(lC,{asChild:!0,children:i.jsxs(re,{className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(Ms,{className:"h-4 w-4"}),"Create Agent"]})}),i.jsxs(hn,{className:"sm:max-w-md bg-background border",children:[i.jsx(mn,{children:i.jsx(pn,{children:"Create New Agent"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"agent-name",children:["Agent Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(it,{id:"agent-name",value:D.name,onChange:Te=>$({...D,name:Te.target.value}),placeholder:"Enter agent name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"agent-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(it,{id:"agent-email",type:"email",value:D.email,onChange:Te=>$({...D,email:d3e(Te.target.value)}),onKeyDown:Te=>{Te.key===" "&&Te.preventDefault()},placeholder:"Enter email address"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"agent-phone",children:"Phone (Optional)"}),i.jsx(it,{id:"agent-phone",type:"tel",value:D.phone||"",onChange:Te=>$({...D,phone:Te.target.value}),placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[i.jsx(Bd,{id:"agent-2fa",checked:U,onCheckedChange:Te=>F(!!Te)}),i.jsx(Je,{htmlFor:"agent-2fa",className:"text-sm",children:"Enable email 2FA for this agent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{htmlFor:"agent-role",children:"Role"}),!Q(bn.MASTER_AGENT)&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Hanya Master Agent yang dapat membuat Super Agent"})})]})]}),i.jsxs(rn,{value:D.role,onValueChange:Te=>$({...D,role:Te}),children:[i.jsx(en,{className:"bg-background border",children:i.jsx(Xt,{})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"agent",children:"Agent"}),Q(bn.MASTER_AGENT)&&i.jsx(at,{value:"super_agent",children:"Super Agent"})]})]})]}),D.role==="agent"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{children:["Attach to Super Agent ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs(rn,{value:A||"",onValueChange:Te=>L(Te),children:[i.jsx(en,{className:"bg-background border",children:i.jsx(Xt,{placeholder:"Select Super Agent"})}),i.jsx(tn,{className:"bg-background border z-50",children:nt.filter(Te=>Te.primaryRole==="super_agent").map(Te=>i.jsx(at,{value:Te.user_id,children:Te.display_name||Te.email},Te.user_id))})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Fields marked with ",i.jsx("span",{className:"text-red-500",children:"*"})," are required."]}),D.role==="agent"&&i.jsx("p",{className:"mt-1",children:"Agents must be attached to a Super Agent."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(re,{onClick:Cr,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:M||!et,children:M?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):"Create Agent"}),i.jsx(re,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:M,children:"Cancel"})]})]})]})]})})]})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-64",children:[i.jsx(rs,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(it,{value:Ee,onChange:Te=>ye(Te.target.value),placeholder:"Search name or email",className:"pl-9"})]}),!oe&&i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(rn,{value:G,onValueChange:Te=>ue(Te),children:[i.jsx(en,{className:"w-[150px] bg-background border",children:i.jsx(Xt,{placeholder:"Role"})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"all",children:"All roles"}),i.jsx(at,{value:"master_agent",children:"Master Agent"}),i.jsx(at,{value:"super_agent",children:"Super Agent"}),i.jsx(at,{value:"agent",children:"Agent"})]})]}),vt==="pending"?i.jsxs(rn,{value:Le,onValueChange:Te=>V(Te),children:[i.jsx(en,{className:"w-[150px] bg-background border",children:i.jsx(Xt,{placeholder:"Invitation status"})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"all",children:"All invitations"}),i.jsx(at,{value:"invited",children:"Invited"}),i.jsx(at,{value:"expired",children:"Expired"})]})]}):i.jsxs(rn,{value:Se,onValueChange:Te=>Ne(Te),children:[i.jsx(en,{className:"w-[150px] bg-background border",children:i.jsx(Xt,{placeholder:"Status"})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"all",children:"All statuses"}),i.jsx(at,{value:"active",children:"Active"}),i.jsx(at,{value:"inactive",children:"Inactive"})]})]})]})]}),i.jsxs(Uc,{value:vt,onValueChange:Te=>wt(Te),className:"space-y-6",children:[i.jsxs(Tl,{className:`grid w-full max-w-md ${oe?"grid-cols-1":"grid-cols-2"}`,children:[i.jsxs(jr,{value:"active",className:"gap-2",children:[i.jsx(JV,{className:"h-4 w-4"}),"Active"]}),!oe&&i.jsxs(jr,{value:"pending",className:"gap-2",children:[i.jsx(QV,{className:"h-4 w-4"}),"Pending"]})]}),i.jsx(sr,{value:"active",className:"space-y-4",children:Wn(ie,se||Rt,fe,ut,Xe,Ye,dt,!1,Nt)}),!oe&&i.jsx(sr,{value:"pending",className:"space-y-4",children:Wn(me,je,Ze,ot,de,te,we,!0)})]}),i.jsx(wn,{open:E,onOpenChange:Te=>{R||B(Te)},children:i.jsxs(hn,{className:"sm:max-w-md bg-background border",children:[i.jsx(mn,{children:i.jsx(pn,{children:"Delete Agent"})}),i.jsxs("div",{className:"space-y-3 py-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to permanently delete ",(q==null?void 0:q.display_name)||"this agent","? This will remove their profile and role assignments. This action cannot be undone."]}),i.jsxs("div",{className:"rounded-md border p-3 bg-muted/30 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(q==null?void 0:q.display_name)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",(q==null?void 0:q.email)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(q==null?void 0:q.primaryRole)||""]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(re,{variant:"destructive",className:"flex-1",onClick:()=>q&&Dr(q.user_id),disabled:R,children:R?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"}),i.jsx(re,{variant:"outline",className:"flex-1",onClick:()=>B(!1),disabled:R,children:"Cancel"})]})]})]})}),i.jsx(wn,{open:n,onOpenChange:r,children:i.jsxs(hn,{className:"sm:max-w-md bg-background border",children:[i.jsx(mn,{children:i.jsxs(pn,{children:["Token Limits",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Je,{className:"text-sm font-medium",children:"Enable Limits"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Block token-consuming actions when exceeded."})]}),i.jsx(Es,{checked:d.enabled,onCheckedChange:Te=>f({...d,enabled:!!Te})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Je,{className:"text-sm font-medium",children:"Require Email 2FA"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"User must enter a one-time code at sign-in."})]}),i.jsx(Es,{checked:d.twoFA,onCheckedChange:Te=>f({...d,twoFA:!!Te})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"limit-day",children:"Max Tokens / Day"}),i.jsx(it,{id:"limit-day",type:"number",min:0,placeholder:"0",value:d.perDay===0?"":d.perDay,onChange:Te=>f({...d,perDay:Number(Te.target.value||"0")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"limit-month",children:"Max Tokens / Month"}),i.jsx(it,{id:"limit-month",type:"number",min:0,placeholder:"0",value:d.perMonth===0?"":d.perMonth,onChange:Te=>f({...d,perMonth:Number(Te.target.value||"0")})})]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{onClick:ir,disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:"Save"})}),i.jsx(ve,{children:i.jsx("p",{children:"Simpan batas token"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})}),i.jsx(ve,{children:i.jsx("p",{children:"Batal"})})]})]})]})]})}),i.jsx(wn,{open:a,onOpenChange:s,children:i.jsxs(hn,{className:"sm:max-w-md bg-background border",children:[i.jsx(mn,{children:i.jsxs(pn,{children:["Token Usage",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{children:"Timeframe"}),i.jsxs(rn,{value:g,onValueChange:async Te=>{const mt=Te;v(mt),o&&await hu(o.user_id,mt)},children:[i.jsx(en,{className:"bg-background border",children:i.jsx(Xt,{})}),i.jsxs(tn,{className:"bg-background border z-50",children:[i.jsx(at,{value:"7d",children:"Last 7 days"}),i.jsx(at,{value:"30d",children:"Last 30 days"}),i.jsx(at,{value:"this_month",children:"This month"})]})]})]}),i.jsxs("div",{className:"rounded-md border p-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tokens"}),i.jsx("div",{className:"text-2xl font-bold",children:w?"":(x==null?void 0:x.toLocaleString())??0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Assigned To Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.assignedTo)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Takeovers Initiated"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.assignedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved by Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.resolvedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"AIAgent Handovers"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.handoverFromAI)??0})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",onClick:()=>s(!1),children:"Close"})}),i.jsx(ve,{children:i.jsx("p",{children:"Tutup"})})]})})]})]})})]})},f3e=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),cD=e=>e==="read_own"?"Own":e==="read_all"?"All":e==="read_channel_owned"?"My Channels":e==="read_collaborator"?"Collaborator":e==="read"?"Read":e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),h3e=({permissions:e,assignedPermissionIds:t,onToggle:n,isReadOnly:r=!1,className:a})=>{const[s,o]=p.useState(""),[l,c]=p.useState({}),[u,d]=p.useState(new Set),f=p.useMemo(()=>{const y={};return e.forEach(w=>{y[w.resource]||(y[w.resource]={}),y[w.resource][w.action]=w}),y},[e]),h=p.useMemo(()=>{const y=s.toLowerCase().trim();return y?Object.keys(Ju).filter(w=>w.toLowerCase().includes(y)?!0:Ju[w].some(_=>_.toLowerCase().includes(y))):Object.keys(Ju)},[s]),m=async(y,w)=>{if(!(r||u.has(y)))try{d(b=>new Set(b).add(y)),await n(y,w)}catch(b){console.error("Failed to toggle permission",b)}finally{d(b=>{const _=new Set(b);return _.delete(y),_})}},g=async(y,w)=>{if(r||l[y])return;const b=w.map(j=>{var S;return(S=f[y])==null?void 0:S[j]}).filter(j=>!!j);if(b.length===0)return;const k=!b.every(j=>t.includes(j.id));c(j=>({...j,[y]:!0}));try{const j=w.filter($=>$==="read"||$.startsWith("read_")),S=b.filter($=>!j.includes($.action)),O=b.filter($=>j.includes($.action)),P=["read_own","read_channel_owned","read_collaborator","read_all","read"].findLast($=>O.some(U=>U.action===$))||null,N=[];if(k){for(const $ of S)t.includes($.id)||N.push(n($.id,!0));for(const $ of O){const U=P?$.action===P:!1;t.includes($.id)!==U&&N.push(n($.id,U))}}else for(const $ of[...S,...O])t.includes($.id)&&N.push(n($.id,!1));const D=5;for(let $=0;$<N.length;$+=D)await Promise.all(N.slice($,$+D))}catch(j){console.error(`Failed to bulk toggle for ${y}`,j)}finally{c(j=>({...j,[y]:!1}))}},v=(y,w,b,_=!1)=>{var P;const k=(P=f[y])==null?void 0:P[w];if(!k)return null;const j=t.includes(k.id),S=ite(w),O=u.has(k.id)||l[y],I=b||cD(w);return i.jsxs("div",{className:Pe("flex items-center justify-between p-2 rounded-md transition-colors text-sm",j?"bg-primary/5":"hover:bg-muted/50",S&&j&&"bg-red-50 dark:bg-red-950/20"),children:[i.jsx("div",{className:"flex items-center gap-2 flex-1",children:i.jsxs(Je,{htmlFor:k.id,className:Pe("cursor-pointer font-medium flex items-center gap-2",S?"text-red-600 dark:text-red-400":"text-foreground"),children:[I,S&&_&&i.jsx(eo,{className:"h-3 w-3 text-red-500"})]})}),i.jsx(Es,{id:k.id,checked:j,onCheckedChange:N=>m(k.id,N),disabled:r||O,className:Pe(S&&j&&"data-[state=checked]:bg-red-500")})]},w)},x=(y,w)=>{const b=w.filter(O=>O==="read"||O.startsWith("read_"));if(b.length===0)return null;const k=["read_own","read_channel_owned","read_collaborator","read_all","read"].filter(O=>b.includes(O)),j=k.findLast(O=>{var P,N;const I=(N=(P=f[y])==null?void 0:P[O])==null?void 0:N.id;return I?t.includes(I):!1})||null,S=async O=>{var P,N;if(r)return;const I=[];for(const D of k){const $=(P=f[y])==null?void 0:P[D];if(!$)continue;const U=t.includes($.id),F=O===D;U!==F&&I.push(n($.id,F))}if(O===null)for(const D of k){const $=(N=f[y])==null?void 0:N[D];if(!$)continue;t.includes($.id)&&I.push(n($.id,!1))}await Promise.all(I)};return i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-md border p-1 bg-muted/30",children:[i.jsx(re,{size:"sm",variant:j===null?"default":"ghost",className:Pe("h-7 text-xs"),onClick:()=>S(null),disabled:r,children:"None"}),k.map(O=>{const I=cD(O),P=y==="threads"&&(O==="read_channel_owned"||O==="read_collaborator")||y==="messages"&&O==="read_collaborator",N=y==="threads"&&O==="read_channel_owned"?"Can view threads that belong to channels assigned to this agent.":y==="threads"&&O==="read_collaborator"?"Can view threads where the user is directly involved (assignee, creator, resolver, or collaborator).":y==="messages"&&O==="read_collaborator"?"Can view messages in threads where the user is involved as collaborator or assignee.":"",D=i.jsx(re,{size:"sm",variant:j===O?"default":"ghost",className:Pe("h-7 text-xs"),onClick:()=>S(O),disabled:r,children:I},O);return P?i.jsx(e1,{children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:D}),i.jsx(ve,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:N})})]})},O):D})]})})};return i.jsxs("div",{className:Pe("space-y-6",a),children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur pb-4 pt-2",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(rs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(it,{placeholder:"Search resources or actions...",value:s,onChange:y=>o(y.target.value),className:"pl-9 bg-background"})]})}),i.jsxs("div",{className:"columns-1 md:columns-2 xl:columns-3 gap-6 space-y-6",children:[h.map(y=>{const w=Ju[y],b=w.map(N=>{var D;return(D=f[y])==null?void 0:D[N]}).filter(Boolean);if(b.length===0)return null;const _=b.every(N=>t.includes(N==null?void 0:N.id)),k=l[y],j=w.filter(N=>{const D=Rw(N);return["create","update","delete"].includes(D)}),S=w.filter(N=>Rw(N)==="read"),O=w.filter(N=>Rw(N)==="special"),I=S.filter(N=>N==="read"||N.startsWith("read_")),P=S.filter(N=>!I.includes(N));return i.jsx("div",{className:"break-inside-avoid mb-6",children:i.jsxs(Ue,{className:Pe("h-full border-t-4 shadow-sm",_?"border-t-primary":"border-t-muted"),children:[i.jsx(ft,{className:"pb-3 bg-muted/30 pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ct,{className:"text-base font-semibold flex items-center gap-2",children:[y==="security"?i.jsx(lm,{className:"h-4 w-4 text-orange-500"}):y==="analytics"?i.jsx(rs,{className:"h-4 w-4 text-blue-500"}):i.jsx(ho,{className:"h-4 w-4 text-muted-foreground"}),f3e(y)]}),!r&&i.jsx(re,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground hover:text-primary",onClick:()=>g(y,w),disabled:k,children:k?"...":_?"Unselect All":"Select All"})]})}),i.jsxs(lt,{className:"pt-4 space-y-4",children:[j.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Manage"}),i.jsx("div",{className:"grid gap-1",children:j.map(N=>v(y,N,y==="admin_panel"&&N==="update"?"Update Settings":void 0))})]}),S.length>0&&i.jsxs("div",{className:Pe(j.length>0&&"pt-2 border-t"),children:[i.jsx("div",{className:"flex items-center justify-between mb-2 mt-2",children:i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:"Access Level"})}),I.length>0&&x(y,w),P.length>0&&i.jsx("div",{className:"mt-2 grid gap-1",children:P.map(N=>v(y,N))})]}),O.length>0&&i.jsxs("div",{className:Pe((j.length>0||S.length>0)&&"pt-2 border-t"),children:[i.jsx("h4",{className:"text-xs font-semibold text-orange-600/80 dark:text-orange-400/80 uppercase tracking-wider mb-2 mt-2 flex items-center gap-1",children:"Special Actions"}),i.jsx("div",{className:"grid gap-1",children:O.map(N=>{const $=v(y,N,y==="alerts"&&N==="ack"?"Acknowledge":y==="messages"&&N==="send"?"Send":void 0,!0);return y==="alerts"&&N==="ack"&&$?i.jsx(e1,{children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("div",{children:$})}),i.jsx(ve,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:"Mark alerts as acknowledged on behalf of this role."})})]})},N):$})})]})]})]})},y)}),h.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-lg",children:[i.jsx(rs,{className:"h-10 w-10 text-muted-foreground mb-3"}),i.jsx("h3",{className:"text-lg font-medium",children:"No matching permissions"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Try adjusting your search terms."})]})]})]})},m3e=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[d,f]=p.useState("roles"),{toast:h}=nu(),{refreshRBAC:m,hasPermission:g,hasRole:v}=Ir(),[x,y]=p.useState({}),[w,b]=p.useState(!1),[_,k]=p.useState(null),[j,S]=p.useState(""),[O,I]=p.useState(""),[P,N]=p.useState(!1),[D,$]=p.useState(!1),[U,F]=p.useState(null),[M,T]=p.useState(!1),A=(c==null?void 0:c.name)==="master_agent",L=g("roles.create"),E=g("roles.update"),B=g("roles.delete"),R=g("roles.update"),C=g("roles.update"),q=async()=>{try{l(!0);const{data:K,error:fe}=await ce.from("roles").select("*").order("name");if(fe)throw fe;t(K||[]);const{data:De,error:Ze}=await ce.from("permissions").select("*").order("resource",{ascending:!0});if(Ze)throw Ze;r(De||[]);const{data:Ve,error:ut}=await ce.from("role_permissions").select("*");if(ut)throw ut;s(Ve||[])}catch(K){console.error("Error fetching RBAC data:",K),h({title:"Error",description:"Failed to fetch permissions data",variant:"destructive"})}finally{l(!1)}};p.useEffect(()=>{q()},[]);const Z=()=>{k(null),S(""),I(""),b(!0)},J=K=>{k(K),S(K.name),I(K.description),b(!0)},ee=async()=>{try{if(N(!0),_){if(!E){h({title:"Forbidden",description:"You do not have permission to update roles",variant:"destructive"});return}const{error:K}=await ce.from("roles").update({name:j,description:O}).eq("id",_.id);if(K)throw K;try{await nn({action:"roles.update",resource:"roles",resourceId:_.id,context:{name:j}})}catch{}h({title:"Saved",description:"Role updated"})}else{if(!L){h({title:"Forbidden",description:"You do not have permission to create roles",variant:"destructive"});return}const{data:K,error:fe}=await ce.from("roles").insert([{name:j,description:O}]).select("id").single();if(fe)throw fe;try{await nn({action:"roles.create",resource:"roles",resourceId:(K==null?void 0:K.id)??null,context:{name:j}})}catch{}h({title:"Created",description:"Role created"})}b(!1),await q()}catch{h({title:"Error",description:"Failed to save role",variant:"destructive"})}finally{N(!1)}},ae=async K=>{try{if(!B){h({title:"Forbidden",description:"You do not have permission to delete roles",variant:"destructive"});return}y(De=>({...De,[K.id]:!0})),T(!0),await ce.from("role_permissions").delete().eq("role_id",K.id),await ce.from("user_roles").delete().eq("role_id",K.id);const{error:fe}=await ce.from("roles").delete().eq("id",K.id);if(fe)throw fe;try{await nn({action:"roles.delete",resource:"roles",resourceId:K.id})}catch{}h({title:"Deleted",description:"Role deleted"}),$(!1),F(null),await q()}catch{h({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{y(fe=>({...fe,[K.id]:!1})),T(!1)}},Q=(K,fe)=>a.some(De=>De.role_id===K&&De.permission_id===fe),oe=p.useRef(null),ge=()=>{oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{m().catch(()=>{})},250)},ie=async(K,fe)=>{try{const De=Q(K,fe),Ze=`${K}:${fe}`;if(y(Ve=>({...Ve,[Ze]:!0})),De){if(!C){h({title:"Forbidden",description:"You do not have permission to revoke role permissions",variant:"destructive"});return}const{error:Ve}=await ce.rpc("revoke_role_permission",{p_role:K,p_perm:fe});if(Ve)throw Ve;s(ut=>ut.filter(Ye=>!(Ye.role_id===K&&Ye.permission_id===fe)));try{await nn({action:"rbac.revoke",resource:"rbac",context:{role_id:K,permission_id:fe}})}catch{}}else{if(!R){h({title:"Forbidden",description:"You do not have permission to grant role permissions",variant:"destructive"});return}const{error:Ve}=await ce.rpc("grant_role_permission",{p_role:K,p_perm:fe});if(Ve)throw Ve;s(ut=>[...ut,{role_id:K,permission_id:fe}]);try{await nn({action:"rbac.grant",resource:"rbac",context:{role_id:K,permission_id:fe}})}catch{}}ge(),h({title:"Success",description:`Permission ${De?"removed from":"added to"} role`})}catch(De){console.error("Error updating role permission:",De),h({title:"Error",description:"Failed to update permission",variant:"destructive"})}finally{const De=`${K}:${fe}`;y(Ze=>({...Ze,[De]:!1}))}},Ie=K=>a.filter(De=>De.role_id===K).length,me=K=>K.replace("_"," ").toUpperCase();return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsx(an,{permission:"roles.create",children:i.jsxs(re,{onClick:Z,children:[i.jsx(Ms,{className:"h-4 w-4 mr-2"})," New Role"]})})]}),i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ho,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading roles..."})]})})]}):d==="roles"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsxs(re,{onClick:Z,disabled:!L,title:L?void 0:"No permission: roles.create",children:[i.jsx(Ms,{className:"h-4 w-4 mr-2"})," New Role"]})]}),i.jsxs(Ue,{className:"pt-2",children:[i.jsxs(ft,{children:[i.jsx(ct,{children:"Roles"}),i.jsx(Ni,{children:"Click on a role to manage its permissions"})]}),i.jsx(lt,{children:i.jsxs(Hb,{children:[i.jsx(Kb,{children:i.jsxs(so,{children:[i.jsx(er,{children:"Role Name"}),i.jsx(er,{children:"Description"}),i.jsx(er,{children:"Permissions"}),i.jsx(er,{children:"Actions"})]})}),i.jsx(Vb,{children:e.map(K=>i.jsxs(so,{children:[i.jsx(qn,{className:"font-medium",children:i.jsx(Tt,{variant:"outline",children:me(K.name)})}),i.jsx(qn,{children:K.description}),i.jsx(qn,{children:i.jsxs(Tt,{variant:"secondary",children:[Ie(K.id)," permissions"]})}),i.jsx(qn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(an,{permission:"roles.read",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{u(K),f("configure")},children:[i.jsx(fo,{className:"h-4 w-4 mr-2"}),"Configure"]})}),i.jsx(ve,{children:i.jsx("p",{children:"Konfigurasi aturan akses untuk peran ini"})})]})}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(an,{permission:"roles.update",children:i.jsx(re,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>J(K),"aria-label":"Edit role",children:i.jsx(Ea,{className:"h-4 w-4"})})})}),i.jsx(ve,{children:i.jsx("p",{children:"Edit peran ini"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(an,{permission:"roles.delete",children:i.jsx(re,{size:"sm",onClick:()=>{F(K),$(!0)},disabled:!!x[K.id],className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white","aria-label":"Delete role",children:i.jsx(ma,{className:"h-4 w-4"})})})}),i.jsx(ve,{children:i.jsx("p",{children:"Hapus peran ini"})})]})]})})]},K.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ue,{children:[i.jsxs(ft,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium",children:"Total Roles"}),i.jsx(ho,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),i.jsxs(Ue,{children:[i.jsxs(ft,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium",children:"Total Permissions"}),i.jsx(fo,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(lt,{children:i.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),i.jsxs(Ue,{children:[i.jsxs(ft,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium",children:"Resources"}),i.jsx(fo,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(lt,{children:[i.jsx("div",{className:"text-2xl font-bold",children:new Set(n.map(K=>K.resource)).size}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique resources"})]})]})]}),i.jsx(an,{permission:"roles.update",children:i.jsx(wn,{open:w,onOpenChange:b,children:i.jsxs(hn,{children:[i.jsx(mn,{children:i.jsx(pn,{children:_?"Edit Role":"Create Role"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Je,{htmlFor:"rname",children:"Name"}),i.jsx(it,{id:"rname",value:j,onChange:K=>S(K.target.value),placeholder:"e.g. Super Agent"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Je,{htmlFor:"rdesc",children:"Description"}),i.jsx(it,{id:"rdesc",value:O,onChange:K=>I(K.target.value),placeholder:"Optional"})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(re,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),i.jsx(re,{onClick:ee,disabled:P||!j.trim()||(_?!E:!L),title:_?E?void 0:"No permission: roles.update":L?void 0:"No permission: roles.create",children:P?"Saving":"Save"})]})]})]})})}),i.jsx(an,{permission:"roles.delete",children:i.jsx(wn,{open:D,onOpenChange:$,children:i.jsxs(hn,{children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Delete Role"}),i.jsxs(zr,{children:["This will permanently delete the role",U?` "${me(U.name)}"`:""," and all its permissions."]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(re,{variant:"outline",onClick:()=>$(!1),disabled:M,children:"Cancel"}),i.jsx(re,{variant:"destructive",onClick:()=>U&&ae(U),disabled:M||!B,title:B?void 0:"No permission: roles.delete",children:M?"Deleting":"Delete"})]})]})})})]}):d==="configure"&&c?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(re,{variant:"ghost",onClick:()=>f("roles"),className:"mb-2",children:" Back to Roles"}),i.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Configure ",me(c.name)]}),i.jsx("p",{className:"text-muted-foreground",children:c.description})]})}),A&&i.jsx(Ue,{children:i.jsxs(ft,{children:[i.jsx(ct,{children:"Root Role"}),i.jsx(Ni,{children:"Master Agent is a root role with full privileges across the system."})]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Permission Matrix"}),i.jsx(h3e,{permissions:n,assignedPermissionIds:a.filter(K=>K.role_id===c.id).map(K=>K.permission_id),onToggle:async(K,fe)=>{Q(c.id,K)!==fe&&await ie(c.id,K)},isReadOnly:!R&&!C})]})]}):null},p3e={maxSize:100,dedupeWindow:1e3,batchWindow:100,maxBatchSize:10};class g3e{constructor(t={}){Gt(this,"queue",[]);Gt(this,"processing",!1);Gt(this,"pendingRequests",new Map);Gt(this,"config");this.config={...p3e,...t}}async enqueue(t,n={operation:"read"}){const{operation:r="read",endpoint:a,priority:s=0,dedupeKey:o}=n,l=o||this.generateDedupeKey(t,a),c=this.pendingRequests.get(l);if(c)return c;if(this.queue.length>=this.config.maxSize){this.queue.sort((g,v)=>v.priority-g.priority);const m=this.queue.pop();m&&m.reject(new Error("Request queue full"))}let u,d;const f=new Promise((m,g)=>{u=m,d=g});this.pendingRequests.set(l,f);const h={id:l,fn:t,priority:s,timestamp:Date.now(),operation:r,endpoint:a,resolve:u,reject:d};return this.queue.push(h),this.queue.sort((m,g)=>g.priority-m.priority),this.processQueue(),f.finally(()=>{this.pendingRequests.delete(l)}),f}async processQueue(){if(!(this.processing||this.queue.length===0)){this.processing=!0;try{for(;this.queue.length>0;){const t=this.getBatch();if(t.length===1){const n=t[0];try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}else await Promise.allSettled(t.map(async n=>{try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}))}}finally{this.processing=!1}}}getBatch(){if(this.queue.length===0)return[];const t=Date.now(),n=[],r=this.queue[0];for(let a=0;a<this.queue.length&&n.length<this.config.maxBatchSize;a++){const s=this.queue[a],o=t-s.timestamp;s.operation===r.operation&&o<=this.config.batchWindow&&(!r.endpoint||s.endpoint===r.endpoint)&&n.push(s)}return n.forEach(a=>{const s=this.queue.findIndex(o=>o.id===a.id);s>=0&&this.queue.splice(s,1)}),n}generateDedupeKey(t,n){return`${t.toString()}:${n||""}`.slice(0,100)}debounce(t,n=300,r={}){return new Promise((a,s)=>{let o=null,l=Date.now();const c=async()=>{try{const d=await this.enqueue(t,{...r,dedupeKey:`debounce:${r.endpoint||"default"}`});a(d)}catch(d){s(d)}},u=()=>{o&&clearTimeout(o),o=setTimeout(()=>{Date.now()-l>=n?c():u()},n)};u()})}getStats(){return{queueLength:this.queue.length,pendingRequests:this.pendingRequests.size,processing:this.processing}}clear(){this.queue.forEach(t=>{t.reject(new Error("Queue cleared"))}),this.queue=[],this.pendingRequests.clear()}}const uD=new g3e,dD=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],mi=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:t})})]})]});function v3e(){const[e,t]=p.useState(ln.getStats()),[n,r]=p.useState(null),[a,s]=p.useState(uD.getStats()),[o,l]=p.useState(io.getStats()),[c,u]=p.useState(0),{hasPermission:d}=Ir(),[f,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,w]=p.useState(!1),[b,_]=p.useState(!1),[k,j]=p.useState(!1),[S,O]=p.useState(!1),[I,P]=p.useState(!1),[N,D]=p.useState(""),[$,U]=p.useState(ln.getConfig()),[F,M]=p.useState(ln.getConfig()),[T,A]=p.useState(Ht.getConfig()),[L,E]=p.useState(Ht.getConfig()),B=H=>Number.isFinite(H)?H.toFixed(3).replace(/\.?0+$/,""):"",[R,C]=p.useState(()=>B(Ht.getConfig().minMultiplier)),[q,Z]=p.useState(()=>B(Ht.getConfig().maxMultiplier)),[J,ee]=p.useState({read:Ht.getMultiplier("read"),write:Ht.getMultiplier("write"),rpc:Ht.getMultiplier("rpc"),auth:Ht.getMultiplier("auth")});d("admin_panel.update"),p.useEffect(()=>{const H=setInterval(()=>{t(ln.getStats()),s(uD.getStats()),l(io.getStats()),U(ln.getConfig()),A(Ht.getConfig()),ee({read:Ht.getMultiplier("read"),write:Ht.getMultiplier("write"),rpc:Ht.getMultiplier("rpc"),auth:Ht.getMultiplier("auth")})},1e3),z=()=>{t(ln.getStats()),u(G=>G+1)};return ln.on("stateChange",z),ln.on("failure",z),ln.on("success",z),ae(),()=>{clearInterval(H),ln.off(z)}},[]);const ae=async()=>{try{const H=await u3();r(H)}catch(H){console.error("Failed to load metrics:",H)}},Q=H=>{switch(H){case ac.CLOSED:return"bg-green-100 text-green-800 border-green-200";case ac.OPEN:return"bg-red-100 text-red-800 border-red-200";case ac.HALF_OPEN:return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},oe=H=>{switch(H){case ac.CLOSED:return i.jsx(yh,{className:"h-5 w-5 text-green-600"});case ac.OPEN:return i.jsx(eo,{className:"h-5 w-5 text-red-600"});case ac.HALF_OPEN:return i.jsx(MT,{className:"h-5 w-5 text-yellow-600"});default:return null}},ge=()=>{h(!0)},ie=()=>{ln.reset(),t(ln.getStats()),u(H=>H+1),h(!1),D(" Circuit breaker berhasil direset!"),O(!0)},Ie=()=>{g(!0)},me=()=>{ln.open(),t(ln.getStats()),u(H=>H+1),g(!1),D(" Circuit breaker telah dibuka! Semua request database akan diblokir."),O(!0)},K=()=>{x(!0)},fe=async()=>{try{await ym.forceFlush(),x(!1),D(" Metrik berhasil dikirim ke database!"),O(!0)}catch(H){x(!1),D(" Gagal mengirim metrik: "+(H instanceof Error?H.message:"Unknown error")),P(!0)}},De=()=>{M(ln.getConfig()),w(!0)},Ze=()=>{ln.updateConfig(F),U(ln.getConfig()),w(!1),D(" Konfigurasi circuit breaker berhasil diperbarui!"),O(!0)},Ve=()=>{const H=Ht.getConfig();E(H),C(B(H.minMultiplier)),Z(B(H.maxMultiplier)),_(!0)},ut=()=>{Ht.updateConfig(L),A(Ht.getConfig()),ee({read:Ht.getMultiplier("read"),write:Ht.getMultiplier("write"),rpc:Ht.getMultiplier("rpc"),auth:Ht.getMultiplier("auth")}),_(!1),D(" Konfigurasi adaptive rate limiter berhasil diperbarui!"),O(!0)},Ye=e.totalRequests>0?((e.totalRequests-e.failures)/e.totalRequests*100).toFixed(1):"0",ot=L.baseConfig.read.limit,te=L.baseConfig.write.limit,Xe=L.baseConfig.rpc.limit,dt=L.baseConfig.auth.limit,de=L.minMultiplier,we=L.maxMultiplier,se=L.healthyLatencyThreshold,Be=L.stressLatencyThreshold,je=L.adjustmentInterval,Ge=Number.isFinite(ot)&&ot>=10&&ot<=1e3,vt=Number.isFinite(te)&&te>=5&&te<=500,wt=Number.isFinite(Xe)&&Xe>=5&&Xe<=200,Nt=Number.isFinite(dt)&&dt>=2&&dt<=100,yt=Number.isFinite(de)&&de>=.1&&de<=1,xt=Number.isFinite(we)&&we>=1&&we<=5,le=Number.isFinite(se)&&se>=50&&se<=1e3,Ee=Number.isFinite(Be)&&Be>=500&&Be<=1e4,ye=Number.isFinite(je)&&je>=1e4&&je<=6e5;return Array.from({length:10},(H,z)=>({time:new Date(Date.now()-(9-z)*6e4).toLocaleTimeString(),requests:Math.floor(Math.random()*50)+10,failures:Math.floor(Math.random()*5)})),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Circuit Breaker Status"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor database protection and performance"})]}),i.jsxs(re,{variant:"outline",size:"sm",onClick:ae,children:[i.jsx(Jx,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Circuit State",description:"Status circuit breaker saat ini: CLOSED (normal, semua request diizinkan), OPEN (terhenti, memblokir semua request untuk melindungi database), atau HALF_OPEN (testing, mencoba menghubungkan kembali)"})})}),i.jsxs(lt,{children:[i.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 rounded-md border ${Q(e.state)}`,children:[oe(e.state),i.jsx("span",{className:"font-semibold",children:e.state})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Changed: ",new Date(e.stateChangedAt).toLocaleTimeString()]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Success Rate",description:"Persentase request database yang berhasil dari total request. Indikator kesehatan sistem - semakin tinggi semakin baik. Nilai rendah menunjukkan masalah potensial dengan database atau koneksi"})})}),i.jsxs(lt,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Ye,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.totalRequests-e.failures," / ",e.totalRequests," requests"]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Total Requests",description:"Jumlah total request database yang telah diproses sejak circuit breaker diinisialisasi. Termasuk request yang berhasil dan gagal"})})}),i.jsxs(lt,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:e.totalRequests.toLocaleString()}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.failures," failures, ",e.successes," successes"]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Last Activity",description:"Waktu terakhir request database berhasil atau gagal. Membantu mengidentifikasi kapan masalah terakhir terjadi atau kapan sistem terakhir berfungsi normal"})})}),i.jsxs(lt,{children:[i.jsx("div",{className:"text-sm",children:e.lastSuccessTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600",children:"Last Success:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastSuccessTime).toLocaleTimeString()})]}):null}),i.jsx("div",{className:"text-sm mt-2",children:e.lastFailureTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:"Last Failure:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastFailureTime).toLocaleTimeString()})]}):null})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(qT,{className:"h-4 w-4"}),i.jsx(mi,{label:"Request Queue",description:"Antrian request database yang menunggu untuk diproses. Membantu menangani beban tinggi dengan mengatur prioritas dan menghindari duplikasi request"})]})}),i.jsx(lt,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Queue Length:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Jumlah total request dalam antrian, termasuk yang menunggu dan sedang diproses"})})]}),i.jsx("span",{className:"font-semibold",children:a.queueLength})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Pending Requests:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Jumlah request yang menunggu untuk diproses, belum dieksekusi"})})]}),i.jsx("span",{className:"font-semibold",children:a.pendingRequests})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Processing:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Status apakah queue sedang memproses request atau idle"})})]}),i.jsx(Tt,{variant:a.processing?"default":"secondary",children:a.processing?"Yes":"No"})]})]})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4"}),i.jsx(mi,{label:"Rate Limiter (Adaptive)",description:"Sistem pembatas kecepatan request adaptif yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Melindungi database dari traffic spike dan overload"})]})}),i.jsxs(lt,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Reads Limit:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsxs("p",{children:["Batas maksimal request baca data per menit (dinamis: ",Ht.getEffectiveLimit("read")," request/menit, ",(J.read*100).toFixed(0),"% dari base ",T.baseConfig.read.limit,"). Limit menyesuaikan otomatis berdasarkan kondisi sistem"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(J.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Writes Limit:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsxs("p",{children:["Batas maksimal request tulis data per menit (dinamis: ",Ht.getEffectiveLimit("write")," request/menit, ",(J.write*100).toFixed(0),"% dari base ",T.baseConfig.write.limit,"). Lebih ketat dari reads karena write lebih berisiko terhadap database"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(J.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["RPC Limit:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsxs("p",{children:["Batas maksimal panggilan fungsi database (RPC) per menit (dinamis: ",Ht.getEffectiveLimit("rpc")," request/menit, ",(J.rpc*100).toFixed(0),"% dari base ",T.baseConfig.rpc.limit,"). Fungsi database biasanya lebih berat dari query biasa"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(J.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Auth Limit:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsxs("p",{children:["Batas maksimal operasi autentikasi per menit (dinamis: ",Ht.getEffectiveLimit("auth")," request/menit, ",(J.auth*100).toFixed(0),"% dari base ",T.baseConfig.auth.limit,")"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(J.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:i.jsx("p",{children:" Limit berubah otomatis berdasarkan response time dan error rate sistem"})})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(xw,{className:"h-4 w-4"}),i.jsx(mi,{label:"Cache",description:"Sistem penyimpanan sementara untuk hasil query database. Mengurangi beban database dengan menyimpan hasil yang sering digunakan dan meningkatkan kecepatan response"})]})}),i.jsx(lt,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Cached Entries:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Jumlah hasil query yang saat ini tersimpan di cache. Semakin banyak semakin baik untuk performa, selama tidak melebihi batas maksimal"})})]}),i.jsx("span",{className:"font-semibold",children:o.size})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Max Size:",i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ve,{children:i.jsx("p",{children:"Batas maksimal jumlah entry yang bisa disimpan di cache. Setelah mencapai limit, entry lama akan dihapus (LRU policy)"})})]}),i.jsx("span",{className:"font-semibold",children:o.maxSize})]}),i.jsx(re,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>{io.clear(),l(io.getStats())},children:"Clear Cache"})]})})]})]}),n&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Operations by Type",description:"Distribusi operasi database berdasarkan jenis (read, write, RPC, auth). Membantu memahami pola penggunaan database dan mengidentifikasi jenis operasi yang paling banyak digunakan"})})}),i.jsx(lt,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:Object.entries(n.operationsByType||{}).map(([H,z])=>({type:H,count:z})),children:[i.jsx(sS,{strokeDasharray:"3 3"}),i.jsx(ua,{dataKey:"type"}),i.jsx(da,{}),i.jsx(or,{}),i.jsx(Yn,{dataKey:"count",fill:dD[1]})]})})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Circuit Breaker States",description:"Distribusi status circuit breaker saat operasi database dilakukan. Menunjukkan berapa banyak operasi yang terjadi pada setiap state (CLOSED, OPEN, HALF_OPEN)"})})}),i.jsx(lt,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:Object.entries(n.circuitBreakerStates||{}).map(([H,z])=>({state:H,count:z})),children:[i.jsx(sS,{strokeDasharray:"3 3"}),i.jsx(ua,{dataKey:"state"}),i.jsx(da,{}),i.jsx(or,{}),i.jsx(Yn,{dataKey:"count",fill:dD[3]})]})})})]})]}),i.jsxs(an,{permission:"admin_panel.update",children:[i.jsxs(Ue,{className:"mb-4",children:[i.jsx(ft,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Limit Configuration",description:"Konfigurasi threshold dan timeout untuk circuit breaker. Klik Edit untuk mengubah nilai-nilai ini"})}),i.jsxs(re,{variant:"outline",size:"sm",onClick:De,children:[i.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsx(lt,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Failure Threshold"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsxs("p",{children:["Buka circuit setelah ",$.failureThreshold," kegagalan"]})})]})]}),i.jsx(it,{value:$.failureThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Buka circuit setelah ",$.failureThreshold," kegagalan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Reset Timeout (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsxs("p",{children:["Tunggu ",($.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})})]})]}),i.jsx(it,{value:$.resetTimeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tunggu ",($.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Success Threshold"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsxs("p",{children:["Tutup circuit setelah ",$.successThreshold," sukses"]})})]})]}),i.jsx(it,{value:$.successThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tutup circuit setelah ",$.successThreshold," sukses"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Monitoring Period (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsxs("p",{children:["Jendela waktu: ",($.monitoringPeriod/1e3).toFixed(0),"s"]})})]})]}),i.jsx(it,{value:$.monitoringPeriod,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jendela waktu: ",($.monitoringPeriod/1e3).toFixed(0),"s"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Request Timeout (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsxs("p",{children:["Timeout request: ",($.timeout/1e3).toFixed(0),"s"]})})]})]}),i.jsx(it,{value:$.timeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Timeout request: ",($.timeout/1e3).toFixed(0),"s"]})]})]})})]}),i.jsxs(Ue,{className:"mb-4",children:[i.jsx(ft,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ct,{className:"text-sm font-medium",children:i.jsx(mi,{label:"Adaptive Rate Limiter Configuration",description:"Konfigurasi untuk adaptive rate limiter yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Menangani traffic spike dengan lebih baik"})}),i.jsxs(re,{variant:"outline",size:"sm",onClick:Ve,children:[i.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsxs(lt,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Reads Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Limit dasar untuk operasi read. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(it,{value:T.baseConfig.read.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(J.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Writes Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Limit dasar untuk operasi write. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(it,{value:T.baseConfig.write.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(J.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"RPC Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(it,{value:T.baseConfig.rpc.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(J.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Auth Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(it,{value:T.baseConfig.auth.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Ht.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(J.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Min Multiplier"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50% dari base limit). Digunakan saat sistem dalam kondisi stres"})})]})]}),i.jsx(it,{value:T.minMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",(T.minMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Max Multiplier"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200% dari base limit). Digunakan saat sistem dalam kondisi sehat"})})]})]}),i.jsx(it,{value:T.maxMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",(T.maxMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Healthy Latency Threshold (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(it,{value:T.healthyLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(T.healthyLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Stress Latency Threshold (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(it,{value:T.stressLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(T.stressLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Je,{className:"text-xs text-muted-foreground",children:"Adjustment Interval (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (dalam milliseconds)"})})]})]}),i.jsx(it,{value:T.adjustmentInterval,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",(T.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]}),i.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[" ",i.jsx("strong",{children:"Status:"})," Adaptive rate limiter aktif dan melindungi database. Limit akan otomatis menyesuaikan berdasarkan metrik sistem (response time, error rate)."]})})]})]}),i.jsx(Ue,{className:"mb-4 bg-blue-50 dark:bg-blue-950/10 border-blue-200 dark:border-blue-800",children:i.jsx(ft,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(ct,{className:"text-sm font-medium flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[i.jsx(Nv,{className:"h-5 w-5"}),"Dokumentasi Circuit Breaker"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pelajari cara kerja circuit breaker dan apa yang harus dilakukan jika terjadi masalah"})]}),i.jsxs(re,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[i.jsx(Nv,{className:"h-4 w-4 mr-2"}),"Lihat Dokumentasi Circuit Breaker"]})]})})}),i.jsxs(Ue,{className:"border-red-200 dark:border-red-800",children:[i.jsx(ft,{children:i.jsxs(ct,{className:"text-sm font-medium flex items-center gap-2 text-red-600 dark:text-red-400",children:[i.jsx(w4,{className:"h-5 w-5"}),i.jsx(mi,{label:"Danger Zone",description:"Tindakan berbahaya yang dapat mempengaruhi seluruh aplikasi. Gunakan dengan sangat hati-hati!"})]})}),i.jsxs(lt,{children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",onClick:ge,children:"Reset Circuit Breaker"})}),i.jsx(ve,{children:i.jsx("p",{children:"Reset semua statistik dan state circuit breaker ke kondisi awal. Menghapus riwayat kegagalan dan mengembalikan state ke CLOSED"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"destructive",onClick:Ie,children:"Manually Open Circuit"})}),i.jsx(ve,{children:i.jsx("p",{children:"Paksa buka circuit breaker secara manual. Akan MEMBLOKIR SEMUA REQUEST DATABASE dan menyebabkan aplikasi berhenti berfungsi. Gunakan hanya dalam keadaan darurat!"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(re,{variant:"outline",onClick:K,children:"Flush Metrics"})}),i.jsx(ve,{children:i.jsx("p",{children:"Kirim semua metrik yang tertunda ke database secara paksa. Tidak berbahaya, hanya memperbarui data metrik di Supabase"})})]})]}),i.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-red-700 dark:text-red-300 font-semibold",children:[" ",i.jsx("strong",{children:"PERINGATAN KRITIS:"})," Tindakan di zona ini dapat menghentikan seluruh aplikasi dan memblokir semua operasi database. Gunakan dengan sangat hati-hati dan hanya jika benar-benar diperlukan!"]})})]})]})]}),i.jsx(wn,{open:f,onOpenChange:h,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsxs(mn,{children:[i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-orange-500"}),"Reset Circuit Breaker"]}),i.jsx(zr,{children:"Apakah Anda yakin ingin mereset circuit breaker?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-orange-800 dark:text-orange-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Menghapus semua statistik circuit breaker"}),i.jsx("li",{children:"Mereset state ke CLOSED"}),i.jsx("li",{children:"Menghapus riwayat kegagalan"})]}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-3 font-semibold",children:" Tindakan ini TIDAK DAPAT DIBATALKAN!"})]})}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>h(!1),children:"Batal"}),i.jsx(re,{variant:"default",onClick:ie,children:"Reset"})]})]})}),i.jsx(wn,{open:m,onOpenChange:g,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsxs(mn,{children:[i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-red-500"}),"Buka Circuit Breaker Secara Manual"]}),i.jsx(zr,{children:"PERINGATAN KRITIS: Tindakan ini sangat berbahaya!"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-red-800 dark:text-red-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:i.jsx("strong",{children:"MENGHENTIKAN SEMUA REQUEST DATABASE"})}),i.jsx("li",{children:"Memblokir semua operasi aplikasi"}),i.jsx("li",{children:"Menyebabkan error pada semua fitur yang membutuhkan database"})]}),i.jsxs("div",{className:"mt-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2",children:[i.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-semibold",children:" APLIKASI AKAN BERHENTI BERFUNGSI!"}),i.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Gunakan hanya dalam keadaan darurat atau untuk testing."})]})]})}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>g(!1),children:"Batal"}),i.jsx(re,{variant:"destructive",onClick:me,children:"Buka Circuit"})]})]})}),i.jsx(wn,{open:v,onOpenChange:x,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsxs(mn,{children:[i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(xw,{className:"h-5 w-5 text-blue-500"}),"Kirim Metrik ke Database"]}),i.jsx(zr,{children:"Apakah Anda yakin ingin mengirim semua metrik yang tertunda?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-blue-800 dark:text-blue-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Mengirim semua metrik yang tersimpan di memori ke Supabase"}),i.jsx("li",{children:"Memperbarui tabel circuit_breaker_metrics"}),i.jsx("li",{children:"Menghapus metrik dari antrian lokal"})]})]})}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),i.jsx(re,{variant:"default",onClick:fe,children:"Kirim Metrik"})]})]})}),i.jsx(wn,{open:S,onOpenChange:O,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsx(mn,{children:i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(yh,{className:"h-5 w-5 text-green-500"}),"Berhasil"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm",children:N})}),i.jsx(Ca,{children:i.jsx(re,{variant:"default",onClick:()=>O(!1),children:"Tutup"})})]})}),i.jsx(wn,{open:k,onOpenChange:j,children:i.jsxs(hn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(mn,{children:[i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(Nv,{className:"h-5 w-5 text-blue-500"}),"Dokumentasi Circuit Breaker"]}),i.jsx(zr,{children:"Panduan lengkap tentang cara kerja circuit breaker dan langkah-langkah troubleshooting"})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ho,{className:"h-5 w-5 text-blue-600"}),"Apa itu Circuit Breaker?"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Circuit Breaker"})," adalah mekanisme perlindungan yang mencegah kegagalan sistem database merambat ke seluruh aplikasi. Seperti sekring listrik, circuit breaker akan memutuskan koneksi sementara ketika mendeteksi terlalu banyak kegagalan, sehingga memberikan waktu untuk sistem pulih dan mencegah beban berlebih."]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Melindungi database dari beban berlebih dan kegagalan cascade"}),i.jsx("li",{children:"Mengurangi risiko aplikasi crash saat database bermasalah"}),i.jsx("li",{children:"Memberikan waktu recovery otomatis untuk sistem"}),i.jsx("li",{children:"Monitoring dan pelaporan metrik untuk analisis"})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5 text-blue-600"}),"Penjelasan Detail Setiap Input Circuit Breaker"]}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"1. Failure Threshold (Ambang Kegagalan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah maksimal kegagalan yang dapat terjadi dalam jendela waktu monitoring sebelum circuit breaker terbuka (OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Failure Threshold: ",$.failureThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 5 kegagalan (range: 1 - 100)",i.jsx("br",{})," Sistem akan menghitung jumlah kegagalan dalam jendela waktu ",($.monitoringPeriod/1e3).toFixed(0)," detik",i.jsx("br",{})," Jika mencapai ",$.failureThreshold," kegagalan atau lebih  Circuit breaker akan ",i.jsx("strong",{children:"OPEN"})," (blokir semua request)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan cascade dengan memblokir request sebelum sistem benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1-3): Circuit breaker terlalu sensitif, sering terbuka karena error sementara",i.jsx("br",{}),"- Nilai terlalu tinggi (20+): Circuit breaker kurang responsif, database bisa overload sebelum terbuka",i.jsx("br",{}),"- Rekomendasi: 5-10 untuk aplikasi production, 3-5 untuk aplikasi kritis",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika threshold = ",$.failureThreshold,", dan terjadi ",$.failureThreshold," timeout/error dalam ",($.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"2. Reset Timeout (Waktu Tunggu Reset)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu yang harus ditunggu setelah circuit breaker OPEN sebelum mencoba uji pemulihan (transisi ke HALF_OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reset Timeout: ",($.resetTimeout/1e3).toFixed(0)," detik (",$.resetTimeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 30 detik (30000ms, range: 5s - 600s)",i.jsx("br",{})," Setelah circuit OPEN, sistem akan menunggu ",$.resetTimeout/1e3," detik sebelum mencoba uji pemulihan",i.jsx("br",{})," Setelah timeout, circuit breaker akan transisi ke ",i.jsx("strong",{children:"HALF_OPEN"})," (mengizinkan beberapa request terbatas untuk testing)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu database untuk recovery sebelum mengizinkan request lagi",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5-10s): Tidak cukup waktu untuk recovery, circuit langsung terbuka lagi",i.jsx("br",{}),"- Nilai terlalu panjang (300s+): Aplikasi terlalu lama tidak bisa digunakan",i.jsx("br",{}),"- Rekomendasi: 30-60 detik untuk masalah network sementara, 60-120 detik untuk masalah database serius",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit OPEN  Tunggu ",$.resetTimeout/1e3," detik  Uji dengan ",$.successThreshold," request terbatas  Jika semua sukses, kembali CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"3. Success Threshold (Ambang Keberhasilan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah minimal request yang harus berhasil berturut-turut dalam fase HALF_OPEN sebelum circuit breaker kembali CLOSED."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Success Threshold: ",$.successThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 2 sukses berturut-turut (range: 1 - 10)",i.jsx("br",{})," Setelah circuit HALF_OPEN (uji pemulihan), sistem akan mengizinkan beberapa request terbatas",i.jsx("br",{})," Jika ",$.successThreshold," request berhasil berturut-turut  Circuit breaker akan ",i.jsx("strong",{children:"CLOSED"})," (kembali normal)",i.jsx("br",{})," Jika ada 1 request gagal  Circuit breaker kembali ",i.jsx("strong",{children:"OPEN"})," (tunggu reset timeout lagi)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memastikan sistem benar-benar pulih sebelum mengizinkan semua request",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1): Terlalu mudah kembali CLOSED, bisa langsung OPEN lagi",i.jsx("br",{}),"- Nilai terlalu tinggi (5+): Terlalu lama di HALF_OPEN, memperlambat recovery",i.jsx("br",{}),"- Rekomendasi: 2-3 untuk aplikasi production",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit HALF_OPEN  Request 1 sukses  Request 2 sukses (",$.successThreshold," tercapai)  Circuit CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"4. Monitoring Period (Jendela Waktu Monitoring)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jendela waktu (sliding window) untuk menghitung jumlah kegagalan. Hanya kegagalan dalam jendela waktu ini yang dihitung untuk menentukan apakah circuit harus terbuka."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Monitoring Period: ",($.monitoringPeriod/1e3).toFixed(0)," detik (",$.monitoringPeriod,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 5s - 300s)",i.jsx("br",{})," Sistem hanya menghitung kegagalan yang terjadi dalam ",($.monitoringPeriod/1e3).toFixed(0)," detik terakhir",i.jsx("br",{})," Kegagalan yang lebih lama dari ",($.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung (expired)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan lama mempengaruhi keputusan saat ini, fokus pada kondisi terbaru",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5s): Terlalu fokus pada kondisi saat ini, tidak melihat tren",i.jsx("br",{}),"- Nilai terlalu panjang (60s+): Kegagalan lama masih mempengaruhi, recovery lebih lambat",i.jsx("br",{}),"- Rekomendasi: 10-30 detik untuk balance antara responsivitas dan stabilitas",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika monitoring period = ",($.monitoringPeriod/1e3).toFixed(0),"s, dan terjadi ",$.failureThreshold," kegagalan dalam ",($.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN. Kegagalan yang lebih dari ",($.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung."]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"5. Request Timeout (Waktu Maksimal Request)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu maksimal yang diizinkan untuk setiap request database. Request yang melebihi timeout ini akan dianggap gagal dan dibatalkan."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Request Timeout: ",($.timeout/1e3).toFixed(0)," detik (",$.timeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 1s - 60s)",i.jsx("br",{})," Setiap request database akan dibatalkan jika melebihi ",($.timeout/1e3).toFixed(0)," detik dan dianggap gagal",i.jsx("br",{})," Timeout ini diterapkan sebelum request mencapai database (client-side timeout)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah request yang hang/tidak merespons menumpuk dan membebani sistem",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (1-3s): Request normal bisa dianggap gagal, false positive tinggi",i.jsx("br",{}),"- Nilai terlalu panjang (30s+): Request hang akan menunggu terlalu lama, resource terbuang",i.jsx("br",{}),"- Rekomendasi:",i.jsx("br",{})," Read queries: 5-10 detik",i.jsx("br",{})," Write queries: 10-15 detik",i.jsx("br",{})," RPC/complex queries: 15-30 detik",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Request dimulai  Jika belum selesai dalam ",($.timeout/1e3).toFixed(0)," detik  Request dibatalkan  Dianggap gagal  Dihitung untuk failure threshold"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"6. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk melindungi database dengan cara yang terkoordinasi."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{className:"text-xs space-y-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Alur Lengkap:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Request masuk  Sistem cek ",i.jsx("strong",{children:"Request Timeout"})," (max ",($.timeout/1e3).toFixed(0),"s)"]}),i.jsx("li",{children:"Request dieksekusi  Jika melebihi timeout  Dianggap gagal"}),i.jsxs("li",{children:["Kegagalan dicatat dalam ",i.jsx("strong",{children:"Monitoring Period"})," (",($.monitoringPeriod/1e3).toFixed(0),"s terakhir)"]}),i.jsx("li",{children:"Sistem hitung total kegagalan dalam jendela waktu"}),i.jsxs("li",{children:["Jika mencapai ",i.jsx("strong",{children:"Failure Threshold"})," (",$.failureThreshold," kegagalan)  Circuit OPEN"]}),i.jsxs("li",{children:["Tunggu ",i.jsx("strong",{children:"Reset Timeout"})," (",($.resetTimeout/1e3).toFixed(0),"s)  Transisi ke HALF_OPEN"]}),i.jsxs("li",{children:["Uji dengan beberapa request  Jika ",i.jsx("strong",{children:"Success Threshold"})," (",$.successThreshold," sukses) tercapai  CLOSED"]}),i.jsx("li",{children:"Jika gagal dalam HALF_OPEN  Kembali OPEN, tunggu reset timeout lagi"})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Skenario:"}),i.jsx("br",{}),"1. 5 request gagal (timeout) dalam 10 detik  Threshold tercapai (",$.failureThreshold,")",i.jsx("br",{}),"2. Circuit OPEN  Semua request diblokir",i.jsx("br",{}),"3. Tunggu ",$.resetTimeout/1e3," detik  Database punya waktu recovery",i.jsx("br",{}),"4. Circuit HALF_OPEN  Uji dengan 2 request",i.jsx("br",{}),"5. Kedua request sukses (",$.successThreshold,")  Circuit CLOSED  Kembali normal"]})})]})})]})]})})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(qT,{className:"h-5 w-5 text-blue-600"}),"Bagaimana Circuit Breaker Bekerja?"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Tiga Status Circuit Breaker:"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(yh,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"CLOSED (Tertutup)"}),i.jsx("p",{className:"text-muted-foreground",children:"Status normal. Semua request database diizinkan. Circuit breaker memantau setiap request dan menghitung kegagalan dalam jendela waktu tertentu."})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(eo,{className:"h-5 w-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300",children:"OPEN (Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Circuit breaker mendeteksi terlalu banyak kegagalan ( ",$.failureThreshold," dalam ",($.monitoringPeriod/1e3).toFixed(0)," detik). Semua request database diblokir untuk melindungi sistem. Status ini akan bertahan selama ",$.resetTimeout/1e3," detik sebelum mencoba uji pemulihan."]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(MT,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-yellow-700 dark:text-yellow-300",children:"HALF_OPEN (Setengah Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Fase uji pemulihan. Setelah ",$.resetTimeout/1e3," detik di status OPEN, circuit breaker mengizinkan beberapa request terbatas untuk mengecek apakah sistem sudah pulih. Jika ",$.successThreshold," request berhasil berturut-turut, kembali ke CLOSED. Jika gagal, kembali ke OPEN."]})]})]})]})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Alur Kerja:"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1."}),i.jsx("span",{children:"Request database masuk  Circuit breaker memeriksa status"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2."}),i.jsx("span",{children:"Jika CLOSED  Request diizinkan dan dimonitor"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3."}),i.jsxs("span",{children:["Jika terjadi kegagalan  Dihitung dalam jendela waktu ",($.monitoringPeriod/1e3).toFixed(0)," detik"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"4."}),i.jsxs("span",{children:["Jika  ",$.failureThreshold," kegagalan  Beralih ke OPEN (blokir semua request)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"5."}),i.jsxs("span",{children:["Tunggu ",$.resetTimeout/1e3," detik  Beralih ke HALF_OPEN (uji pemulihan)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"6."}),i.jsxs("span",{children:["Jika ",$.successThreshold," sukses  Kembali ke CLOSED. Jika gagal  Kembali ke OPEN"]})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-orange-600"}),"Apa yang Harus Dilakukan Jika Circuit Breaker Terbuka (OPEN)?"]}),i.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-3",children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"1. Jangan Panik - Ini Tindakan Perlindungan Otomatis"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Circuit breaker terbuka adalah mekanisme perlindungan yang bekerja secara otomatis. Aplikasi sengaja memblokir request untuk mencegah database crash."})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"2. Identifikasi Penyebab Masalah"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Periksa kemungkinan penyebab:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Database server sedang down atau overload"}),i.jsx("li",{children:"Koneksi network bermasalah"}),i.jsx("li",{children:"Query database terlalu lambat (timeout)"}),i.jsx("li",{children:"Terlalu banyak request bersamaan (adaptive rate limiter sedang mengurangi limit)"}),i.jsx("li",{children:"Masalah pada Supabase (jika menggunakan Supabase)"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"3. Periksa Metrik dan Log"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:'Lihat bagian "Metrics Charts" untuk memahami:'}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Jenis operasi yang paling banyak gagal (read/write/RPC)"}),i.jsx("li",{children:"Error category yang dominan (network/timeout/database)"}),i.jsx("li",{children:"Response time rata-rata sebelum circuit terbuka"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"4. Tunggu Pemulihan Otomatis"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Circuit breaker akan otomatis mencoba uji pemulihan setelah ",$.resetTimeout/1e3," detik. Jika sistem sudah pulih, akan kembali ke status CLOSED secara otomatis."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"5. Tindakan Manual (Jika Diperlukan)"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jika masalah berlanjut setelah beberapa siklus recovery:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Reset Circuit Breaker:"})," Hapus statistik dan mulai fresh (gunakan dengan hati-hati)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Periksa Status Database:"})," Pastikan database server berjalan normal"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hubungi Tim DevOps/Database:"})," Jika masalah bersifat infrastruktur"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Review Query Performance:"})," Optimalkan query yang lambat"]})]})]})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ho,{className:"h-5 w-5 text-purple-600"}),"Adaptive Rate Limiter: Menangani Traffic Spike"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Apa itu Adaptive Rate Limiter?"}),i.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[i.jsx("strong",{children:"Adaptive Rate Limiter"})," adalah sistem pembatas kecepatan yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem database. Berbeda dengan rate limiter statis yang memiliki limit tetap, adaptive rate limiter akan:"]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Meningkatkan limit"})," saat sistem dalam kondisi sehat (response time rendah, error rate rendah)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Menurunkan limit"})," saat sistem dalam kondisi stres (response time tinggi, error rate tinggi)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Melindungi database"})," dari traffic spike dan overload dengan penyesuaian otomatis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Mengurangi false positives"})," dengan memberikan waktu recovery sebelum circuit breaker terbuka"]})]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-green-800 dark:text-green-200",children:"Bagaimana Menangani Traffic Spike?"}),i.jsxs("div",{className:"text-sm space-y-3",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"1. Deteksi Traffic Spike"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Saat traffic spike terjadi, database mulai lambat (response time meningkat) atau terjadi error rate tinggi. Adaptive rate limiter memantau metrik ini setiap ",T.adjustmentInterval/1e3," detik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"2. Penyesuaian Otomatis"}),i.jsxs("div",{className:"mt-2 space-y-2",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Sehat (Response Time < ",T.healthyLatencyThreshold,"ms, Error < 5%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit meningkat hingga ",(T.maxMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",T.baseConfig.read.limit,"/min dapat naik hingga ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Stres (Response Time > ",T.stressLatencyThreshold,"ms atau Error > 20%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit menurun hingga ",(T.minMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",T.baseConfig.read.limit,"/min dapat turun hingga ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min",i.jsx("br",{})," Memberi waktu recovery untuk database tanpa langsung memicu circuit breaker OPEN"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"3. Skenario Traffic Spike"}),i.jsxs("div",{className:"mt-2 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"A."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Normal (Dapat Dihandle):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Request melonjak  Rate limiter dengan limit adaptif menangani sebagian request  Jika masih dalam batas, semua diizinkan  Jika melebihi, request diblokir dengan HTTP 429"})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"B."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Besar (Database Mulai Lambat):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Response time naik di atas ",T.stressLatencyThreshold,"ms  Adaptive limiter turunkan limit secara bertahap  Memberi waktu database pulih  Mencegah circuit breaker langsung OPEN"]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"C."}),i.jsxs("div",{children:[i.jsx("strong",{children:"DDoS/Attack:"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Ribuan request masuk  Adaptive limiter turunkan limit drastis (hingga ",(T.minMultiplier*100).toFixed(0),"%)  Sebagian besar request diblokir  Database terlindungi  Circuit breaker OPEN sebagai last resort jika masih gagal"]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3 text-red-800 dark:text-red-200",children:" Input Konfigurasi untuk Traffic Spike & DDoS Protection"}),i.jsxs("div",{className:"text-sm space-y-3 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300 text-base",children:"Input Utama untuk Perlindungan:"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-red-500",children:[i.jsx("strong",{className:"text-sm text-red-700 dark:text-red-300",children:"1. Min Multiplier (PALING PENTING untuk DDoS)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Min Multiplier = ",(T.minMultiplier*100).toFixed(0),"% (range: 0.1 - 1.0)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Menentukan seberapa rendah limit dapat turun saat sistem diserang",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (0.1-0.3) = Limit turun drastis  90-70% request diblokir  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (0.4-0.6) = Limit turun sedang  60-40% request diblokir  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai tinggi (0.7-1.0) = Limit turun sedikit  30-0% request diblokir  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 0.1 - 0.3 (10-30% dari base limit)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Base Reads = ",T.baseConfig.read.limit,"/min, Min Multiplier = ",T.minMultiplier,"  Limit minimum = ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min saat diserang"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-orange-500",children:[i.jsx("strong",{className:"text-sm text-orange-700 dark:text-orange-300",children:"2. Stress Latency Threshold (Deteksi Serangan)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Stress Latency Threshold = ",T.stressLatencyThreshold,"ms (range: 500ms - 10000ms)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Mendeteksi kapan sistem mulai stres/overload akibat traffic spike",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (500-1000ms) = Deteksi cepat saat serangan  Limit turun cepat  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (1000-2000ms) = Deteksi sedang  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (3000ms+) = Deteksi lambat  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 500-1000ms (deteksi cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Saat DDoS, response time naik cepat  Jika ",">"," ",T.stressLatencyThreshold,"ms  Sistem langsung turunkan limit"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-yellow-500",children:[i.jsx("strong",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"3. Base Limits (Garis Pertahanan Awal)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Base Limits untuk Reads/Writes/RPC/Auth",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Limit dasar sebelum penyesuaian adaptif",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Base limit rendah = Kurang request yang diizinkan  Lebih aman tapi bisa blokir user normal",i.jsx("br",{}),"- Base limit tinggi = Lebih banyak request diizinkan  Lebih toleran tapi kurang proteksi",i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"}),i.jsx("br",{}),"- Reads: 50-100/min (default: ",T.baseConfig.read.limit,"/min)",i.jsx("br",{}),"- Writes: 20-30/min (default: ",T.baseConfig.write.limit,"/min)",i.jsx("br",{}),"- RPC: 10-20/min (default: ",T.baseConfig.rpc.limit,"/min)",i.jsx("br",{}),"- Auth: 5-10/min (default: ",T.baseConfig.auth.limit,"/min)",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Base limit ini akan dikalikan dengan min multiplier saat serangan, jadi limit efektif minimum = base  min multiplier"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-blue-500",children:[i.jsx("strong",{className:"text-sm text-blue-700 dark:text-blue-300",children:"4. Adjustment Interval (Kecepatan Respons)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Adjustment Interval = ",T.adjustmentInterval/1e3,"s (range: 10s - 600s)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Seberapa sering sistem memeriksa kondisi dan menyesuaikan limit",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Interval pendek (10-30s) = Respons cepat  Limit turun cepat saat serangan  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Interval sedang (30-60s) = Respons seimbang  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Interval panjang (60s+) = Respons lambat  Serangan bisa damage dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 10-30 detik (respons cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Catatan:"})," Interval terlalu pendek (","<"," 10s) bisa menyebabkan limit berubah-ubah terlalu sering"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-purple-500",children:[i.jsx("strong",{className:"text-sm text-purple-700 dark:text-purple-300",children:"5. Circuit Breaker Failure Threshold (Last Resort)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Failure Threshold = ",$.failureThreshold," (range: 1-100)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Jika adaptive rate limiter tidak cukup, circuit breaker akan OPEN dan blokir SEMUA request",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (3-5) = Circuit terbuka cepat  Semua request diblokir  ",i.jsx("strong",{children:"SANGAT PROTEKTIF"}),i.jsx("br",{}),"- Nilai sedang (5-10) = Balance  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (10+) = Circuit lambat terbuka  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG PROTEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 3-5 kegagalan dalam monitoring period",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Ini adalah lapisan terakhir - gunakan jika rate limiter tidak cukup"]})]})]})]}),i.jsxs("div",{className:"bg-red-100 dark:bg-red-950/40 border border-red-300 dark:border-red-700 rounded p-3 mt-3",children:[i.jsx("strong",{className:"text-sm text-red-800 dark:text-red-200",children:" Konfigurasi Optimal untuk DDoS Protection:"}),i.jsxs("div",{className:"text-xs mt-2 space-y-1 text-red-700 dark:text-red-300",children:[i.jsx("p",{children:"Untuk perlindungan maksimal terhadap DDoS attack, gunakan konfigurasi berikut:"}),i.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Min Multiplier:"})," 0.1 - 0.3 (limit turun hingga 10-30% dari base)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Stress Latency Threshold:"})," 500 - 1000ms (deteksi cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," 10 - 30 detik (respons cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Base Limits:"})," Konservatif (Reads: 50-100, Writes: 20-30, RPC: 10-20, Auth: 5-10)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Circuit Breaker Failure Threshold:"})," 3-5 (last resort protection)"]})]}),i.jsx("p",{className:"mt-2 font-semibold",children:"Dengan konfigurasi ini, saat DDoS attack terjadi:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Response time naik ",">"," ",T.stressLatencyThreshold,"ms (dalam 10-30 detik)"]}),i.jsxs("li",{children:["Adaptive limiter turunkan limit ke ",(T.minMultiplier*100).toFixed(0),"% (minimal)"]}),i.jsx("li",{children:"70-90% request diblokir dengan HTTP 429"}),i.jsx("li",{children:"Jika masih gagal, circuit breaker OPEN  100% request diblokir"}),i.jsx("li",{children:"Database terlindungi dari crash"})]})]})]})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-yellow-800 dark:text-yellow-200",children:"Lapisan Perlindungan Berlapis"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adaptive Rate Limiter (Lapisan Pertama):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Membatasi jumlah request per menit dengan limit yang dinamis. Mencegah database overload dengan menyesuaikan limit berdasarkan kondisi sistem."})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Request Timeout (Lapisan Kedua):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Setiap request memiliki timeout maksimal ",$.timeout/1e3," detik. Request yang terlalu lama dianggap gagal dan tidak menumpuk di database."]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker (Lapisan Ketiga):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Jika tetap terjadi ",$.failureThreshold," kegagalan dalam ",($.monitoringPeriod/1e3).toFixed(0)," detik, circuit breaker akan OPEN dan memblokir semua request untuk melindungi database sepenuhnya."]})]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Penjelasan Detail Setiap Input Konfigurasi"}),i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"1. Base Limits (Limit Dasar)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Limit dasar adalah jumlah maksimal request per menit yang diizinkan saat sistem dalam kondisi normal. Limit aktual akan disesuaikan otomatis berdasarkan kondisi sistem (dikalikan dengan multiplier)."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reads Base Limit: ",T.baseConfig.read.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"READ"})," (membaca data dari database). Operasi ini termasuk SELECT queries, fetching data, dll.",i.jsx("br",{})," Operasi read biasanya lebih aman dan lebih cepat dibanding write",i.jsx("br",{})," Limit default: 100 request/menit (dapat disesuaikan 10-1000)",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Writes Base Limit: ",T.baseConfig.write.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"WRITE"})," (menulis/mengubah data di database). Operasi ini termasuk INSERT, UPDATE, DELETE, UPSERT.",i.jsx("br",{})," Operasi write lebih berisiko dan lebih lambat dibanding read",i.jsx("br",{})," Limit default: 30 request/menit (dapat disesuaikan 5-500)",i.jsx("br",{})," Lebih ketat dari reads karena dapat menyebabkan race condition atau data corruption jika terlalu banyak",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.write.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.write.limit*T.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["RPC Base Limit: ",T.baseConfig.rpc.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"RPC"})," (Remote Procedure Call / fungsi database). Operasi ini termasuk panggilan fungsi PostgreSQL, stored procedures, dll.",i.jsx("br",{})," RPC biasanya lebih kompleks dan lebih berat dibanding query biasa",i.jsx("br",{})," Limit default: 20 request/menit (dapat disesuaikan 5-200)",i.jsx("br",{})," RPC sering digunakan untuk operasi batch atau analytics, jadi perlu lebih ketat",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.rpc.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.rpc.limit*T.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Auth Base Limit: ",T.baseConfig.auth.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"AUTH"})," (autentikasi dan otorisasi). Operasi ini termasuk login, logout, refresh token, verifikasi session.",i.jsx("br",{})," Operasi auth sangat penting untuk keamanan, jadi perlu dibatasi",i.jsx("br",{})," Limit default: 10 request/menit (dapat disesuaikan 2-100)",i.jsx("br",{})," Mencegah brute force attack dan credential stuffing",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.auth.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.auth.limit*T.minMultiplier),"/min"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"2. Multiplier Range (Rentang Pengali)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Multiplier menentukan seberapa banyak limit base dapat berubah. Sistem akan mengalikan base limit dengan multiplier saat ini untuk mendapatkan limit efektif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Min Multiplier: ",(T.minMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"minimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"stres"}),".",i.jsx("br",{})," Nilai: 0.5 = 50% dari base limit (default: 0.5, range: 0.1 - 1.0)",i.jsx("br",{})," Digunakan ketika: Response time > ",T.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Contoh: Jika Reads base = ",T.baseConfig.read.limit,", min multiplier = ",T.minMultiplier,", maka limit efektif minimum = ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu recovery untuk database dengan mengurangi beban saat sistem stres, mencegah overload total"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Max Multiplier: ",(T.maxMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"maksimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"sehat"}),".",i.jsx("br",{})," Nilai: 2.0 = 200% dari base limit (default: 2.0, range: 1.0 - 5.0)",i.jsx("br",{})," Digunakan ketika: Response time < ",T.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Contoh: Jika Reads base = ",T.baseConfig.read.limit,", max multiplier = ",T.maxMultiplier,", maka limit efektif maksimum = ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memanfaatkan kapasitas database saat kondisi optimal, meningkatkan throughput aplikasi"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"3. Latency Thresholds (Ambang Waktu Respons)"}),i.jsx("p",{className:"mt-1 mb-2",children:'Threshold menentukan kapan sistem dianggap "sehat" atau "stres" berdasarkan waktu respons database. Sistem menggunakan threshold ini untuk memutuskan apakah harus meningkatkan atau menurunkan limit.'}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Healthy Latency Threshold: ",T.healthyLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas atas response time yang dianggap ",i.jsx("strong",{children:"sehat"}),". Jika response time database di bawah nilai ini, sistem akan meningkatkan limit.",i.jsx("br",{})," Default: 200ms (range: 50ms - 1000ms)",i.jsx("br",{})," Kondisi: Response time < ",T.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"naik secara bertahap"})," (maks 10% per adjustment) hingga mencapai max multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database dapat menangani lebih banyak request, memaksimalkan throughput",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda biasanya sangat cepat (< 50ms), turunkan nilai ini. Jika database lambat, naikkan."]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Stress Latency Threshold: ",T.stressLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas bawah response time yang dianggap ",i.jsx("strong",{children:"stres"}),". Jika response time database di atas nilai ini, sistem akan menurunkan limit.",i.jsx("br",{})," Default: 1000ms (range: 500ms - 10000ms)",i.jsx("br",{})," Kondisi: Response time > ",T.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"turun secara bertahap"})," (maks 20% per adjustment) hingga mencapai min multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database mulai overload, mengurangi beban sebelum database benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda dapat menangani response time tinggi (> 2s), naikkan nilai ini. Jika database sensitif, turunkan."]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:[i.jsx("strong",{children:" Catatan:"})," Jika response time di antara ",T.healthyLatencyThreshold,"ms dan ",T.stressLatencyThreshold,"ms, sistem akan perlahan mengembalikan multiplier ke 1.0 (100% dari base limit)."]})})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"4. Adjustment Interval (Interval Penyesuaian)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Interval menentukan seberapa sering sistem memeriksa metrik dan menyesuaikan limit. Sistem akan query metrik dari Supabase dan menghitung response time serta error rate untuk memutuskan apakah perlu mengubah multiplier."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Adjustment Interval: ",T.adjustmentInterval/1e3," detik (",T.adjustmentInterval,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Frekuensi pengecekan dan penyesuaian limit oleh sistem.",i.jsx("br",{})," Default: 60 detik (60000ms, range: 10s - 600s)",i.jsx("br",{})," Setiap interval, sistem akan:",i.jsx("br",{}),"1. Query metrik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase (5 menit terakhir)",i.jsx("br",{}),"2. Hitung rata-rata response time dan error rate",i.jsx("br",{}),"3. Bandingkan dengan threshold (healthy/stress)",i.jsx("br",{}),"4. Sesuaikan multiplier untuk setiap operasi (read/write/rpc/auth)",i.jsx("br",{}),"5. Simpan multiplier baru ke localStorage dan update limit efektif",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"}),i.jsx("br",{}),"- Interval terlalu pendek: Sistem terlalu reaktif, limit berubah-ubah terlalu sering (tidak stabil)",i.jsx("br",{}),"- Interval terlalu panjang: Sistem lambat merespons perubahan kondisi (tidak efektif)",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Untuk aplikasi dengan traffic stabil: Gunakan 60-120 detik",i.jsx("br",{}),"- Untuk aplikasi dengan traffic volatile: Gunakan 30-60 detik",i.jsx("br",{}),"- Jangan kurang dari 10 detik (terlalu agresif)",i.jsx("br",{}),"- Jangan lebih dari 600 detik (terlalu lambat)"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"5. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk menciptakan sistem perlindungan yang adaptif dan responsif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("strong",{children:"Alur Kerja:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Sistem memantau setiap request database dan mencatat metrik (response time, success/failure) ke ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})]}),i.jsxs("li",{children:["Setiap ",T.adjustmentInterval/1e3," detik, adaptive rate limiter memeriksa metrik 5 menit terakhir"]}),i.jsx("li",{children:"Menghitung rata-rata response time dan error rate"}),i.jsxs("li",{children:["Membandingkan dengan threshold:",i.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[i.jsxs("li",{children:["Jika response time < ",T.healthyLatencyThreshold,"ms DAN error < 5%  ",i.jsx("strong",{children:"Naikkan limit"})," (max ",(T.maxMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika response time > ",T.stressLatencyThreshold,"ms ATAU error > 20%  ",i.jsx("strong",{children:"Turunkan limit"})," (min ",(T.minMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika di antara keduanya  ",i.jsx("strong",{children:"Kembalikan limit"})," perlahan ke 100%"]})]})]}),i.jsx("li",{children:"Update multiplier dan hitung limit efektif baru (base limit  multiplier saat ini)"}),i.jsx("li",{children:"Limit efektif baru diterapkan untuk semua request berikutnya"}),i.jsxs("li",{children:["Proses ini berulang setiap ",T.adjustmentInterval/1e3," detik"]})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Praktis:"}),i.jsx("br",{}),"Base Reads Limit = ",T.baseConfig.read.limit,"/min",i.jsx("br",{}),"Sistem sehat (response < ",T.healthyLatencyThreshold,"ms)  Multiplier = ",T.maxMultiplier,"  Effective Limit = ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min",i.jsx("br",{}),"Sistem stres (response > ",T.stressLatencyThreshold,"ms)  Multiplier = ",T.minMultiplier,"  Effective Limit = ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min",i.jsx("br",{}),"Sistem normal  Multiplier = 1.0  Effective Limit = ",T.baseConfig.read.limit,"/min (base)"]})})]})]}),i.jsxs("p",{className:"text-xs mt-3 pt-2 border-t",children:[" ",i.jsx("strong",{children:"Tip Penting:"}),' Limit efektif saat ini dapat dilihat di bagian "Adaptive Rate Limiter Configuration" di atas. Limit akan berubah secara real-time berdasarkan kondisi sistem. Perhatikan perubahan multiplier - jika terus turun, itu berarti sistem sedang stres dan perlu perhatian.']})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(xw,{className:"h-5 w-5 text-blue-600"}),"Memahami Metrik Circuit Breaker"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Success Rate:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Persentase request yang berhasil. Nilai rendah (< 90%) menunjukkan masalah potensial dengan database atau koneksi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Total Requests:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jumlah total request sejak inisialisasi. Membantu memahami volume traffic aplikasi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Operations by Type:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Distribusi operasi berdasarkan jenis (read/write/RPC/auth). Membantu mengidentifikasi jenis operasi yang paling bermasalah."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker States:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Menunjukkan berapa banyak operasi yang terjadi pada setiap state. Banyak operasi di OPEN state = sistem sering bermasalah."})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(yh,{className:"h-5 w-5 text-green-600"}),"Best Practices"]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-2 text-sm",children:i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Monitor metrik secara berkala untuk mendeteksi masalah sejak dini"}),i.jsx("li",{children:"Biarkan adaptive rate limiter bekerja otomatis - jangan sering reset manual kecuali benar-benar diperlukan"}),i.jsx("li",{children:"Jika circuit sering terbuka, pertimbangkan untuk optimasi query atau scaling database"}),i.jsx("li",{children:"Gunakan cache untuk mengurangi beban database pada query yang sering digunakan"}),i.jsx("li",{children:"Review dan sesuaikan threshold jika circuit breaker terlalu sensitif atau tidak sensitif"}),i.jsx("li",{children:"Perhatikan perubahan limit adaptive rate limiter - penurunan drastis menunjukkan sistem sedang stres"}),i.jsx("li",{children:"Dokumentasikan setiap insiden circuit breaker dan traffic spike untuk analisis tren"}),i.jsx("li",{children:"Trust the adaptive system - limit akan menyesuaikan otomatis berdasarkan kondisi sistem"})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5 text-blue-600"}),"Referensi Konfigurasi"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Circuit Breaker Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Failure Threshold:"})," ",$.failureThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Buka circuit setelah kegagalan ini"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Reset Timeout:"})," ",$.resetTimeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Tunggu sebelum uji pemulihan"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Success Threshold:"})," ",$.successThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sukses untuk tutup circuit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Monitoring Period:"})," ",$.monitoringPeriod/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Jendela waktu hitungan"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("strong",{children:"Request Timeout:"})," ",$.timeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Timeout maksimal per request"})]})]})]}),i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Adaptive Rate Limiter Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Reads Base Limit:"})," ",T.baseConfig.read.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Ht.getEffectiveLimit("read"),"/min (",(J.read*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Writes Base Limit:"})," ",T.baseConfig.write.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Ht.getEffectiveLimit("write"),"/min (",(J.write*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"RPC Base Limit:"})," ",T.baseConfig.rpc.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Ht.getEffectiveLimit("rpc"),"/min (",(J.rpc*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Auth Base Limit:"})," ",T.baseConfig.auth.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Ht.getEffectiveLimit("auth"),"/min (",(J.auth*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Multiplier Range:"})," ",(T.minMultiplier*100).toFixed(0),"% - ",(T.maxMultiplier*100).toFixed(0),"%",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Range penyesuaian limit otomatis"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," ",T.adjustmentInterval/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Frekuensi penyesuaian limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Healthy Threshold:"})," < ",T.healthyLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk meningkatkan limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stress Threshold:"})," > ",T.stressLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk menurunkan limit"})]})]})]})]})]})]}),i.jsx(Ca,{children:i.jsx(re,{variant:"default",onClick:()=>j(!1),children:"Tutup"})})]})}),i.jsx(wn,{open:b,onOpenChange:_,children:i.jsxs(hn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(mn,{children:[i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5 text-blue-500"}),"Edit Adaptive Rate Limiter Configuration"]}),i.jsx(zr,{children:"Ubah konfigurasi adaptive rate limiter. Limit akan secara otomatis menyesuaikan berdasarkan kondisi sistem."})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Base Limits (per menit)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"readLimit",children:["Reads Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi read (min: 10, max: 1000)"})})]})]}),i.jsx(it,{id:"readLimit",inputMode:"numeric",pattern:"[0-9]*",min:10,max:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(ot)?ot:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");E(G=>{if(z==="")return{...G,baseConfig:{...G.baseConfig,read:{...G.baseConfig.read,limit:NaN}}};const ue=parseInt(z,10);if(!Number.isFinite(ue))return{...G,baseConfig:{...G.baseConfig,read:{...G.baseConfig.read,limit:NaN}}};const Se=Math.min(1e3,ue);return{...G,baseConfig:{...G.baseConfig,read:{...G.baseConfig.read,limit:Se}}}})}}),!Ge&&i.jsx("p",{className:"text-xs text-red-500",children:"Reads base limit must be between 10 and 1000 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"writeLimit",children:["Writes Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi write (min: 5, max: 500)"})})]})]}),i.jsx(it,{id:"writeLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:500,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(te)?te:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");E(G=>{if(z==="")return{...G,baseConfig:{...G.baseConfig,write:{...G.baseConfig.write,limit:NaN}}};const ue=parseInt(z,10);if(!Number.isFinite(ue))return{...G,baseConfig:{...G.baseConfig,write:{...G.baseConfig.write,limit:NaN}}};const Se=Math.min(500,ue);return{...G,baseConfig:{...G.baseConfig,write:{...G.baseConfig.write,limit:Se}}}})}}),!vt&&i.jsx("p",{className:"text-xs text-red-500",children:"Writes base limit must be between 5 and 500 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"rpcLimit",children:["RPC Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi RPC (min: 5, max: 200)"})})]})]}),i.jsx(it,{id:"rpcLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:200,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(Xe)?Xe:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");E(G=>{if(z==="")return{...G,baseConfig:{...G.baseConfig,rpc:{...G.baseConfig.rpc,limit:NaN}}};const ue=parseInt(z,10);if(!Number.isFinite(ue))return{...G,baseConfig:{...G.baseConfig,rpc:{...G.baseConfig.rpc,limit:NaN}}};const Se=Math.min(200,ue);return{...G,baseConfig:{...G.baseConfig,rpc:{...G.baseConfig.rpc,limit:Se}}}})}}),!wt&&i.jsx("p",{className:"text-xs text-red-500",children:"RPC base limit must be between 5 and 200 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"authLimit",children:["Auth Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi (min: 2, max: 100)"})})]})]}),i.jsx(it,{id:"authLimit",inputMode:"numeric",pattern:"[0-9]*",min:2,max:100,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(dt)?dt:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");E(G=>{if(z==="")return{...G,baseConfig:{...G.baseConfig,auth:{...G.baseConfig.auth,limit:NaN}}};const ue=parseInt(z,10);if(!Number.isFinite(ue))return{...G,baseConfig:{...G.baseConfig,auth:{...G.baseConfig.auth,limit:NaN}}};const Se=Math.min(100,ue);return{...G,baseConfig:{...G.baseConfig,auth:{...G.baseConfig.auth,limit:Se}}}})}}),!Nt&&i.jsx("p",{className:"text-xs text-red-500",children:"Auth base limit must be between 2 and 100 requests per minute."})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Adjustment Parameters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"minMultiplier",children:["Min Multiplier",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50%). Digunakan saat sistem stres (min: 0.1, max: 1.0)"})})]})]}),i.jsx(it,{id:"minMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:.1,max:1,step:.1,onKeyDown:H=>{["e","E","+","-"].includes(H.key)&&H.preventDefault()},value:R,onChange:H=>{var Ne;let z=H.target.value.replace(/[^0-9.]/g,"");if((((Ne=z.match(/\./g))==null?void 0:Ne.length)??0)>1)return;if(z.startsWith(".")&&(z=`0${z}`),z.includes(".")){const[Le,V]=z.split("."),ne=(V??"").slice(0,3);z=`${Le}.${ne}`}if(z===""||z==="."){C(""),E(Le=>({...Le,minMultiplier:NaN}));return}const G=parseFloat(z);if(!Number.isFinite(G)){C(""),E(Le=>({...Le,minMultiplier:NaN}));return}const ue=Math.min(1,G),Se=G>ue?ue.toFixed(3).replace(/\.?0+$/,""):z;C(Se),E(Le=>({...Le,minMultiplier:parseFloat(Se)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum:"," ",Number.isFinite(de)?`${(de*100).toFixed(0)}% dari base limit`:"Enter a minimum multiplier value"]}),!yt&&i.jsx("p",{className:"text-xs text-red-500",children:"Min multiplier must be between 0.1 and 1.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"maxMultiplier",children:["Max Multiplier",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200%). Digunakan saat sistem sehat (min: 1.0, max: 5.0)"})})]})]}),i.jsx(it,{id:"maxMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:1,max:5,step:.1,onKeyDown:H=>{["e","E","+","-"].includes(H.key)&&H.preventDefault()},value:q,onChange:H=>{var Ne;let z=H.target.value.replace(/[^0-9.]/g,"");if((((Ne=z.match(/\./g))==null?void 0:Ne.length)??0)>1)return;if(z.startsWith(".")&&(z=`0${z}`),z.includes(".")){const[Le,V]=z.split("."),ne=(V??"").slice(0,3);z=`${Le}.${ne}`}if(z===""||z==="."){Z(""),E(Le=>({...Le,maxMultiplier:NaN}));return}const G=parseFloat(z);if(!Number.isFinite(G)){Z(""),E(Le=>({...Le,maxMultiplier:NaN}));return}const ue=Math.min(5,G),Se=G>ue?ue.toFixed(3).replace(/\.?0+$/,""):z;Z(Se),E(Le=>({...Le,maxMultiplier:parseFloat(Se)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum:"," ",Number.isFinite(we)?`${(we*100).toFixed(0)}% dari base limit`:"Enter a maximum multiplier value"]}),!xt&&i.jsx("p",{className:"text-xs text-red-500",children:"Max multiplier must be between 1.0 and 5.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"healthyLatency",children:["Healthy Latency Threshold (ms)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(it,{id:"healthyLatency",inputMode:"numeric",pattern:"[0-9]*",min:50,max:1e3,step:50,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(se)?se:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");E(G=>{if(z==="")return{...G,healthyLatencyThreshold:NaN};const ue=parseInt(z,10);if(!Number.isFinite(ue))return{...G,healthyLatencyThreshold:NaN};const Se=Math.min(1e3,ue);return{...G,healthyLatencyThreshold:Se}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(se)?`${(se/1e3).toFixed(1)} seconds`:"Enter a value between 50 and 1000 milliseconds"}),!le&&i.jsx("p",{className:"text-xs text-red-500",children:"Healthy latency threshold must be between 50 and 1000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"stressLatency",children:["Stress Latency Threshold (ms)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(it,{id:"stressLatency",inputMode:"numeric",pattern:"[0-9]*",min:500,max:1e4,step:100,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(Be)?Be:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");E(G=>{if(z==="")return{...G,stressLatencyThreshold:NaN};const ue=parseInt(z,10);if(!Number.isFinite(ue))return{...G,stressLatencyThreshold:NaN};const Se=Math.min(1e4,ue);return{...G,stressLatencyThreshold:Se}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(Be)?`${(Be/1e3).toFixed(1)} seconds`:"Enter a value between 500 and 10000 milliseconds"}),!Ee&&i.jsx("p",{className:"text-xs text-red-500",children:"Stress latency threshold must be between 500 and 10000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(Je,{htmlFor:"adjustmentInterval",children:["Adjustment Interval (ms)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (min: 10000ms, max: 600000ms)"})})]})]}),i.jsx(it,{id:"adjustmentInterval",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:6e5,step:1e4,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(je)?je:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");E(G=>{if(z==="")return{...G,adjustmentInterval:NaN};const ue=parseInt(z,10);if(!Number.isFinite(ue))return{...G,adjustmentInterval:NaN};const Se=Math.min(6e5,ue);return{...G,adjustmentInterval:Se}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(je)?`Setiap ${(je/1e3).toFixed(0)} detik`:"Enter an interval between 10000 and 600000 milliseconds."}),!ye&&i.jsx("p",{className:"text-xs text-red-500",children:"Adjustment interval must be between 10000 and 600000 milliseconds."})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Adaptive rate limiter secara otomatis menyesuaikan limit berdasarkan metrik sistem (response time, error rate). Saat sistem sehat, limit akan naik. Saat sistem stres, limit akan turun untuk melindungi database dari overload."]})})]}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>_(!1),children:"Batal"}),i.jsx(re,{variant:"default",onClick:ut,disabled:!Ge||!vt||!wt||!Nt||!yt||!xt||!le||!Ee||!ye,children:"Simpan Perubahan"})]})]})}),i.jsx(wn,{open:y,onOpenChange:w,children:i.jsxs(hn,{className:"max-w-2xl",children:[i.jsxs(mn,{children:[i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5 text-blue-500"}),"Edit Circuit Breaker Configuration"]}),i.jsx(zr,{children:"Ubah threshold dan timeout untuk circuit breaker. Perubahan akan langsung diterapkan."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"failureThreshold",children:["Failure Threshold",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Jumlah kegagalan yang diperlukan sebelum circuit breaker terbuka (min: 1, max: 100)"})})]})]}),i.jsx(it,{id:"failureThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:100,value:Number.isFinite(F.failureThreshold)?F.failureThreshold:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");if(z===""){M(ue=>({...ue,failureThreshold:1}));return}const G=Math.min(100,Math.max(1,parseInt(z,10)));M(ue=>({...ue,failureThreshold:G}))}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"resetTimeout",children:["Reset Timeout (milliseconds)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Waktu tunggu sebelum mencoba pemulihan (transisi ke HALF_OPEN). Min: 10000ms, Max: 300000ms"})})]})]}),i.jsx(it,{id:"resetTimeout",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:3e5,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.resetTimeout)?F.resetTimeout:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");if(z===""){M(ue=>({...ue,resetTimeout:NaN}));return}const G=parseInt(z,10);if(!Number.isFinite(G)){M(ue=>({...ue,resetTimeout:NaN}));return}M(ue=>({...ue,resetTimeout:G}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(F.resetTimeout)?`${(F.resetTimeout/1e3).toFixed(0)} seconds`:"Enter a value between 10000 and 300000"}),Number.isFinite(F.resetTimeout)&&F.resetTimeout<1e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum reset timeout is 10000 milliseconds (10 seconds)."}),Number.isFinite(F.resetTimeout)&&F.resetTimeout>3e5&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum reset timeout is 300000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"successThreshold",children:["Success Threshold",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Jumlah sukses berturut-turut di HALF_OPEN untuk menutup circuit (min: 1, max: 10)"})})]})]}),i.jsx(it,{id:"successThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:10,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.successThreshold)?F.successThreshold:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");if(z===""){M(Se=>({...Se,successThreshold:NaN}));return}const G=parseInt(z,10);if(!Number.isFinite(G)){M(Se=>({...Se,successThreshold:NaN}));return}const ue=Math.min(10,Math.max(1,G));M(Se=>({...Se,successThreshold:ue}))}}),(!Number.isFinite(F.successThreshold)||F.successThreshold<1||F.successThreshold>10)&&i.jsx("p",{className:"text-xs text-red-500",children:"Success threshold must be a number between 1 and 10."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Je,{htmlFor:"monitoringPeriod",children:["Monitoring Period (milliseconds)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Jendela waktu untuk menghitung kegagalan. Kegagalan di luar jendela ini tidak dihitung. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(it,{id:"monitoringPeriod",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.monitoringPeriod)?F.monitoringPeriod:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");if(z===""){M(ue=>({...ue,monitoringPeriod:NaN}));return}const G=parseInt(z,10);if(!Number.isFinite(G)){M(ue=>({...ue,monitoringPeriod:NaN}));return}M(ue=>({...ue,monitoringPeriod:G}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(F.monitoringPeriod)?`${(F.monitoringPeriod/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(F.monitoringPeriod)&&F.monitoringPeriod<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum monitoring period is 1000 milliseconds (1 second)."}),Number.isFinite(F.monitoringPeriod)&&F.monitoringPeriod>6e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum monitoring period is 60000 milliseconds (60 seconds)."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(Je,{htmlFor:"timeout",children:["Request Timeout (milliseconds)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ze,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ve,{children:i.jsx("p",{children:"Timeout maksimal untuk setiap request database. Request yang melebihi waktu ini akan dianggap gagal. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(it,{id:"timeout",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.timeout)?F.timeout:"",onChange:H=>{const z=H.target.value.replace(/\D/g,"");if(z===""){M(Se=>({...Se,timeout:NaN}));return}const G=parseInt(z,10);if(!Number.isFinite(G)){M(Se=>({...Se,timeout:NaN}));return}const ue=Math.min(6e4,G);M(Se=>({...Se,timeout:ue}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(F.timeout)?`${(F.timeout/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(F.timeout)&&F.timeout<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum request timeout is 1000 milliseconds (1 second)."})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Threshold yang terlalu rendah dapat membuat circuit breaker terlalu sensitif. Threshold yang terlalu tinggi dapat menunda respons terhadap masalah database. Gunakan nilai yang sesuai dengan karakteristik aplikasi Anda."]})})]}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>w(!1),children:"Batal"}),i.jsx(re,{variant:"default",onClick:Ze,disabled:!Number.isFinite(F.resetTimeout)||F.resetTimeout<1e4||F.resetTimeout>3e5||!Number.isFinite(F.failureThreshold)||F.failureThreshold<1||F.failureThreshold>100||!Number.isFinite(F.successThreshold)||F.successThreshold<1||F.successThreshold>10||!Number.isFinite(F.monitoringPeriod)||F.monitoringPeriod<1e3||F.monitoringPeriod>6e4||!Number.isFinite(F.timeout)||F.timeout<1e3||F.timeout>6e4||!Ge||!vt||!wt||!Nt||!yt||!xt||!le||!Ee||!ye,children:"Simpan Perubahan"})]})]})}),i.jsx(wn,{open:I,onOpenChange:P,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsx(mn,{children:i.jsxs(pn,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-red-500"}),"Error"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:N})}),i.jsx(Ca,{children:i.jsx(re,{variant:"destructive",onClick:()=>P(!1),children:"Tutup"})})]})})]})}const D9=p.forwardRef(({role:e,roles:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasRole:o,hasAnyRole:l,loading:c}=Ir();if(c)return null;const u=e?[e,...t]:t,d=n?u.every(h=>o(h)):l(u),f=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return d?f?i.jsx(fN,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});function y3e(){const[e,t]=$N(),{deleteMultipleContacts:n}=EC(),[r,a]=p.useState(""),[s,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState(!1),[f,h]=p.useState(90),[m,g]=p.useState(!1),[v,x]=p.useState(""),[y,w]=p.useState(null),[b,_]=p.useState(!1),[k,j]=p.useState(!1),[S,O]=p.useState(null),[I,P]=p.useState(null),[N,D]=p.useState(null),[$,U]=p.useState(null),[F,M]=p.useState(null),[T,A]=p.useState(!1),[L,E]=p.useState(!1),[B,R]=p.useState(""),C=p.useMemo(()=>Array.from(new Set(r.split(/[\s,\n]+/).map(K=>K.trim()).filter(Boolean))),[r]),q=K=>{const fe=new URLSearchParams(e);fe.set("menu",K),t(fe)},Z=()=>{try{io.clear(),$e.success("Local caches cleared")}catch{$e.error("Failed to clear cache")}},J=async()=>{try{const{data:{user:K}}=await ce.auth.getUser();if(!K)return null;const{data:fe}=await ce.from("org_members").select("org_id").eq("user_id",K.id).limit(1).maybeSingle();return(fe==null?void 0:fe.org_id)??null}catch{return null}},ee=async()=>{try{const K=await J();if(!K)return;const{data:fe,error:De}=await kt.from("org_settings").select("retention_days").eq("org_id",K).maybeSingle();if(De)throw De;c((fe==null?void 0:fe.retention_days)??90),h((fe==null?void 0:fe.retention_days)??90)}catch(K){console.error("Failed to fetch retention settings:",K)}},ae=async()=>{try{const K=await J();if(!K)return;const{data:fe,error:De}=await kt.from("org_settings").select("ai_paused, ai_paused_reason, ai_paused_at, ai_paused_by_user_id").eq("org_id",K).maybeSingle();if(De)throw De;O(!!(fe!=null&&fe.ai_paused)),P((fe==null?void 0:fe.ai_paused_reason)??null),D((fe==null?void 0:fe.ai_paused_at)??null);const Ze=(fe==null?void 0:fe.ai_paused_by_user_id)??null;if(U(Ze),Ze)try{const{data:Ve}=await kt.from("users_profile").select("user_id, display_name").eq("user_id",Ze).maybeSingle();if(Ve!=null&&Ve.display_name)M(Ve.display_name);else{const{data:ut}=await kt.from("v_users").select("id, email").eq("id",Ze).maybeSingle();M((ut==null?void 0:ut.email)??Ze)}}catch{M(Ze)}else M(null)}catch(K){console.error("Failed to fetch AI pause status:",K)}},Q=async()=>{try{A(!0);const K=await J();if(!K)throw new Error("Unable to resolve organization");const{error:fe}=await kt.from("org_settings").update({ai_paused:!1,ai_paused_reason:null,ai_paused_at:null,ai_paused_by_user_id:null}).eq("org_id",K);if(fe)throw fe;O(!1),P(null),D(null),U(null),M(null),$e.success("AI auto responses resumed");try{await nn({action:"ai.resume",resource:"org_settings"})}catch{}}catch(K){$e.error((K==null?void 0:K.message)||"Failed to resume AI responses")}finally{A(!1)}},oe=async()=>{try{A(!0);const{data:{user:K}}=await ce.auth.getUser(),fe=(K==null?void 0:K.id)??null,De=await J();if(!De)throw new Error("Unable to resolve organization");const{error:Ze}=await kt.from("org_settings").update({ai_paused:!0,ai_paused_reason:(B==null?void 0:B.trim())||null,ai_paused_at:new Date().toISOString(),ai_paused_by_user_id:fe}).eq("org_id",De);if(Ze)throw Ze;O(!0),P((B==null?void 0:B.trim())||null),D(new Date().toISOString()),U(fe),M(null),E(!1),$e.success("AI auto responses paused");try{await nn({action:"ai.pause",resource:"org_settings",context:{reason:(B==null?void 0:B.trim())||null}})}catch{}ae()}catch(K){$e.error((K==null?void 0:K.message)||"Failed to pause AI responses")}finally{A(!1),R("")}},ge=async()=>{try{_(!0);const K=await J();if(!K)throw new Error("Unable to resolve organization");const{error:fe}=await kt.from("org_settings").update({retention_days:f}).eq("org_id",K);if(fe)throw fe;c(f),d(!1),$e.success(`Retention period updated to ${f} days`);try{await nn({action:"retention.update",resource:"org_settings",context:{retention_days:f}})}catch{}}catch(K){$e.error((K==null?void 0:K.message)||"Failed to update retention settings")}finally{_(!1)}},ie=async()=>{try{_(!0);const{data:K,error:fe}=await kt.rpc("cleanup_old_chat_data",{p_days:l??90});if(fe)throw fe;w(K),$e.success(`Cleanup completed: ${(K==null?void 0:K.threads_deleted)||0} threads, ${(K==null?void 0:K.messages_deleted)||0} messages deleted`);try{await nn({action:"retention.cleanup",resource:"chat_data",context:K})}catch{}}catch(K){$e.error((K==null?void 0:K.message)||"Failed to run cleanup")}finally{_(!1)}},Ie=async()=>{if(!v.trim()){$e.error("Please enter contact UUID");return}try{j(!0);const{data:K,error:fe}=await kt.rpc("gdpr_delete_user_data",{p_contact_id:v.trim()});if(fe)throw fe;$e.success(`GDPR deletion completed: ${(K==null?void 0:K.threads_deleted)||0} threads, ${(K==null?void 0:K.messages_deleted)||0} messages, ${(K==null?void 0:K.contact_deleted)||0} contacts deleted`),g(!1),x("");try{await nn({action:"gdpr.delete_request",resource:"contact",resourceId:v,context:K})}catch{}}catch(K){$e.error((K==null?void 0:K.message)||"Failed to execute GDPR deletion")}finally{j(!1)}};p.useEffect(()=>{ee(),ae()},[]);const me=async()=>{if(C.length===0){$e.error("Provide at least one contact UUID");return}if(window.confirm(`Delete ${C.length} contact(s)? This cannot be undone.`))try{o(!0),await n(C),a(""),$e.success("Contacts deleted")}catch{$e.error("Bulk delete failed")}finally{o(!1)}};return i.jsx(D9,{role:bn.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Admin Panel is available to Master Agents only."}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Panel"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralized controls for master agents."})]}),i.jsx(Tt,{className:"bg-blue-100 text-blue-700 border-0",children:"Master Agent"})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4"})," Access & Management"]})}),i.jsxs(lt,{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[i.jsxs(re,{variant:"outline",className:"justify-start",onClick:()=>q("permissions"),children:[i.jsx(E4,{className:"h-4 w-4 mr-2"})," Manage Roles & Permissions"]}),i.jsxs(re,{variant:"outline",className:"justify-start",onClick:()=>q("humanagents"),children:[i.jsx(wN,{className:"h-4 w-4 mr-2"})," Human Agents"]}),i.jsxs(re,{variant:"outline",className:"justify-start",onClick:()=>q("platforms"),children:[i.jsx(C4,{className:"h-4 w-4 mr-2"})," Platforms & Integrations"]}),i.jsxs(re,{variant:"outline",className:"justify-start",onClick:()=>q("analytics"),children:[i.jsx(x4,{className:"h-4 w-4 mr-2"})," Analytics"]}),i.jsxs(re,{variant:"outline",className:"justify-start",onClick:()=>q("logs"),children:[i.jsx(j4,{className:"h-4 w-4 mr-2"})," Audit Logs"]}),i.jsxs(re,{variant:"outline",className:"justify-start",onClick:()=>q("contacts"),children:[i.jsx(N4,{className:"h-4 w-4 mr-2"})," Contacts"]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"flex items-center gap-2",children:[i.jsx(fo,{className:"h-4 w-4"})," Reliability & Circuit Breaker"]})}),i.jsx(lt,{children:i.jsx(v3e,{})})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"flex items-center gap-2",children:[i.jsx(fo,{className:"h-4 w-4"})," AI Auto Responses"]})}),i.jsxs(lt,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Status:"}),S?i.jsx(Tt,{className:"bg-red-100 text-red-700 border-0",children:"Paused"}):i.jsx(Tt,{className:"bg-emerald-100 text-emerald-700 border-0",children:"Active"})]}),S&&i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:[I?i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",I]}):null,i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Paused"}),F?i.jsxs(i.Fragment,{children:[" by ",F]}):null,N?i.jsxs(i.Fragment,{children:[" at ",new Date(N).toLocaleString()]}):null]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:S?i.jsxs(re,{onClick:Q,disabled:T,children:[i.jsx(UV,{className:"h-4 w-4 mr-2"})," ",T?"Resuming...":"Resume AI Responses"]}):i.jsxs(re,{variant:"destructive",onClick:()=>E(!0),disabled:T,children:[i.jsx(FV,{className:"h-4 w-4 mr-2"})," Pause AI Responses"]})})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"When paused, AI will not auto reply across all channels until resumed."})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{className:"flex items-center gap-2",children:[i.jsx(LT,{className:"h-4 w-4"})," Utilities"]})}),i.jsx(lt,{className:"flex flex-wrap gap-2",children:i.jsxs(re,{variant:"outline",onClick:Z,children:[i.jsx(LT,{className:"h-4 w-4 mr-2"})," Clear Local Cache"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{className:"flex items-center gap-2",children:"Data Retention Policy"})}),i.jsxs(lt,{className:"space-y-3",children:[i.jsx(Je,{className:"text-sm font-medium",children:"Retention Period (days)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(it,{type:"number",value:l??90,onChange:K=>h(parseInt(K.target.value)||90),className:"max-w-xs"}),i.jsx(re,{variant:"outline",onClick:()=>{h(l??90),d(!0)},children:"Edit"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current: ",l??90," days. Chats older than this will be automatically deleted."]}),i.jsx(re,{onClick:ie,disabled:b,className:"w-full",children:b?"Running Cleanup...":"Run Cleanup Now"}),y&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last cleanup: ",y.threads_deleted," threads, ",y.messages_deleted," messages, ",y.contacts_deleted," contacts"]})]})]}),i.jsxs(Ue,{className:"border-red-200",children:[i.jsx(ft,{children:i.jsx(ct,{className:"flex items-center gap-2 text-red-700",children:"GDPR/PDPA Right to Erasure"})}),i.jsxs(lt,{className:"space-y-3",children:[i.jsx(Je,{className:"text-sm font-medium",children:"Contact ID"}),i.jsx(it,{placeholder:"Enter contact UUID",value:v,onChange:K=>x(K.target.value)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Enter the contact ID (UUID) gotten from contact detail to delete all associated data permanently."}),i.jsx(an,{permission:"contacts.delete",children:i.jsx(re,{variant:"destructive",onClick:()=>g(!0),disabled:!v.trim()||k,className:"w-full",children:"Delete User Data"})}),i.jsx("div",{className:"text-xs text-red-600",children:"Warning: This action permanently deletes all data and cannot be undone."})]})]})]}),i.jsx(wn,{open:u,onOpenChange:d,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Configure Data Retention"}),i.jsx(zr,{children:"Set how many days to retain chat data. Data older than this period will be automatically deleted."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx(Je,{htmlFor:"retention-days",children:"Retention Period (days)"}),i.jsx(it,{id:"retention-days",type:"number",value:f,onChange:K=>h(parseInt(K.target.value)||90)})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Automatic cleanup runs daily at 2 AM UTC. You can also trigger manual cleanup from the main panel."})]}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),i.jsx(re,{onClick:ge,disabled:b,children:b?"Saving...":"Save"})]})]})}),i.jsx(wn,{open:L,onOpenChange:E,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Pause AI Auto Responses"}),i.jsx(zr,{children:"This will pause all AI auto replies across all platforms. You can resume anytime."})]}),i.jsx("div",{className:"py-4 space-y-4",children:i.jsxs("div",{children:[i.jsx(Je,{htmlFor:"pause-reason",children:"Reason (optional)"}),i.jsx(Br,{id:"pause-reason",placeholder:"Enter a reason for pausing (visible to admins)",value:B,onChange:K=>R(K.target.value),className:"min-h-[90px]"})]})}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>E(!1),disabled:T,children:"Cancel"}),i.jsx(re,{variant:"destructive",onClick:oe,disabled:T,children:T?"Pausing...":"Confirm Pause"})]})]})}),i.jsx(wn,{open:m,onOpenChange:g,children:i.jsxs(hn,{className:"max-w-md",children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Confirm GDPR Data Deletion"}),i.jsxs(zr,{children:["This action will permanently delete all data associated with contact ID: ",i.jsx("code",{className:"bg-muted px-1 rounded",children:v})]})]}),i.jsxs(Ca,{children:[i.jsx(re,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),i.jsx(re,{variant:"destructive",onClick:Ie,disabled:k,children:k?"Deleting...":"Confirm Deletion"})]})]})}),i.jsxs(Ue,{className:"border-red-200",children:[i.jsx(ft,{children:i.jsxs(ct,{className:"flex items-center gap-2 text-red-700",children:[i.jsx(eo,{className:"h-4 w-4"})," Danger Zone"]})}),i.jsx(lt,{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Paste contact UUIDs (comma/newline separated) to delete permanently."}),i.jsx(Br,{value:r,onChange:K=>a(K.target.value),placeholder:"uuid-1, uuid-2, uuid-3",className:"min-h-[120px]"}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Parsed: ",C.length]}),i.jsx(an,{permission:"contacts.delete",children:i.jsxs(re,{variant:"destructive",onClick:me,disabled:s||C.length===0,children:[i.jsx(ma,{className:"h-4 w-4 mr-2"})," Delete ",C.length||""," Contact",C.length>1?"s":""]})})]})]})})]})]})})}function x3e(){var M,T;ia();const[e,t]=p.useState([]),[n,r]=p.useState(20),[a,s]=p.useState(1),[o,l]=p.useState(0),[c,u]=p.useState("all"),[d,f]=p.useState("all"),[h,m]=p.useState(),[g,v]=p.useState([]),[x,y]=p.useState([]),[w,b]=p.useState({}),[_,k]=p.useState(!1),[j,S]=p.useState(null),[O,I]=p.useState(null),[P,N]=p.useState(!1),D=p.useMemo(()=>{if(!(h!=null&&h.from)||!(h!=null&&h.to))return{from:null,to:null};const A=Pl(h.from).toISOString(),L=LU(h.to).toISOString();return{from:A,to:L}},[h]),$=async()=>{const{data:A}=await ce.from("audit_logs").select("user_id").not("user_id","is",null).limit(1e3),L=Array.from(new Set((A||[]).map(B=>B.user_id)));if(L.length>0){const{data:B}=await ce.from("v_users").select("id,email,display_name").in("id",L),R=(B||[]).map(q=>({id:q.id,email:q.email}));v(R);const C={};for(const q of B||[])C[q.id]={email:q.email,display_name:q.display_name};b(q=>({...q,...C}))}else v([]);const{data:E}=await ce.from("audit_logs").select("action").limit(1e3);y(Array.from(new Set((E||[]).map(B=>B.action))))},U=async()=>{const A=(a-1)*n,{data:L,error:E}=await ce.rpc("get_audit_logs",{p_user_id:c!=="all"?c:null,p_action:d!=="all"?d:null,p_from:D.from,p_to:D.to,p_limit:n,p_offset:A});if(!E){const B=L||[];t(B);let R=ce.from("audit_logs").select("id",{count:"exact"});c!=="all"&&(R=R.eq("user_id",c)),d!=="all"&&(R=R.eq("action",d)),D.from&&(R=R.gte("created_at",D.from)),D.to&&(R=R.lte("created_at",D.to));const{count:C}=await R;l(C||0);const Z=Array.from(new Set(B.map(J=>J.user_id).filter(Boolean))).filter(J=>!w[J]);if(Z.length>0){const{data:J}=await ce.from("v_users").select("id,email,display_name").in("id",Z),ee={};for(const ae of J||[])ee[ae.id]={email:ae.email,display_name:ae.display_name};Object.keys(ee).length&&b(ae=>({...ae,...ee}))}}};p.useEffect(()=>{$()},[]),p.useEffect(()=>{if(h!=null&&h.from&&!(h!=null&&h.to)){I("Select both a start date and an end date to filter logs.");return}if(h!=null&&h.to&&!(h!=null&&h.from)){m({from:h.to,to:h.to}),I(null);return}I(null)},[h]),p.useEffect(()=>{U()},[a,n,c,d,D.from,D.to]),p.useEffect(()=>{const A=ce.channel("realtime:logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"audit_logs"},L=>{const E=L.new;t(R=>[E,...R].slice(0,n));const B=E.user_id;B&&!w[B]&&ce.from("v_users").select("id,email,display_name").eq("id",B).maybeSingle().then(({data:R})=>{R&&b(C=>({...C,[R.id]:{email:R.email,display_name:R.display_name}}))}),l(R=>R+1)}).subscribe();return()=>{ce.removeChannel(A)}},[n]);const F=Math.max(1,Math.ceil(o/n));return i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Logs"}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsx(ct,{children:"Filters"})}),i.jsxs(lt,{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"User"}),i.jsxs(rn,{value:c,onValueChange:u,children:[i.jsx(en,{className:"h-9",children:i.jsx(Xt,{placeholder:"All"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All"}),g.map(A=>i.jsx(at,{value:A.id,children:A.email},A.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"Action"}),i.jsxs(rn,{value:d,onValueChange:f,children:[i.jsx(en,{className:"h-9",children:i.jsx(Xt,{placeholder:"All"})}),i.jsxs(tn,{children:[i.jsx(at,{value:"all",children:"All"}),x.map(A=>i.jsx(at,{value:A,children:A},A))]})]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"text-xs text-muted-foreground block mb-1",children:"Date Range"}),i.jsxs(Ns,{open:P,onOpenChange:A=>N(A),children:[i.jsx(Cs,{asChild:!0,onClick:()=>N(!0),children:i.jsxs(re,{variant:"outline",className:Pe("justify-start text-left font-normal h-9 w-full",!(h!=null&&h.from)&&!(h!=null&&h.to)&&"text-muted-foreground"),children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),h!=null&&h.from&&(h!=null&&h.to)?`${h.from.toLocaleDateString()}  ${h.to.toLocaleDateString()}`:"Select date range"]})}),i.jsx(Qi,{className:"w-auto min-w-[560px] p-0",align:"start",children:i.jsx(Sm,{initialFocus:!0,mode:"range",defaultMonth:h==null?void 0:h.from,selected:h,onSelect:A=>{m(A),A!=null&&A.from&&(A!=null&&A.to)&&N(!1)},numberOfMonths:2})})]}),O?i.jsx("p",{className:"text-xs text-destructive mt-1",children:O}):null]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(rn,{value:String(n),onValueChange:A=>r(Number(A)),children:[i.jsx(en,{className:"h-9",children:i.jsx(Xt,{placeholder:"Page size"})}),i.jsx(tn,{children:[10,20,50,100].map(A=>i.jsxs(at,{value:String(A),children:[A," / page"]},A))})]}),i.jsx(re,{variant:"outline",onClick:()=>{const A=e.map(L=>{var E;return{time:new Date(L.created_at).toISOString(),user:L.user_id?((E=w[L.user_id])==null?void 0:E.email)||L.user_id:"",action:L.action,resource:L.resource,resource_id:L.resource_id||"",ip:L.ip?L.ip.replace(/(\d+\.\d+\.\d+)\.\d+/,"$1.*"):"",context:JSON.stringify(M4(L.context||{}))}});RG(`logs_${new Date().toISOString()}.csv`,A)},children:"Export CSV"})]})]})]}),i.jsxs(Ue,{children:[i.jsx(ft,{children:i.jsxs(ct,{children:["Entries (",o,")"]})}),i.jsxs(lt,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(Hb,{children:[i.jsx(Kb,{children:i.jsxs(so,{children:[i.jsx(er,{children:"Time"}),i.jsx(er,{children:"User"}),i.jsx(er,{children:"Action"}),i.jsx(er,{children:"Resource"}),i.jsx(er,{children:"Resource ID"}),i.jsx(er,{children:"IP"}),i.jsx(er,{})]})}),i.jsx(Vb,{children:e.map(A=>{var L,E;return i.jsxs(so,{children:[i.jsx(qn,{children:new Date(A.created_at).toLocaleString()}),i.jsx(qn,{children:A.user_id?((L=w[A.user_id])==null?void 0:L.display_name)||((E=w[A.user_id])==null?void 0:E.email)||A.user_id:""}),i.jsx(qn,{children:A.action}),i.jsx(qn,{children:A.resource}),i.jsx(qn,{children:A.resource_id||""}),i.jsx(qn,{children:A.ip||""}),i.jsx(qn,{className:"text-right",children:i.jsx(re,{variant:"outline",size:"sm",onClick:()=>{S(A),k(!0)},children:"Details"})})]},A.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",F]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(re,{variant:"outline",disabled:a<=1,onClick:()=>s(A=>Math.max(1,A-1)),children:"Prev"}),i.jsx(re,{variant:"outline",disabled:a>=F,onClick:()=>s(A=>Math.min(F,A+1)),children:"Next"})]})]})]})]}),i.jsx(wn,{open:_,onOpenChange:k,children:i.jsxs(hn,{className:"max-w-2xl",children:[i.jsxs(mn,{children:[i.jsx(pn,{children:"Log Details"}),i.jsx(zr,{children:j?new Date(j.created_at).toLocaleString():""})]}),j&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User"}),i.jsx("div",{children:j.user_id?((M=w[j.user_id])==null?void 0:M.display_name)||((T=w[j.user_id])==null?void 0:T.email)||j.user_id:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Action"}),i.jsx("div",{children:j.action})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource"}),i.jsx("div",{children:j.resource})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource ID"}),i.jsx("div",{children:j.resource_id||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"IP"}),i.jsx("div",{children:j.ip||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User Agent"}),i.jsx("div",{className:"truncate",title:j.user_agent||void 0,children:j.user_agent||""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Context"}),i.jsx("pre",{className:"max-h-64 overflow-auto rounded bg-muted p-3 text-xs",children:JSON.stringify(j.context??{},null,2)})]})]}),i.jsx(Ca,{children:i.jsx(re,{variant:"outline",onClick:()=>k(!1),children:"Close"})})]})})]})}const fD=({children:e})=>{var f,h,m,g;const{user:t,signOut:n}=ia();p.useState("profile");const[r,a]=p.useState(!0),[s,o]=p.useState(!1),l=ci(),c=(v,x)=>v?v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):x.substring(0,2).toUpperCase(),u=async()=>{try{await n()}catch(v){console.error("Error signing out:",v)}},d=()=>{l("/reset-password")};return i.jsxs(Ns,{children:[i.jsx(Cs,{asChild:!0,children:e}),i.jsx(Qi,{className:"w-[300px] h-[320px] p-0 overflow-hidden",side:"left",align:"start",children:i.jsx("div",{className:"flex h-full",children:i.jsx("div",{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Oa,{className:"h-10 w-10",children:[i.jsx(Bc,{src:(f=t==null?void 0:t.user_metadata)==null?void 0:f.avatar_url,alt:((h=t==null?void 0:t.user_metadata)==null?void 0:h.full_name)||(t==null?void 0:t.email)}),i.jsx(Ia,{className:"text-sm bg-blue-100 text-blue-600",children:c((m=t==null?void 0:t.user_metadata)==null?void 0:m.full_name,(t==null?void 0:t.email)||"")})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-semibold",children:((g=t==null?void 0:t.user_metadata)==null?void 0:g.full_name)||"Audit 4"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Online Status"}),i.jsx("div",{className:"text-xs font-medium",children:"Online"})]}),i.jsx(Es,{checked:r,onCheckedChange:a,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Notifications"}),i.jsx("div",{className:"text-xs font-medium",children:"Disabled"})]}),i.jsx(Es,{checked:s,onCheckedChange:o,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Reset Password"}),i.jsx(re,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:d,children:i.jsx(lm,{className:"h-3 w-3 text-muted-foreground"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Log Out"}),i.jsx(re,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:u,children:i.jsx(bN,{className:"h-3 w-3 text-muted-foreground"})})]})]})]})})})})]})};function b3e({icon:e,label:t,active:n=!1,onClick:r,collapsed:a,permissions:s,requireAll:o=!1,resourceAny:l=[],requiredRoles:c=[],roleBypass:u=[]}){const{hasAnyPermission:d,hasAllPermissions:f,hasAnyRole:h,loading:m}=Ir();if(m)return null;const g=o?f(s):d(s),v=c.length===0||h(c);return!(u.length>0&&h(u))&&(!g||!v)?null:i.jsxs("button",{type:"button",onClick:r,className:Pe("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2",n?"bg-blue-100 text-blue-700 border border-blue-200":"text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",a&&"grid-cols-[1.125rem,0fr]"),"aria-current":n?"page":void 0,title:a?t:void 0,children:[i.jsx(e,{className:`h-4 w-4 shrink-0 transition-colors ${n?"text-blue-600":"group-hover:text-blue-600"}`}),i.jsx("span",{className:Pe("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",a&&"opacity-0 pointer-events-none"),children:t})]})}const Ou=e=>{const t=Ju[e];return Array.isArray(t)?t.filter(n=>n==="read"||n.startsWith("read_")).map(n=>`${e}.${n}`):[]},Xj={admin:{key:"admin",label:"Admin Panel",icon:fo,permissions:["admin_panel.read"],requireAll:!1,requiredRoles:[bn.MASTER_AGENT],description:"Master agent control center"},chat:{key:"chat",label:"Chat",icon:Ec,permissions:Ou("threads"),requireAll:!1,description:"View and manage conversations"},analytics:{key:"analytics",label:"Analytics",icon:x4,permissions:Ou("analytics"),requireAll:!1,description:"View performance metrics and insights"},logs:{key:"logs",label:"Logs",icon:j4,permissions:["audit_logs.read"],requireAll:!0,description:"View user action logs"},contacts:{key:"contacts",label:"Contacts",icon:wN,permissions:Ou("contacts"),requireAll:!1,description:"Manage customer contacts and identities"},platforms:{key:"platforms",label:"Connected Platforms",icon:C4,permissions:Ou("channels"),requireAll:!1,description:"Manage connected channels and integrations"},aiagents:{key:"aiagents",label:"AI Agents",icon:y4,permissions:Ou("ai_profiles"),requireAll:!1,description:"Configure and manage AI agents",forbiddenRoles:[bn.AGENT]},humanagents:{key:"humanagents",label:"Human Agents",icon:E4,permissions:Ou("super_agents"),requireAll:!1,roleBypass:[bn.MASTER_AGENT,bn.SUPER_AGENT],description:"Manage human agent assignments and roles"},permissions:{key:"permissions",label:"Permissions",icon:ho,permissions:["roles.read"],requireAll:!0,requiredRoles:[bn.MASTER_AGENT],description:"Manage roles and permissions"}},L9=["admin","chat","analytics","logs","contacts","platforms","aiagents","humanagents","permissions"];function w3e(){const{hasAnyPermission:e,hasAllPermissions:t,hasAnyRole:n,userRoles:r,userPermissions:a}=Ir(),s=u=>{const d=Xj[u];return!d||(Array.isArray(d.forbiddenRoles)&&d.forbiddenRoles.length>0?n(d.forbiddenRoles):!1)?!1:(Array.isArray(d.roleBypass)&&d.roleBypass.length>0?n(d.roleBypass):!1)?!0:(d.permissions.length===0?!0:d.requireAll?t(d.permissions):e(d.permissions))?!d.requiredRoles||d.requiredRoles.length===0?!0:n(d.requiredRoles):!1},o=()=>L9.filter(u=>s(u));return{canAccessNavItem:s,getAccessibleNavItems:o,getDefaultNavItem:()=>{const u=o();return u.length>0?u[0]:null},getNavItem:u=>Xj[u],navigationConfig:Xj}}const dv=({step:e,title:t,description:n,emoji:r})=>i.jsxs("div",{className:"flex items-start gap-4 rounded-lg border border-border bg-card p-4 shadow-sm transition-transform hover:-translate-y-0.5",children:[i.jsx("div",{className:"text-2xl animate-float","aria-hidden":!0,children:r}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Tt,{variant:"secondary",children:[e,"."]}),i.jsx("h3",{className:"text-base font-semibold text-foreground",children:t})]}),i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),hD=()=>{var M,T,A,L,E;const[e,t]=p.useState("chat"),[n,r]=p.useState(!1),{user:a,signOut:s,setAccountDeactivated:o,accountDeactivated:l}=ia();ci();const[c,u]=$N(),{loading:d,hasRole:f}=Ir(),{getDefaultNavItem:h,getNavItem:m,canAccessNavItem:g,getAccessibleNavItems:v}=w3e(),[x,y]=p.useState(!1),[w,b]=p.useState(!1),[_,k]=p.useState(null),[j,S]=p.useState(null),O="synka_ai_paused_ack",I=L9,P=(B,R)=>{const C=new URLSearchParams(c);C.set("menu",B),u(C,R)};p.useEffect(()=>{if(d)return;const B=c.get("menu");if(B&&I.includes(B)){const R=B;if(g(R))R!==e&&t(R);else{const C=h();C&&C!==e&&(t(C),P(C,{replace:!0}))}}else if(!B){const R=h();P(R||"chat",{replace:!0})}},[c,g,h,d]),p.useEffect(()=>{if(d)return;const B=h();(!I.includes(e)||!g(e))&&B&&(t(B),P(B,{replace:!0}))},[h,g,e,I,d]);const N=async()=>{try{await s()}catch(B){console.error("Error signing out:",B)}},D=(B,R)=>B?B.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):R.substring(0,2).toUpperCase();p.useEffect(()=>{(async()=>{var R;try{const{data:C}=await ce.auth.getUser(),q=(R=C==null?void 0:C.user)==null?void 0:R.id;if(!q)return;const{data:Z}=await ce.from("org_members").select("org_id").eq("user_id",q).limit(1).maybeSingle(),J=Z==null?void 0:Z.org_id;if(!J)return;const{data:ee,error:ae}=await kt.from("org_settings").select("ai_paused, ai_paused_at, ai_paused_by_user_id").eq("org_id",J).maybeSingle();if(ae)throw ae;const Q=!!(ee!=null&&ee.ai_paused);b(Q),k((ee==null?void 0:ee.ai_paused_at)??null);const oe=ee==null?void 0:ee.ai_paused_by_user_id;if(oe){let ge=null;try{const{data:ie}=await kt.from("users_profile").select("user_id, display_name").eq("user_id",oe).maybeSingle();if(ge=(ie==null?void 0:ie.display_name)??null,!ge){const{data:Ie}=await kt.from("v_users").select("id, email").eq("id",oe).maybeSingle();ge=(Ie==null?void 0:Ie.email)??oe}}catch{ge=oe}S(ge)}else S(null)}catch{}})()},[]),p.useEffect(()=>{w?localStorage.getItem(O)||y(!0):(localStorage.removeItem(O),y(!1))},[w]);const $=()=>{try{localStorage.setItem(O,Date.now().toString())}catch{}y(!1)},U=()=>{t("admin"),P("admin")},F=f(bn.MASTER_AGENT)||f(bn.SUPER_AGENT);return l?i.jsx("div",{className:"min-h-screen bg-background text-foreground",children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akun Dinonaktifkan"}),i.jsx("p",{className:"text-gray-600",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]})})}):i.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[i.jsxs("div",{className:"mx-auto flex min-h-screen",children:[i.jsxs("aside",{className:`shrink-0 border-r border-sidebar-border bg-sidebar transition-all duration-300 ease-in-out ${n?"w-64":"w-[4.7rem]"} md:flex md:flex-col p-4 sticky top-0 h-screen overflow-y-auto`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsx("div",{className:"flex items-center justify-center px-2 py-3 transition-all duration-200",children:n?i.jsx("img",{src:"/synka.png",alt:"Synka",className:"h-10 w-auto object-contain transition-all duration-300 scale-125"}):i.jsx("img",{src:"/synka_logo.png",alt:"Synka Logo",className:"h-10 w-auto object-contain transition-all duration-300 scale-110"})}),i.jsx(Md,{className:"mb-4 mt-1"}),i.jsx("nav",{className:"flex flex-col gap-1 flex-1",children:v().map(B=>{const R=m(B);return i.jsx(b3e,{icon:R.icon,label:R.label,active:e===B,onClick:()=>{t(B),P(B)},collapsed:!n,permissions:R.permissions,requireAll:R.requireAll,resourceAny:R.resourceAny,requiredRoles:R.requiredRoles,roleBypass:R.roleBypass},B)})}),i.jsxs("div",{className:"mt-auto flex flex-col gap-1 pt-6",children:[i.jsx(Md,{className:"mb-3"}),i.jsx(fD,{children:i.jsxs("button",{type:"button",className:Pe("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2","text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",!n&&"grid-cols-[1.125rem,0fr]"),title:n?void 0:"Profile",children:[i.jsx(ZV,{className:"h-4 w-4 shrink-0 transition-colors group-hover:text-blue-600"}),i.jsx("span",{className:Pe("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",!n&&"opacity-0 pointer-events-none"),children:"Profile"})]})})]})]}),i.jsxs("main",{className:"flex-1",children:[i.jsx("header",{className:"sticky top-0 z-10 border-b border-border bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:i.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 md:px-8",children:[i.jsx("div",{className:"flex items-center gap-2 md:gap-3"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(Tt,{className:"hidden sm:inline-flex bg-success text-success-foreground cursor-help",children:"Online"})}),i.jsx(ve,{children:i.jsx("p",{children:"Status pengguna saat ini: Online"})})]}),i.jsx(nU,{}),i.jsxs("div",{className:"text-right hidden sm:block min-w-0",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("div",{className:"text-sm font-medium max-w-[28ch] truncate cursor-help",children:((M=a==null?void 0:a.user_metadata)==null?void 0:M.full_name)||"User"})}),i.jsx(ve,{children:i.jsx("p",{children:"Nama lengkap pengguna"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("div",{className:"text-xs text-muted-foreground max-w-[32ch] truncate cursor-help",children:a==null?void 0:a.email})}),i.jsx(ve,{children:i.jsx("p",{children:"Alamat email pengguna"})})]})]}),i.jsxs(dc,{children:[i.jsx(fc,{asChild:!0,children:i.jsx(re,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsxs(Oa,{className:"h-9 w-9",children:[i.jsx(Bc,{src:(T=a==null?void 0:a.user_metadata)==null?void 0:T.avatar_url,alt:((A=a==null?void 0:a.user_metadata)==null?void 0:A.full_name)||(a==null?void 0:a.email)}),i.jsx(Ia,{className:"text-sm",children:D((L=a==null?void 0:a.user_metadata)==null?void 0:L.full_name,(a==null?void 0:a.email)||"")})]})})}),i.jsxs(el,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(q5,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:((E=a==null?void 0:a.user_metadata)==null?void 0:E.full_name)||"User"}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a==null?void 0:a.email})]})}),i.jsx(_1,{}),i.jsx(fD,{children:i.jsxs("button",{className:"flex items-center w-full px-2 py-1.5 text-sm text-left hover:bg-accent hover:text-accent-foreground rounded-sm",children:[i.jsx(cy,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Profile"})]})}),i.jsx(_1,{}),i.jsxs(ca,{onClick:N,children:[i.jsx(bN,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})]})]})}),i.jsx("section",{className:"px-4 py-6 md:px-8",children:e==="admin"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Admin Panel"}),i.jsx(y3e,{})]}):e==="chat"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Chat Inbox"}),i.jsx(tge,{})]}):e==="analytics"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Analytics Dashboard"}),i.jsx(an,{permission:"analytics.read",children:i.jsx(VFe,{})})]}):e==="contacts"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Contacts Management"}),i.jsx(an,{permission:"contacts.read",children:i.jsx(fge,{})})]}):e==="platforms"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Connected Platforms"}),i.jsx(an,{permission:"channels.read",children:i.jsx(yge,{})})]}):e==="aiagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"AI Agents"}),i.jsx(an,{permission:"ai_profiles.read",children:i.jsx(u3e,{})})]}):e==="humanagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Human Agents"}),F?i.jsx(lD,{}):i.jsx(an,{permission:"super_agents.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Human Agents."}),children:i.jsx(lD,{})})]}):e==="permissions"?i.jsx(D9,{role:bn.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Permissions."}),children:i.jsxs(an,{permission:"roles.read",children:[i.jsx("h1",{className:"sr-only",children:"Permissions"}),i.jsx(m3e,{})]})}):e==="logs"?i.jsxs(an,{permission:"audit_logs.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Logs."}),children:[i.jsx("h1",{className:"sr-only",children:"Logs"}),i.jsx(x3e,{})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Selamat datang kembali di Synka!"}),i.jsxs("div",{className:"mt-6 grid gap-4 md:max-w-2xl",children:[i.jsx(dv,{step:1,title:"Hubungkan Platform",description:"Mulai terima pesan dari Whatsapp, IG, dan FB Anda!",emoji:""}),i.jsx(dv,{step:2,title:"Buat AI Agent",description:"Jawab pesan masuk dengan Agent AI Anda.",emoji:""}),i.jsx(dv,{step:3,title:"Undang Agen Manusia",description:"Undang tim Anda untuk membantu menjawab chat.",emoji:""}),i.jsx(dv,{step:4,title:"Konek AI Agent ke Inbox",description:"Hubungkan AI Agent dan Human Agent ke platform.",emoji:""})]}),i.jsxs("p",{className:"mt-4 text-sm text-muted-foreground",children:["Butuh bantuan lebih? ",i.jsx("a",{className:"text-brand underline underline-offset-4",href:"#",children:"Lihat Tutorial Youtube kami"})]})]})})]})]}),i.jsx(bae,{open:x,onClose:$,isMasterAgent:f(bn.MASTER_AGENT),pausedByName:j,pausedAt:_,onOpenAdminPanel:f(bn.MASTER_AGENT)?U:void 0})]})};function j3e(){var l,c,u,d;const{user:e,signOut:t}=ia(),[n,r]=p.useState(!1),a=async()=>{r(!0);try{await t(),$e.success("Signed out successfully")}catch{$e.error("Failed to sign out")}finally{r(!1)}};if(!e)return null;const s=(f,h)=>f?f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2):h.substring(0,2).toUpperCase(),o=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return i.jsxs(Ue,{className:"w-full max-w-md mx-auto",children:[i.jsxs(ft,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs(Oa,{className:"h-20 w-20",children:[i.jsx(Bc,{src:(l=e.user_metadata)==null?void 0:l.avatar_url,alt:((c=e.user_metadata)==null?void 0:c.full_name)||e.email}),i.jsx(Ia,{className:"text-lg",children:s((u=e.user_metadata)==null?void 0:u.full_name,e.email||"")})]})}),i.jsx(ct,{className:"text-xl",children:((d=e.user_metadata)==null?void 0:d.full_name)||"User"}),i.jsx(Ni,{children:e.email}),i.jsx("div",{className:"flex justify-center mt-2",children:i.jsxs(Tt,{variant:"secondary",className:"flex items-center gap-1",children:[i.jsx(ho,{className:"w-3 h-3"}),e.email_confirmed_at?"Verified":"Unverified"]})})]}),i.jsxs(lt,{className:"space-y-4",children:[i.jsx(Md,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ly,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Lc,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Member since"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o(e.created_at)})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(cy,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"User ID"}),i.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[e.id.substring(0,8),"..."]})]})]})]}),i.jsx(Md,{}),i.jsxs(re,{variant:"outline",className:"w-full",onClick:a,disabled:n,children:[i.jsx(bN,{className:"w-4 h-4 mr-2"}),n?"Signing out...":"Sign Out"]})]})]})}function _3e(){const e=ci();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs(re,{variant:"ghost",onClick:()=>e("/"),children:[i.jsx(kp,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),i.jsx(nU,{})]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Profile"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your account settings and preferences"})]}),i.jsx(j3e,{})]})})}const mD=e=>e.replace(/\s/g,""),k3e=[{id:"lowercase",test:e=>/[a-z]/.test(e),message:"Minimal 1 huruf kecil (a-z)"},{id:"uppercase",test:e=>/[A-Z]/.test(e),message:"Minimal 1 huruf besar (A-Z)"},{id:"number",test:e=>/[0-9]/.test(e),message:"Minimal 1 angka (0-9)"},{id:"symbol",test:e=>/[^A-Za-z0-9]/.test(e),message:"Minimal 1 simbol (contoh: !@#$)"},{id:"length",test:e=>e.length>=8,message:"Minimal 8 karakter"}],pD=e=>k3e.filter(t=>!t.test(e)).map(t=>t.message);function gD(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState(!1),[h,m]=p.useState(!1),g=ci();p.useEffect(()=>{(async()=>{try{const _=new URL(window.location.href).searchParams.get("code");_&&await ce.auth.exchangeCodeForSession(_);const{data:{session:k}}=await ce.auth.getSession();k||u("Invalid or expired reset link. Please request a new password reset.")}catch(b){console.warn("Password setup init failed",b)}})()},[]);const v=async w=>{if(w.preventDefault(),l(!0),u(null),!e){u("Kata sandi baru belum diisi."),m(!0),l(!1);return}if(pD(e).length>0){u("Pastikan kata sandi memenuhi semua persyaratan."),m(!0),l(!1);return}if(e!==n){u("Konfirmasi kata sandi tidak sama."),l(!1);return}try{const{error:_}=await ce.auth.updateUser({password:e});if(_)throw _;try{const{data:{user:k}}=await ce.auth.getUser();k&&await ce.from("users_profile").update({password_set:!0}).eq("user_id",k.id)}catch(k){console.warn("Failed to update password_set flag:",k)}f(!0),$e.success("Password updated successfully!");try{await ce.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("app.lastAuthEvent"),localStorage.removeItem("auth.intent")}catch{}setTimeout(()=>{g("/")},1500)}catch(_){console.error("Password reset error:",_),u(_ instanceof Error?_.message:"Gagal memperbarui kata sandi."),$e.error("Gagal memperbarui kata sandi.")}finally{l(!1)}},x=h&&e.length>0,y=p.useMemo(()=>x?pD(e):[],[e,x]);return d?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(Ue,{className:"w-full max-w-md",children:[i.jsxs(ft,{className:"text-center",children:[i.jsx(ct,{className:"text-2xl font-bold text-green-600",children:"Success!"}),i.jsx(Ni,{children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),i.jsx(lt,{className:"text-center",children:i.jsx(re,{onClick:()=>g("/"),className:"w-full",children:"Go to Login"})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(Ue,{className:"w-full max-w-md",children:[i.jsxs(ft,{className:"space-y-1",children:[i.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>g("/"),className:"absolute top-4 left-4",children:[i.jsx(kp,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(ct,{className:"text-2xl font-bold",children:"Reset Password"}),i.jsx(Ni,{children:"Enter your new password below"})]})]}),i.jsxs(lt,{children:[c&&i.jsx(bm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(wm,{className:"text-red-800",children:c})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(lm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(it,{id:"password",type:a?"text":"password",placeholder:"Enter new password",value:e,onChange:w=>{h||m(!0),t(mD(w.target.value))},onKeyDown:w=>{w.key===" "&&w.preventDefault()},className:"pl-10 pr-10",required:!0,minLength:8}),i.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!a),children:a?i.jsx(_4,{className:"h-4 w-4"}):i.jsx(xN,{className:"h-4 w-4"})})]}),y.length>0&&i.jsx("div",{className:"mt-2 space-y-1",children:y.map(w=>i.jsxs("p",{className:"flex items-center gap-2 text-xs text-red-600",children:[i.jsx(w4,{className:"h-3 w-3"}),w]},w))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Je,{htmlFor:"confirm-password",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(lm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(it,{id:"confirm-password",type:a?"text":"password",placeholder:"Confirm new password",value:n,onChange:w=>r(mD(w.target.value)),onKeyDown:w=>{w.key===" "&&w.preventDefault()},className:"pl-10",required:!0,minLength:8})]})]}),i.jsx(re,{type:"submit",className:"w-full",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating password..."]}):"Update Password"})]})]})]})})}var S3e=Object.defineProperty,N3e=Object.defineProperties,C3e=Object.getOwnPropertyDescriptors,Px=Object.getOwnPropertySymbols,$9=Object.prototype.hasOwnProperty,F9=Object.prototype.propertyIsEnumerable,vD=(e,t,n)=>t in e?S3e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A3e=(e,t)=>{for(var n in t||(t={}))$9.call(t,n)&&vD(e,n,t[n]);if(Px)for(var n of Px(t))F9.call(t,n)&&vD(e,n,t[n]);return e},E3e=(e,t)=>N3e(e,C3e(t)),T3e=(e,t)=>{var n={};for(var r in e)$9.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Px)for(var r of Px(e))t.indexOf(r)<0&&F9.call(e,r)&&(n[r]=e[r]);return n};function P3e(e){let t=setTimeout(e,0),n=setTimeout(e,10),r=setTimeout(e,50);return[t,n,r]}function O3e(e){let t=p.useRef();return p.useEffect(()=>{t.current=e}),t.current}var I3e=18,U9=40,R3e=`${U9}px`,M3e=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function D3e({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:r}){let[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),d=p.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&a&&o,[a,o,n]),f=p.useCallback(()=>{let h=e.current,m=t.current;if(!h||!m||c||n==="none")return;let g=h,v=g.getBoundingClientRect().left+g.offsetWidth,x=g.getBoundingClientRect().top+g.offsetHeight/2,y=v-I3e,w=x;document.querySelectorAll(M3e).length===0&&document.elementFromPoint(y,w)===h||(s(!0),u(!0))},[e,t,c,n]);return p.useEffect(()=>{let h=e.current;if(!h||n==="none")return;function m(){let v=window.innerWidth-h.getBoundingClientRect().right;l(v>=U9)}m();let g=setInterval(m,1e3);return()=>{clearInterval(g)}},[e,n]),p.useEffect(()=>{let h=r||document.activeElement===t.current;if(n==="none"||!h)return;let m=setTimeout(f,0),g=setTimeout(f,2e3),v=setTimeout(f,5e3),x=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(g),clearTimeout(v),clearTimeout(x)}},[t,r,n,f]),{hasPWMBadge:a,willPushPWMBadge:d,PWM_BADGE_SPACE_WIDTH:R3e}}var B9=p.createContext({}),z9=p.forwardRef((e,t)=>{var n=e,{value:r,onChange:a,maxLength:s,textAlign:o="left",pattern:l,placeholder:c,inputMode:u="numeric",onComplete:d,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:h,containerClassName:m,noScriptCSSFallback:g=L3e,render:v,children:x}=n,y=T3e(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),w,b,_,k,j;let[S,O]=p.useState(typeof y.defaultValue=="string"?y.defaultValue:""),I=r??S,P=O3e(I),N=p.useCallback(me=>{a==null||a(me),O(me)},[a]),D=p.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),$=p.useRef(null),U=p.useRef(null),F=p.useRef({value:I,onChange:N,isIOS:typeof window<"u"&&((b=(w=window==null?void 0:window.CSS)==null?void 0:w.supports)==null?void 0:b.call(w,"-webkit-touch-callout","none"))}),M=p.useRef({prev:[(_=$.current)==null?void 0:_.selectionStart,(k=$.current)==null?void 0:k.selectionEnd,(j=$.current)==null?void 0:j.selectionDirection]});p.useImperativeHandle(t,()=>$.current,[]),p.useEffect(()=>{let me=$.current,K=U.current;if(!me||!K)return;F.current.value!==me.value&&F.current.onChange(me.value),M.current.prev=[me.selectionStart,me.selectionEnd,me.selectionDirection];function fe(){if(document.activeElement!==me){R(null),q(null);return}let Ve=me.selectionStart,ut=me.selectionEnd,Ye=me.selectionDirection,ot=me.maxLength,te=me.value,Xe=M.current.prev,dt=-1,de=-1,we;if(te.length!==0&&Ve!==null&&ut!==null){let Ge=Ve===ut,vt=Ve===te.length&&te.length<ot;if(Ge&&!vt){let wt=Ve;if(wt===0)dt=0,de=1,we="forward";else if(wt===ot)dt=wt-1,de=wt,we="backward";else if(ot>1&&te.length>1){let Nt=0;if(Xe[0]!==null&&Xe[1]!==null){we=wt<Xe[1]?"backward":"forward";let yt=Xe[0]===Xe[1]&&Xe[0]<ot;we==="backward"&&!yt&&(Nt=-1)}dt=Nt+wt,de=Nt+wt+1}}dt!==-1&&de!==-1&&dt!==de&&$.current.setSelectionRange(dt,de,we)}let se=dt!==-1?dt:Ve,Be=de!==-1?de:ut,je=we??Ye;R(se),q(Be),M.current.prev=[se,Be,je]}if(document.addEventListener("selectionchange",fe,{capture:!0}),fe(),document.activeElement===me&&E(!0),!document.getElementById("input-otp-style")){let Ve=document.createElement("style");if(Ve.id="input-otp-style",document.head.appendChild(Ve),Ve.sheet){let ut="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";hh(Ve.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),hh(Ve.sheet,`[data-input-otp]:autofill { ${ut} }`),hh(Ve.sheet,`[data-input-otp]:-webkit-autofill { ${ut} }`),hh(Ve.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),hh(Ve.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let De=()=>{K&&K.style.setProperty("--root-height",`${me.clientHeight}px`)};De();let Ze=new ResizeObserver(De);return Ze.observe(me),()=>{document.removeEventListener("selectionchange",fe,{capture:!0}),Ze.disconnect()}},[]);let[T,A]=p.useState(!1),[L,E]=p.useState(!1),[B,R]=p.useState(null),[C,q]=p.useState(null);p.useEffect(()=>{P3e(()=>{var me,K,fe,De;(me=$.current)==null||me.dispatchEvent(new Event("input"));let Ze=(K=$.current)==null?void 0:K.selectionStart,Ve=(fe=$.current)==null?void 0:fe.selectionEnd,ut=(De=$.current)==null?void 0:De.selectionDirection;Ze!==null&&Ve!==null&&(R(Ze),q(Ve),M.current.prev=[Ze,Ve,ut])})},[I,L]),p.useEffect(()=>{P!==void 0&&I!==P&&P.length<s&&I.length===s&&(d==null||d(I))},[s,d,P,I]);let Z=D3e({containerRef:U,inputRef:$,pushPasswordManagerStrategy:f,isFocused:L}),J=p.useCallback(me=>{let K=me.currentTarget.value.slice(0,s);if(K.length>0&&D&&!D.test(K)){me.preventDefault();return}typeof P=="string"&&K.length<P.length&&document.dispatchEvent(new Event("selectionchange")),N(K)},[s,N,P,D]),ee=p.useCallback(()=>{var me;if($.current){let K=Math.min($.current.value.length,s-1),fe=$.current.value.length;(me=$.current)==null||me.setSelectionRange(K,fe),R(K),q(fe)}E(!0)},[s]),ae=p.useCallback(me=>{var K,fe;let De=$.current;if(!h&&(!F.current.isIOS||!me.clipboardData||!De))return;let Ze=me.clipboardData.getData("text/plain"),Ve=h?h(Ze):Ze;me.preventDefault();let ut=(K=$.current)==null?void 0:K.selectionStart,Ye=(fe=$.current)==null?void 0:fe.selectionEnd,ot=(ut!==Ye?I.slice(0,ut)+Ve+I.slice(Ye):I.slice(0,ut)+Ve+I.slice(ut)).slice(0,s);if(ot.length>0&&D&&!D.test(ot))return;De.value=ot,N(ot);let te=Math.min(ot.length,s-1),Xe=ot.length;De.setSelectionRange(te,Xe),R(te),q(Xe)},[s,N,D,I]),Q=p.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),oe=p.useMemo(()=>({position:"absolute",inset:0,width:Z.willPushPWMBadge?`calc(100% + ${Z.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Z.willPushPWMBadge?`inset(0 ${Z.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Z.PWM_BADGE_SPACE_WIDTH,Z.willPushPWMBadge,o]),ge=p.useMemo(()=>p.createElement("input",E3e(A3e({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":I.length===0||void 0,"data-input-otp-mss":B,"data-input-otp-mse":C,inputMode:u,pattern:D==null?void 0:D.source,"aria-placeholder":c,style:oe,maxLength:s,value:I,ref:$,onPaste:me=>{var K;ae(me),(K=y.onPaste)==null||K.call(y,me)},onChange:J,onMouseOver:me=>{var K;A(!0),(K=y.onMouseOver)==null||K.call(y,me)},onMouseLeave:me=>{var K;A(!1),(K=y.onMouseLeave)==null||K.call(y,me)},onFocus:me=>{var K;ee(),(K=y.onFocus)==null||K.call(y,me)},onBlur:me=>{var K;E(!1),(K=y.onBlur)==null||K.call(y,me)}})),[J,ee,ae,u,oe,s,C,B,y,D==null?void 0:D.source,I]),ie=p.useMemo(()=>({slots:Array.from({length:s}).map((me,K)=>{var fe;let De=L&&B!==null&&C!==null&&(B===C&&K===B||K>=B&&K<C),Ze=I[K]!==void 0?I[K]:null,Ve=I[0]!==void 0?null:(fe=c==null?void 0:c[K])!=null?fe:null;return{char:Ze,placeholderChar:Ve,isActive:De,hasFakeCaret:De&&Ze===null}}),isFocused:L,isHovering:!y.disabled&&T}),[L,T,s,C,B,y.disabled,I]),Ie=p.useMemo(()=>v?v(ie):p.createElement(B9.Provider,{value:ie},x),[x,ie,v]);return p.createElement(p.Fragment,null,g!==null&&p.createElement("noscript",null,p.createElement("style",null,g)),p.createElement("div",{ref:U,"data-input-otp-container":!0,style:Q,className:m},Ie,p.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ge)))});z9.displayName="Input";function hh(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var L3e=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const W9=p.forwardRef(({className:e,containerClassName:t,...n},r)=>i.jsx(z9,{ref:r,containerClassName:Pe("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:Pe("disabled:cursor-not-allowed",e),...n}));W9.displayName="InputOTP";const q9=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("flex items-center",e),...t}));q9.displayName="InputOTPGroup";const cc=p.forwardRef(({index:e,className:t,...n},r)=>{const a=p.useContext(B9),{char:s,hasFakeCaret:o,isActive:l}=a.slots[e];return i.jsxs("div",{ref:r,className:Pe("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[s,o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});cc.displayName="InputOTPSlot";const $3e=p.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(zV,{})}));$3e.displayName="InputOTPSeparator";function F3e(){const e=ci(),t=Fl(),{user:n,session:r,otpRequired:a,setOtpVerified:s}=ia(),[o,l]=p.useState(""),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[h,m]=p.useState(null),[g,v]=p.useState(null),[x,y]=p.useState(!1),[w,b]=p.useState(0),[_,k]=p.useState(0);p.useEffect(()=>{v((n==null?void 0:n.email)??null),(!n||!a)&&e("/",{replace:!0});try{const I=new URL(window.location.href),P=I.searchParams.get("type"),N=!!I.searchParams.get("code"),$=(window.location.hash||"").includes("access_token=");y(P==="recovery"||N||$);const U=localStorage.getItem("otpCooldownUntil"),F=U?parseInt(U,10):0;F&&F>Date.now()&&b(F)}catch{}},[n,a,e]),p.useEffect(()=>{if(!w){k(0);return}const I=()=>{const N=Math.ceil((w-Date.now())/1e3);if(N<=0){k(0),b(0);try{localStorage.removeItem("otpCooldownUntil")}catch{}}else k(N)};I();const P=setInterval(I,1e3);return()=>clearInterval(P)},[w]);const j=async I=>{var P,N;I.preventDefault(),u(!0),m(null);try{const D=n==null?void 0:n.email,{data:$,error:U}=await ce.rpc("verify_email_2fa",{p_code:o,p_session_minutes:10,p_user:n==null?void 0:n.id});if(U)throw U;if(!$)throw new Error("Invalid code");s(!0);try{localStorage.setItem("otpVerified","true"),localStorage.removeItem("auth.intent")}catch{}if($e.success("Verification successful"),(((P=t==null?void 0:t.state)==null?void 0:P.intent)||null)==="recovery"||x)e("/reset-password",{replace:!0});else{const M=((N=t==null?void 0:t.state)==null?void 0:N.from)||"/";e(M,{replace:!0})}}catch(D){m((D==null?void 0:D.message)||"Verification failed"),$e.error("Verification failed")}finally{u(!1)}},S=async()=>{if(!(_>0)){f(!0);try{await ce.functions.invoke("send-2fa-login-email",{headers:r!=null&&r.access_token?{Authorization:`Bearer ${r.access_token}`}:void 0}),$e.success("A new code was sent");const I=Date.now()+3e4;b(I);try{localStorage.setItem("otpCooldownUntil",String(I))}catch{}}catch{$e.error("Could not resend code")}finally{f(!1)}}},O=async()=>{try{await ce.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("auth.intent"),localStorage.removeItem("otpCooldownUntil")}catch{}e("/",{replace:!0})};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(Ue,{className:"w-full max-w-md",children:[i.jsxs(ft,{className:"space-y-1 text-center",children:[i.jsx(ct,{className:"text-2xl font-bold",children:"Enter verification code"}),i.jsxs(Ni,{children:["We sent a 6-digit code to ",g?i.jsx("span",{className:"font-medium",children:g}):"your email","."]})]}),i.jsxs(lt,{children:[h&&i.jsx(bm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(wm,{className:"text-red-800",children:h})}),i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(W9,{maxLength:6,value:o,onChange:l,autoFocus:!0,children:i.jsxs(q9,{children:[i.jsx(cc,{index:0}),i.jsx(cc,{index:1}),i.jsx(cc,{index:2}),i.jsx(cc,{index:3}),i.jsx(cc,{index:4}),i.jsx(cc,{index:5})]})})}),i.jsx(re,{type:"submit",className:"w-full",disabled:c||o.length!==6,children:c?i.jsxs(i.Fragment,{children:[i.jsx(Vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsx("span",{children:"Didn't get the code?"}),i.jsx(re,{type:"button",variant:"link",className:"px-0",onClick:S,disabled:d||_>0,children:d?"Resending...":_>0?`Resend in ${_}s`:"Resend code"})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(re,{type:"button",variant:"ghost",onClick:O,children:"Sign out"})})]})]})]})})}function U3e(){const e=ci();return p.useEffect(()=>{(async()=>{try{try{const n=[];for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a);s&&n.push(s)}n.forEach(a=>{try{localStorage.removeItem(a)}catch{}});const r=[];for(let a=0;a<sessionStorage.length;a++){const s=sessionStorage.key(a);s&&r.push(s)}r.forEach(a=>{try{sessionStorage.removeItem(a)}catch{}})}catch(n){console.warn("Error clearing cache:",n)}await ce.auth.signOut()}catch{}e("/",{replace:!0})})()},[e]),null}const B3e=()=>{const e=Fl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var hs="Accordion",z3e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[dE,W3e,q3e]=wp(hs),[U0,I5e]=Rr(hs,[q3e,N9]),fE=N9(),H9=Y.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,s=r;return i.jsx(dE.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?i.jsx(G3e,{...s,ref:t}):i.jsx(V3e,{...a,ref:t})})});H9.displayName=hs;var[K9,H3e]=U0(hs),[V9,K3e]=U0(hs,{collapsible:!1}),V3e=Y.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,c]=Ba({prop:n,defaultProp:r??"",onChange:a,caller:hs});return i.jsx(K9,{scope:e.__scopeAccordion,value:Y.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:Y.useCallback(()=>s&&c(""),[s,c]),children:i.jsx(V9,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(G9,{...o,ref:t})})})}),G3e=Y.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...s}=e,[o,l]=Ba({prop:n,defaultProp:r??[],onChange:a,caller:hs}),c=Y.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=Y.useCallback(d=>l((f=[])=>f.filter(h=>h!==d)),[l]);return i.jsx(K9,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(V9,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(G9,{...s,ref:t})})})}),[Y3e,B0]=U0(hs),G9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:s="vertical",...o}=e,l=Y.useRef(null),c=Mt(l,t),u=W3e(n),f=wf(a)==="ltr",h=qe(e.onKeyDown,m=>{var O;if(!z3e.includes(m.key))return;const g=m.target,v=u().filter(I=>{var P;return!((P=I.ref.current)!=null&&P.disabled)}),x=v.findIndex(I=>I.ref.current===g),y=v.length;if(x===-1)return;m.preventDefault();let w=x;const b=0,_=y-1,k=()=>{w=x+1,w>_&&(w=b)},j=()=>{w=x-1,w<b&&(w=_)};switch(m.key){case"Home":w=b;break;case"End":w=_;break;case"ArrowRight":s==="horizontal"&&(f?k():j());break;case"ArrowDown":s==="vertical"&&k();break;case"ArrowLeft":s==="horizontal"&&(f?j():k());break;case"ArrowUp":s==="vertical"&&j();break}const S=w%y;(O=v[S].ref.current)==null||O.focus()});return i.jsx(Y3e,{scope:n,disabled:r,direction:a,orientation:s,children:i.jsx(dE.Slot,{scope:n,children:i.jsx(st.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:h})})})}),Ox="AccordionItem",[X3e,hE]=U0(Ox),Y9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,s=B0(Ox,n),o=H3e(Ox,n),l=fE(n),c=mr(),u=r&&o.value.includes(r)||!1,d=s.disabled||e.disabled;return i.jsx(X3e,{scope:n,open:u,disabled:d,triggerId:c,children:i.jsx(E9,{"data-orientation":s.orientation,"data-state":tH(u),...l,...a,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});Y9.displayName=Ox;var X9="AccordionHeader",J9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=B0(hs,n),s=hE(X9,n);return i.jsx(st.h3,{"data-orientation":a.orientation,"data-state":tH(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});J9.displayName=X9;var gS="AccordionTrigger",Q9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=B0(hs,n),s=hE(gS,n),o=K3e(gS,n),l=fE(n);return i.jsx(dE.ItemSlot,{scope:n,children:i.jsx(n3e,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...r,ref:t})})});Q9.displayName=gS;var Z9="AccordionContent",eH=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=B0(hs,n),s=hE(Z9,n),o=fE(n);return i.jsx(r3e,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});eH.displayName=Z9;function tH(e){return e?"open":"closed"}var J3e=H9,Q3e=Y9,Z3e=J9,nH=Q9,rH=eH;const e5e=J3e,aH=p.forwardRef(({className:e,...t},n)=>i.jsx(Q3e,{ref:n,className:Pe("border-b",e),...t}));aH.displayName="AccordionItem";const iH=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(Z3e,{className:"flex",children:i.jsxs(nH,{ref:r,className:Pe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx(Pa,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));iH.displayName=nH.displayName;const sH=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(rH,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:Pe("pb-4 pt-0",e),children:t})}));sH.displayName=rH.displayName;const yD=`# Change Log\r
\r
# [0.1.79] FE/DB CEKAT 2026-02-10\r
### File Attachment Support\r
- **File Attachments**: Added WhatsApp-like file attachment support to all chat interfaces:\r
  - **LiveChat** - End-user chat widget\r
  - **ConversationPage** - Agent inbox message viewing\r
  - **ChatPreview** - AI Agent Settings demo chat\r
- **New Component**: \`FileUploadButton.tsx\` with upload progress \r
- **Storage Bucket**: Created \`chat-attachments\` (10MB limit)\r
  - Images: jpeg, png, gif, webp\r
  - Documents: PDF\r
  - Media: mp4, mp3, ogg\r
- **Database**: Added \`file_link\` column to \`messages\` table\r
- **Migration**: \`supabase/migrations/20260210010000_chat_attachments.sql\`\r
\r
# [0.1.78] FE/BE/DB CEKAT 2026-02-09\r
### Follow-up Message Automation - Separate Settings\r
- **Separate Unassigned & Assigned Settings**: Follow-up messages can now be configured independently for:\r
  - **Unassigned Threads** (status = \`open\`) - When AI is handling\r
  - **Assigned Threads** (status = \`pending\`) - When human agent is handling\r
- Each has its own enable switch and inactivity timeout (seconds)\r
- Shared message template for both\r
- **UI**: Updated \`src/components/aiagents/AIAgentSettings.tsx\` with dual panels (orange for Unassigned, blue for Assigned)\r
- **Database**: Added \`enable_followup_assigned\` and \`followup_delay_assigned\` columns to \`ai_profiles\`\r
- **Migration**: \`supabase/migrations/20260209194800_separate_followup_settings.sql\`\r
- **Edge Function**: Updated \`process-followups\` to handle both \`open\` and \`pending\` statuses\r
\r
# [0.1.77] BE/DB CEKAT 2026-02-09\r
### Follow-up Message Automation\r
- **Status Filter Fix**: Follow-up messages now only trigger for **Unassigned** (status = \`open\`) threads.\r
  - Follow-ups will NOT be scheduled when a thread is Assigned (\`pending\`) or Done (\`closed\`).\r
  - Clears any pending follow-up when thread status changes from open.\r
  - Migration: \`supabase/migrations/20260209192200_followup_only_open_threads.sql\`\r
  - Updated: \`supabase/functions/process-followups/index.ts\`\r
\r
# [0.1.76] FE WEB CEKAT 2026-02-06\r
\r
### Chat UI Improvements\r
\r
- **Handover Reason Display**: Added "Handover Reason" field to the Conversation Details panel.\r
  - Displays the reason for agent handover (e.g., from AI to human).\r
  - Includes text truncation and a tooltip for long reasons to preserve layout.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Move to Unassigned Logic**:\r
  - Unassigning a thread now explicitly clears \`ai_handoff_at\` and \`handover_reason\` fields to ensure a clean state.\r
  - Updated: \`supabase/migrations/20260206163000_update_unassign_thread_clear_handover.sql\`\r
\r
# [0.1.75] BE/DB CEKAT 2026-02-04\r
\r
### Follow-up Message Automation\r
\r
- **Fix Conflict Error**: Fixed conflict error in AI Agent Settings.\r
\r
# [0.1.74] BE/DB CEKAT 2026-02-04\r
\r
### Follow-up Message Automation\r
\r
- **Backend Implementation**: Added automated follow-up message system that sends a configured message to users who haven't replied after a set delay.\r
  - New \`followup_at\` and \`is_followup_sent\` columns on \`threads\` table.\r
  - Database trigger (\`handle_followup_scheduling\`) automatically schedules/cancels follow-ups based on message activity.\r
  - Edge Function (\`process-followups\`) runs every minute via \`pg_cron\` to send due messages.\r
- **Safeguards**:\r
  - Follow-ups only trigger after confirmed user engagement (ignores empty/Welcome-only threads).\r
  - Ignores "test" messages to prevent false positives during development.\r
  - Updates: \`supabase/migrations/20260202200000_add_followup_scheduling_logic.sql\`, \`supabase/migrations/20260203160000_refine_followup_trigger.sql\`, \`supabase/functions/process-followups/index.ts\`\r
\r
# [0.1.73] FE WEB CEKAT 2026-02-03\r
\r
### Chat UI Improvements\r
\r
- **Dark Mode Visibility**: Fixed an issue where user messages appeared with black text on dark backgrounds by adding \`dark:prose-invert\` for proper contrast inversion.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Human Agent Settings\r
\r
- **Dark Mode Table Styling**: Removed incorrect white backgrounds from nested agent rows (super agents, unassigned agents) in dark mode and improved text contrast for better readability.\r
  - Updated: \`src/components/humanagents/HumanAgents.tsx\`\r
\r
# [0.1.72] FE WEB CEKAT 2026-02-02\r
\r
### AI Agent Settings\r
\r
- **Granular Save Controls**: Added separate Save buttons for Knowledge Text and Q&A sections, improving the workflow for managing knowledge sources.\r
  - Added "Save Text" button to the Text tab.\r
  - Added "Save Q&A" button to the Q&A tab.\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
### Configuration\r
\r
- **App Origin Update**: Updated the default production \`APP_ORIGIN\` to \`synkaai.netlify.app\` for accurate deep linking and embeds.\r
  - Updated: \`src/config/urls.ts\`\r
\r
# [0.1.71] FE WEB CEKAT 2026-02-02\r
\r
### Chat UI Improvements\r
\r
- **Multi-Link Previews**: Messages containing multiple URLs now render individual preview cards for each unique link.\r
- **Improved Image Detection**: Image URLs without standard extensions (like \`picsum.photos\`) are now correctly identified and rendered as images directly.\r
- **Centralized Link Logic**: Moved link detection and URL extraction to shared utilities in \`src/lib/utils.ts\` for consistency.\r
  - Updated: \`src/pages/LiveChat.tsx\`, \`src/components/chat/ConversationPage.tsx\`, \`src/lib/utils.ts\`\r
\r
# [0.1.70] FE WEB CEKAT 2026-02-02\r
\r
### Live Chat Improvements\r
\r
- **Message Deduplication Removed**: Intentionally removed the 2000ms window deduplication guard in the LiveChat widget to allow identical messages to be visible in the UI.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
# [0.1.69] FE WEB CEKAT 2026-02-02\r
\r
### Chat UI Improvements\r
\r
- **Markdown & Multi-line Support**:\r
  - Full markdown support using \`ReactMarkdown\` with \`remark-gfm\`.\r
  - Added \`remark-breaks\` to ensure single newlines (Shift+Enter) are preserved in chat bubbles.\r
  - Upgraded chat inputs to multi-line \`Textarea\` with \`Shift+Enter\` for new lines and \`Enter\` to send.\r
- **Rich Media & Link Previews**:\r
  - **Auto-Image Detection**: Links to images (.jpg, .png, etc.) now render directly in the chat.\r
  - **Rich Previews**: Website links now display a rich preview card with title, description, and site image (WhatsApp-style).\r
- **Layout & Style Refinement**:\r
  - **Smart Wrapping**: Prevents overflow by breaking long strings (like base64) while keeping natural words together.\r
  - **Aesthetics**: Restored premium \`rounded-2xl\` bubbles and \`px-4 py-2\` padding.\r
  - **Bug Fixes**: Restored sidebar tab layouts, fixed corrupted Tailwind classes, and improved system message centering.\r
  - Updated: \`src/pages/LiveChat.tsx\`, \`src/components/chat/ConversationPage.tsx\`, \`src/components/chat/LinkPreview.tsx\`, \`src/components/chat/ContactThreadPickerDialog.tsx\`, \`src/lib/utils.ts\`\r
\r
# [0.1.68] FE WEB CEKAT 2026-01-30\r
\r
### WhatsApp (WAHA) Integration\r
\r
- **Connect Button for Empty Sessions**: Added a Connect button when no WhatsApp session is found for a channel.\r
  - Previously only showed "No session found for this channel." text without any action button.\r
  - Users can now initiate WhatsApp connection directly from the empty state.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.67] FE WEB CEKAT 2026-01-30\r
\r
### WhatsApp (WAHA) Integration\r
\r
- **API Authentication Header**: Added \`x-api-key\` header to all WAHA API requests for authentication.\r
  - All fetch calls to \`WAHA_BASE_URL\` now include \`x-api-key: "asd"\` in request headers.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\` (3 locations: session list, session details, QR polling)\r
  - Updated: \`src/components/platforms/WhatsAppPlatformForm.tsx\` (1 location: session status check)\r
\r
# [0.1.66] FE WEB CEKAT 2026-01-28\r
\r
### AI Agent Knowledge Sources\r
\r
- **Simplified File Management**: Migrated knowledge sources to a unified \`files\` table architecture, removing complex intermediary tables.\r
  - Enabled simpler toggling of file availability for AI agents via \`is_enabled\` flag.\r
  - Added direct file toggle controls (Checkbox) in the Knowledge > File list.\r
  - Improved retrieval performance by indexing documents directly to \`file_id\`.\r
  - Updated: \`supabase/migrations/20260126000000_knowledge_sources_v1.sql\`, \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
### Authentication & User Management\r
\r
- **Account Status Guard**: Implemented immediate account status check after login.\r
  - Users with \`is_active: false\` profile status are now instantly redirected to \`/account-deactivated\` upon sign-in.\r
  - Updated: \`src/components/auth/Login.tsx\`\r
\r
# [0.1.65] FE WEB CEKAT 2026-01-24\r
\r
### Dark Mode Support\r
\r
- **Application-Wide Dark Mode**: Implemented comprehensive dark mode theming across the application\r
  - Created \`ThemeContext\` (\`src/contexts/ThemeContext.tsx\`) for managing theme state (light/dark/system)\r
  - Added \`ThemeToggle\` component (\`src/components/ThemeToggle.tsx\`) with dropdown for Light/Dark/System options\r
  - Theme preference persists to localStorage and respects system preference when set to "System"\r
  - Added ThemeToggle to main header (\`src/pages/Index.tsx\`) next to Online badge for easy access\r
  - Added ThemeToggle to Profile page (\`src/pages/Profile.tsx\`) as secondary access point\r
  - Wrapped app with \`ThemeProvider\` in \`App.tsx\` for global theme context\r
\r
- **Conversations Sidebar Dark Mode Fix**: Fixed hardcoded light colors that broke dark mode\r
  - Updated tab buttons (Assigned/Unassigned/Done) with dark mode alternatives (\`dark:bg-blue-950\`, \`dark:bg-red-950\`, \`dark:bg-green-950\`)\r
  - Changed conversation list item styles to use \`dark:\` variants for hover and selected states\r
  - Replaced hardcoded \`text-gray-600\`/\`text-gray-500\` with theme-aware \`text-muted-foreground\`\r
  - Fixed tab container background from \`bg-white\` to \`bg-card\`\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### AI Agent Settings\r
\r
- **Dynamic Guide Content**: Replaced hardcoded "Panduan Umum" with customizable knowledge text\r
  - Added \`guide_content\` (TEXT) column to \`ai_profiles\` table for storing custom guide text\r
  - Added \`history_limit\` (INTEGER) column for message-count based history limit\r
  - Created migration: \`supabase/migrations/20260124000000_add_guide_content_history_limit.sql\`\r
  - Updated \`AIProfile\` TypeScript interface in \`src/hooks/useAIProfiles.ts\`\r
  - Updated Supabase types in \`src/integrations/supabase/types.ts\`\r
\r
- **Message-Based History Limit**: Changed conversation history from token-based to message-based\r
  - Updated \`HISTORY_PRACTICAL_MAX\` (50 messages) and \`HISTORY_HARD_MAX\` (100 messages)\r
  - Changed UI labels, tooltips, and helper text from "tokens" to "messages"\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
- **Knowledge Sources UI Cleanup**: Simplified the Text tab interface\r
  - Removed non-functional "Add" and "Default" buttons\r
  - Removed decorative formatting toolbar (Undo/Redo/Bold/Italic/Alignment buttons)\r
  - Kept simple textarea for Knowledge Text Content that saves with main Save button\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
# [0.1.64] FE WEB CEKAT 2026-01-22\r
\r
### AI Agent Management\r
\r
- **Enhanced AI Agent Creation & Editing UI**: Improved interface with better organization and validation\r
  - Separated AI Agent creation into dedicated dialog with enhanced form layout\r
  - Added comprehensive model selection system with pricing and provider information\r
  - Implemented fallback model selection for automatic failover when primary model unavailable\r
  - Updated model display with cost per 1M tokens, provider badges, and descriptions\r
  - Improved AI Agent Settings with better input handling and validation\r
  - Updated: \`src/components/aiagents/AIAgents.tsx\`, \`src/components/aiagents/AIAgentSettings.tsx\`\r
  - Updated: \`src/hooks/useAIProfiles.ts\`\r
\r
### Supabase Integration\r
\r
- **Type System Updates**: Enhanced type definitions for AI profiles and database integration\r
  - Added \`model_id\` and \`fallback_model_id\` fields to AI profile types\r
  - Updated type definitions to match database schema changes\r
  - Improved type safety across AI agent operations\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
\r
### Webhook Configuration\r
\r
- **Webhook URL Enhancements**: Improved webhook payload structure and URL handling\r
  - Enhanced webhook configuration with better URL construction\r
  - Updated webhook payload format for file uploads\r
  - Improved error handling and validation\r
  - Updated: \`src/config/webhook.ts\`\r
\r
# [0.1.63] FE WEB CEKAT 2026-01-22\r
\r
### AI Agent Knowledge Files\r
\r
- **PDF Upload Reliability**: Fixed \`crypto.subtle.digest\` crash in non-secure contexts by adding fallback hash generation using file metadata.\r
  - Primary: SHA-256 via Web Crypto API when available\r
  - Fallback: DJB2-like hash from file name/size/timestamp for non-HTTPS contexts\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
- **Early PDF Validation**: Files are now validated as PDFs before entering the upload queue; non-PDF files are rejected with a toast error.\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
- **Webhook Payload Enhancement**: File upload webhook now includes \`file_url\` (Supabase storage path) dynamically constructed from \`SUPABASE_URL\`.\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
### Development Environment\r
\r
- **HTTPS Enabled in Dev**: Vite dev server now runs with \`https: true\`, enabling Web Crypto API support and aligning dev with production security context.\r
  - Updated: \`vite.config.ts\`\r
\r
# [0.1.62] FE WEB CEKAT 2026-01-18\r
\r
### Connected Platforms\r
\r
- **Fixed chat takeover AI still has access to reply**: Added the variable change of ai_access_enabled to false when taking over whatsapp chat.\r
\r
# [0.1.61] FE WEB CEKAT 2026-01-18\r
\r
### Connected Platforms\r
\r
- **Removed toLowerCase for session_name**: Session names are now preserved with their original casing when sent to WhatsApp API endpoints, maintaining case-sensitive session identifiers.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.60] FE WEB CEKAT 2026-01-15\r
\r
### Chat Filter\r
\r
- **Removed redundant inbox filter**: Filter modal drops the inbox selector since channel type already scopes conversations, keeping the dialog lean.\r
  - Updated: \`src/components/chat/ChatFilter.tsx\`\r
\r
# [0.1.59] FE WEB CEKAT 2026-01-15\r
\r
### Supabase\r
\r
- Reopen on inbound messages now clears \`collaborator_user_id\` so reopened/unassigned conversations have no collaborator. Migration: \`20260115124500_reopen_clear_collaborator.sql\`.\r
\r
# [0.1.58] FE WEB CEKAT 2026-01-15\r
\r
### Contacts\r
\r
- **Removed per-row delete button**: Contacts list no longer shows the single-contact delete action; bulk multi-select delete now covers this flow for master/super agents.\r
  - Updated: \`src/components/contacts/Contacts.tsx\`\r
- **Handled-by filter cleanup**: Filter uses a truthy check instead of comparing to an empty string, keeping TS types aligned while filtering assigned vs unassigned contacts.\r
  - Updated: \`src/components/contacts/Contacts.tsx\`\r
\r
# [0.1.57]  FE WEB CEKAT 2026-01-15\r
\r
### Supabase\r
\r
- Removed main-only public/anon policies on \`job\`, \`job_run_details\`, and \`storage.objects\` to match development. Migration: \`20260115123000_remove_extra_public_policies.sql\`.\r
\r
# [0.1.56] FE WEB CEKAT 2026-01-15\r
\r
### Supabase\r
\r
- **takeover_thread matches dev**: returns the updated thread, sets \`collaborator_user_id\`, \`status='pending'\`, keeps \`assigned_at\` if present. Migration: \`20260115120000_align_functions.sql\`.\r
- **reopen_thread_on_user_message matches dev**: reopens closed threads without clearing handled-by fields. Migration: \`20260115120000_align_functions.sql\`.\r
\r
# [0.1.55] FE WEB CEKAT 2026-01-15\r
\r
### Supabase (main aligned to development)\r
\r
- **Trigger parity**: Removed main-only thread triggers and added the channel super-agent sync trigger (\`tr_update_contacts_threads_on_channel_super_agent_change\`) to mirror development. New migration: \`20260115113000_align_triggers.sql\`.\r
- **Function parity**: Added missing \`unassign_thread\` SECURITY DEFINER function to main. New migration: \`20260115114000_add_unassign_thread.sql\`.\r
\r
# [0.1.54] FE WEB CEKAT 2026-01-15\r
\r
### Supabase (schema & RLS alignment)\r
\r
- **Contacts owned by super agents**: Added \`contacts.super_agent_id\`, backfilled from channel ownership, dropped \`channel_id\`, and rewrote contacts RLS to super-agent scope. New migration: \`20260115100000_contacts_super_agent.sql\`.\r
- **Scope-based RLS**: Introduced helper functions (\`can_access_super_scope\`, \`can_access_channel_scope\`, \`can_access_message_scope\`) and replaced channels/threads/messages policies with scope-based, account-aware, and web-widget rules. New migration: \`20260115103000_scope_based_policies.sql\`.\r
- **Audit/channel agents RLS parity**: Tightened \`audit_logs\` to permission-based read and simplified \`channel_agents\` to a single authenticated policy. New migration: \`20260115110000_audit_logs_channel_agents_policies.sql\`.\r
\r
# [0.1.53] FE WEB CEKAT 2026-01-15\r
\r
### Live Chat\r
\r
- **Late-arriving user rows replace optimistics**: If the backend inserts the real user message after the AI reply, the message now replaces its optimistic twin instead of showing twice, eliminating double Hello bubbles.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Commit**: \`fix: livechat dedupe optimistic user messages\`\r
\r
# [0.1.52] FE WEB CEKAT 2026-01-14\r
\r
### Conversations & Assignment Flow\r
\r
- **Unassign keeps handled-by, clears collaborator**: Moving a chat to Unassigned now only nulls \`collaborator_user_id\`, reopens AI, and keeps the handled-by assignee intact while placing the thread in the Unassigned tab.\r
  - Updated: \`src/hooks/useConversations.ts\`, \`src/components/chat/ConversationPage.tsx\`\r
- **Takeover sets collaborator**: Takeover without reassignment now sets \`collaborator_user_id\` to the agent who took over, without touching handled-by.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **Commit**: \`chore: unassign clears collaborator only; takeover sets collaborator; lock collaborator replies\`\r
\r
# [0.1.51] FE WEB CEKAT 2026-01-15\r
\r
### Conversations & System Events\r
\r
- **System logs for assignment actions**: Takeover, Move to Unassigned, and Resolve now add system \`event\` messages to the thread timeline with actor details, keeping the audit trail visible in chat.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
\r
# [0.1.50] FE WEB CEKAT 2026-01-14\r
\r
### Conversations & Ownership\r
\r
- **Collaborators are now read-only**: The sidebar shows the current collaborator label while only Takeover Chat reclaims the slot; the select was removed to enforce the one-collaborator invariant.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Takeover/Unassign RPCs respect status**: \`takeover_thread\`/\`unassign_thread\` now only swap \`collaborator_user_id\` / status/assigned_at, and the frontend trusts the returned \`status\` so Move to Unassigned stays open after refresh.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **RPC definitions and constraints**: Supabase migration adds status/collaborator invariants plus SECURITY DEFINER RPCs (\`takeover_thread\`, \`unassign_thread\`) that preserve \`assignee_user_id\` while updating collaborators.\r
  - Updated: \`supabase/migrations/20260114090000_thread_collab_takeover.sql\`\r
\r
# [0.1.49] FE WEB CEKAT 2026-01-13\r
\r
### Add delete button in contacts\r
\r
- **Added button for delete contact**: button delete contact is available for role master agent and super agent.\r
\r
# [0.1.48] FE WEB CEKAT 2026-01-13\r
\r
### Conversation Ownership\r
\r
- **Handled By now respects real assignees**: \`computeAssignmentState\` keeps the \`assignee_user_id\` if the thread is assigned, so \`ConversationPage\` can show the handlers display name again instead of rendering .\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
### Platform Ownership\r
\r
- **Super-agent scoped human/AI selection**: The Connected Platforms sidebar only lists human agents and AI profiles that belong to the channels assigned super agent while keeping the already selected options visible, keeping ownership aligned across collaborators and bots.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.46] FE WEB CEKAT 2026-01-13\r
\r
### Live Chat\r
\r
- **Stable account names**: Friendly username is now stored per \`account_id\` (localStorage) instead of per session, so the same account cant generate multiple display names across sessions.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Supabase types parity**: \`threads\` types include \`account_id\` to match the schema and avoid TS errors on account-based queries.\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
- **Commit**: \`chore: bind livechat name to account and fix threads types\`\r
\r
# [0.1.45] FE WEB CEKAT 2026-01-13\r
\r
### Live Chat & Types\r
\r
- **Account-scoped attach only**: Live chat now only attaches to threads that match the current \`account_id\`/session and no longer reuses stored thread IDs; if none exist, it waits for an external creator (e.g., n8n) rather than auto-creating.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Supabase types parity**: Added \`account_id\` to the \`threads\` types to match the schema changes and avoid TS errors on account-based selects.\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
- **Commit**: \`chore: livechat account attach only & fix supabase types\`\r
\r
# [0.1.44] FE WEB CEKAT 2026-01-13\r
\r
### WhatsApp / n8n Proxy Hardening\r
\r
- **Session disconnect via proxy-n8n**: WhatsApp disconnect now calls the \`session.logout\` proxy route (no legacy Railways) before disconnecting, matching the n8n route table.\r
- **Scoped polling on disconnect**: Only WhatsApp sessions are refreshed during disconnect polling, using a fresh \`sessionsRef\` to avoid stale state; no broad platform refresh.\r
- **Spam-proof delete**: Danger zone delete button is guarded by the in-flight flag to prevent repeated clicks while deletion is in progress.\r
\r
### Supabase (live chat reference)\r
\r
- **Account-scoped anon access**: Policies persisted in migrations (\`20260113000001\`, \`20260113000002\`) enforce \`account_id\` + \`x-account-id\` for threads/messages; legacy null-account fallback removed. Anonymous users cannot fetch other accounts threads or messages.\r
- **Edge function routing**: \`proxy-n8n\` is the path for WhatsApp session actions; \`session.disconnect\` route added to n8n route table; \`DISCONNECT_SESSION\` now points to \`session.logout\`.\r
\r
# [0.1.43] FE WEB CEKAT 2026-01-13\r
\r
### Live Chat (Account-scoped reuse)\r
\r
- **One thread per account (frontend & DB guard)**: Live chat now reads \`account_id\` from \`localStorage\` and reuses/reopens the existing thread for that account/channel (falls back to session/alias if no account). Added \`account_id\` column plus a unique index on \`(channel_id, account_id)\` when set to prevent duplicate threads.\r
  - Updated: \`src/pages/LiveChat.tsx\`, \`src/hooks/useConversations.ts\`\r
  - New: \`supabase/migrations/20260113000001_add_account_id_to_threads.sql\`\r
- **Anonymous: new thread per cleared storage**: If local/session storage is empty, a fresh \`account_id\` is generated per channel and legacy thread auto-attach is disabled, so each new browser/cleared storage starts a new thread.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
  \r
### Live Chat (anon account-id hardening)\r
\r
- **Fetch-only on load (no auto-create)**: Live chat no longer creates threads on refresh; it only attaches to existing threads that match the current \`account_id\` (and session). Threads are expected to be created externally (e.g., n8n) and delivered via realtime or subsequent fetch.\r
- **Thread reuse by account only**: Stored thread reuse was removed; lookup now requires account/session match (no name fallback when account_id exists).\r
- **Headers for anon RLS**: The live chat Supabase client sends \`x-account-id\` for all requests so anon RLS policies apply.\r
\r
### Supabase (migration/reference)\r
\r
- **account_id column & unique index**: Added \`account_id\` to \`public.threads\` and a unique index \`(channel_id, account_id)\` when \`account_id\` is set (\`supabase/migrations/20260113000001_add_account_id_to_threads.sql\`).\r
- **Edge function auth**: \`proxy-n8n\` redeployed with \`verify_jwt=false\` to allow anonymous calls (still HMAC-signs to n8n).\r
- **RLS (anon by account_id)**:\r
  - Threads: \`anon_threads_by_account\` (SELECT) and \`anon_threads_insert_by_account\` (INSERT) require \`account_id\` = \`x-account-id\`.\r
  - Messages: \`anon_messages_by_account\` (SELECT) and \`anon_messages_insert_by_account\` (INSERT) require parent thread \`account_id\` = \`x-account-id\`.\r
  - Channels: \`anon_channels_web_minimal\` allows anon SELECT on web channels to read minimal metadata.\r
  - Legacy null-account fallback policies were removed; anon access now hinges on matching \`account_id\`.\r
\r
# [0.1.42] FE WEB CEKAT 2026-01-13\r
\r
### Conversations & Assignment Flow\r
\r
- **Realtime tab-safe updates**: Thread status/assignee changes now patch the conversation list via realtime updates without needing a manual refresh; tabs stay put even when counts change underneath.\r
  - Updated: \`src/hooks/useConversations.ts\`, \`src/components/chat/ConversationPage.tsx\`\r
- **Tab UX hardening**: Tabs remain clickable/selectable even when empty; user-selected tabs no longer auto-bounce when counts shift.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Resolve re-enables AI**: Resolving a conversation now flips \`ai_access_enabled\` back on and clears \`ai_handoff_at\` so AI can respond immediately after resolution.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.41] FE WEB CEKAT 2026-01-12\r
\r
- **Thread controls respect roles & stay real-time**: Move to Unassigned now only renders and functions for master/super agents (regular agents get  toast if they try), and the focused conversation keeps subscribing to its thread plus calling \`fetchMessages\` in a stable hook so status changes surface instantly.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Super agents can edit platform human agents**: The human-agent multi-select inside platform details now bypasses the \`channel_agents.update\` gate for \`super_agent\` roles so they can add/remove collaborators without an extra permission.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.40] FE WEB CEKAT 2026-01-12\r
\r
### Conversations & Assignment Flow\r
\r
- **Correct tab mapping for statuses**: Assigned now strictly maps to \`status === "pending"\` while Unassigned maps to \`status === "open"\` so the sidebar tally matches the database truth, and the legacy \`assigned\` enum is only treated as assigned for backward compatibility.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Render unassigned threads as open**: Assignment-sensitive logic now only considers a thread assigned when an assignee (or similar signal) exists; a bare \`pending\` status without an assignee rewrites to \`open\`, ensuring those rows appear under the Unassigned tab.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
# [0.1.39] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- **Takeover preserves handled by**: Takeover chat action now only changes thread status from "pending" (Unassigned) to "assigned", without modifying the "Handled By" field. This ensures the original super agent assignment is preserved regardless of who takes over the conversation.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Conditional assignee updates**: Added \`setAssignee\` option to \`assignThread\` function for explicit assignment control. Takeover always uses \`setAssignee: false\` to preserve existing assignments.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
### UI/UX Improvements\r
\r
- **Login form cleanup**: Removed redundant UI text elements from login form (one-time code message and forgot password link) to streamline the authentication interface.\r
  - Updated: \`src/components/auth/Login.tsx\`\r
\r
# [0.1.38] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- **Inline status controls**: Assigned threads now show a Move to Unassigned button next to Resolve, keeping status transitions and the list state in sync without page refreshes.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Server-truth status updates**: Removed optimistic status toggles (and stopped writing the unsupported \`'assigned'\` enum) so moving or taking over a single thread no longer makes other rows flicker; UI now waits for Supabase to confirm before updating.\r
- **Takeover preserves handled-by**: Regular agents now claim chats without overwriting the super agents Handled By field; only masters/supers promote themselves while collaborators simply flip the status and log the event.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
\r
# [0.1.37] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Takeover scoped to Unassigned**: The Takeover Chat CTA now renders only when a thread is truly in the Unassigned state, preventing accidental reassignment attempts from other tabs.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Role-based composer rules**: Collaborators (when theyre the logged-in user), super agents, and master agents now get the message composer even on unassigned threads, while other agents still see the takeover prompt until they claim the chat.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Hide master agents from selectors**: Master agents can still act on any thread, but they no longer appear in the Handled By or Collaborator dropdowns to avoid accidental assignment to all-powerful accounts.\r
\r
# [0.1.36] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- **Three-state workflow overhaul**: Replaced the legacy status heuristic with an explicit \`Assigned / Unassigned / Done\` flow that keys off \`status\` plus the presence of a collaborator. Counts, badges, tab filters, and auto-selection now stay in sync with the new rules and never fall back to the deprecated multi-collaborator state.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Collaborator switch stability**: Guarded the URL/thread synchronization logic so picking a collaborator no longer triggers a rapid tab flip that spammed list/message fetches.\r
\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Collaboration Data Model & Permissions\r
\r
- **Single-column collaborator model**: Added a migration that backfills \`threads.collaborator_user_id\`, rewires all RLS policies to reference that column, and drops the obsolete \`thread_collaborators\` table plus its triggers.\r
  - New: \`supabase/migrations/20260110_remove_thread_collaborators.sql\`\r
  - Updated: \`supabase/migrations/permissions_update_and_policies_updates.sql\`, \`supabase/migrations/20251124230847_baseline.sql\`, \`supabase/schema.sql\`, \`sync/tables.config.json\`\r
- **Typed API parity**: Regenerated Supabase types so the frontend integrations include the new \`collaborator_user_id\` field and foreign key metadata.\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
\r
### Navigation & RBAC\r
\r
- **Hide AI Agents for regular agents**: Sidebar configuration now outright hides the AI Agents menu when the signed-in user only has the \`agent\` role, preventing them from entering AI profile management.\r
  - Updated: \`src/config/navigation.ts\`, \`src/hooks/useNavigation.ts\`\r
\r
# [0.1.35] FE WEB CEKAT 2026-01-10\r
\r
### Housekeeping\r
\r
- **Line-ending normalization (no logic changes)**: Synchronized CRLF/LF on chat/contact pages and hooks to keep diffs clean without altering runtime behavior.\r
  - Touched: \`src/components/chat/ConversationPage.tsx\`, \`src/components/contacts/Contacts.tsx\`, \`src/hooks/useContacts.ts\`, \`src/hooks/useConversations.ts\`, \`src/pages/LiveChat.tsx\`\r
- **Migration formatting**: Tidied whitespace in the \`thread_status\` enum migration to match our SQL formatting conventions.\r
  - Updated: \`supabase/migrations/20260109000000_add_assigned_thread_status.sql\`\r
\r
# [0.1.34] FE WEB CEKAT 2026-01-09\r
\r
### Live Chat & Messaging\r
\r
- **Realtime Message Recovery**: Fixed a bug where customer messages (role: 'user') were filtered out of the realtime feed, ensuring the chat window correctly updates when messages are persisted to the database.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Smart Message Deduplication**: Added a client-side deduplication pass that prevents "double bubbles" when both an optimistic send and a database insert arrive near-simultaneously (2-second window).\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Resilient Thread Attachment**: Relaxed the thread lookup logic so the widget gracefully falls back to the most recent channel activity if a session-id match isn't immediately foundno more hanging on "Waiting for response".\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
### Assignment & Status Management\r
\r
- **Thread Status Enum Extension**: Added a new \`assigned\` value to the database \`thread_status\` enum to properly distinguish between new inquiries and those handled by a super agent or human.\r
  - New: \`supabase/migrations/20260109000000_add_assigned_thread_status.sql\`\r
- **Automated Assignment Flow**: Threads now automatically transition to \`assigned\` status when a bot hands off or a super agent is linked to the platform, while remaining in \`open\` for fresh inquiries.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **Enum Safety Fallback**: Added a catch for Supabase error \`22P02\` so the app gracefully falls back to \`open\` status if the new \`assigned\` enum value hasn't been applied to the database yet.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **Handled-By Display Logic**: Refactored the UI to show the platform's super agent as the default handler for bot-managed threads without incorrectly flagging them as "Assigned" until a real handoff occurs.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
### UI/UX Polish\r
\r
- **Silent Background Refresh**: Implemented a "silent" fetch mode for conversation lists that bypasses global loading states, eliminating the screen "blinking" effect when sending messages or receiving updates.\r
  - Updated: \`src/hooks/useConversations.ts\`, \`src/components/chat/ConversationPage.tsx\`\r
- **Toaster Cleanup**: Removed redundant "Message sent successfully" notifications to reduce UI clutter, keeping toasts reserved for actual errors or critical events.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Enhanced Contact Filtering**: Surfaced the new \`assigned\` status in the Contacts view with proper badge coloring and filter support.\r
  - Updated: \`src/components/contacts/Contacts.tsx\`, \`src/hooks/useContacts.ts\`\r
- **Live Chat Realtime Resync**: Added a lightweight catch-up mechanism that rehydrates conversations if the Supabase realtime channel drops or the tab wakes from suspensionno constant polling required.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **New Thread Subscription Fix**: Realtime subscriptions now hydrate newly created live chat threads immediately without requiring a manual refresh.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Queued Catch-Up Requests**: Ensures live chat queues multiple background fetches when the first message creates a thread so the AI reply appears without manual reloads, retries the AI webhook on transient failures, and preserves message order for streaming replies.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Session-Scoped Live Chat Threads**: Persist the live chat thread per browser session and only attach to threads created for the current session username, so concurrent visitors no longer see mixed conversations.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Streaming Placeholder Cleanup**: Replace temporary assistant bubbles with the persisted Supabase message as soon as it arrives, preventing the UI from flickering or reordering when replies land.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Thread Restore Fallbacks**: If Supabase hasn't stamped a \`session_id\`, the live chat gracefully falls back to the contact alias when restoring or attaching to a threadno more blank states or scrolling jumps.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Realtime Catch-Up Safety Net**: After each API send, the widget aggressively refetches the thread so AI replies render even if realtime events arrive late.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
# [0.1.33] FE WEB CEKAT 2026-01-08\r
\r
### Conversations\r
\r
- **Role-aware Message Composer**: Chat input now enables whenever a user has \`messages.create\`, is a master/super agent, is the current handled-by assignee, or is the selected collaboratorensuring the right people can reply without manual overrides.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.32] FE WEB CEKAT 2026-01-08\r
\r
### Platform Management\r
\r
- **Live Chat Link Quality-of-Life**: Added copy-to-clipboard buttons with toast feedback for both the live chat URL and embed snippet so teammates can drop links/widgets faster without selecting text manually.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
### Navigation & RBAC\r
\r
- **Guaranteed Human Agents Menu for Supervisors**: Super agents now always see the Human Agents sidebar item (role bypass) and can open the roster even if their read permissions are still syncing.\r
  - Updated: \`src/config/navigation.ts\`, \`src/hooks/useNavigation.ts\`, \`src/components/navigation/PermissionNavItem.tsx\`, \`src/pages/Index.tsx\`\r
\r
### Human Agent Management\r
\r
- **Super Agent Focused View**: When a super agent opens the roster the Create button and Pending tab disappear, role/status filters are hidden, and all action buttons (status, limits, delete) are automatically allowed for members in their own cluster thanks to the new \`roleBypass\` helper.\r
  - Updated: \`src/components/humanagents/HumanAgents.tsx\`, \`src/components/rbac/PermissionGate.tsx\`\r
\r
### Conversation Sidebar\r
\r
- **Handled By Read-Only**: The Handled By field is now display-only, preventing mid-conversation reassignment from the info pane while still showing who currently owns the thread.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.31] FE WEB CEKAT 2026-01-08\r
\r
- **Live Chat Realtime-Only Sync**: Removed the 2-second polling loop from the live chat widget so updates rely solely on Supabase realtime subsciptions, cutting unnecessary network and memory usage.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
# [0.1.30] FE WEB CEKAT 2026-01-07\r
\r
### Platform Management\r
\r
- **Live Chat Takeover Notices**: System takeover events now render as toast notifications instead of chat bubbles, keeping conversation history clean while still informing customers.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Human Agent Assignment UX**: Selecting agents in platform edit autosaves immediately; no more extra click to add collaborators.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
- **Header Cleanup**: Removed redundant save/delete buttons from platform edit header; autosave flow handles updates and delete remains available in the existing danger zone.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.29] FE WEB CEKAT 2026-01-07\r
\r
### Conversation Management\r
\r
- **Single Collaborator Restriction**: Changed Collaborators field from multi-select to single-select, allowing only one collaborator per thread.\r
  - Replaced \`SearchableMultiSelect\` with \`SearchableSelect\` component for collaborator selection.\r
  - When a new collaborator is selected, it automatically replaces any existing collaborator for that thread.\r
  - Collaborator field supports clearing selection to remove the collaborator entirely.\r
  - Existing threads with multiple collaborators are automatically trimmed to a single collaborator when accessed.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
- **Role-Based Takeover Chat Button**: Implemented role-based access control for the "Takeover Chat" button.\r
  - **Master agents and super agents**: Takeover button is always enabled (when thread is unassigned).\r
  - **Regular agents**: Takeover button is only enabled when no collaborator exists for the thread.\r
  - Regular agents see a disabled button with tooltip explanation when a collaborator is already assigned.\r
  - Prevents regular agents from taking over conversations that already have a collaborator assigned.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.28] FE WEB CEKAT 2026-01-07\r
\r
### Security & Data Access Control\r
\r
- **Super Agent Data Isolation**: Implemented Row Level Security (RLS) policies to ensure super agents can only view their own data in platform creation forms.\r
  - Secured \`v_users\` view to prevent data leakage by removing direct access to \`auth.users\` table.\r
  - View now anchors on \`users_profile\` table with proper RLS enforcement, ensuring super agents only see their own profile.\r
  - Master agents retain full visibility to all users within their organization via \`is_master_agent_in_org()\` function.\r
  - Database migration applied to enforce RLS policies at the database level for true security (not just frontend filtering).\r
\r
### Platform Creation Forms\r
\r
- **Auto-Select Super Agent for Super Agent Users**: Enhanced platform creation forms (Telegram, WhatsApp, Web) to automatically select and lock the Super Agent dropdown when the current user is a super agent.\r
  - Super Agent field is automatically populated with the current user's ID when form opens for super agent users.\r
  - Field becomes read-only (disabled) with visual indication when user is a super agent, preventing them from changing their own assignment.\r
  - Helper text updated to indicate that super agent is automatically determined by the current user's account for super agent users.\r
  - Master agents continue to see and can select from all available super agents in the dropdown.\r
  - Updated: \`src/components/platforms/TelegramPlatformForm.tsx\`, \`src/components/platforms/WebPlatformForm.tsx\`, \`src/components/platforms/WhatsAppPlatformForm.tsx\`\r
\r
# [0.1.27] FE WEB CEKAT 2026-01-02\r
\r
### Conversation Management\r
\r
- **Handled By Clearing**: Users can now remove super agent assignments from conversations using a clear button in the "Handled By" selector.\r
  - Added \`allowClear\` prop to \`SearchableSelect\` component with inline clear button (X icon) that appears when a value is selected.\r
  - "Handled By" selector in conversation sidebar now supports clearing assignments, allowing conversations to be unassigned.\r
  - Updated \`assignThreadToUser\` function to accept \`null\` for unassigning conversations, properly clearing assignment metadata and creating "conversation unassigned" system event messages.\r
  - When clearing "Handled By", all collaborators are automatically removed to maintain data consistency.\r
  - Updated: \`src/components/ui/searchable-select.tsx\`, \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Resolved Thread Read-Only Controls**: Closed conversations now lock their "Handled By" and collaborator selectors.\r
  - \`SearchableSelect\` and \`SearchableMultiSelect\` honor the disabled state (no clear button, no chip removal) when a thread is resolved.\r
  - Collaborator add/remove handlers bail early for resolved threads to prevent accidental edits.\r
  - Updated: \`src/components/ui/searchable-select.tsx\`, \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.26] FE WEB CEKAT 2026-01-01\r
\r
### Supabase Configuration\r
\r
- **Env-only credentials**: \`src/config/supabase.ts\` now reads \`VITE_SUPABASE_URL\` and \`VITE_SUPABASE_ANON_KEY\` (or \`VITE_SUPABASE_PUBLISHABLE_KEY\`) directly from the environment, with clear error messages when either is missing.\r
- **Removed baked-in keys**: Any hardcoded DEV/PROD URLs or anonymous keys have been removed, eliminating mismatched-session logouts when the production build refreshes.\r
- **Commit:** \`chore: document proxy routing updates\`  aligned the config with environment-driven credentials and documented the change.\r
\r
# [0.1.25] FE WEB CEKAT 2025-12-30\r
\r
### Webhook Routing & Live Chat\r
\r
- **Proxy-aware production routing**: \`src/config/webhook.ts\` now prefers Supabase Edge proxy routes while still allowing explicit overrides and legacy fallbacks, ensuring production hits \`proxy-n8n\` even when \`VITE_WEBHOOK_BASE_URL\` is set to your Supabase host.\r
- **Client auth resilience**: \`src/lib/webhookClient.ts\` attempts to attach a session token when available but no longer blocks calls if the viewer lacks one, so widget traffic still reaches the proxy (and surfaces 401s when the function enforces auth).\r
- **Env guidance**: Documented the required \`VITE_SUPABASE_ANON_KEY\` in \`src/config/supabase.ts\` so deployments fail fast if keys are missing, and restored custom-domain detection so \`api.cssuper.com\` resolves to the production Supabase key when the variable is omitted.\r
- **Commit:** \`chore: document proxy routing updates\`  removed hardcoded Supabase fallbacks so \`src/config/supabase.ts\` now reads only the environment-provided URL/key, preventing prod refresh logouts caused by mismatched credentials.\r
\r
### Live Chat\r
\r
- **Streaming order stability**: \`src/pages/LiveChat.tsx\` now tracks a monotonic render order so assistant replies consistently appear beneath the triggering user message without requiring a refresh.\r
- **Proxy-first webhook**: The Live Chat send flow always calls the Supabase \`proxy-n8n\` function before falling back to the legacy webhook, so both production and development environments continue to hit the proxy listener.\r
\r
# [0.1.24] FE WEB CEKAT 2025-12-30\r
\r
### Contacts  Conversations (Multi-Thread Support)\r
\r
- **Thread Picker for Open conversation**: Contacts now open a thread/channel picker instead of jumping directly to \`/chat\` by contact, solving ambiguity when a contact has multiple threads across channels.\r
  - New component: \`src/components/chat/ContactThreadPickerDialog.tsx\`\r
  - Updated: \`src/components/contacts/Contacts.tsx\` now opens the picker and navigates with \`menu=chat&contact=<id>&thread=<id>\`\r
\r
### Conversations: Deterministic Thread Selection\r
\r
- **URL-based thread deep link**: \`ConversationPage\` now supports \`thread=<threadId>\` and prioritizes it over \`contact=<contactId>\`, ensuring the correct thread opens even when the same contact has multiple channel threads.\r
  - Clicking a conversation updates the URL (\`thread\` + \`contact\`) so navigation is stable and shareable.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Conversations UI\r
\r
- **Platform tags**: Conversation rows now show provider badges (e.g. Telegram/Web/WhatsApp) for clearer channel context.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Thread Picker UI Polish\r
\r
- **Better list layout**: Improved thread list rendering to avoid clipped/trimmed rows and to pin the platform chip to the bottom-right of each row (timestamp top-right).\r
  - Updated: \`src/components/chat/ContactThreadPickerDialog.tsx\`\r
\r
# [0.1.23] FE WEB CEKAT 2025-12-29\r
\r
### Authentication & User Management\r
\r
- **Whitespace-Free Email & Password Inputs**: Login, reset-password, and agent creation forms now strip spaces and force lowercase emails while blocking space characters in passwords, preventing accidental invalid credentials.\r
  - \`src/components/auth/Login.tsx\` sanitizes email input across login, reset, and (future) signup tabs and blocks whitespace in password fields.\r
  - \`src/pages/ResetPassword.tsx\` applies the same input guards to new/confirm password fields.\r
  - \`src/components/humanagents/HumanAgents.tsx\` normalizes emails when creating agents to avoid duplicate entries caused by casing or trailing spaces.\r
\r
### Conversations\r
\r
- **WhatsApp-Style Day Separators**: Chat threads display \`Today\`, \`Yesterday\`, or a formatted date badge between message clusters, making timelines easier to scan.\r
  - Implemented in \`src/components/chat/ConversationPage.tsx\` with memoized grouping so the list stays performant.\r
\r
### Analytics\r
\r
- **Unified Date Range Picker**: Replaced separate \`From\`/\`To\` inputs with a single range calendar that mirrors the contacts page behavior and keeps queries bounded to today.\r
  - \`src/components/analytics/Analytics.tsx\` stores normalized \`YYYY-MM-DD\` strings and offers a quick Clear action.\r
- **Stable Refresh Logic**: Prevented stale data by delaying metric/database fetches until the user finishes selecting the range (popover closes), ensuring the latest \`from/to\` pair drives every refresh.\r
\r
# [0.1.22] FE WEB CEKAT 2025-12-24\r
\r
### Authentication & Environment\r
\r
- **Supabase Config Hardening**: Prevented Invalid API key errors in Netlify preview/dev deploys caused by URL/key mismatches.\r
  - \`src/config/supabase.ts\` now infers dev/prod pairing from the Supabase URL host when only one override is provided.\r
  - Defaults to a dev-safe target unless the URL clearly points to \`api.cssuper.com\`.\r
  - Still supports explicit \`VITE_SUPABASE_URL\` and \`VITE_SUPABASE_ANON_KEY\` overrides.\r
\r
### Platforms (WhatsApp)\r
\r
- **Delete Webhook Payload**: When deleting WhatsApp channels, the webhook call now includes the channel identifier.\r
  - \`DELETE_SESSION\` payload now sends \`channel_id\` and \`org_id\` alongside \`session_name\` for reliable backend cleanup.\r
\r
- **External ID Consistency**: WhatsApp channels now maintain a stable external identifier across lifecycle states.\r
  - On create, WhatsApp channels set \`external_id\` to the normalized WAHA session name and store \`credentials.waha_session_name\`.\r
  - WAHA session sync now upgrades \`external_id\` to the real WhatsApp \`me.id\` (e.g. \`628...@c.us\`) once available, and never wipes it back to null.\r
  - Added a fallback lookup to \`GET /api/sessions/{name}\` when the WAHA list endpoint does not include \`me.id\`.\r
  - Standardized WAHA session naming to \`toLowerCase().replace(/\\s/g,'')\` for consistent matching.\r
\r
# [0.1.21] FE WEB CEKAT 2025-12-24\r
\r
### Circuit Breaker Settings\r
\r
- **Date Range Validation**: Updated chat date filter to require both "From" and "To" values before applying.\r
  - Prevents half-filled date ranges from running and warns users when only one side is selected.\r
  - Disallows selecting an end date earlier than the start date and keeps calendars constrained to valid ranges.\r
- **Audit Log Date Filter Guardrails**: Logs page now requires selecting both "From" and "To" dates and constrains pickers to valid ranges.\r
  - Displays inline guidance when only one side of the range is provided.\r
  - Ensures backend queries use start/end-of-day boundaries for inclusive day filtering.\r
  - Replaced separate date inputs with a single range calendar so start and end dates are chosen together.\r
\r
# [0.1.20] FE WEB CEKAT 2025-12-24\r
\r
### Conversations: Filter UX & Correctness\r
\r
- **Channel Type Filter Fixed**: Channel Type now correctly filters threads at the query level.\r
  - Updated \`useConversations\` to use an inner join (\`channels!inner(...)\`) so \`channels.provider\` filters actually constrain \`threads\` results (PostgREST behavior).\r
  - Added defensive client-side filtering for \`channelType\`, \`inbox\`, and \`platformId\` to ensure consistent UI results.\r
\r
- **Persistent Applied Filters**: Applied filters now persist and are shareable.\r
  - Filters are serialized into URL query params (\`f_*\`) so refresh/back/forward retains the exact filtered view.\r
  - If URL has no filter params, the last applied filters are restored from localStorage (per-user key).\r
\r
- **Visible Active Filters**: Users can now see whats currently applied.\r
  - \`ConversationPage\` renders active filter badges under the Conversations header (Channel, Platform, Status, Agent, Resolved By, Date, Inbox).\r
  - \`ChatFilter\` modal is now controlled via a \`value\` prop so reopening the modal shows the currently applied values.\r
\r
### Configuration & Environment Management\r
\r
- **Centralized URL Configuration**: Created comprehensive URL and environment configuration system\r
  - New \`src/config/urls.ts\` centralizes all app base URLs (APP_ORIGIN, WAHA_BASE_URL) with environment-aware defaults\r
  - New \`src/config/supabase.ts\` centralizes Supabase URL and key configuration with automatic dev/prod switching\r
  - Production app origin now defaults to \`https://synkaai.netlify.app\` (even in dev) for consistent LiveChat links\r
  - Supabase URL automatically switches: DEV  \`bkynymyhbfrhvwxqqttk.supabase.co\`, PROD  \`api.cssuper.com\`\r
  - All configuration supports \`VITE_*\` environment variable overrides for flexible deployment\r
  - Removed all hardcoded Netlify and Supabase URLs from components\r
\r
- **Platform URL Updates**: Updated all platform-related URLs to use centralized configuration\r
  - \`ConnectedPlatforms.tsx\` now uses \`APP_ORIGIN\` and \`livechatUrl()\` helper instead of hardcoded URLs\r
  - LiveChat embed code now uses configurable \`APP_ORIGIN\` instead of hardcoded domain\r
  - \`WhatsAppPlatformForm.tsx\` uses \`WAHA_BASE_URL\` from config instead of hardcoded Railway URL\r
  - All platform forms now reference single source of truth for base URLs\r
\r
### AI Agent Settings Cleanup\r
\r
- **Removed Context Window Field**: Removed "Context Window (K tokens)" from Additional Settings UI\r
  - Field no longer visible or editable in AI Agent Settings interface\r
  - Removed all related state variables (\`contextLimitInput\`, \`contextLimitMax\`)\r
  - Removed input handler (\`handleContextLimitChange\`) and validation logic\r
  - Save logic still automatically persists safe default value (existing value or 28K tokens, clamped to model capability)\r
  - Ensures database writes continue to work without breaking changes\r
\r
### Conversation Filtering\r
\r
- **Removed Pipeline Status Filter**: Cleaned up thread filter interface\r
  - Removed "Pipeline Status" dropdown from chat filter dialog\r
  - Removed \`pipelineStatus\` from filter state and type definitions\r
  - Removed \`pipeline_status\` query filtering from \`useConversations\` hook\r
  - Simplified filter UI with cleaner, more focused options\r
\r
### Technical Improvements\r
\r
- **Code Organization**: Improved maintainability and consistency\r
  - Single source of truth for all environment-specific URLs\r
  - Consistent configuration pattern across all services\r
  - Better separation of concerns between UI and configuration\r
  - Enhanced type safety with centralized config exports\r
\r
# [0.1.19] FE WEB CEKAT 2025-12-24\r
\r
### Circuit Breaker Settings\r
\r
- **Robust Numeric Validation**: Reset timeout, monitoring period, request timeout, and threshold fields now accept temporary clears but enforce min/max bounds before saving.\r
  - Inline error messages and disabled save state prevent invalid submissions.\r
  - Inputs strip non-numeric characters, block scientific notation, and clamp values to their allowed ranges.\r
- **Latency Feedback**: Healthy and stress latency controls show live seconds previews, clarifying millisecond inputs.\r
- **Tooltip Refinement**: Repositioned tooltips to render beside their triggers, preventing clipping inside the modal.\r
\r
### Adaptive Rate Limiter Configuration\r
\r
- **Precision Controls**: Base limits and multiplier inputs now sanitize numeric entry, limit decimals to three places, and sync their raw display strings with validated state.\r
- **Validation Guardrails**: All adaptive fields surface inline errors and keep the save button disabled until values fall within allowed ranges.\r
- **Enhanced Summary**: Read-only configuration card now surfaces latency thresholds (with seconds) alongside existing multiplier and interval details.\r
- **Modal Tooltips**: Every helper tooltip aligns left/right relative to its column, ensuring full visibility within the dialog.\r
\r
# [0.1.18] FE WEB CEKAT 2025-12-24\r
\r
### Bug Fixes\r
\r
- **Fixed Platform Filter Not Finding Channels**: Resolved critical bug where selecting a channel type (Telegram, WhatsApp, Web) would show no platforms.\r
  - Changed platform filtering from \`channels.type\` to \`channels.provider\` to match actual database schema.\r
  - In database, \`channels.provider\` contains transport values (\`telegram\`, \`web\`, \`whatsapp\`) while \`channels.type\` contains implementation details (\`bot\`, \`inbox\`).\r
  - Updated both \`ChatFilter.tsx\` (UI filtering) and \`useConversations.ts\` (query filtering) to use \`channels.provider\`.\r
  - Telegram and other channel types now correctly display their platforms when selected.\r
\r
### Conversation Management\r
\r
- **Hierarchical Channel Type  Platform Filter**: Enhanced chat filter with parent-child filter relationship.\r
  - Platform filter now requires Channel Type selection first (Platform dropdown disabled until Channel Type is chosen).\r
  - Placeholder text changes to "Select channel type first" when Channel Type is not selected.\r
  - Changing Channel Type automatically clears Platform selection to prevent stale selections.\r
  - Improved UX with clear dependency indication between filters.\r
\r
- **Empty State for Platform Filter**: Added user-friendly empty state handling.\r
  - When selected Channel Type has no matching platforms, dropdown shows disabled option: "No platforms found for this channel type".\r
  - Prevents confusion when no results are available for a selected channel type.\r
  - Platform display simplified to show only \`display_name\` without provider/type suffix for cleaner UI.\r
\r
# [0.1.17] FE WEB CEKAT 2025-12-22\r
\r
### Bug Fixes\r
\r
- **Fixed Stale Data Persistence After Role Changes**: Resolved critical issue where threads and contacts persisted in the UI after role changes in the database.\r
  - Removed localStorage caching for threads (\`app.cachedConversations\`) to prevent stale data from persisting after authorization changes.\r
  - Disabled query caching for authorization-sensitive operations (threads, contacts) in \`protectedSupabase\` wrapper to ensure fresh data on role changes.\r
  - Threads and contacts now immediately clear and refetch when user roles change, preventing unauthorized data from being displayed.\r
  - Fixed issue where changing a user's role from \`master_agent\` to \`super_agent\` (or vice versa) in the database would not immediately reflect in the UI.\r
\r
### Technical Improvements\r
\r
- **Realtime Role Change Detection**: Implemented comprehensive authorization change detection system.\r
  - Added realtime subscription to \`user_roles\` table in \`RBACContext\` to detect role changes for the current user.\r
  - Created \`authz.ts\` utility module for centralized authorization change handling and cache invalidation.\r
  - Implemented event-based system (\`authzChanged\` event) to notify hooks when authorization changes occur.\r
  - \`useConversations\` and \`useContacts\` hooks now listen for authorization changes and automatically reset state + refetch data.\r
  - Ensures UI always reflects current user permissions without requiring manual refresh or logout/login.\r
\r
- **Cache Invalidation Strategy**: Enhanced cache management for authorization-sensitive data.\r
  - Authorization changes now trigger comprehensive cache clearing (localStorage, query cache, fallback handler).\r
  - Removed role-agnostic caching that could serve stale results after permission changes.\r
  - All authorization-sensitive queries now bypass cache to ensure data accuracy.\r
  - Improved security by preventing cached data from persisting after role downgrades.\r
\r
# [0.1.16] FE WEB CEKAT 2025-12-20\r
\r
### UI Components\r
\r
- **SearchableSelect Component**: Added a new reusable searchable single-select dropdown component.\r
  - Provides searchable dropdown functionality with keyboard navigation support.\r
  - Includes proper accessibility attributes and visual feedback for selected items.\r
  - Used for improved agent assignment interface in conversation management.\r
\r
- **SearchableMultiSelect Component**: Added a new reusable searchable multi-select component.\r
  - Supports selecting multiple items with badge display for selected values.\r
  - Includes add/remove callbacks for granular control over selection changes.\r
  - Displays selected items as removable badges with clear visual indicators.\r
\r
### Conversation Management\r
\r
- **Enhanced Agent Assignment UI**: Replaced popover-based assignment interface with searchable select components.\r
  - "Handled By" field now uses \`SearchableSelect\` for improved searchability and UX.\r
  - Streamlined assignment flow with better visual feedback and state management.\r
  - Added optimistic UI updates with proper state synchronization.\r
\r
- **Improved Collaborator Management**: Enhanced thread collaborator interface with multi-select support.\r
  - Replaced popover-based collaborator addition with \`SearchableMultiSelect\` component.\r
  - Collaborator list now displays as removable badges for better visibility.\r
  - Added support for super agent member filtering - only members of the assigned super agent can be added as collaborators.\r
  - Collaborator selection is disabled until a "Handled By" agent is assigned.\r
  - Automatic fetching of super agent members when an agent is assigned.\r
\r
- **Manual Thread Assignment**: Added \`assignThreadToUser\` function for supervisor-level thread reassignment.\r
  - Allows supervisors to manually assign conversations to specific users.\r
  - Automatically creates system event messages when assignments occur.\r
  - Updates thread metadata including \`assigned_by_user_id\`, \`assigned_at\`, and \`handover_reason\`.\r
  - Disables AI access when manually assigned (\`ai_access_enabled: false\`).\r
\r
- **User Label Resolution**: Improved user display name resolution for agents and collaborators.\r
  - Fetches user profile data for agents not present in the human agents list.\r
  - Caches user labels to avoid redundant API calls.\r
  - Provides fallback display names when profile data is unavailable.\r
\r
### Bug Fixes\r
\r
- **Fixed Handled By State Leak**: Resolved critical bug where assigning a thread to an agent would incorrectly show that agent as assigned to all other threads.\r
  - Scoped \`handledByOverride\` state to specific thread IDs instead of using global state.\r
  - Optimistic UI updates now only apply to the thread being assigned, preventing state leakage when navigating between conversations.\r
  - Fixed issue where changing "Handled By" for one thread would temporarily display the same value for all threads until server refresh.\r
\r
# [0.1.15] FE WEB CEKAT 2025-12-19\r
\r
### Database & Policies\r
\r
- **Threads Update Policy**: Master agents can now resolve conversations across all environments.\r
  - Updated the \`threads update perm update_own\` policy to allow updates when \`is_master_agent_in_org(org_id)\` is true.\r
  - Applied the policy change to main, development, and backup Supabase projects and added a migration for consistency.\r
\r
### Conversation Management\r
\r
- **Resolved Thread Cleanup**: UI now hides take-over controls once a thread is closed.\r
  - Removed the takeover button and composer input when \`status === 'closed'\`, preventing accidental actions on resolved chats.\r
\r
### Contacts\r
\r
- **Unassigned Filter Accuracy**: Ensured the contacts list reflects only unassigned records without altering assigned data.\r
  - Adjusted Supabase querying and client filtering so contacts with no assigned agent (or no thread yet) display correctly.\r
  - Total counters and pagination now show filtered counts (e.g. \`12 of 16\`) when a handled-by filter is active.\r
- **Export to CSV**: Added a one-click export that downloads the current contact dataset (with latest thread info) as a CSV.\r
  - Includes contact fields (name, phone, email, notes, created_at) and latest thread metadata (status, handled by, channel).\r
- **Toolbar Cleanup**: Removed the unused Customize Columns button for a leaner toolbar experience.\r
\r
# [0.1.14] FE WEB CEKAT 2025-12-18\r
\r
### Platform Forms (WhatsApp / Telegram / Web)\r
\r
- **Top Spacing Layout Fix**: Standardized form spacing under dialog headers for a cleaner, consistent layout across all platform setup forms.\r
\r
### Telegram Platform\r
\r
- **Bot Token Validation (Required)**: Added a **Validate** button beside the Telegram Bot Token field and made validation mandatory before creating a Telegram platform.\r
  - Create is blocked with an error until the token has been validated.\r
- **Token Verification via Supabase Edge Function**: Token verification now calls the Supabase Edge Function endpoint (\`/functions/v1/telegram-verify-token\`) with a strict response contract (\`{ valid: boolean }\`).\r
  - \`callWebhook()\` now auto-attaches Supabase auth headers for Supabase Edge Function URLs.\r
\r
# [0.1.13] FE WEB CEKAT 2025-12-17\r
\r
### Conversation Management\r
\r
- **Date Filter Fix**: Resolved an issue where the date filter in the conversations menu would incorrectly exclude valid conversations.\r
  - Switched from server-side filtering on \`created_at\`/\`last_msg_at\` (which could be stale) to client-side filtering using the computed last message time.\r
  - Ensures the filter now perfectly matches the dates displayed in the UI, correctly showing threads active within the selected range.\r
\r
# [0.1.12] FE WEB CEKAT 2025-12-14\r
\r
### Human Agents UI Protection\r
\r
- **Master Agent UI Safeguards**: Enhanced protection for master agent accounts in the Human Agents interface.\r
  - Status dropdown button is now disabled for master agents across all sections (master agents, super agents, regular agents, and pending invitations).\r
  - Chevron dropdown icon is conditionally hidden for master agents to provide clear visual indication that status cannot be changed.\r
  - Delete button is completely hidden for master agents (replacing the previous disabled button with tooltip approach) across all agent sections.\r
  - Applied consistent protection logic using \`primaryRole === 'master_agent'\` checks throughout the component.\r
  - Provides cleaner UI experience by removing non-functional controls rather than showing disabled states.\r
\r
### Authentication & OTP\r
\r
- **2FA Email Edge Function Update**: Updated edge function reference for login-specific 2FA emails.\r
  - Changed edge function call from \`send-2fa-email\` to \`send-2fa-login-email\` in \`AuthContext.tsx\` and \`Otp.tsx\`.\r
  - Aligns with backend function naming convention for better clarity and separation of login vs other 2FA email flows.\r
\r
# [0.1.11] FE WEB CEKAT 2025-12-10\r
\r
### Conversation Management\r
\r
- **Status Filter Cleanup**: Removed the redundant "Resolved" option from the conversation status filter.\r
  - The "Closed" status now serves as the single source of truth for completed conversations.\r
  - Simplified the filtering logic to remove unnecessary status checks.\r
\r
# [0.1.10] FE WEB CEKAT 2025-12-09\r
\r
### Human Agents & Permissions\r
\r
- **Create Agent Permission Gate**: Simplified and hardened the Create Agent button on the Human Agents page.\r
  - Button is now directly gated by \`users_profile.create\` via \`PermissionGate\`, following the same pattern as other RBAC-protected actions.\r
  - When the user lacks permission, the button stays visible but disabled with a clear tooltip (You do not have permission to create agents.).\r
  - Removed the extra client-side lookup against the \`permissions\` table and associated state (\`createPermissionKey\`, \`checkingCreatePermission\`) to reduce complexity and runtime edge cases.\r
\r
### Navigation & RBAC Consistency\r
\r
- **Super Agents Schema Alignment**: Updated \`PERMISSIONS_SCHEMA\` to include the full \`super_agents\` action set (\`create\`, \`update\`, \`delete\`, \`read_all\`, \`read_own\`), matching the backend \`permissions\` table.\r
- **Navigation Read-Gates**: Centralized navigation gating to use read scopes consistently:\r
  - Added a defensive \`readPerms(resource)\` helper that safely derives \`resource.read*\` keys from \`PERMISSIONS_SCHEMA\`.\r
  - Human Agents sidebar item now depends on any \`super_agents\` read scope (e.g. \`super_agents.read_all\` / \`super_agents.read_own\`), keeping menu visibility aligned with DB permissions.\r
- **useNavigation Stability**: Adjusted \`useNavigation\` to skip DB permission recomputation while RBAC is still loading, preventing transient context errors during hot reloads while keeping the existing has_perm-first behavior.\r
\r
# [0.1.9] FE WEB CEKAT 2025-12-03\r
\r
### AI Agents\r
\r
- Replaced the browser \`confirm()\` with a first-class modal when deleting AI agents.\r
  - Uses the shared \`AlertDialog\` component with explicit cancel/confirm controls.\r
  - Shows the agent name inside the confirmation copy and blocks dismissal while the request is in flight.\r
  - Surfaces loader feedback and only closes when the Supabase delete succeeds.\r
\r
# [0.1.8] FE WEB CEKAT 2025-12-03\r
\r
### Platform Forms: Super Agent Management & Scoping\r
\r
- **Explicit Super Agent Selection**: All platform forms (WhatsApp, Telegram, Web) now require explicit Super Agent selection before AI Agent selection\r
  - Super Agent field is now a required, selectable dropdown (previously derived from AI Agent)\r
  - Field appears above AI Agent selection with clear labeling and tooltips\r
  - Form validation prevents submission without Super Agent selection\r
  - Helper text explains that Super Agent can be changed independently of AI Agent\r
\r
- **AI Agent Filtering by Super Agent**: Enhanced AI Agent selection with strict scoping\r
  - AI Agent dropdown only shows agents belonging to the selected Super Agent\r
  - Validation prevents selecting AI agents that don't belong to the selected Super Agent\r
  - Error toast notifications when attempting invalid selections\r
  - Form automatically resets AI Agent selection when Super Agent changes\r
  - Warning message displayed if selected AI Agent lacks a Super Agent assignment\r
\r
- **Human Agent Scoping**: Improved human agent assignment with role-based filtering\r
  - Human Agent multi-select only shows agents assigned to the selected Super Agent\r
  - "Select All" and "Unselect All" buttons for quick agent assignment\r
  - Multi-select disabled until Super Agent is selected\r
  - Clear placeholder text indicating selection requirements\r
  - Consistent behavior across all platform types (WhatsApp, Telegram, Web)\r
\r
- **AI Agent Creation Enhancement**: Super Agent assignment during creation\r
  - Super Agent selection required in AI Agent creation dialog\r
  - Searchable dropdown for Super Agent selection\r
  - Super Agent information displayed in AI Agent cards\r
  - Validation ensures Super Agent is selected before agent creation\r
\r
### Navigation & Permissions Updates\r
\r
- **Navigation Configuration**: Updated navigation items and permission mappings\r
  - Refined permission checks for navigation visibility\r
  - Enhanced role-based access control for navigation items\r
  - Improved database permission checks in useNavigation hook\r
\r
- **Permission Schema**: Updated permissions configuration\r
  - Aligned permission schema with backend requirements\r
  - Enhanced permission categorization and validation\r
\r
### Live Chat Improvements\r
\r
- **Message Handling**: Enhanced message synchronization and streaming\r
  - Improved realtime message updates\r
  - Better handling of streaming responses\r
  - Optimized message deduplication logic\r
  - Enhanced user message timeout handling\r
\r
### Webhook Configuration\r
\r
- **Webhook Routing**: Updated webhook endpoint configuration\r
  - Enhanced proxy-aware routing\r
  - Improved endpoint resolution for different providers\r
  - Better error handling for webhook calls\r
\r
### Technical Improvements\r
\r
- **Hooks Enhancement**: Improved data fetching and scoping\r
  - Enhanced useAIAgents hook with better super agent scoping\r
  - Improved useNavigation hook with database permission checks\r
  - Better error handling and loading states\r
  - Optimized cache management\r
\r
# [0.1.7] FE WEB CEKAT 2025-12-03\r
\r
### RBAC & Permissions (Finalized Alignment)\r
\r
- Standardized PERMISSIONS_SCHEMA to match production backend exactly:\r
  analytics, ai_profiles, ai_sessions, channels, contacts, contact_identities, threads, messages, ai_agent_files, admin_panel, roles, audit_logs, alerts.\r
- Permission Matrix UX revamp (purely permission-driven):\r
  - Card sections enforced per resource: Manage (create/update/delete), Access Level (read variants), Special Actions (send/ack).\r
  - Mutually exclusive Access Level pills; Threads uses My Channels (read_channel_owned), Collaborator, All.\r
  - Special actions exposed as toggles: messages.send (Send), alerts.ack (Acknowledge).\r
  - Select All sets Manage + Special Actions ON and selects the most permissive single read level; Unselect All resets to None.\r
  - Labels updated (Update Settings for admin_panel.update); consistent wording across cards.\r
  - Added concise tooltips for threads/messages read scopes and alerts.ack.\r
- Removed bundle-based Menu Access from PermissionsPage; no more ghost toggles or bundles.\r
- Fixed toggle handler so switches reflect intended state; role permission grant/revoke now gated by roles.update.\r
- Debounced RBAC refresh during bulk edits to prevent UI lag.\r
\r
### Navigation & Visibility (Policy-First)\r
\r
- Menu visibility now depends on DB has_perm checks; items are hidden if the user lacks any read scope for that section.\r
- Updated gating keys to align with schema:\r
  - Admin Panel: admin_panel.read (menu), admin_panel.update (controls)\r
  - Permissions: roles.read\r
  - Chat: threads.read_* (any of read_all/read_channel_owned/read_collaborator)\r
  - Analytics: analytics.read\r
  - Contacts: contacts.read_*; Platforms: channels.read_*; AI Agents: ai_profiles.read_*; Logs: audit_logs.read\r
- Sidebar renders only items from getAccessibleNavItems(); fixed ReferenceError by properly destructuring the hook return.\r
- Reduced has_perm spam: policy checks recompute only when RBAC roles/permissions change.\r
\r
### Admin Panel\r
\r
- Replaced legacy access_rules.configure gates:\r
  - Controls now use admin_panel.update; navigation uses admin_panel.read.\r
\r
### Misc\r
\r
- Added contact_identities to schema.\r
- Consistency/cleanup across labels, ordering, and spacing in Permission Matrix.\r
\r
# [0.1.6] FE WEB CEKAT 2025-11-30\r
\r
### Cache Management & Session Reliability\r
\r
- **Comprehensive Cache Clearing on Logout**: Enhanced logout functionality to clear all cached data\r
  - Clears all localStorage items (including \`app.cached*\`, \`app.currentUserId\`, etc.)\r
  - Clears all sessionStorage items\r
  - Clears all Supabase auth tokens\r
  - Prevents stale data from persisting after logout\r
  - Applied to both \`AuthContext.signOut()\` and \`Logout.tsx\` page\r
\r
- **localStorage-Based User ID Storage**: Improved session reliability by storing user ID in localStorage\r
  - User ID and email stored in localStorage as \`app.currentUserId\` and \`app.currentUserEmail\` on login\r
  - Added \`getCurrentUserId()\` helper function that prefers localStorage over Supabase session\r
  - Updated \`logAction()\` to use localStorage user_id first, then fallback to Supabase session\r
  - Ensures consistent user identification even when Supabase session is temporarily unavailable\r
\r
### Bug Fixes\r
\r
- **Merge Conflict Resolution**: Resolved merge conflict in \`useAIAgents.ts\` by combining \`scopeMode\` and \`superAgentId\` logic\r
- **Policy Role Fix**: Fixed \`threads_master_read\` policy to use \`authenticated\` role instead of \`public\` role\r
- **Cache Persistence**: Fixed issue where cached data persisted after logout, causing users to see unauthorized data\r
\r
# [0.1.5] FE WEB CEKAT 2025-11-30\r
\r
### Webhook & Supabase URL Consistency\r
\r
- **Single Source for Supabase URL**: Exported a shared \`SUPABASE_URL\` constant from the Supabase client so all front-end integrations reference the same base URL sinstead of duplicating it.\r
- **Proxy Edge Function Alignment**: Updated \`WEBHOOK_CONFIG\` to derive the proxy base (\`/functions/v1/proxy-n8n\`) from the shared \`SUPABASE_URL\`, removing the old hardcoded Supabase project host and keeping proxy routing aligned with the active project.\r
- **WhatsApp WAHA Webhook Normalization**: Swapped the hardcoded Railway webhook host in \`WhatsAppPlatformForm\` for \`WEBHOOK_CONFIG.BASE_URL\`, ensuring WAHA sessions always post back into the currently configured webhook environment.\r
\r
# [0.1.4] FE WEB CEKAT 2025-11-28\r
\r
### Bug Fixes\r
\r
- **PermissionsPage Duplicate Declaration Fix**: Resolved "Identifier 'permissionSearch' has already been declared" syntax error\r
  - Removed duplicate state declarations for \`permissionSearch\`, \`permissionResourceFilter\`, and \`permissionActionFilter\`\r
  - Kept the properly typed versions of these state variables\r
  - Fixed runtime error that prevented the Permissions page from loading\r
\r
# [0.1.3] FE WEB CEKAT 2025-11-28\r
\r
### AI Agent Visibility\r
\r
- Agents now only see AI agents owned by their assigned super agent; a new \`useSuperAgentScope\` hook drives consistent filtering across dashboards, dropdowns, and cached data.\r
- The AI Agents list and helpers surface localized messaging when an agent has no supervising cluster, preventing stale cross-team data from leaking through local storage.\r
\r
### Database Access Control\r
\r
- Tightened the \`ai_profiles\` RLS guard so master agents retain full visibility, super agents stay scoped to their own records, and agents inherit their supervising super agents access.\r
\r
# [0.1.2] FE WEB CEKAT 2025-11-26\r
\r
### Platform Form Enhancements for Super Agents\r
\r
- **Super Agent Field Auto-Prefill**: All platform creation forms (Telegram, WhatsApp, Web) now automatically prefill the super agent field when the current user is a super agent\r
  - Super agent field is automatically populated with the current user's super agent username/ID when form opens\r
  - Field becomes readonly (visual indication with reduced opacity) when user is a super agent\r
  - Helper text updated to indicate super agent is determined by current user's account for super agent users\r
  - Prevents super agent users from changing their own super agent assignment\r
\r
- **AI Agent Filtering for Super Agents**: Enhanced platform forms to filter AI agents based on super agent role\r
  - Super agent users only see AI agents that belong to their account in the AI agent dropdown\r
  - Validation prevents selecting AI agents that don't belong to the super agent's account\r
  - Error toast notification shown when attempting to select invalid AI agents\r
  - Master agents continue to see all AI agents as before\r
\r
- **Role-Based Form Behavior**: Implemented role-aware form logic across all platform types\r
  - Added \`useRBAC()\` hook integration to check for \`ROLES.SUPER_AGENT\` role\r
  - Automatic super agent ID detection from \`humanAgents\` list when form opens\r
  - Form reset logic preserves super agent ID for super agent users\r
  - Consistent behavior across Telegram, WhatsApp, and Web platform forms\r
\r
### Technical Improvements\r
\r
- **Component Updates**: Enhanced platform form components with role-based logic\r
  - Added \`useEffect\` hooks to prefill super agent field on form open\r
  - Integrated \`useRBAC\` context for role checking\r
  - Added conditional rendering and validation based on user role\r
  - Improved form state management to preserve super agent selection for super agent users\r
\r
# [0.1.1] FE WEB CEKAT 2025-11-27\r
\r
### Permissions Console\r
\r
- **Regression Fix**: Reintroduced missing permission search and filter state in \`PermissionsPage\`; restores the role configuration screen and avoids the \`permissionSearch is not defined\` runtime error.\r
- **Master Agent Safety Rail**: Hard-blocked deletion of the Master Agent from both UI and API helpers; delete buttons are disabled with guidance and back-end guards stop any direct calls.\r
\r
### UI Localization\r
\r
- **Master Agent Deletion Message**: Updated the modal tooltip and toast that appear when attempting to delete a master agent; the copy now follows the latest localization requirements.\r
\r
# [0.1.0] FE WEB CEKAT 2025-11-27\r
\r
### FINALIZED FOR PRODUCTION\r
\r
### Agent Creation UX\r
\r
- **Modal-Friendly Errors**: Duplicate-email validation now surfaces purely as a toast; the Create Agent dialog stays open and no longer renders the full-page error banner, making it easy to adjust the address and resubmit.\r
\r
# [0.0.49] FE WEB CEKAT 2025-11-27\r
\r
### Human Agents Roster\r
\r
- **Duplicate Entry Cleanup**: Adjusted role grouping logic so master agents no longer appear in both the master and agent sections of the Human Agents table; prevents a single email from showing twice and keeps assignment status accurate.\r
\r
### Login & Session Guardrails\r
\r
- **Refresh Spinner Fix**: Added watchdog timers around Supabase session/bootstrap calls so a stalled \`auth.getSession()\` or 2FA profile check cant trap users behind the infinite Loading screen; stale sessions now fall back to the login view within a few seconds.\r
- **Account Status Timeouts**: Soft-capped the account status RPC to keep token refreshes responsive even if the database briefly stops responding.\r
\r
# [0.0.48] FE WEB CEKAT 2025-11-26\r
\r
### RBAC & Permissions System Enhancements\r
\r
- **Master Agent Root Role Treatment**: Master Agent is now treated as root role with full system privileges\r
  - Master Agent role is designated as root role with unrestricted access across the system\r
  - Permission matrix editing is disabled for Master Agent to prevent accidental permission removal\r
  - Root role status ensures Master Agent maintains full privileges regardless of permission configuration\r
\r
- **Permission Matrix UI Updates**: Disabled permission matrix editing for Master Agent role\r
  - Added root role detection in PermissionsPage component (\`isRootSelected\` check)\r
  - Permission matrix sections (Menu Access, CRUD Permissions, Special Permissions) are disabled when configuring Master Agent\r
  - Added informational "Root Role" card explaining Master Agent's full privilege status\r
  - All permission checkboxes and bundle toggles are disabled with helpful tooltips ("Master Agent is root; matrix disabled")\r
  - Clear visual indication that Master Agent has full privileges and doesn't require permission configuration\r
  - Prevents accidental permission removal for root role through UI safeguards\r
  - Early return guards prevent any permission toggle operations when Master Agent is selected\r
\r
### Technical Improvements\r
\r
- **PermissionsPage Component**: Enhanced role configuration logic\r
  - Added \`isRootSelected\` state check based on role name comparison\r
  - Conditional rendering of root role information card\r
  - Disabled state applied to all permission matrix controls for Master Agent\r
  - Improved tooltip messaging for disabled root role controls\r
- **Open Conversation Navigation Fix**: Ensured contacts page button opens chat inbox\r
  - \`Open conversation\` now routes to chat inbox with \`menu=chat\`\r
  - Automatically selects the relevant contact thread when available\r
\r
# [0.0.47] FE WEB CEKAT 2025-11-25\r
\r
### Supabase Baseline Refresh\r
\r
- **Single Source Migration**: Replaced the entire migrations stack with \`20251124230847_baseline.sql\`, capturing todays production schema so every environment can rebuild from a single, clean baseline.\r
- **Vector Extension Guardrails**: Ensured the baseline creates the \`vector\` extension in the \`public\` schema and updates every dependent function/column to reference the schema-qualified type.\r
- **Config Hardening**: Explicitly pins Supabase Storage to \`v1.31.1\` in \`supabase/config.toml\`, preventing CLI diffs from failing on missing storage migrations.\r
\r
### Branch & Data Maintenance\r
\r
- **Development Branch Reset**: Repaired Supabase migration history, reapplied the new baseline, and reset the \`development\` branch so it replays the trimmed migration set without legacy drift.\r
- **Main  Dev Data Parity**: Dumped production \`public\` + \`auth\` data and restored it into the development branch, then pruned historic test accounts to keep both environments aligned.\r
- **Backup Hygiene**: Ran the same user cleanup on the backup project (\`igtizjvhxgajijjjxnzi\`) to ensure the automated sync worker starts from a consistent dataset.\r
\r
# [0.0.46] FE WEB CEKAT 2025-11-24\r
\r
### Database Migration Hardening\r
\r
- **Legacy Platform Support**: Updated the \`20250828000000_merge_platforms_into_channels.sql\` migration to add any missing \`platforms\` columns (\`display_name\`, \`website_url\`, \`status\`, \`secret_token\`, \`profile_photo_url\`, \`ai_profile_id\`) on the fly so historical environments can replay migrations without schema drift.\r
- **Main Branch Hotfix Migration**: Applied Supabase migration \`20250827950000_fix_platforms_schema\` on production to backfill those columns immediately, unblocking rebase operations across environments.\r
- **Rebase Reliability**: Re-ran the Supabase rebase workflow to verify the new safeguards; future branch syncs no longer fail on missing column errors when promoting channels data.\r
\r
# [0.0.45] FE WEB CEKAT 2025-11-23\r
\r
### QA Testing Guide Expansion\r
\r
- **End-to-End Flow Coverage**: Expanded \`DOCUMENTATION.md\` with exhaustive step-by-step flows covering login, OTP, password reset, human/AI agent lifecycle, contacts, permissions, admin utilities, analytics, and audit logs so QA can validate every button and path without code access.\r
- **Button & Validation Matrix**: Documented the enabled/disabled states, confirmation dialogs, toasts, and edge-case behaviour for all primary actions (create, save, delete, export, toggle) across the application.\r
- **Role-Based Walkthroughs**: Added guidance on testing from master, super, and agent perspectives, including navigation expectations and restricted-card behaviour on the dashboard.\r
\r
### Documentation Quality Improvements\r
\r
- **Live Chat & Admin Deep Dives**: Added detailed instructions for conversation tools (notes, tags, canned responses, SLAs), AI pause/resume workflow, circuit breaker monitoring, and platform onboarding (WhatsApp, Telegram, Web).\r
- **Human Agent Lifecycle**: Documented invite, resend, cancellation, token limit management, usage analytics, and removal to ensure QA covers onboarding and offboarding scenarios end-to-end.\r
- **Changelog & Profile Flows**: Captured interactive changelog behaviour, search/filter expectations, and full profile/session management (2FA toggle, password change, device sign-out).\r
\r
### Super Agent Clustering\r
\r
- **AI Agent Ownership**: Introduced \`super_agent_id\` on \`ai_profiles\`, enforced via migrations and new RLS policies. Super agents only see/manage their own AI agents; master agents can reassign via settings.\r
- **Auto-Inherited Platform Ownership**: Platform creation/editing now derives \`channels.super_agent_id\` from the selected AI agent, eliminating manual super agent selection while keeping human-agent assignment intact.\r
- **Scoped Listings**: AI agent lists, stats, and platform forms filter to the current super agent automatically; agents without clusters are prevented from being used until assigned.\r
\r
### Platform Assignment Guard\r
\r
- **Scoped Agent Dropdowns**: When creating WhatsApp, Telegram, or Web platforms as a master agent, the human-agent selector now lists only agents assigned to the chosen super agentpreventing unassigned agents from appearing in the multi-select.\r
\r
# [0.0.44] FE WEB CEKAT 2025-11-19\r
\r
### Changelog Experience Revamp\r
\r
- **Interactive Release Browser**: Introduced a dynamic changelog page with searchable release list, color-coded highlights, and accordion sections for each area of work.\r
- **Dual View Modes**: Added interactive and classic tabs so readers can switch between the immersive UI and the original Markdown in one place.\r
- **Automatic Highlight Extraction**: Generate summary badges from markdown bullet points to surface the most important updates per release.\r
- **Styling Updates**: Applied gradient backgrounds, elevated cards, and refined typography for a colorful, engaging presentation.\r
- **Comprehensive Documentation**: Added \`DOCUMENTATION.md\` detailing auth flows, feature modules, Supabase schema, and operational processes.\r
\r
# [0.0.43] FE WEB CEKAT 2025-11-18\r
\r
### AI Pause Notification System\r
\r
- **New AI Paused Modal Component**: Created dedicated modal for org-wide AI pause notifications\r
  - Modal displays when AI responses are paused across all channels\r
  - Shows who paused AI and when (for master agents)\r
  - Different messaging for master agents vs regular agents\r
  - Master agents can directly navigate to Admin Panel from modal\r
  - Modal appears once per browser session (acknowledgment stored in localStorage)\r
  - Integrated into main Index page with automatic status checking\r
\r
- **Org-Wide AI Pause Status Monitoring**: Enhanced AI pause state management\r
  - Automatic fetching of org-wide AI pause status on app load\r
  - Resolves paused-by user name from profile or email\r
  - Modal auto-dismisses when AI pause is lifted\r
  - Session-based acknowledgment prevents modal spam\r
\r
### Conversation Page UI Improvements\r
\r
- **Fixed Tab Color Styling**: Resolved issue where selected tab colors were not displaying\r
  - Restructured Tooltip/TabsTrigger relationship (Tooltip now inside TabsTrigger)\r
  - Assigned tab: Blue background and text when active\r
  - Unassigned tab: Red background and text when active\r
  - Resolved tab: Green background and text when active\r
  - Proper \`data-[state=active]\` attribute application from Radix UI\r
\r
- **Improved Conversation Sorting**: Enhanced conversation list sorting logic\r
  - Removed unreplied priority sorting (now purely by latest activity)\r
  - Conversations sorted by \`last_msg_at\` timestamp (most recent first)\r
  - Fallback to \`created_at\` if \`last_msg_at\` unavailable\r
  - More intuitive ordering based on actual activity\r
\r
- **Enhanced Timestamp Display**: Improved date/time formatting in conversation list\r
  - Added "Yesterday" display for messages from previous day\r
  - Changed date format from \`dd/MM/yy\` to \`MM/dd/yyyy\` for better clarity\r
  - Better hour-based calculations for relative time display\r
  - More accurate time representation\r
\r
- **TypeScript Fixes**: Resolved type errors\r
  - Removed reference to non-existent \`updated_at\` field on \`ConversationWithDetails\`\r
  - Fixed sorting logic to use only available timestamp fields\r
\r
### Code Quality Improvements\r
\r
- **Conversation Hooks Cleanup**: Minor refactoring in \`useConversations\` hook\r
  - Code cleanup and optimization\r
  - Improved type safety\r
\r
# [0.0.42] FE WEB CEKAT 2025-11-03\r
\r
### Admin Panel & Centralized Management\r
\r
- **New Admin Panel Component**: Created centralized admin control center for master agents\r
  - New dedicated Admin Panel page accessible via navigation (master agents only)\r
  - Moved data retention and GDPR controls from Analytics to Admin Panel for better organization\r
  - Added quick access links to all admin sections (Permissions, Human Agents, Platforms, Analytics, Logs, Contacts)\r
  - Integrated Circuit Breaker Status monitoring directly in admin panel\r
  - Added cache clearing utility for local storage cleanup\r
  - Bulk contact deletion interface with UUID parsing (comma/newline separated)\r
  - Enhanced data retention controls with manual cleanup trigger\r
  - GDPR/PDPA deletion interface with confirmation modals\r
  - All admin features consolidated in single, role-gated interface\r
\r
### Webhook Infrastructure Refactoring\r
\r
- **Centralized Webhook Client**: Created new \`webhookClient.ts\` for unified webhook handling\r
  - Automatic authentication for proxy endpoints using Supabase session tokens\r
  - Support for both legacy and proxy-based endpoints\r
  - Automatic API key injection for proxy requests\r
  - Consistent error handling across all webhook calls\r
  - \`callWebhook()\` function replaces direct \`fetch()\` calls throughout application\r
\r
- **Proxy-Aware Webhook Configuration**: Major refactoring of webhook routing system\r
  - Introduced \`route:\` prefix system for proxy-based endpoints\r
  - Automatic routing to Supabase Edge Function proxy (\`proxy-n8n\`) for prefixed endpoints\r
  - Legacy endpoint support maintained for backward compatibility\r
  - Provider-specific endpoint resolution (\`resolveSendMessageEndpoint()\`)\r
  - Enhanced provider normalization (wa/whatsapp_cloud  whatsapp, tg/tele  telegram)\r
  - All platform forms (WhatsApp, Telegram) now use centralized webhook client\r
  - Live Chat component updated to use new webhook client\r
\r
### AI Agent Enhancements\r
\r
- **AI Model Selection System**: Comprehensive model management in AI Agent creation and settings\r
  - Model selection dropdown in AI Agent creation dialog with pricing and provider information\r
  - Fallback model selection for automatic failover when primary model unavailable\r
  - Model-specific context window and history limit validation\r
  - Dynamic limit calculation based on selected model capabilities\r
  - Enhanced model display with cost per 1M tokens, provider badges, and descriptions\r
  - Model filtering (regular vs fallback models) for better UX\r
  - Auto-selection of first available model on load\r
\r
- **AI Agent Settings UI Improvements**: Enhanced settings interface with better input handling\r
  - Replaced numeric inputs with text inputs using \`inputMode="numeric"\` for better mobile support\r
  - Added input validation with clamping to model-specific maximums\r
  - Context window input now in "K tokens" format with model-specific limits\r
  - History limit shows model-specific maximums with helpful descriptions\r
  - Auto-resolve timeout input with proper validation (0-1440 minutes)\r
  - Message cap input with placeholder examples\r
  - Removed "AI Read File Limit" field (commented out, not in use)\r
  - Better label clarity: "Enable auto-resolve", "Auto-resolve timeout", "Conversation History (tokens)", "Context Window (K tokens)", "Creativity Preset", "AI Message Cap"\r
  - Model selection card with primary and fallback model sections\r
  - Real-time display of model capabilities and limits\r
\r
- **AI Agent Creation Flow**: Enhanced creation process\r
  - Model selection required before agent creation\r
  - Fallback model optional selection during creation\r
  - Better validation and error messages\r
  - Improved dialog with cancel button and loading states\r
\r
### Analytics Component Cleanup\r
\r
- **Removed Admin Controls**: Moved data retention and GDPR controls to Admin Panel\r
  - Removed data retention policy card from Analytics Conversation tab\r
  - Removed GDPR deletion card from Analytics\r
  - Removed Circuit Breaker Status from Analytics (now in Admin Panel)\r
  - Simplified Analytics component focusing on analytics and reporting only\r
  - Better separation of concerns between analytics and administration\r
\r
### Database & Permissions\r
\r
- **New Migration**: Added \`users_profile.create\` permission\r
  - Created migration \`20251103_add_users_profile_create_permission.sql\`\r
  - Grants \`users_profile.create\` permission to \`master_agent\` and \`super_agent\` roles\r
  - Enables proper RBAC for user profile creation operations\r
\r
### Enhanced Caching & Performance\r
\r
- **Query Signature-Based Caching**: Improved cache key generation in \`supabaseProtected.ts\`\r
  - Added query signature serialization for more accurate cache keys\r
  - Cache keys now include query method signatures and arguments\r
  - Prevents cache collisions between similar but different queries\r
  - Better cache invalidation with pattern matching\r
  - Enhanced cache hit rates with more granular key generation\r
\r
- **Cache Invalidation Improvements**: Better cache management\r
  - Contact deletion now invalidates related query caches\r
  - Thread deletion invalidates conversation caches\r
  - Pattern-based cache invalidation using \`defaultFallbackHandler.invalidatePattern()\`\r
\r
### Conversation & Contact Management\r
\r
- **Enhanced Conversation Hooks**: Improved conversation management\r
  - Added \`deleteThread()\` function to \`useConversations\` hook\r
  - Provider-aware message sending using \`resolveSendMessageEndpoint()\`\r
  - Better provider detection from conversation data\r
  - Cache invalidation on thread deletion\r
\r
- **Contact Management**: Improved deletion handling\r
  - Enhanced bulk deletion with cache invalidation\r
  - Better error handling in contact operations\r
  - Improved cache management for contact queries\r
\r
### Platform Integration Updates\r
\r
- **WhatsApp Platform**: Updated to use new webhook client\r
  - Session creation, login QR, logout, disconnect, and delete operations use \`callWebhook()\`\r
  - Consistent error handling across all WhatsApp operations\r
\r
- **Telegram Platform**: Updated to use new webhook client\r
  - Platform creation and webhook deletion use centralized webhook client\r
  - Better error handling and response parsing\r
\r
- **Connected Platforms**: Enhanced platform management\r
  - All webhook calls migrated to \`callWebhook()\` function\r
  - Better error handling and user feedback\r
  - Consistent authentication across all platform operations\r
\r
### Navigation & Routing\r
\r
- **New Admin Panel Route**: Added admin panel to navigation\r
  - New "Admin Panel" navigation item (master agents only)\r
  - Requires \`access_rules.configure\` permission\r
  - Added to navigation config and routing\r
  - Default navigation fallback improved to handle permission-based routing\r
\r
### UI/UX Improvements\r
\r
- **Human Agents**: Enhanced creation dialog\r
  - Better validation and error messages\r
  - Cancel button in creation dialog\r
  - Improved loading states\r
  - Permission-based UI (disabled buttons with tooltips when permission missing)\r
\r
- **Input Improvements**: Better form inputs throughout application\r
  - Numeric inputs use \`inputMode="numeric"\` for mobile keyboards\r
  - Better placeholder text and validation messages\r
  - Improved accessibility with proper input types\r
\r
### Technical Improvements\r
\r
- **Code Organization**: Better separation of concerns\r
  - Admin functionality centralized in Admin Panel component\r
  - Webhook logic centralized in webhook client\r
  - Better component structure and maintainability\r
\r
- **Type Safety**: Enhanced TypeScript types\r
  - Added \`model_id\` to AIProfile interface\r
  - Better type definitions for webhook responses\r
  - Improved type safety in platform forms\r
\r
- **Error Handling**: Consistent error handling\r
  - Unified error handling in webhook client\r
  - Better error messages throughout application\r
  - Improved user feedback with toast notifications\r
\r
# [0.0.41] FE WEB CEKAT 2025-11-01\r
\r
### Data Retention & GDPR Compliance\r
\r
- **Data Retention Policy System**: Implemented configurable data retention with automatic cleanup\r
  - Added 90-day default retention policy (adjustable from 1-365 days) stored in \`org_settings\` table\r
  - Created \`cleanup_old_chat_data()\` PostgreSQL function for automatic deletion of old chat data\r
  - Scheduled daily cleanup job at 2 AM UTC via \`pg_cron\` extension\r
  - Respects organization-specific retention periods stored in \`org_settings.retention_days\`\r
  - Only deletes data older than retention period (rolling window, not everything daily)\r
  - Deletes old threads, messages, and orphaned contacts based on \`created_at\` timestamps\r
  - Supports both org-specific cleanup and global cleanup for all organizations\r
\r
- **GDPR/PDPA Right to Erasure**: Implemented compliant user data deletion functionality\r
  - Created \`gdpr_delete_user_data()\` PostgreSQL function for permanent deletion of user data\r
  - Deletes all threads, messages, and contact records for a specific contact UUID\r
  - Validates contact belongs to requesting organization before deletion\r
  - Returns detailed deletion results (threads, messages, contacts deleted count)\r
  - Permanently removes all user-associated data in compliance with GDPR/PDPA regulations\r
  - Action cannot be undone with clear warning messages in UI\r
\r
- **Admin Controls in Analytics**: Added data retention and GDPR controls in Conversation tab\r
  - Data Retention Policy card with current retention period display and edit functionality\r
  - Manual "Run Cleanup Now" button for immediate cleanup execution\r
  - GDPR/PDPA deletion card with contact UUID input field\r
  - Restricted to users with \`access_rules.configure\` permission (master/super agents only)\r
  - Real-time success/error message display for all operations\r
  - Last cleanup results display showing threads, messages, and contacts deleted counts\r
\r
- **Database Migration**: Applied comprehensive migration for data retention features\r
  - Migration \`20250102_data_retention_and_gdpr.sql\` successfully applied via Supabase MCP\r
  - Created \`cleanup_old_chat_data()\` and \`gdpr_delete_user_data()\` functions with proper security\r
  - Added RLS policies for \`org_settings\` table updates restricted to master/super agents\r
  - Initialized default 90-day retention for all existing organizations\r
  - Ensured \`is_current_user_active()\` dependency function exists for RLS checks\r
\r
### Contact Management Enhancements\r
\r
- **Contact UUID Detail Modal**: Added master agent-only contact UUID display\r
  - New UUID section in contact details modal visible only to master agents\r
  - Displays contact UUID with copy-to-clipboard functionality\r
  - Includes helpful description for GDPR deletion requests and system integrations\r
  - Uses RBAC role check (\`hasRole('master_agent')\`) to restrict visibility\r
  - Styled with monospace font and muted background for clear readability\r
  - Badge indicator showing "Master Agent Only" restriction\r
\r
### Technical Improvements\r
\r
- **Supabase Integration**: Full integration with Supabase database functions\r
  - \`fetchRetentionSettings()\` reads from \`org_settings\` table via protected Supabase client\r
  - \`saveRetentionDays()\` updates retention period using upsert operation\r
  - \`triggerCleanup()\` calls \`cleanup_old_chat_data\` RPC function\r
  - \`executeGdprDeletion()\` calls \`gdpr_delete_user_data\` RPC function\r
  - All operations use \`protectedSupabase\` client respecting circuit breaker and RLS\r
  - Proper error handling and user feedback for all database operations\r
\r
- **RBAC Integration**: Enhanced role-based access control for admin features\r
  - Permission gates around data retention and GDPR controls\r
  - Master agent role check for contact UUID visibility\r
  - Secure access control using \`useRBAC\` context hooks\r
\r
### UI/UX Enhancements\r
\r
- **Data Retention UI**: Comprehensive admin interface for retention management\r
  - Edit modal for configuring retention period (1-365 days range)\r
  - Visual display of current retention period with clear descriptions\r
  - Warning messages explaining automatic cleanup schedule\r
  - Success/error message toasts for user feedback\r
\r
- **GDPR Deletion UI**: Secure and user-friendly deletion interface\r
  - Two-step confirmation process with warning modal\r
  - Clear indication of what will be deleted (threads, messages, contacts)\r
  - Contact UUID input with validation\r
  - Destructive button styling to indicate permanent action\r
\r
### Security & Compliance\r
\r
- **Data Protection**: Enhanced data protection mechanisms\r
  - Row Level Security (RLS) policies enforce master/super agent access only\r
  - Automatic cleanup respects retention periods to prevent accidental data loss\r
  - GDPR deletion function validates organization membership before deletion\r
  - All database operations use security definer functions with proper permissions\r
\r
# [0.0.40] FE WEB CEKAT 2025-11-01\r
\r
### Adaptive Rate Limiter Integration & DDoS Protection\r
\r
- **Adaptive Rate Limiter Full Integration**: Integrated adaptive rate limiter into Supabase protection system\r
  - Enhanced AdaptiveRateLimiter class with getConfig() and updateConfig() methods for runtime configuration\r
  - Added localStorage persistence for adaptive rate limiter configuration and multipliers\r
  - Integrated adaptive rate limiter into supabaseProtected.ts, replacing static rate limiter for all operations\r
  - Implemented automatic limit adjustment based on system health metrics (response time, error rate)\r
  - Added query to circuit_breaker_metrics table in Supabase for real-time metrics analysis\r
  - Automatic adjustment loop runs every adjustment interval to update limits dynamically\r
\r
- **Adaptive Rate Limiter Configuration UI**: Added comprehensive configuration interface\r
  - Created new "Adaptive Rate Limiter Configuration" section in Limit Configuration\r
  - Display base limits for all 4 operations (Reads, Writes, RPC, Auth) with current effective limits\r
  - Real-time display of multipliers (percentage) for each operation type\r
  - Show min/max multiplier, adjustment interval, and latency thresholds\r
  - Added "Edit" button with comprehensive modal for editing all adaptive rate limiter parameters\r
  - Visual status indicator showing adaptive rate limiter is active and protecting database\r
  - All configuration values are editable with proper validation and range limits\r
\r
- **Enhanced Rate Limiter Card**: Updated to show adaptive limits\r
  - Changed card title to "Rate Limiter (Adaptive)" to reflect dynamic nature\r
  - Display effective limits (dynamically calculated) instead of static limits\r
  - Show multiplier percentage for each operation type\r
  - Real-time updates every second to reflect current adaptive limits\r
  - Informative tooltips explaining how adaptive limits work for traffic spike protection\r
\r
- **Comprehensive Circuit Breaker Documentation Updates**: Enhanced documentation with detailed input explanations\r
  - Added detailed explanation section for all Circuit Breaker inputs (5 parameters)\r
    - Failure Threshold: When circuit opens, tips, recommendations\r
    - Reset Timeout: Recovery time, tips for different scenarios\r
    - Success Threshold: Recovery validation, recommendations\r
    - Monitoring Period: Sliding window explanation, impact on detection\r
    - Request Timeout: Timeout handling, recommendations per operation type\r
  - Added comprehensive explanation for all Adaptive Rate Limiter inputs (7+ parameters)\r
    - Base Limits: Explanation for Reads/Writes/RPC/Auth with recommendations\r
    - Min/Max Multiplier: How multipliers affect limits, examples with calculations\r
    - Latency Thresholds: Healthy vs Stress thresholds, tips for optimization\r
    - Adjustment Interval: How often limits adjust, recommendations for different scenarios\r
  - Added "How They Work Together" sections showing complete workflow for both systems\r
\r
- **DDoS & Traffic Spike Protection Guide**: Added dedicated protection guide\r
  - Created comprehensive guide section explaining inputs specifically for DDoS protection\r
  - Ranked inputs by importance: Min Multiplier (most important), Stress Threshold, Base Limits, etc.\r
  - Detailed recommendations for each input with effectiveness ratings\r
  - Provided optimal configuration preset for maximum DDoS protection\r
  - Explained complete attack scenario flow (5-step process)\r
  - Visual color-coded sections for easy reference (red borders for critical inputs)\r
\r
- **Documentation Improvements**: Enhanced existing documentation sections\r
  - Updated "Best Practices" section to include adaptive rate limiter tips\r
  - Enhanced "Configuration Reference" to show both Circuit Breaker and Adaptive Rate Limiter configs\r
  - Added effective limits display with multiplier percentages in configuration reference\r
  - Updated troubleshooting section to mention adaptive rate limiter as protection layer\r
  - All documentation now uses dynamic values from current configuration (real-time)\r
\r
### Technical Improvements\r
\r
- **Type System Enhancements**: Improved TypeScript type exports\r
  - Re-exported OperationType from adaptiveRateLimiter for better type consistency\r
  - Fixed import issues in CircuitBreakerStatus component\r
  - All types properly exported and available for external use\r
\r
- **Storage Management**: Enhanced persistence system\r
  - Adaptive rate limiter config persists to localStorage with multipliers\r
  - Automatic loading of saved configuration on initialization\r
  - Interval ID management for proper cleanup when adjustment interval changes\r
  - Backward compatible with existing localStorage data\r
\r
### UI/UX Enhancements\r
\r
- **Configuration Visualization**: Better display of adaptive limits\r
  - Show both base limit and effective limit side-by-side\r
  - Multiplier percentage displayed with color coding (green for healthy)\r
  - Real-time status indicators showing system is actively protecting\r
  - Clear distinction between static base limits and dynamic effective limits\r
\r
- **Documentation UX**: Improved documentation readability\r
  - Color-coded input explanations (red, orange, yellow, blue, purple borders)\r
  - Step-by-step workflows with numbered lists\r
  - Practical examples using actual configuration values\r
  - Tips and recommendations clearly separated from explanations\r
  - Warning boxes for critical information\r
\r
### Performance & Security\r
\r
- **DDoS Protection**: Multi-layered defense system\r
  - Adaptive rate limiter as first line of defense (reduces limits automatically)\r
  - Request timeout as second layer (cancels slow requests)\r
  - Circuit breaker as last resort (blocks all requests if needed)\r
  - Complete protection against traffic spikes and DDoS attacks\r
\r
- **Smart Limit Adjustment**: Intelligent limit management\r
  - Limits increase when system is healthy (up to 200% of base)\r
  - Limits decrease when system is stressed (down to 50% of base by default)\r
  - Gradual adjustment prevents sudden changes (max 10% increase, 20% decrease per cycle)\r
  - Automatic return to normal limits when system recovers\r
\r
# [0.0.39] FE WEB CEKAT 2025-11-01\r
\r
### Circuit Breaker Enhancements & Documentation\r
\r
- **Circuit Breaker Configuration Management**: Added comprehensive limit configuration interface for admins\r
  - Created "Limit Configuration" section displaying all circuit breaker thresholds (disabled by default)\r
  - Added "Edit" button to open configuration modal for modifying limits\r
  - Implemented getConfig() and updateConfig() methods in CircuitBreaker class\r
  - Added configuration persistence to localStorage for client-side recovery\r
  - Configuration values are now dynamically displayed and editable\r
  - Each configuration field includes descriptive tooltips explaining the purpose\r
\r
- **Circuit Breaker Documentation System**: Implemented comprehensive documentation modal\r
  - Added documentation card section above "Danger Zone" with "Lihat Dokumentasi Circuit Breaker" button\r
  - Created detailed documentation modal covering:\r
    - What is Circuit Breaker and its purpose\r
    - How Circuit Breaker works (three states: CLOSED, OPEN, HALF_OPEN)\r
    - Step-by-step workflow with dynamic configuration values\r
    - What to do when circuit breaker opens (troubleshooting guide)\r
    - Understanding metrics and their meanings\r
    - Best practices for monitoring and optimization\r
    - Configuration reference with current values\r
  - All documentation content in Indonesian language with clear formatting\r
  - Modal is scrollable and responsive for better readability\r
\r
- **Enhanced UI/UX for Circuit Breaker Analytics**: Improved user experience and safety\r
  - Added question mark icons (HelpCircle) beside all labels in "Limit Configuration" section\r
  - Each icon displays informative tooltip on hover with Indonesian descriptions\r
  - Reorganized admin controls into two distinct sections:\r
    - "Limit Configuration": For viewing and editing circuit breaker thresholds\r
    - "Danger Zone": For critical admin actions with enhanced warnings\r
  - Added tooltips to all buttons in "Danger Zone" explaining their effects\r
  - Enhanced visual hierarchy with color-coded sections (blue for docs, red for danger)\r
  - All tooltips and descriptions use dynamic values from current configuration\r
\r
- **Circuit Breaker Class Improvements**: Enhanced circuit breaker functionality\r
  - Added getConfig() method to retrieve current configuration\r
  - Added updateConfig() method to modify configuration at runtime\r
  - Configuration is automatically saved to localStorage on update\r
  - Configuration is automatically loaded from localStorage on initialization\r
  - Maintains backward compatibility with existing circuit breaker state\r
\r
### AI Agent Settings Cleanup\r
\r
- **Removed Timezone Field**: Cleaned up unused timezone configuration\r
  - Removed timezone field from AI Agent Settings UI component\r
  - Dropped timezone column from ai_profiles table via database migration\r
  - Removed timezone state variables and related logic from frontend\r
  - Updated TypeScript types to remove timezone references\r
  - Note: timezone field in users_profile table remains unchanged (separate feature)\r
\r
### Technical Improvements\r
\r
- **Code Organization**: Better separation of concerns in Circuit Breaker Status component\r
  - Split admin controls into logical sections (Documentation, Limit Configuration, Danger Zone)\r
  - Improved component structure for better maintainability\r
  - Enhanced modal management with dedicated state variables\r
  - Better error handling and user feedback\r
\r
### UI/UX Enhancements\r
\r
- **Documentation Integration**: Added comprehensive help system\r
  - Documentation card with prominent call-to-action button\r
  - Modal-based documentation with scrollable content\r
  - Color-coded sections for better visual hierarchy\r
  - Responsive design for all screen sizes\r
  - Dark mode support throughout documentation modal\r
\r
- **Enhanced Tooltips**: Improved user guidance\r
  - Question mark icons next to all configuration labels\r
  - Contextual tooltips explaining each configuration parameter\r
  - Tooltips on danger zone buttons with detailed warnings\r
  - All tooltips in Indonesian language for consistency\r
\r
# [0.0.38] FE WEB CEKAT 2025-10-30\r
\r
### Refactor Authentication & RBAC\r
\r
- Removed unnecessary debug logging from authentication and RBAC components.\r
- Enhanced role checks within navigation for more secure access control.\r
- Improved account status handling to better manage user states.\r
- Added role-based restrictions directly in navigation configuration.\r
- Updated related components for improved clarity and performance.\r
\r
# [0.0.37] FE WEB CEKAT 2025-10-30\r
\r
### Circuit Breaker & Database Protection System\r
\r
- **Comprehensive Circuit Breaker Implementation**: Implemented full-featured circuit breaker system for database protection\r
  - Created core CircuitBreaker class with state machine (CLOSED, OPEN, HALF_OPEN) and configurable thresholds\r
  - Added state persistence using localStorage for client-side recovery across page refreshes\r
  - Implemented event emitter pattern for real-time monitoring and state change notifications\r
  - Added time-windowed failure counting (10s monitoring period) with automatic state transitions\r
\r
- **Rate Limiting & Request Management**: Implemented advanced rate limiting and request optimization\r
  - Created sliding window rate limiter with per-user and per-endpoint tracking\r
  - Implemented request queue with deduplication, priority handling, and debouncing\r
  - Added request batching for similar queries to reduce total request count\r
  - Created adaptive rate limiter that adjusts limits based on system health metrics\r
\r
- **Enhanced Error Handling & Caching**: Implemented comprehensive error management and response caching\r
  - Created error classifier utility mapping Supabase error codes to categories (network, database, auth, rate limit, timeout)\r
  - Implemented retry logic with exponential backoff (1s, 2s, 4s, 8s max) and error-specific strategies\r
  - Added response caching with IndexedDB/localStorage using stale-while-revalidate pattern\r
  - Implemented offline mode support with write operation queuing and sync on connection restore\r
\r
- **Database Analytics & Monitoring**: Added comprehensive database performance monitoring\r
  - Created new "Database" tab in Analytics section with detailed database statistics\r
  - Implemented PostgreSQL functions for database metrics (table sizes, row counts, index performance, memory stats)\r
  - Added real-time database activity monitoring with KPI cards and interactive charts\r
  - Created comprehensive table statistics view with scan ratios, vacuum timestamps, and DML operations\r
\r
- **Circuit Breaker Analytics Dashboard**: Integrated circuit breaker monitoring into Analytics section\r
  - Added new "Circuit Breaker" tab displaying real-time status and metrics\r
  - Created CircuitBreakerStatus component with admin controls and visual indicators\r
  - Implemented metrics collection and storage in circuit_breaker_metrics table\r
  - Added comprehensive help tooltips with Indonesian descriptions for all labels\r
\r
- **Protected Supabase Integration**: Wrapped all database operations with circuit breaker protection\r
  - Created protectedSupabase wrapper replacing direct Supabase calls in critical components\r
  - Integrated circuit breaker, rate limiting, caching, and metrics collection\r
  - Updated Analytics, ConversationPage, and useConversations hooks to use protected wrapper\r
  - Implemented graceful degradation and fallback mechanisms for failed operations\r
\r
- **Admin Controls & Safety Features**: Added comprehensive admin controls with safety measures\r
  - Implemented custom modal dialogs replacing browser confirm/alert dialogs\r
  - Added confirmation popups with detailed Indonesian warnings for all admin actions\r
  - Created color-coded modal themes (orange for reset, red for critical actions, blue for info)\r
  - Added success/error feedback modals with proper error handling\r
\r
### Technical Improvements\r
\r
- **Performance Optimizations**: Resolved application freezing and lag issues\r
  - Fixed infinite loop in background cache refresh mechanism\r
  - Optimized metrics collection with batching and throttling (50 batch size, 30s interval)\r
  - Implemented caching for getUserId calls with 1-minute TTL and 500ms timeout\r
  - Added cooldown periods to prevent refresh storms (30s for queries, 60s for RPCs)\r
  - Made rate limiting more lenient for read operations to prevent blocking\r
\r
- **Database Schema Updates**: Enhanced database with circuit breaker metrics\r
  - Created circuit_breaker_metrics table with comprehensive operation tracking\r
  - Added RLS policies and indexes for efficient metrics querying\r
  - Implemented 30-day retention policy with cleanup_old_metrics function\r
  - Added database analytics functions for comprehensive performance monitoring\r
\r
### UI/UX Enhancements\r
\r
- **Modal System**: Replaced browser dialogs with custom modal components\r
  - Created consistent modal design matching application theme\r
  - Added proper dark mode support and responsive design\r
  - Implemented clear visual hierarchy with icons and color coding\r
  - Added comprehensive warning messages in Indonesian language\r
\r
- **Help System**: Enhanced user guidance throughout the application\r
  - Added question mark icons with tooltips to all analytics labels\r
  - Implemented LabelWithHelp component for consistent help integration\r
  - Created comprehensive Indonesian descriptions for all circuit breaker features\r
  - Added contextual help for admin controls and safety warnings\r
\r
# [0.0.36] FE WEB CEKAT 2025-10-25\r
\r
### Security & Authentication\r
\r
- **Account Deactivation System**: Implemented comprehensive account deactivation blocking system\r
  - Added database-level RLS policies to prevent deactivated users from accessing system resources\r
  - Created dedicated \`/account-deactivated\` warning page with Indonesian content\r
  - Implemented pre-login account status validation to prevent deactivated users from authenticating\r
  - Added automatic redirect to warning page when deactivated account is detected\r
  - Enhanced security with "fail closed" approach - blocks access if account status cannot be verified\r
\r
### User Experience Improvements\r
\r
- **Enhanced Navigation**: Fixed navigation issues and improved user flow\r
  - Replaced modal-based account deactivation with dedicated warning page\r
  - Added "Kembali ke Halaman Login" button with complete cleanup functionality\r
  - Implemented localStorage clearing and user signout on account deactivation\r
  - Fixed infinite loading issues caused by component conflicts\r
  - Added loading states and prevented multiple button clicks during navigation\r
\r
### Technical Improvements\r
\r
- **Component Architecture**: Streamlined authentication flow components\r
  - Removed deprecated \`AccountDeactivatedModal\` component\r
  - Created dedicated \`AccountDeactivated\` page component with proper routing\r
  - Fixed Router context issues by restructuring component hierarchy in App.tsx\r
  - Enhanced error handling and timeout management for signOut operations\r
  - Added comprehensive debugging and logging for authentication flow\r
\r
### Database & Security\r
\r
- **Row Level Security (RLS)**: Enhanced database security policies\r
  - Updated RLS policies to include active user checks for all major tables\r
  - Created \`is_current_user_active()\` helper function for consistent security checks\r
  - Applied security policies to \`users_profile\`, \`org_members\`, \`channels\`, \`contacts\`, \`threads\`, and \`messages\` tables\r
  - Implemented strict access control preventing deactivated users from reading sensitive data\r
\r
### Bug Fixes\r
\r
- **Authentication Flow**: Resolved multiple authentication-related issues\r
  - Fixed flicker when logging in with deactivated accounts\r
  - Resolved race conditions in account status checking\r
  - Fixed logout button functionality by preventing account deactivation interference\r
  - Corrected database column name from \`is_f2a_email_enabled\` to \`is_2fa_email_enabled\`\r
  - Fixed CORS errors with edge function approach by implementing direct database validation\r
\r
### UI/UX Enhancements\r
\r
- **Account Deactivation Warning Page**: Created comprehensive user feedback system\r
  - Added clear Indonesian messaging explaining account deactivation\r
  - Implemented contact instructions for Master Agent reactivation\r
  - Added visual warning indicators with appropriate icons and styling\r
  - Created responsive design with proper loading states and button interactions\r
\r
# [0.0.35] FE WEB CEKAT 2025-16-09\r
\r
### Updates\r
\r
- Added HCaptcha site key to .env for CAPTCHA validation.\r
- Enhanced Login component to include CAPTCHA verification.\r
- Improved ConversationPage to display channel logos.\r
- Updated HumanAgents component for better pagination and agent management.\r
- Adjusted useConversations and useHumanAgents hooks to support new fields for channel logos and agent organization.\r
- Implemented strict checks for super agent assignments in usePlatforms hook.\r
\r
# [0.0.34] FE WEB CEKAT 2025-11-09\r
\r
### Updates\r
\r
### AIAgentSettings\r
\r
- Added new state variables:\r
  - \`historyLimit\`\r
  - \`readFileLimit\`\r
  - \`contextLimit\`\r
  - \`responseTemperature\`\r
  - \`messageAwait\`\r
  - \`messageLimit\`\r
  - \`timezone\`\r
\r
- Improved overall usage tracking and configurability.\r
\r
### HumanAgent\r
\r
- Introduced **usage range option** for better monitoring.\r
\r
- Refactored **agent visibility logic** for clearer access control.\r
- Enhanced handling of **agent roles and statuses** for more robust management.\r
\r
# [0.0.33] FE WEB CEKAT 2025-10-09\r
\r
### Updates\r
\r
- Update project branding, enhance chat functionality, and improve permissions management\r
- Added aria-labels for accessibility in chat components\r
- Refined URL state synchronization in ConversationPage\r
- Implemented sorting and editing features in Contacts\r
- Removed legacy policy editing from PermissionsPage\r
- Updated navigation permissions for better clarity\r
\r
# [0.0.32] FE WEB CEKAT 2025-10-04\r
\r
### Updates\r
\r
- Fixed Live chat error and detail chat\r
- Update project branding to **Synka AI**\r
- Enhance **chat functionality**\r
- Improve **permissions management**\r
- Key changes include:\r
  - Renaming titles and meta descriptions\r
  - Adding a direct route to the chat inbox\r
  - Updating permission checks\r
  - Refining UI elements for better user experience\r
\r
Updating permission checks\r
\r
Refining UI elements for better user experience\r
\r
# [0.0.31] FE WEB CEKAT 2025-10-04\r
\r
### Updates\r
\r
- Introduced a new endpoint \`CHAT_TEST\` for testing AI agent chat settings.\r
- Updated \`AIAgentSettings\` component to include profile handling and improved UI with collapsible sections for behavior, welcome message, and transfer conditions.\r
- Enhanced \`ChatPreview\` to support profile ID and adjusted styling for better user experience.\r
- Refactored platform forms to remove profile photo upload functionality.\r
\r
# [0.0.30] FE WEB CEKAT 2025-10-04\r
\r
### Updates\r
\r
- Fix invite\r
\r
# [0.0.29] FE WEB CEKAT 2025-10-04\r
\r
Commit: Invite flow fixes, required field validation, form improvements\r
\r
### Updates\r
\r
- Invite Flow Fixes\r
  - Fixed invite flow to redirect users directly to password creation page instead of 2FA page\r
  - Added invite flow detection to skip 2FA requirements for invited users\r
  - Prevented duplicate 2FA emails for invited users\r
  - Added \`/invite\` route for proper invite handling\r
  - Enhanced ProtectedRoute to detect and redirect invite flows appropriately\r
- Form Validation Improvements\r
  - Made "Attach to Super Agent" field required for regular agents\r
  - Added visual indicators (red asterisks) for all required fields\r
  - Implemented real-time form validation with disabled submit button\r
  - Added contextual help text explaining field requirements\r
  - Enhanced error messages with specific validation feedback\r
- User Experience Enhancements\r
  - Submit button now disabled until all required fields are filled\r
  - Clear visual hierarchy distinguishing required vs optional fields\r
  - Real-time validation feedback as users type/select\r
  - Improved form accessibility with proper labeling\r
- Bug Fixes\r
  - Fixed invite users being incorrectly redirected to 2FA page\r
  - Resolved duplicate 2FA email sending for invited users\r
  - Corrected form submission logic for agent creation\r
  - Enhanced error handling for missing required fields\r
\r
# [0.0.28] FE WEB CEKAT 2025-10-04\r
\r
Commit: Auto-resolve functionality, thread timestamp fixes, audio notifications, UI improvements\r
\r
### Updates\r
\r
- Auto-Resolve System\r
  - Fixed auto-resolve functionality to work correctly with AI agents\r
  - Database triggers now properly set \`auto_resolve_at\` timestamp when AI responds\r
  - Auto-resolve function uses correct enum value \`'closed'\` instead of \`'resolved'\`\r
  - Periodic checking every 30 seconds for threads ready to auto-resolve\r
  - Real-time auto-resolve checks on message events\r
  - Threads auto-resolve after specified minutes of inactivity without user response\r
- Thread List Improvements\r
  - Fixed thread list to show latest message timestamp instead of first message timestamp\r
  - WhatsApp-style conversation sorting with unreplied threads at top\r
  - Real-time conversation preview updates without full list refresh\r
- Audio Notifications\r
  - Added audio notification system for new messages in opened threads\r
  - Two notification sounds: incoming (\`mixkit-message-pop-alert-2354.mp3\`) and outgoing (\`mixkit-long-pop-2358.wav\`)\r
  - Debounced notifications to prevent duplicate sounds\r
  - Tab visibility checks to only play sounds when tab is active\r
  - User controls: enable/disable audio notifications, test notification\r
- UI Improvements\r
  - Removed clock icon from chat message bubbles for cleaner appearance\r
  - Enhanced message streaming with better real-time updates\r
  - Improved conversation list performance with optimized refresh logic\r
- Database Schema Updates\r
  - Added \`channel_id\` to \`token_usage_logs\` table for better analytics\r
  - Added \`super_agent_id\` to \`channels\` table (moved from \`ai_profiles\`)\r
  - Updated RLS policies to use \`channels.super_agent_id\` for proper clustering\r
  - Fixed foreign key constraints and relationships\r
- Bug Fixes\r
  - Fixed page reload issues when alt+tabbing between browser tabs\r
  - Resolved conversation data leakage between different super agents\r
  - Fixed AI Agent dropdown filtering logic\r
  - Corrected thread timestamp display in conversation list\r
\r
# [0.0.27] FE WEB CEKAT 2025-10-03\r
\r
- Enabling AI Profiles fetch instead of using cache\r
\r
# [0.0.26] FE WEB CEKAT 2025-10-03\r
\r
Commit: Live Chat realtime + anon policies, auto-resolve with enable flag, reopen on user reply, UI polish\r
\r
### Updates\r
\r
- Live Chat (Embed)\r
  - Messages now stream from Supabase realtime (\`public.messages\`); webhook response is ignored for content.\r
  - Sends \`channel_id\`, \`session_id\`, and a persistent friendly \`username\` (stored per host in localStorage). Removed \`platform_id\` from payload.\r
  - Ringtones wired to \`public/tones\` assets; low = \`mixkit-message-pop-alert-2354.mp3\`, high = \`mixkit-long-pop-2358.wav\`.\r
  - Thread lookup uses \`contacts(name)\` with \`maybeSingle()\` (fixes PGRST116 when 0 rows).\r
- Database (Supabase)\r
  - Added anon SELECT RLS for web embed:\r
    - \`channels\`: \`allow_public_select_web_channels\` (provider='web' and active only).\r
    - \`threads\`: \`public_read_web_threads\` (via web channels).\r
    - \`messages\`: \`public_read_web_messages\` (via web channels).\r
    - Fixes 401/42501 when opening standalone live chat.\r
  - Auto-resolve framework:\r
    - \`ai_profiles.auto_resolve_after_minutes\` (int) and \`enable_resolve\` (bool).\r
    - \`threads.auto_resolve_at\` scheduled by trigger \`set_thread_auto_resolve_after_message\` on agent/assistant replies; cleared on user replies.\r
    - Function \`auto_close_due_threads()\` (cron-friendly) and helper \`schedule_auto_resolve_for_open_threads()\` for backfill.\r
  - Auto-reopen: trigger \`reopen_thread_on_user_message\` reopens closed threads and unassigns when a new user message arrives.\r
- AI Agent Settings\r
  - Enable Auto-resolve switch added; Auto-resolve after (minutes) is disabled when switch is off.\r
  - Removed sending \`system_prompt\` to webhook; UI still saves prompt to profile.\r
- Conversations UI\r
  - Unreplied badge restyled (soft red background, darker red text) to match Assigned styling.\r
\r
# [0.0.25] FE WEB CEKAT 2025-10-02\r
\r
Commit: Human vs AI handover analytics, WAHA sessions fetch, realtime chats, Platforms loop fix, UI polish\r
\r
### Updates\r
\r
- Analytics (Human Agent)\r
  - Handover rate redefined as Human/(Human+AI) across all conversations (not only resolved).\r
  - Added breakdowns: by Super Agent and by Agent, with Super Agent filter.\r
- Database (Supabase)\r
  - New/updated RPCs: \`get_handover_by_super_agent\`, \`get_handover_by_agent\`, \`get_agent_kpis\`.\r
  - Enabled realtime by adding \`public.threads\` and \`public.messages\` to \`supabase_realtime\`.\r
- Platforms (WhatsApp)\r
  - Fetch sessions from WAHA (\`/api/sessions\` and \`/api/sessions/{name}\`); removed dependency on webhook \`/get_sessions\` calls in UI.\r
  - Filter sessions to selected channel; debounced refresh; fixed infinite refresh loop on Platforms page.\r
  - QR polling uses WAHA session endpoint; Disconnect/Delete refresh safely.\r
- Conversations\r
  - Live-updating conversation list and counts via realtime subscriptions to \`threads\` and \`messages\` (debounced).\r
- UI\r
  - Delete Channel button shows spinner + Deleting and subtle pulse while processing.\r
- Changelog\r
  - Source from root \`CHANGELOG.md\` only; removed \`public/CHANGELOG.md\`; scripts updated to skip copy.\r
\r
# [0.0.24] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Enhance message handling in ConversationPage and useConversations hooks.\r
- Optimistic UI updates for message status\r
\r
# [0.0.23] FE WEB CEKAT 2025-10-02\r
\r
### Updates\r
\r
- Live Chat\r
  - New embedded-only chat page at \`/livechat/:platform_id\` with blue-white palette, gradient background, glassy card, and clearer borders.\r
  - Sound notifications: low note on send, high note on AI reply; ringtone-style sequences; support external audio and synthesized chimes.\r
  - Netlify SPA routing for \`/livechat/*\` via redirects in \`netlify.toml\` and \`public/_redirects\`.\r
\r
- Connected Platforms\r
  - Live chat link and embed now use \`https://synkaai.netlify.app/livechat/{platform_id}\`.\r
  - Added Super Agent section (single-select; master-only). Human Agents now a searchable multi-select of regular agents only.\r
  - Removed Teams card. Agent chips show proper names and can be removed.\r
\r
- Platform Forms (Web, WhatsApp, Telegram)\r
  - Enforce Super Agent selection; filter AI/Human Agents by the selected Super Agent.\r
  - Fixed Telegram \`useEffect\` import error; safer webhook response handling.\r
  - Only selected human agents are attached on create.\r
\r
- Hooks and data\r
  - \`usePlatforms\`: join \`channel_agents\`; insert/remove on create/update; read/update \`channels.credentials.super_agent_id\`.\r
  - \`useAIAgents\`/\`LiveChat\`: dropped non-existent \`model\`; filter by \`super_agent_id\`.\r
  - \`useHumanAgents\`: include \`super_agent_id\` via \`super_agent_members\`.\r
\r
- Human Agents page\r
  - Clustering UI to manage Super Agents  Agents & AI Agents; token totals by cluster.\r
\r
- Database (Supabase)\r
  - New \`super_agent_members\` table (RLS) and \`ai_profiles.super_agent_id\` (NOT NULL).\r
  - Added \`users_profile.used_tokens\` plus \`refresh_used_tokens_for_super_agents\` function and trigger to aggregate token usage per super agent.\r
  - Deployed and backfilled via Supabase MCP; membership mappings added where needed.\r
\r
- Fixes\r
  - Resolved SPA 404s for \`/livechat/*\`.\r
  - Fixed \`users_profile.email\` and \`ai_profiles.model\` 42703 errors.\r
  - Ensured agent removal updates \`channel_agents\` and access.\r
\r
# [0.0.22] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Fix platform creating for telegram\r
- Add saving functionality for selected AI agent in ConnectedPlatforms and prevent duplicate Telegram bot tokens in TelegramPlatform Form\r
- Enhance AI Agent Settings: Implement file upload functionality with Supabase integration, including upload progress tracking and error handling. Update UI to reflect file statuses and permissions. Add new knowledgebase endpoints for file management.\r
- Enhance file upload process in AIAgentSettings: pre-compute content hash for stable key, include additional metadata (storageName, storageSize, storageUpdatedAt) in upload response, and improve file validation checks.\r
\r
# [0.0.21] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Update CHANGELOG and enhance Analytics and HumanAgents components.\r
- Added token usage tracking in Analytics with visualizations for daily usage and top models.\r
- Improved token aggregation logic in HumanAgents to account for super-agent clusters.\r
\r
# [0.0.20] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Platform agent assignment\r
  - Persist selected agents on create to \`channel_agents\`; updates replace assignments.\r
  - Agents now only see platforms theyre assigned to; master/super see all.\r
  - Platforms list shows only attached human agents (no more org-wide members).\r
\r
- Platform details UI\r
  - New Super Agent section: shows assigned super agent; single-select; editable by master agents only; stored in \`channels.credentials.super_agent_id\`.\r
  - Human Agent manager: chips with remove (X) + searchable multi-select to add; lists only regular agents (excludes super/master).\r
  - Removed unused Teams card; unified details behavior across providers.\r
\r
- Telegram platform creation\r
  - Hits \`POST /telegram/create-platform\` (CREATE_PLATFORM) before channel insert.\r
  - Sends \`brand_name, display_name, description, telegram_bot_token, ai_profile_id, human_agent_ids, org_id\`.\r
  - Robust response handling for empty/non-JSON bodies; emits refresh after success.\r
\r
- Data fetching and names\r
  - Human agent names prefer \`users_profile.display_name\` with fallback to \`v_users.display_name\`; email sourced from \`v_users\`.\r
  - Fixed error when \`users_profile.email\` was selected (column doesnt exist).\r
\r
- Components\r
  - Added \`ui/multi-select\` (popover + search + checkbox) for multi-add of agents.\r
\r
- Fixes\r
  - Agent chips now display the correct agent name (not internal IDs).\r
  - Only the agents selected during platform creation are attached (no more all agents issue).\r
  - Resolved Telegram JSON parse errors and \`42703 users_profile.email\` error.\r
\r
# [0.0.19] FE WEB CEKAT 2025-09-23\r
\r
### Updates\r
\r
- Automatically switch to the Resolved tab when only closed conversations are present\r
- Updated Resolved tab UI to display the count of closed conversations.\r
\r
# [0.0.18] FE WEB CEKAT 2025-09-20\r
\r
### Updates\r
\r
- Added provider tabs (WhatsApp, Telegram, Live Chat) to filter the list; auto-select first item in active tab\r
- Replaced black status dot with green (active) / gray (inactive) indicator\r
\r
# [0.0.17] FE WEB CEKAT 2025-09-20\r
\r
### Updates\r
\r
- Scope data fetching and realtime to visible pages and active routes (Conversations, Human Agents, Platforms, Contacts, AI Agents, RBAC, Analytics)\r
- Add tab-visibility guards to avoid background fetch on tab-restore; hydrate from cache first where applicable\r
- Standardize React Query defaults (staleTime=60s, gc=5m, disable refetch on focus/reconnect)\r
- Reduce audit log verbosity: ignore refresh/update events; add 3s debounce in \`logAction\`; include current route in log context\r
- Analytics\r
  - Default to last 30 days and align to full-day UTC boundaries\r
  - Prevent invalid date ranges (From  To; To  From) with input min/max and clamping\r
  - Fetch once per change; removed duplicate initial fetch\r
- UI consistency: set Telegram Platform create button to blue\r
- Utilities: add \`isDocumentHidden\` and \`onDocumentVisible\` helpers\r
\r
# [0.0.16] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Enhance real-time synchronization for conversations and messages; always fetch fresh data on mount\r
\r
# [0.0.15] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Auth/OTP: eliminate redirect flicker by gating on \`otpEvaluated\`; \`ProtectedRoute\` and \`Otp\` now wait for evaluation; \`ResetPassword\` handles magic-link \`?code=\` with \`exchangeCodeForSession\`.\r
- Changelog page: render Markdown (react-markdown + GFM), Tailwind Typography, compact heading sizes; added Netlify \`public/_redirects\`; added \`prebuild\`/\`predev\` to copy root \`CHANGELOG.md\` to \`public/\`.\r
- Build: remove top-level await in \`main.tsx\` (wrap in async IIFE).\r
- Analytics (global): add graceful fallback when \`get_containment_and_handover\` is missing; improved handover reason labels; added per-user analytics (Assigned To, Takeovers Initiated, Resolved By, AIAgent Handovers).\r
- Human Agents:\r
  - Create Agent dialog with loader; 2FA enable checkbox on create; colored CTAs.\r
  - Add confirmation dialog with loader for deletion; wire hard delete.\r
  - Status changed to Active/Inactive; add \`users_profile.is_active\` column and update UI/actions.\r
  - Edit dialog shows Require Email 2FA switch and token limits; loads/saves \`is_2fa_email_enabled\`.\r
  - Role badges and submenu restyled (blue/green/gray).\r
- Edge Functions: \`admin-create-user\` (invite + profile + role, CORS) and \`admin-delete-user\` (hard delete auth user and related rows).\r
- Logging: \`logAction\` falls back to default org when \`org_id\` cannot be resolved (fixes audit log NOT NULL).\r
- UI theming: replaced remaining dark/black buttons with blue/green/red where appropriate.\r
\r
# [0.0.14] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Fix changelog is not accessible in staging\r
\r
# [0.0.13] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Implement OTP flow for login and enhance ProtectedRoute for OTP verification.\r
- Added new Otp and Logout pages\r
- Updated AuthContext to manage OTP state\r
- Modified Login component to handle OTP requirements.\r
\r
# [0.0.12] FE WEB CEKAT 2025-09-18\r
\r
### Updates\r
\r
- Enhance authentication flow with local storage caching and session restoration\r
- Implemented local storage caching for AI agents and conversations to improve performance and reduce flicker on refresh.\r
- Added session restoration from local storage to ensure user authentication state is maintained across page reloads.\r
- Updated AuthContext to prioritize local storage for session data before reconciling with Supabase.\r
- Introduced a loading state management to handle UI updates more smoothly during data fetching.\r
\r
# [0.0.11] FE WEB CEKAT 2025-09-17\r
\r
### Updates\r
\r
- Audit Logs self-read policy for non-master users.\r
- Added \`get_audit_logs\` RPC with server-side filters, paging, and master-only org-wide access.\r
- Analytics foundations: date-range controls and labeled charts; wired to secure RPCs.\r
- KPI RPCs: \`get_chats_timeseries\` and \`get_response_time_stats\` (avg/median/p90) with Asia/Jakarta bucketing.\r
- RBAC and conversation label changes now emit audit log entries.\r
- Analytics UI now uses new KPI RPCs with channel filter, time-series, and labeled bars.\r
- Containment/Handover groundwork: added \`threads.resolution\`, \`end_reason\`, \`handover_reason\`, AI auto-resolution trigger.\r
- Analytics RPCs: \`get_containment\` (with previous period) and \`get_handover_stats\` (reason breakdown).\r
- Server-side validation: handover reason now required when handover happens; added helpful indexes for analytics.\r
- Added \`get_non_contained\` RPC for drilldown of non-contained conversations.\r
- Containment/Handover dashboard cards with drilldown and reason pie chart.\r
- RBAC policy engine scaffold: \`rbac_policies\` table, RPCs (\`get_role_policy\`, \`put_role_policy\`, \`apply_role_policy\`), extended \`has_perm\` to honor policies.\r
- Role Policy editor UI (matrix) to manage per-resource actions; policy changes logged.\r
- Added docs/ANALYTICS_AND_LOGS.md covering RPCs, validation, and telemetry.\r
- Added PII sanitization tests for log CSV export.\r
- Added analytics time-series, containment, handover, and RBAC policy tests; basic E2E seed.\r
- TODO roadmap (server-validated) added for Analytics KPIs, Containment/Handover, RBAC policies, indexes, docs, and tests.\r
- implement OTP flow in login\r
- enhance ProtectedRoute for OTP verification\r
\r
# [0.0.10] FE WEB CEKAT 2025-09-16\r
\r
### Updates\r
\r
- fix: remove duplicate import of useRBAC in ConversationPage component\r
\r
# [0.0.9] FE WEB CEKAT 2025-09-16\r
\r
### Updates\r
\r
- Created loggings for every users, and only admin can access.\r
- Made Role Management for admins to setting the role.\r
\r
# [0.0.8] FE WEB CEKAT 2025-09-14\r
\r
### Updates\r
\r
- Replaced thread participants with collaborators in the database schema.\r
- Implemented checks for user collaboration status on conversations.\r
- Enhanced thread assignment logic to ensure proper user assignment and audit fields.\r
- Updated UI elements for chat takeover functionality to reflect new collaborator roles.\r
\r
# [0.0.7] FE WEB CEKAT 2025-09-13\r
\r
### Updates\r
\r
- Removed static permission constants in favor of direct string references for better alignment with database values.\r
- Updated components to utilize new permission string format, enhancing consistency across the application.\r
- Improved navigation logic to enforce permission checks when syncing active tabs, ensuring users only access permitted items.\r
- Streamlined permission-related code in various components, enhancing maintainability and readability.\r
\r
# [0.0.6] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Implement OpenAI usage tracking and enhance analytics component\r
- Added OpenAI API key configuration to .env for usage tracking.\r
- Refactored vite.config.ts to include a usage proxy plugin for fetching OpenAI usage data.\r
- Enhanced Analytics component to display OpenAI token usage with dynamic date range selection and improved UI elements.\r
- Integrated charts to visualize input, output, and total tokens over selected time ranges.\r
- Implemented error handling and loading states for better user experience during data fetching.\r
\r
# [0.0.5] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Updated PermissionNavItem and NavigationItem interfaces to use string arrays for permissions instead of PermissionName type for better flexibility.\r
- Modified NAVIGATION_CONFIG to replace permission constants with string representations for improved readability and consistency.\r
- Enhanced RBACProvider's hasPermission function to support various permission formats, including direct matches and synonyms for better user experience.\r
- Integrated a new PermissionsPage component into the main Index page, ensuring proper permission checks with PermissionGate.\r
\r
# [0.0.4] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Integrate RBAC and enhance agent management features\r
- Added RBACProvider to App component for role-based access control.\r
- Updated HumanAgents component to utilize PermissionGate for role management and agent creation.\r
- Refactored agent role handling to support new roles: master_agent and super_agent.\r
- Enhanced ConversationPage to display channel provider information for better context.\r
- Improved useHumanAgents hook to fetch agents from the new v_users view, streamlining data retrieval and role assignment.\r
\r
# [0.0.3] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Implement WhatsApp session polling and enhance deletion handling\r
- Added polling mechanism to check WhatsApp session status while the QR modal is open, improving user feedback on connection status.\r
- Introduced loading state management for channel deletion actions to prevent multiple submissions and enhance user experience.\r
- Removed phone number input from WhatsAppPlatformForm as per updated requirements, streamlining the form submission process.\r
\r
# [0.0.2] FE WEB CEKAT 2025-09-01\r
\r
### Updates\r
\r
- Deleted AUTHENTICATION_SETUP.md, CHAT_SETUP.md, HUMAN_AGENTS_SETUP.md, sample_data.sql, and simple_sample_data.sql as they are no longer relevant to the current project structure.\r
- Updated package.json version to 0.0.1 and removed unnecessary dev dependencies from package-lock.json.\r
- Enhanced Login component to display the current version of the application.\r
- Enhanced Whatsapp channel connecting flow and validation\r
\r
# [0.0.1] FE WEB CEKAT 2025-09-01\r
\r
### Updates\r
\r
- Enhance ClientEditProfileForm: Make company industry selection read-only for non-admin users\r
`,xD=["from-sky-400/60 via-cyan-400/20 to-transparent border-sky-500/40","from-fuchsia-400/60 via-purple-500/20 to-transparent border-fuchsia-500/30","from-emerald-400/60 via-lime-400/20 to-transparent border-emerald-500/30","from-amber-400/60 via-orange-400/20 to-transparent border-amber-500/30","from-indigo-400/60 via-violet-500/20 to-transparent border-indigo-500/30","from-rose-400/60 via-pink-500/20 to-transparent border-rose-500/30"];function bD(e){return e.split(`
`).map(t=>t.trim()).filter(t=>/^-\s*\*\*/.test(t)).map(t=>{const n=t.match(/^-\s*\*\*(.+?)\*\*:?\s*(.*)$/);if(!n)return t.replace(/^-+\s*/,"");const[,r,a]=n;return a?`${r.trim()}  ${a.trim()}`:r.trim()})}function oH(e){var a,s;const t=e.replace(/\r/g,"").trim();if(!t)return[];const n=t.split(/\n(?=# \[)/g).map(o=>o.trim()).filter(Boolean),r=[];for(const o of n){if(o.startsWith("# Change Log")){const x=o.replace(/^# Change Log\s*/,"").trim();if(!x)continue;const y=oH(x);r.push(...y);continue}const l=o.match(/^# \[(?<version>[^\]]+)\](?<title>.*?)(?:\n|$)/);if(!(l!=null&&l.groups))continue;const c=(a=l.groups.version)==null?void 0:a.trim();if(!c)continue;const u=((s=l.groups.title)==null?void 0:s.trim())??"";let d=u||void 0,f;if(u){const x=u.match(/(\d{4}-\d{2}-\d{2})/);x&&(f=x[1],d=u.replace(x[1],"").trim()||void 0)}const h=o.slice(l[0].length).trim(),m=h?h.split(/\n(?=### )/g).map(x=>x.trim()).filter(Boolean):[],g=m.length?m.map((x,y)=>{const[w,...b]=x.split(`
`),_=w.replace(/^###\s*/,"").trim()||`Section ${y+1}`,k=b.join(`
`).trim();return{heading:_,body:k,highlights:bD(k)}}):h?[{heading:"Updates",body:h,highlights:bD(h)}]:[],v=g.flatMap(x=>x.highlights).filter(Boolean).slice(0,5);r.push({version:c,label:d,date:f,sections:g,summary:v,raw:h})}return r}const t5e={p:({children:e})=>i.jsx("p",{className:"text-sm leading-relaxed text-slate-200",children:e}),ul:({children:e})=>i.jsx("ul",{className:"space-y-2 text-sm text-slate-200",children:e}),li:({children:e})=>i.jsxs("li",{className:"relative pl-6",children:[i.jsx("span",{className:"absolute left-0 top-2 h-2 w-2 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 shadow-[0_0_12px_rgba(56,189,248,0.6)]"}),i.jsx("div",{className:"space-y-1",children:e})]}),strong:({children:e})=>i.jsx("span",{className:"font-semibold text-sky-200",children:e}),code:({children:e})=>i.jsx("code",{className:"rounded-md bg-slate-900/80 px-1.5 py-0.5 text-xs text-sky-200",children:e}),a:({children:e,href:t})=>i.jsx("a",{href:t,className:"text-sky-300 underline decoration-dotted underline-offset-4 transition hover:text-sky-200",target:"_blank",rel:"noreferrer",children:e})};function n5e(){var d;const e=p.useMemo(()=>oH(yD),[]),[t,n]=p.useState(""),[r,a]=p.useState("interactive"),[s,o]=p.useState(((d=e[0])==null?void 0:d.version)??""),l=t.trim().toLowerCase(),c=p.useMemo(()=>l?e.filter(f=>[f.version,f.label??"",f.date??"",f.raw,...f.sections.map(m=>m.heading),...f.sections.map(m=>m.body)].join(" ").toLowerCase().includes(l)?!0:f.sections.some(m=>m.highlights.some(g=>g.toLowerCase().includes(l)))):e,[e,l]);p.useEffect(()=>{var h;if(!c.length){o("");return}c.some(m=>m.version===s)||o(((h=c[0])==null?void 0:h.version)??"")},[c,s]);const u=c.find(f=>f.version===s)||c[0];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-10 text-foreground",children:i.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6",children:[i.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[i.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white md:text-4xl",children:"Release Notes & Progress Journal"}),i.jsx("p",{className:"mx-auto max-w-2xl text-sm text-slate-300 md:text-base",children:"Explore every release with rich summaries, vivid highlights, and interactive sections. Filter by keyword, skim highlights, or dive deep into the full notes."})]}),i.jsxs(Uc,{value:r,onValueChange:f=>a(f),className:"w-full",children:[i.jsxs(Tl,{className:"mx-auto grid w-full max-w-xs grid-cols-2 bg-slate-900/60 p-1 shadow-inner shadow-slate-800/40",children:[i.jsx(jr,{value:"interactive",className:"data-[state=active]:bg-sky-500/20 data-[state=active]:text-sky-100",children:"Interactive"}),i.jsx(jr,{value:"markdown",className:"data-[state=active]:bg-slate-700/40 data-[state=active]:text-slate-100",children:"Classic"})]}),i.jsx(sr,{value:"interactive",className:"mt-6",children:i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[i.jsxs(Ue,{className:"border border-white/10 bg-slate-950/60 shadow-[0_12px_40px_-24px_rgba(56,189,248,0.65)] backdrop-blur",children:[i.jsxs(ft,{className:"space-y-4",children:[i.jsxs(ct,{className:"flex items-center gap-2 text-lg text-white",children:[i.jsx(zT,{className:"h-4 w-4 text-sky-300"}),"Releases"]}),i.jsx(Ni,{className:"text-xs text-slate-300",children:"Search and choose any release to explore tailored highlights and details. Recent entries glow brighter."}),i.jsxs("div",{className:"relative",children:[i.jsx(rs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),i.jsx(it,{placeholder:"Search versions, features, or dates...",value:t,onChange:f=>n(f.target.value),className:"bg-slate-900/70 pl-9 text-sm text-slate-100 placeholder:text-slate-400 focus-visible:ring-sky-400"})]})]}),i.jsx(lt,{className:"p-0",children:i.jsx(Tb,{className:"h-[540px]",children:i.jsxs("div",{className:"flex flex-col divide-y divide-white/5",children:[c.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-slate-400",children:"No release notes match your search. Try another term."}),c.map((f,h)=>{const m=f.version===(u==null?void 0:u.version);return i.jsx("button",{onClick:()=>o(f.version),className:Pe("group relative flex w-full flex-col items-start gap-3 px-5 py-4 text-left transition",m?"bg-sky-500/15":"hover:bg-slate-900/70"),children:i.jsxs("div",{className:"flex w-full items-start gap-3",children:[i.jsx("span",{className:Pe("mt-2 h-2.5 w-2.5 rounded-full bg-sky-400 shadow-[0_0_12px_rgba(56,189,248,0.7)] transition-transform",m&&"scale-125")}),i.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-semibold text-slate-100",children:["v",f.version]}),f.label&&i.jsx(Tt,{variant:"outline",className:"border-slate-500/50 bg-slate-900/60 px-2 py-0 text-[10px] font-medium uppercase tracking-wide text-slate-300",children:f.label}),f.date&&i.jsxs("span",{className:"flex items-center gap-1 text-[11px] uppercase tracking-wide text-slate-400",children:[i.jsx(RT,{className:"h-3 w-3 text-slate-400"}),f.date]})]}),f.summary.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:f.summary.slice(0,3).map(g=>i.jsx(Tt,{variant:"secondary",className:"max-w-full truncate bg-sky-500/15 text-[10px] font-medium text-sky-100",title:g,children:g},g))})]})]})},f.version)})]})})})]}),i.jsx("div",{className:"space-y-6",children:u?i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-950/70 p-1 shadow-[0_45px_90px_-60px_rgba(56,189,248,0.8)] backdrop-blur",children:[i.jsx("div",{className:"absolute -left-32 -top-32 h-64 w-64 rounded-full bg-sky-500/20 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/10 blur-3xl"}),i.jsxs("div",{className:"relative z-10 rounded-[calc(theme(borderRadius.3xl))] border border-white/10 bg-slate-950/80 px-8 py-8",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs(Tt,{className:"bg-sky-500/30 text-sky-50",children:["Version ",u.version]}),u.label&&i.jsx("h2",{className:"text-xl font-semibold text-white md:text-2xl",children:u.label}),u.date&&i.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-300",children:[i.jsx(RT,{className:"h-4 w-4 text-sky-300"}),u.date]})]}),u.summary.length>0&&i.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:u.summary.map(f=>i.jsxs(Tt,{variant:"outline",className:"gap-1 border-sky-400/40 bg-sky-500/15 px-3 py-1 text-[11px] font-medium text-sky-100",title:f,children:[i.jsx(zT,{className:"h-3 w-3 text-sky-200"}),i.jsx("span",{className:"max-w-[220px] truncate",children:f})]},f))}),i.jsx("div",{className:"mt-8 space-y-4",children:i.jsxs(e5e,{type:"multiple",defaultValue:u.sections.map((f,h)=>`section-${h}`),className:"space-y-4",children:[u.sections.map((f,h)=>{const m=xD[h%xD.length];return i.jsxs(aH,{value:`section-${h}`,className:Pe("border border-white/5","rounded-2xl bg-slate-950/60 shadow-[0_24px_60px_-35px_rgba(56,189,248,0.55)]"),children:[i.jsxs(iH,{className:"px-6 py-5 text-left hover:no-underline data-[state=open]:bg-slate-900/60",children:[i.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:Pe("h-2.5 w-2.5 rounded-full bg-gradient-to-r shadow-[0_0_12px_rgba(56,189,248,0.6)]",m)}),i.jsx("span",{className:"text-base font-semibold text-white md:text-lg",children:f.heading})]}),f.highlights.length>0&&i.jsx("p",{className:"text-xs text-slate-300 md:text-sm",children:f.highlights[0]})]}),i.jsx(FT,{className:"h-4 w-4 text-sky-300"})]}),i.jsx(sH,{className:"px-6 pb-6",children:i.jsxs("div",{className:Pe("relative overflow-hidden rounded-xl border border-white/5 bg-slate-950/80 px-5 py-5","shadow-[inset_0_0_40px_-25px_rgba(56,189,248,0.75)]"),children:[i.jsx("div",{className:Pe("pointer-events-none absolute inset-0 bg-gradient-to-br opacity-40",m)}),i.jsx(Py,{remarkPlugins:[Iy],components:t5e,className:"relative z-10 space-y-3",children:f.body})]})})]},f.heading+h)}),u.sections.length===0&&i.jsx("p",{className:"text-sm text-slate-300",children:"No detailed sections were found for this release. Check the classic view for raw notes."})]},u.version)})]})]}):i.jsxs(Ue,{className:"border border-white/10 bg-slate-950/60 p-12 text-center text-slate-300",children:[i.jsx(ct,{className:"text-xl text-white",children:"No entries available"}),i.jsx(Ni,{className:"mt-2 text-sm text-slate-300",children:"Try clearing the search filter to view release notes."})]})})]})}),i.jsx(sr,{value:"markdown",className:"mt-6",children:i.jsxs(Ue,{className:"border border-white/10 bg-slate-950/70 shadow-[0_30px_80px_-60px_rgba(15,23,42,0.95)]",children:[i.jsxs(ft,{children:[i.jsxs(ct,{className:"flex items-center gap-2 text-white",children:[i.jsx(FT,{className:"h-5 w-5 text-sky-300"}),"Full Markdown"]}),i.jsx(Ni,{className:"text-xs text-slate-300",children:"Prefer the traditional view? Browse the original changelog with full Markdown formatting."})]}),i.jsx(lt,{children:i.jsx("article",{className:"prose prose-sm max-w-none text-slate-200 dark:prose-invert prose-headings:text-white prose-a:text-sky-300 prose-strong:text-sky-200",children:i.jsx(Py,{remarkPlugins:[Iy],children:yD})})})]})})]})]})})}const r5e=1e3,wD=3;function jD(){const{platform_id:e,platformId:t}=eQ(),n=p.useMemo(()=>e||t||"unknown",[e,t]),[r,a]=p.useState([]),[s,o]=p.useState(""),[l,c]=p.useState(!1),[u,d]=p.useState(null),[f,h]=p.useState(!1),[m,g]=p.useState(!0),[v,x]=p.useState(()=>{if(typeof window>"u")return null;const le=window.localStorage,Ee=`livechat_account_${window.location.pathname}`,ye=["user_id","userId","account_id","accountId"];for(const G of ye){const ue=le.getItem(G);if(ue)return ue}const H=le.getItem(Ee);if(H)return H;const z=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`anon_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;try{le.setItem(Ee,z)}catch{}return z}),[y,w]=p.useState(()=>{if(typeof window>"u")return`session_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;const le=`livechat_session_${e||t||"unknown"}`,Ee=window.sessionStorage.getItem(le);if(Ee)return Ee;const ye=`session_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;return window.sessionStorage.setItem(le,ye),ye}),b=p.useMemo(()=>s3(El,l3,{auth:{persistSession:!1,autoRefreshToken:!1},global:{headers:v?{"x-account-id":v}:void 0}}),[v]),[_,k]=p.useState(null),[j,S]=p.useState(""),[O,I]=p.useState(null),[P,N]=p.useState(null),D=p.useRef(0),$=p.useRef(new Set),U=p.useRef(!1),F=p.useRef([]),M=p.useRef(null),T=p.useRef(null),A=p.useRef(null),L=p.useRef(null),E=p.useRef(null),B=p.useRef(!1),R=p.useRef(!1),C=p.useRef(null),q=p.useRef([]),Z=()=>++D.current,J=(le,Ee)=>{var H;const ye=(((H=le[le.length-1])==null?void 0:H.order)??0)+1;return[...le,{...Ee,order:ye}]},ee=le=>{var Se;const Ee=A.current;if(!Ee)return le;const ye=le.findIndex(Ne=>Ne.id===Ee);if(ye<=-1)return le;const H=T.current;if(!H)return le;const z=le.findIndex(Ne=>Ne.id===H);if(z===-1||z>ye)return le;const G=le.slice(),[ue]=G.splice(ye,1);return G.push(ue),G[G.length-1].order=(((Se=G[G.length-2])==null?void 0:Se.order)??0)+1,G},ae=(le,Ee)=>{Ee&&a(ye=>{var G;const H=ye.findIndex(ue=>ue.id===le);if(H>=0){const ue=ye.slice(),Se=ue[H];return ue[H]={...Se,body:(Se.body||"")+Ee,streaming:!0,order:Se.order||Z()},ue}const z={id:le,role:"assistant",body:Ee,at:Xe(),order:((G=ye[ye.length-1])==null?void 0:G.order)??0,streaming:!0};return ee(J(ye,z))})},Q=(le,Ee)=>{a(ye=>{var G;const H=ye.findIndex(ue=>ue.id===le);if(H>=0){const ue=ye.slice(),Se=ue[H];return ue[H]={...Se,body:Ee!==void 0?Ee:Se.body,streaming:!1},ue}if(Ee===void 0)return ye;const z={id:le,role:"assistant",body:Ee,at:Xe(),order:((G=ye[ye.length-1])==null?void 0:G.order)??0,streaming:!1};return ee(J(ye,z))}),N(null),A.current=null},oe=null;p.useEffect(()=>{E.current=oe},[oe]),p.useEffect(()=>{if(typeof window>"u")return;const le=`livechat_session_${n}`,Ee=window.sessionStorage.getItem(le);if(Ee&&Ee!==y){w(Ee);return}if(!Ee){const ye=`session_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;window.sessionStorage.setItem(le,ye),w(ye)}},[n]);const ge=p.useRef(null),ie=p.useRef(null),Ie=p.useRef(null),me=p.useRef(null),K="/tones/mixkit-message-pop-alert-2354.mp3",fe="/tones/mixkit-long-pop-2358.wav",De=()=>{const le=window.AudioContext||window.webkitAudioContext;return ie.current=ie.current??new le,ie.current},Ze=(le,Ee,ye,H,z=.05,G="sine")=>{const ue=le.createOscillator(),Se=le.createGain();ue.type=G,ue.frequency.value=ye,Se.gain.value=1e-4,ue.connect(Se),Se.connect(le.destination);const Ne=Ee+H/1e3;Se.gain.setValueAtTime(1e-4,Ee),Se.gain.exponentialRampToValueAtTime(z,Ee+.02),Se.gain.setValueAtTime(z,Math.max(Ee+.02,Ne-.05)),Se.gain.exponentialRampToValueAtTime(1e-4,Ne),ue.start(Ee),ue.stop(Ne)},Ve=(le,Ee=110,ye=.06)=>{try{const H=De(),z=H.currentTime+.01;le.forEach((G,ue)=>{const Se=z+ue*Ee/1e3,Ne=Ee*.9;Array.isArray(G)?G.forEach(Le=>Ze(H,Se,Le,Ne,ye,"sine")):Ze(H,Se,G,Ne,ye,"triangle")})}catch{}},ut=async le=>{var Ee,ye;try{const z=(le==="low"?(Ee=window.chatConfig)==null?void 0:Ee.sendToneUrl:(ye=window.chatConfig)==null?void 0:ye.replyToneUrl)||(le==="low"?K:fe),G=le==="low"?Ie.current??(Ie.current=new Audio(z)):me.current??(me.current=new Audio(z));return G.src!==z&&(G.src=z),G.currentTime=0,G.volume=le==="low"?.35:.45,await G.play(),!0}catch{return!1}},Ye=async()=>{await ut("low")||Ve([493.88,523.25,493.88,523.25],110,.045)},ot=async()=>{await ut("high")||Ve([1046.5,1318.5,1568,[1046.5,1318.5,1568,2093]],120,.06)},te=le=>{if(!(le!=null&&le.id)||$.current.has(le.id)||($.current.add(le.id),!U.current))return;const Ee=String(le.body||"").trim();Ee&&Xi(async()=>{const{toast:ye}=await Promise.resolve().then(()=>Eg);return{toast:ye}},void 0).then(({toast:ye})=>{ye.info(Ee,{duration:3500})}).catch(()=>{})},Xe=()=>new Date(Date.now()+1).toISOString(),dt=()=>{F.current.length>0&&(F.current.forEach(le=>{try{clearTimeout(le)}catch{}}),F.current=[])},de=async(le,Ee)=>{if(!le)return;const{data:ye}=await b.from("messages").select("id, role, body, created_at, file_link, type").eq("thread_id",le).order("created_at",{ascending:!0});Array.isArray(ye)&&Ee(ye)},we=(le,Ee,ye)=>{if(dt(),!le){B.current=!0;return}F.current=ye.map(H=>window.setTimeout(async()=>{try{await de(le,Ee)}catch(z){console.error("[LiveChat] catch-up failed",z)}},H))};p.useEffect(()=>{try{const le=!!v,Ee=typeof window<"u"?le?window.localStorage:window.sessionStorage:null;if(!Ee)return;const ye=le?`livechat_username_${n}_acct_${v}`:`livechat_username_${n}_${y}`;let H="";try{H=Ee.getItem(ye)||""}catch{}if(!H){const z=["Happy","Bright","Calm","Brave","Kind","Sunny","Lucky","Cheerful","Swift","Clever"],G=["User","Visitor","Friend","Guest","Buddy","Pal","Explorer","Champion","Star","Hero"],ue=z[Math.floor(Math.random()*z.length)],Se=G[Math.floor(Math.random()*G.length)],Ne=Math.floor(100+Math.random()*900);H=`${ue} ${Se} ${Ne}`;try{Ee.setItem(ye,H)}catch{}}S(H)}catch{}},[n,y,v]),p.useEffect(()=>{var le;(le=ge.current)==null||le.scrollIntoView({behavior:"smooth"})},[r.length]),p.useEffect(()=>{M.current=_,_||dt(),_&&B.current&&(B.current=!1,we(_,se,[0]))},[_]),p.useEffect(()=>{const le=()=>{document.visibilityState==="visible"&&we(M.current,se,[0])};return document.addEventListener("visibilitychange",le),()=>{document.removeEventListener("visibilitychange",le)}},[]),p.useEffect(()=>()=>dt(),[]),p.useEffect(()=>()=>{P&&(N(null),T.current=null)},[P]),p.useEffect(()=>{n&&n!=="unknown"&&(async()=>{try{const{data:Ee,error:ye}=await b.from("channels").select("ai_profile_id").eq("id",n).maybeSingle();!ye&&(Ee!=null&&Ee.ai_profile_id)&&I(Ee.ai_profile_id)}catch(Ee){console.error("Error fetching AI profile ID:",Ee)}})()},[n]);const se=p.useCallback(le=>{!le||le.length===0||a(Ee=>{const ye=new Map;Ee.forEach(G=>ye.set(G.id,G));let H=!1;for(const G of le){if(!(G!=null&&G.id))continue;if(G.role==="system"){te(G);continue}const ue=G.role==="agent"||G.role==="assistant"?"assistant":"user";let Se=null;if(ue==="assistant"&&T.current){for(const[ne,ke]of ye.entries())if(ke.id===T.current){Se=ke.order,ye.delete(ne),T.current=null,H=!0;break}}if(ue==="user"){const ne=new Date(G.created_at||Date.now()).getTime();let ke=null,et=null,nt=Number.POSITIVE_INFINITY,Rt,ht;for(const[$t,jt]of ye.entries()){if(!$t.startsWith("temp-")||jt.role!=="user")continue;const Zt=jt.file_link&&G.file_link&&jt.file_link===G.file_link;jt.file_link&&G.file_link;const Pt=(jt.body||"").trim()===(G.body||"").trim();if(!Zt&&!Pt)continue;const Lt=new Date(jt.at).getTime(),Dt=Number.isFinite(Lt)?Math.abs(ne-Lt):0;Dt<nt&&(nt=Dt,ke=$t,et=jt.order??null,Rt=jt.file_link,ht=jt.type)}ke&&(Se=et,!G.file_link&&Rt&&(G.file_link=Rt),!G.type&&ht&&(G.type=ht),ye.delete(ke),A.current=null,H=!0)}const Ne=ye.get(G.id),Le=G.created_at||new Date().toISOString(),V=G.body||"";if(Ne)Ne.body!==V&&(Ne.body=V,H=!0),Ne.at!==Le&&(Ne.at=Le,H=!0),G.file_link&&Ne.file_link!==G.file_link&&(Ne.file_link=G.file_link,H=!0),G.type&&!Ne.type&&(Ne.type=G.type,H=!0),ue==="assistant"&&Ne.streaming&&(Ne.streaming=!1,H=!0);else{const ne={id:G.id,role:ue,body:V,at:Le,order:Se??Z(),...G.file_link?{file_link:G.file_link}:{},...G.type?{type:G.type}:{}};ye.set(ne.id,ne),H=!0}}const z=Array.from(ye.values());if(z.sort((G,ue)=>G.order-ue.order),!H&&z.length===Ee.length){let G=!0;for(let ue=0;ue<z.length;ue+=1){const Se=z[ue],Ne=Ee[ue];if(Se!==Ne){G=!1;break}}if(G)return Ee}return z})},[]),Be=p.useCallback(()=>{q.current.length!==0&&(q.current.forEach(le=>{try{clearTimeout(le)}catch{}}),q.current=[])},[]),je=p.useCallback(async()=>{if(!n)return null;try{const{data:le}=await b.from("threads").select("id, created_at, additional_data, assignee_user_id, status, account_id, resolved_at, resolved_by_user_id, contacts(name)").eq("channel_id",n).order("last_msg_at",{ascending:!1}).order("created_at",{ascending:!1}).limit(50);if(!le)return null;const Ee=C.current,ye=le.find(z=>{var V;const G=z==null?void 0:z.additional_data,ue=v?(z==null?void 0:z.account_id)===v||(G==null?void 0:G.account_id)===v:!1,Se=y?(G==null?void 0:G.session_id)===y:!1,Ne=((V=z==null?void 0:z.contacts)==null?void 0:V.name)||"",Le=j?Ne.trim().toLowerCase()===j.trim().toLowerCase():!1;if(v){if(!(ue||Se))return!1}else if(!(Se||Le))return!1;if(Ee){const ne=z!=null&&z.created_at?new Date(z.created_at).getTime():0,ke=new Date(Ee.startedAt).getTime()-15e3;if(ne&&ne<ke)return!1;const et=Ee.alias.trim().toLowerCase()===Ne.trim().toLowerCase();if(v){if(!Se&&!ue)return!1}else if(!et&&!Se&&!ue)return!1}return!0});return ye!=null&&ye.id?ye:le.find(z=>{var G;return!(z!=null&&z.account_id)&&!((G=z==null?void 0:z.additional_data)!=null&&G.account_id)})??null}catch(le){return console.warn("[LiveChat] findThreadForCurrentSession failed",le),null}},[n,y,j,v,b]),Ge=p.useCallback(async le=>{const Ee=((le==null?void 0:le.status)||"").toString().toLowerCase();if(!(Ee==="closed"||Ee==="done"||Ee==="resolved")||!(le!=null&&le.id))return(le==null?void 0:le.id)||null;try{const{error:H}=await b.from("threads").update({status:"pending",assignee_user_id:null,resolved_at:null,resolved_by_user_id:null}).eq("id",le.id);if(H)throw H;return le.id}catch(H){return console.warn("[LiveChat] failed to reopen resolved thread",H),(le==null?void 0:le.id)||null}},[]),vt=p.useCallback((le=[])=>{Be(),le.length&&(q.current=le.map(Ee=>window.setTimeout(async()=>{var H;if(!R.current||M.current)return;const ye=await je();if(ye!=null&&ye.id)try{const z=await Ge(ye);z&&await((H=L.current)==null?void 0:H.call(L,z))}catch(z){console.warn("[LiveChat] retry attach failed",z)}},Ee)))},[Be,je,Ge]);p.useEffect(()=>()=>Be(),[Be]),p.useEffect(()=>{let le=null,Ee=null;const ye=async z=>{if(M.current===z&&le){R.current=!1,we(z,se,[0,1200]);return}if(le){try{b.removeChannel(le)}catch{}le=null}k(G=>G===z?G:z),M.current=z,R.current=!1,C.current=null,Be(),$.current=new Set,U.current=!1,dt();try{const{data:G}=await b.from("messages").select("id, role, body, created_at, file_link, type").eq("thread_id",z).order("created_at",{ascending:!0});Array.isArray(G)&&se(G);const ue=Se=>b.channel(`livechat-msgs-${Se}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`thread_id=eq.${Se}`},Ne=>{const Le=Ne==null?void 0:Ne.eventType,V=(Ne==null?void 0:Ne.new)||(Ne==null?void 0:Ne.old);if(V){if((V==null?void 0:V.role)==="system"){te(V);return}Le!=="DELETE"&&((V==null?void 0:V.role)==="user"||(V==null?void 0:V.role)==="agent"||(V==null?void 0:V.role)==="assistant")&&se([V])}}).subscribe(Ne=>{if(Ne==="SUBSCRIBED")U.current=!0;else if(Ne==="CHANNEL_ERROR"||Ne==="TIMED_OUT"){if(console.warn("[LiveChat] realtime channel status",Ne),we(M.current,se,[0,1500]),le)try{b.removeChannel(le)}catch{}le=ue(Se)}});le=ue(z),we(z,se,[0,800,2e3,5e3,1e4])}finally{U.current=!0,g(!1)}};return L.current=ye,(async()=>{const z=await je();if(z!=null&&z.id){const G=await Ge(z);G&&await ye(G);return}g(!1),R.current=!1})(),Ee=b.channel(`livechat-threads-${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads",filter:`channel_id=eq.${n}`},async z=>{var Ne,Le,V;const G=(Ne=z==null?void 0:z.new)==null?void 0:Ne.id;if(!G||G===M.current)return;const ue=(V=(Le=z==null?void 0:z.new)==null?void 0:Le.additional_data)==null?void 0:V.session_id;if(!(ue&&ue===y)){try{const ne=await je();if(ne!=null&&ne.id){const ke=await Ge(ne);ke&&await ye(ke)}}catch(ne){console.warn("[LiveChat] failed to attach from realtime (non-session match)",ne)}return}try{const ne=await Ge(z==null?void 0:z.new);await ye(ne||G)}catch(ne){console.warn("[LiveChat] failed to attach from realtime",ne)}}).subscribe(()=>g(!1)),()=>{try{le&&b.removeChannel(le)}catch{}try{Ee&&b.removeChannel(Ee)}catch{}L.current=null}},[n,y,j,se,je,Ge,v]);const wt=async()=>{var Ne,Le;const le=s.trim();if(!le&&!u)return;const Ee=new Date().toISOString();if(!M.current)try{const V=await je();if(V!=null&&V.id){const ne=await Ge(V);ne&&await((Ne=L.current)==null?void 0:Ne.call(L,ne))}}catch(V){console.warn("[LiveChat] failed to attach existing thread before send",V)}if(M.current||(R.current=!0,C.current={alias:j,startedAt:new Date().toISOString()},vt([0,300,900,2e3])),_)try{const{checkAIMessageLimit:V,autoAssignToSuperAgent:ne}=await Xi(async()=>{const{checkAIMessageLimit:et,autoAssignToSuperAgent:nt}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:et,autoAssignToSuperAgent:nt}},[]),ke=await V(b,_);if(ke.isExceeded&&ke.superAgentId){if((await ne(b,_,ke.superAgentId)).success){const{toast:nt}=await Xi(async()=>{const{toast:Rt}=await Promise.resolve().then(()=>Eg);return{toast:Rt}},void 0);nt.error(`Batas pesan AI telah tercapai (${ke.currentCount}/${ke.limit}). Percakapan telah dialihkan ke super agent.`);return}}else if(ke.isExceeded&&!ke.superAgentId){const{toast:et}=await Xi(async()=>{const{toast:nt}=await Promise.resolve().then(()=>Eg);return{toast:nt}},void 0);et.error(`Batas pesan AI telah tercapai (${ke.currentCount}/${ke.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}}catch(V){console.error("Error checking AI message limit:",V)}let ye=null;if(u){h(!0);try{ye=await Dz(u.file)}catch(V){console.error("[LiveChat] file upload error:",V);const{toast:ne}=await Xi(async()=>{const{toast:ke}=await Promise.resolve().then(()=>Eg);return{toast:ke}},void 0);ne.error(`Upload failed: ${V.message}`),h(!1);return}h(!1),d(null)}o("");const H=`temp-${Date.now()}`,z=ye&&(ye.type==="image"||ye.type==="video"),G=ye?le||(z?"":` ${ye.fileName}`):le;a(V=>[...V,{id:H,role:"user",body:G,at:Ee,order:Z(),type:(ye==null?void 0:ye.type)||"text",file_link:ye==null?void 0:ye.url}]),A.current=H,Ye(),c(!0);const ue=setTimeout(()=>{a(V=>(V.findIndex(ke=>ke.id===H)>=0,V))},3e3),Se=`streaming-${Date.now()}`;N(Se),T.current=Se;try{const V={message:le||(ye?z?"":ye.fileName:""),session_id:y,account_id:v||void 0,timestamp:Ee,channel_id:n,username:j||void 0,ai_profile_id:O,stream:!0,...ye&&{type:ye.type,file_link:ye.url,file_name:ye.fileName,mime_type:ye.mimeType}};let ne=0,ke=null,et=null;for(;ne<wD;){try{ke=await ji(An.ENDPOINTS.AI_AGENT.CHAT_SETTINGS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)},{forceLegacy:ne>0})}catch(ht){console.warn("[LiveChat] proxy webhook call failed",ht),ke=null}if(ke&&ke.ok)break;et=(ke==null?void 0:ke.status)??null,ne+=1,ne<wD&&await new Promise(ht=>setTimeout(ht,r5e))}if(!ke.ok){const ht=et?` (proxy status ${et})`:"";throw new Error(`Webhook failed ${ke.status}${ht}`)}let nt=null;try{const ht=await je();ht!=null&&ht.id?(nt=await Ge(ht)||ht.id,M.current!==nt&&await((Le=L.current)==null?void 0:Le.call(L,nt))):R.current&&!M.current&&vt([400,1200,2500,5e3,8e3])}catch(ht){console.warn("[LiveChat] failed to attach thread after send",ht)}const Rt=nt??M.current;if(ye){const ht=async jt=>{const Zt=[200,600,1500,3e3,5e3];for(let Pt=0;Pt<Zt.length;Pt++){await new Promise(Lt=>setTimeout(Lt,Zt[Pt]));try{const{data:Lt,error:Dt}=await b.from("messages").select("id").eq("thread_id",jt).eq("role","user").is("file_link",null).order("created_at",{ascending:!1}).limit(1).single();if(Dt){console.warn(`[LiveChat] file_link persist attempt ${Pt+1}: find error`,Dt.message);continue}if(Lt!=null&&Lt.id){const{error:Qe}=await b.from("messages").update({file_link:ye.url,type:ye.type}).eq("id",Lt.id);if(Qe){console.warn(`[LiveChat] file_link persist attempt ${Pt+1}: update error`,Qe.message);continue}console.log("[LiveChat] file_link persisted to DB:",Lt.id);return}}catch(Lt){console.warn(`[LiveChat] file_link persist attempt ${Pt+1} failed`,Lt)}}console.warn("[LiveChat] failed to persist file_link after all attempts")},$t=Rt;if($t)ht($t);else{const jt=setInterval(async()=>{M.current&&(clearInterval(jt),ht(M.current))},1e3);setTimeout(()=>clearInterval(jt),15e3)}}if(we(Rt,se,[0,600,1800,4e3,9e3,15e3]),ke.body){const ht=ke.body.getReader(),$t=new TextDecoder;let jt="";try{for(;;){const{done:Zt,value:Pt}=await ht.read();if(Zt)break;jt+=$t.decode(Pt,{stream:!0});const Lt=jt.split(`
`);jt=Lt.pop()||"";for(const Dt of Lt)if(Dt.trim()!=="")try{if(Dt.startsWith("data: ")){const Qe=Dt.slice(6);if(Qe==="[DONE]"){Q(Se);break}const yn=JSON.parse(Qe);(yn.content||yn.delta)&&ae(Se,yn.content||yn.delta)}else{const Qe=JSON.parse(Dt);(Qe.content||Qe.delta)&&ae(Se,Qe.content||Qe.delta)}}catch{ae(Se,Dt)}}}finally{ht.releaseLock()}}else try{const ht=await ke.json(),$t=ht.output||ht.content||ht.message||"Sorry, I couldn't process your message.";Q(Se,$t)}catch(ht){console.error("Failed to parse JSON response:",ht),Q(Se,"I'm processing your message, please wait...")}ot(),setTimeout(()=>{_&&b.from("messages").select("id, role, body, created_at, file_link, type").eq("thread_id",_).order("created_at",{ascending:!0}).then(({data:ht})=>{Array.isArray(ht)&&a($t=>{const jt=new Map;$t.forEach(Pt=>jt.set(Pt.id,Pt));for(const Pt of ht){if(!(Pt!=null&&Pt.id))continue;if(Pt.role==="system"){te(Pt);continue}const Lt=Pt.role==="agent"||Pt.role==="assistant"?"assistant":"user";let Dt=null;if(Lt==="user")continue;const Qe=jt.get(Pt.id),yn=Qe??{id:Pt.id,role:Lt,body:Pt.body||"",at:Pt.created_at||new Date().toISOString(),order:Z()};Qe||(yn.body=Pt.body||"",yn.at=Pt.created_at||new Date().toISOString());const Wn=T.current;if(Wn){for(const[Cr,Dr]of jt.entries())if(Dr.id===Wn){Dt=Dr.order,jt.delete(Cr),T.current=null;break}}Qe||(yn.order=Dt??yn.order),jt.set(yn.id,yn)}const Zt=Array.from(jt.values());return Zt.sort((Pt,Lt)=>Pt.order-Lt.order),Zt})})},1e3)}catch(V){console.error("Streaming error:",V),Q(Se,"Sorry, I'm having trouble right now. Please try again later."),R.current=!1,ot()}finally{clearTimeout(ue),c(!1)}},Nt=le=>{le.key==="Enter"&&!le.shiftKey&&(le.preventDefault(),wt())},yt=p.useMemo(()=>[...r].sort((le,Ee)=>le.order-Ee.order),[r]),xt=le=>new Date(le).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:i.jsx("div",{className:"mx-auto w-full max-w-xl h-full",children:i.jsx(Ue,{className:"border border-blue-100 shadow-xl rounded-2xl bg-white/90 backdrop-blur",children:i.jsxs(lt,{className:"p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:i.jsx("div",{className:"text-sm font-medium tracking-wide",children:"Live Chat"})}),i.jsx(Tb,{className:"h-[450px] p-4",children:i.jsxs("div",{className:"space-y-3",children:[m&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Preparing chat"]}),yt.map(le=>{if(!le.body||le.streaming&&le.body.trim()==="")return null;const Ee={a:({href:ye,children:H})=>{const z=ye||"";return uy(z)?i.jsx("img",{src:z,alt:"User uploaded content",className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm",loading:"lazy"}):i.jsx("a",{href:z,target:"_blank",rel:"noopener noreferrer",className:le.role==="user"?"text-blue-300 font-medium underline hover:text-white":"text-blue-600 font-medium underline hover:text-blue-800",children:H})},img:({src:ye,alt:H})=>i.jsx("img",{src:ye,alt:H,className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm overflow-hidden",loading:"lazy"})};return(()=>{var ue,Se;const ye=(le.body||"").trim(),H=/^\[(?:Image|Video|File):\s/.test(ye)||/^\s/.test(ye),z=ye&&!H;let G=null;if(le.file_link&&(G=le.type&&le.type!=="text"?le.type:null,!G)){const Ne=((Se=(ue=le.file_link.split(".").pop())==null?void 0:ue.toLowerCase())==null?void 0:Se.split("?")[0])??"";["jpg","jpeg","png","gif","webp","svg","bmp","avif"].includes(Ne)?G="image":["mp4","webm","mov","avi","mkv"].includes(Ne)?G="video":["mp3","wav","ogg","aac","flac","m4a"].includes(Ne)?G="voice":G="file"}return i.jsx("div",{className:`flex ${le.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"max-w-[80%] space-y-1",children:[le.file_link&&G&&i.jsx("div",{className:`rounded-2xl overflow-hidden ${le.role==="user"?"ml-auto":""}`,children:i.jsx(YC,{fileLink:le.file_link,type:G})}),z&&i.jsxs("div",{className:`px-4 py-2 text-sm rounded-2xl shadow-sm transition-colors ${le.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white text-slate-900 border border-blue-100 rounded-bl-md"}`,children:[i.jsx("div",{className:`prose prose-sm leading-normal max-w-none [overflow-wrap:anywhere] [&>*:first-child]:mt-0 [&>*:last-child]:mb-0 ${le.role==="user"?"text-white [&_*]:text-inherit [&_li]:marker:text-white [&_code]:text-blue-100 [&_code]:bg-blue-700":""}`,children:i.jsx(Py,{remarkPlugins:[Iy,Iz],components:Ee,children:le.body})}),(()=>{const Ne=L4(le.body);return Ne.length===0?null:i.jsx("div",{className:"space-y-2 mt-2",children:Ne.map(Le=>!uy(Le)&&i.jsx(Rz,{url:Le,isDark:le.role==="user"},Le))})})()]}),i.jsx("div",{className:`text-[10px] ${le.role==="user"?"text-blue-200 text-right":"text-slate-400"}`,children:xt(le.at)})]})},le.id)})()}),l&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Vt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Typing"]}),i.jsx("div",{ref:ge})]})}),i.jsxs("div",{className:"p-3 border-t border-blue-100 rounded-b-2xl bg-blue-50/40",children:[u&&i.jsx("div",{className:"mb-2",children:i.jsx($z,{stagedFile:u,onRemove:()=>d(null),isUploading:f})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lz,{onFileStaged:d,disabled:l||f||!!u,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-100"}),i.jsx(Br,{placeholder:u?"Add a caption (optional)...":"Type a message",value:s,onChange:le=>o(le.target.value),onKeyDown:Nt,className:"rounded-xl min-h-[40px] max-h-[120px] resize-none px-4 py-2 border-blue-200 focus-visible:ring-blue-500 placeholder:text-slate-400 bg-white text-slate-900"}),i.jsx(re,{onClick:wt,disabled:!s.trim()&&!u||l||f,className:"rounded-full h-10 w-10 p-0 bg-blue-600 hover:bg-blue-700 text-white",children:i.jsx(cm,{className:"h-4 w-4"})})]})]})]})})})})}function a5e(){const{signOut:e}=ia(),t=ci(),[n,r]=p.useState(!1),a=async()=>{if(!n){r(!0);try{localStorage.clear(),e().catch(()=>{}),t("/",{replace:!0})}catch(s){console.error("AccountDeactivated: Error in handleBackToLogin:",s),t("/",{replace:!0})}finally{r(!1)}}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(Ue,{className:"w-full max-w-md",children:[i.jsxs(ft,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx(eo,{className:"h-8 w-8 text-red-600"})}),i.jsx(ct,{className:"text-2xl font-bold text-red-800",children:"Akun Dinonaktifkan"})]}),i.jsx(Ni,{className:"text-muted-foreground text-base",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]}),i.jsxs(lt,{className:"space-y-6",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ly,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Hubungi Master Agent"}),i.jsx("p",{className:"text-sm text-red-700",children:"Untuk mengaktifkan kembali akun Anda, silakan hubungi Master Agent di organisasi Anda. Mereka dapat mengaktifkan akun Anda kembali."})]})]})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:i.jsx("p",{children:"Jika Anda yakin ini adalah kesalahan, silakan hubungi administrator sistem untuk bantuan lebih lanjut."})}),i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs(re,{onClick:a,variant:"outline",className:"w-full",disabled:n,children:[i.jsx(kp,{className:"h-4 w-4 mr-2"}),n?"Memproses...":"Kembali ke Halaman Login"]})})]})]})})}const i5e=new _J({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1},mutations:{retry:0}}}),s5e=()=>i.jsx(SJ,{client:i5e,children:i.jsx(ute,{children:i.jsx(_Q,{children:i.jsx(ate,{children:i.jsx(cte,{children:i.jsxs(e1,{children:[i.jsx($G,{}),i.jsx(W4,{}),i.jsxs(pQ,{children:[i.jsx(Ga,{path:"/",element:i.jsx(Dg,{children:i.jsx(hD,{})})}),i.jsx(Ga,{path:"/chat",element:i.jsx(Dg,{children:i.jsx(hD,{})})}),i.jsx(Ga,{path:"/profile",element:i.jsx(Dg,{children:i.jsx(_3e,{})})}),i.jsx(Ga,{path:"/reset-password",element:i.jsx(gD,{})}),i.jsx(Ga,{path:"/invite",element:i.jsx(gD,{})}),i.jsx(Ga,{path:"/account-deactivated",element:i.jsx(a5e,{})}),i.jsx(Ga,{path:"/otp",element:i.jsx(Dg,{children:i.jsx(F3e,{})})}),i.jsx(Ga,{path:"/logout",element:i.jsx(U3e,{})}),i.jsx(Ga,{path:"/changelog",element:i.jsx(n5e,{})}),i.jsx(Ga,{path:"/livechat/:platform_id",element:i.jsx(jD,{})}),i.jsx(Ga,{path:"/livechat/:platformId",element:i.jsx(jD,{})}),i.jsx(Ga,{path:"*",element:i.jsx(B3e,{})})]})]})})})})})}),o5e="sb-yoekcpoppfudmqtvjcby-auth-token";async function l5e(){var e,t;try{const n=localStorage.getItem(o5e);if(!n)return;const r=JSON.parse(n),a=(r==null?void 0:r.access_token)||((e=r==null?void 0:r.currentSession)==null?void 0:e.access_token),s=(r==null?void 0:r.refresh_token)||((t=r==null?void 0:r.currentSession)==null?void 0:t.refresh_token);a&&s&&await ce.auth.setSession({access_token:a,refresh_token:s})}catch{}}(async()=>{try{await l5e()}catch{}q$(document.getElementById("root")).render(i.jsx(s5e,{}))})();
